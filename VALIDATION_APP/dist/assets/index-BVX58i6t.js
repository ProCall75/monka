(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(l){if(l.ep)return;l.ep=!0;const u=s(l);fetch(l.href,u)}})();function Sv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lc={exports:{}},Za={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xh;function s0(){if(Xh)return Za;Xh=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function s(r,l,u){var c=null;if(u!==void 0&&(c=""+u),l.key!==void 0&&(c=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:n,type:r,key:c,ref:l!==void 0?l:null,props:u}}return Za.Fragment=t,Za.jsx=s,Za.jsxs=s,Za}var Zh;function a0(){return Zh||(Zh=1,Lc.exports=s0()),Lc.exports}var V=a0(),wc={exports:{}},_e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg;function r0(){if(eg)return _e;eg=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),T=Symbol.iterator;function C(D){return D===null||typeof D!="object"?null:(D=T&&D[T]||D["@@iterator"],typeof D=="function"?D:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,q={};function y(D,H,S){this.props=D,this.context=H,this.refs=q,this.updater=S||E}y.prototype.isReactComponent={},y.prototype.setState=function(D,H){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,H,"setState")},y.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function I(){}I.prototype=y.prototype;function O(D,H,S){this.props=D,this.context=H,this.refs=q,this.updater=S||E}var G=O.prototype=new I;G.constructor=O,M(G,y.prototype),G.isPureReactComponent=!0;var J=Array.isArray;function x(){}var $={H:null,A:null,T:null,S:null},ae=Object.prototype.hasOwnProperty;function ue(D,H,S){var te=S.ref;return{$$typeof:n,type:D,key:H,ref:te!==void 0?te:null,props:S}}function j(D,H){return ue(D.type,H,D.props)}function ee(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function ne(D){var H={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(S){return H[S]})}var Te=/\/+/g;function ie(D,H){return typeof D=="object"&&D!==null&&D.key!=null?ne(""+D.key):H.toString(36)}function X(D){switch(D.status){case"fulfilled":return D.value;case"rejected":throw D.reason;default:switch(typeof D.status=="string"?D.then(x,x):(D.status="pending",D.then(function(H){D.status==="pending"&&(D.status="fulfilled",D.value=H)},function(H){D.status==="pending"&&(D.status="rejected",D.reason=H)})),D.status){case"fulfilled":return D.value;case"rejected":throw D.reason}}throw D}function U(D,H,S,te,fe){var ce=typeof D;(ce==="undefined"||ce==="boolean")&&(D=null);var Oe=!1;if(D===null)Oe=!0;else switch(ce){case"bigint":case"string":case"number":Oe=!0;break;case"object":switch(D.$$typeof){case n:case t:Oe=!0;break;case g:return Oe=D._init,U(Oe(D._payload),H,S,te,fe)}}if(Oe)return fe=fe(D),Oe=te===""?"."+ie(D,0):te,J(fe)?(S="",Oe!=null&&(S=Oe.replace(Te,"$&/")+"/"),U(fe,H,S,"",function(Zn){return Zn})):fe!=null&&(ee(fe)&&(fe=j(fe,S+(fe.key==null||D&&D.key===fe.key?"":(""+fe.key).replace(Te,"$&/")+"/")+Oe)),H.push(fe)),1;Oe=0;var Ye=te===""?".":te+":";if(J(D))for(var ke=0;ke<D.length;ke++)te=D[ke],ce=Ye+ie(te,ke),Oe+=U(te,H,S,ce,fe);else if(ke=C(D),typeof ke=="function")for(D=ke.call(D),ke=0;!(te=D.next()).done;)te=te.value,ce=Ye+ie(te,ke++),Oe+=U(te,H,S,ce,fe);else if(ce==="object"){if(typeof D.then=="function")return U(X(D),H,S,te,fe);throw H=String(D),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Oe}function Y(D,H,S){if(D==null)return D;var te=[],fe=0;return U(D,te,"","",function(ce){return H.call(S,ce,fe++)}),te}function oe(D){if(D._status===-1){var H=D._result;H=H(),H.then(function(S){(D._status===0||D._status===-1)&&(D._status=1,D._result=S)},function(S){(D._status===0||D._status===-1)&&(D._status=2,D._result=S)}),D._status===-1&&(D._status=0,D._result=H)}if(D._status===1)return D._result.default;throw D._result}var Se=typeof reportError=="function"?reportError:function(D){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof D=="object"&&D!==null&&typeof D.message=="string"?String(D.message):String(D),error:D});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",D);return}console.error(D)},b={map:Y,forEach:function(D,H,S){Y(D,function(){H.apply(this,arguments)},S)},count:function(D){var H=0;return Y(D,function(){H++}),H},toArray:function(D){return Y(D,function(H){return H})||[]},only:function(D){if(!ee(D))throw Error("React.Children.only expected to receive a single React element child.");return D}};return _e.Activity=v,_e.Children=b,_e.Component=y,_e.Fragment=s,_e.Profiler=l,_e.PureComponent=O,_e.StrictMode=r,_e.Suspense=h,_e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,_e.__COMPILER_RUNTIME={__proto__:null,c:function(D){return $.H.useMemoCache(D)}},_e.cache=function(D){return function(){return D.apply(null,arguments)}},_e.cacheSignal=function(){return null},_e.cloneElement=function(D,H,S){if(D==null)throw Error("The argument must be a React element, but you passed "+D+".");var te=M({},D.props),fe=D.key;if(H!=null)for(ce in H.key!==void 0&&(fe=""+H.key),H)!ae.call(H,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&H.ref===void 0||(te[ce]=H[ce]);var ce=arguments.length-2;if(ce===1)te.children=S;else if(1<ce){for(var Oe=Array(ce),Ye=0;Ye<ce;Ye++)Oe[Ye]=arguments[Ye+2];te.children=Oe}return ue(D.type,fe,te)},_e.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null},D.Provider=D,D.Consumer={$$typeof:u,_context:D},D},_e.createElement=function(D,H,S){var te,fe={},ce=null;if(H!=null)for(te in H.key!==void 0&&(ce=""+H.key),H)ae.call(H,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(fe[te]=H[te]);var Oe=arguments.length-2;if(Oe===1)fe.children=S;else if(1<Oe){for(var Ye=Array(Oe),ke=0;ke<Oe;ke++)Ye[ke]=arguments[ke+2];fe.children=Ye}if(D&&D.defaultProps)for(te in Oe=D.defaultProps,Oe)fe[te]===void 0&&(fe[te]=Oe[te]);return ue(D,ce,fe)},_e.createRef=function(){return{current:null}},_e.forwardRef=function(D){return{$$typeof:p,render:D}},_e.isValidElement=ee,_e.lazy=function(D){return{$$typeof:g,_payload:{_status:-1,_result:D},_init:oe}},_e.memo=function(D,H){return{$$typeof:f,type:D,compare:H===void 0?null:H}},_e.startTransition=function(D){var H=$.T,S={};$.T=S;try{var te=D(),fe=$.S;fe!==null&&fe(S,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(x,Se)}catch(ce){Se(ce)}finally{H!==null&&S.types!==null&&(H.types=S.types),$.T=H}},_e.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},_e.use=function(D){return $.H.use(D)},_e.useActionState=function(D,H,S){return $.H.useActionState(D,H,S)},_e.useCallback=function(D,H){return $.H.useCallback(D,H)},_e.useContext=function(D){return $.H.useContext(D)},_e.useDebugValue=function(){},_e.useDeferredValue=function(D,H){return $.H.useDeferredValue(D,H)},_e.useEffect=function(D,H){return $.H.useEffect(D,H)},_e.useEffectEvent=function(D){return $.H.useEffectEvent(D)},_e.useId=function(){return $.H.useId()},_e.useImperativeHandle=function(D,H,S){return $.H.useImperativeHandle(D,H,S)},_e.useInsertionEffect=function(D,H){return $.H.useInsertionEffect(D,H)},_e.useLayoutEffect=function(D,H){return $.H.useLayoutEffect(D,H)},_e.useMemo=function(D,H){return $.H.useMemo(D,H)},_e.useOptimistic=function(D,H){return $.H.useOptimistic(D,H)},_e.useReducer=function(D,H,S){return $.H.useReducer(D,H,S)},_e.useRef=function(D){return $.H.useRef(D)},_e.useState=function(D){return $.H.useState(D)},_e.useSyncExternalStore=function(D,H,S){return $.H.useSyncExternalStore(D,H,S)},_e.useTransition=function(){return $.H.useTransition()},_e.version="19.2.4",_e}var ng;function Id(){return ng||(ng=1,wc.exports=r0()),wc.exports}var Dn=Id(),jc={exports:{}},er={},kc={exports:{}},Uc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tg;function o0(){return tg||(tg=1,(function(n){function t(U,Y){var oe=U.length;U.push(Y);e:for(;0<oe;){var Se=oe-1>>>1,b=U[Se];if(0<l(b,Y))U[Se]=Y,U[oe]=b,oe=Se;else break e}}function s(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var Y=U[0],oe=U.pop();if(oe!==Y){U[0]=oe;e:for(var Se=0,b=U.length,D=b>>>1;Se<D;){var H=2*(Se+1)-1,S=U[H],te=H+1,fe=U[te];if(0>l(S,oe))te<b&&0>l(fe,S)?(U[Se]=fe,U[te]=oe,Se=te):(U[Se]=S,U[H]=oe,Se=H);else if(te<b&&0>l(fe,oe))U[Se]=fe,U[te]=oe,Se=te;else break e}}return Y}function l(U,Y){var oe=U.sortIndex-Y.sortIndex;return oe!==0?oe:U.id-Y.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var c=Date,p=c.now();n.unstable_now=function(){return c.now()-p}}var h=[],f=[],g=1,v=null,T=3,C=!1,E=!1,M=!1,q=!1,y=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function G(U){for(var Y=s(f);Y!==null;){if(Y.callback===null)r(f);else if(Y.startTime<=U)r(f),Y.sortIndex=Y.expirationTime,t(h,Y);else break;Y=s(f)}}function J(U){if(M=!1,G(U),!E)if(s(h)!==null)E=!0,x||(x=!0,ne());else{var Y=s(f);Y!==null&&X(J,Y.startTime-U)}}var x=!1,$=-1,ae=5,ue=-1;function j(){return q?!0:!(n.unstable_now()-ue<ae)}function ee(){if(q=!1,x){var U=n.unstable_now();ue=U;var Y=!0;try{e:{E=!1,M&&(M=!1,I($),$=-1),C=!0;var oe=T;try{n:{for(G(U),v=s(h);v!==null&&!(v.expirationTime>U&&j());){var Se=v.callback;if(typeof Se=="function"){v.callback=null,T=v.priorityLevel;var b=Se(v.expirationTime<=U);if(U=n.unstable_now(),typeof b=="function"){v.callback=b,G(U),Y=!0;break n}v===s(h)&&r(h),G(U)}else r(h);v=s(h)}if(v!==null)Y=!0;else{var D=s(f);D!==null&&X(J,D.startTime-U),Y=!1}}break e}finally{v=null,T=oe,C=!1}Y=void 0}}finally{Y?ne():x=!1}}}var ne;if(typeof O=="function")ne=function(){O(ee)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,ie=Te.port2;Te.port1.onmessage=ee,ne=function(){ie.postMessage(null)}}else ne=function(){y(ee,0)};function X(U,Y){$=y(function(){U(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(U){U.callback=null},n.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<U?Math.floor(1e3/U):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(U){switch(T){case 1:case 2:case 3:var Y=3;break;default:Y=T}var oe=T;T=Y;try{return U()}finally{T=oe}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(U,Y){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var oe=T;T=U;try{return Y()}finally{T=oe}},n.unstable_scheduleCallback=function(U,Y,oe){var Se=n.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Se+oe:Se):oe=Se,U){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=oe+b,U={id:g++,callback:Y,priorityLevel:U,startTime:oe,expirationTime:b,sortIndex:-1},oe>Se?(U.sortIndex=oe,t(f,U),s(h)===null&&U===s(f)&&(M?(I($),$=-1):M=!0,X(J,oe-Se))):(U.sortIndex=b,t(h,U),E||C||(E=!0,x||(x=!0,ne()))),U},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(U){var Y=T;return function(){var oe=T;T=Y;try{return U.apply(this,arguments)}finally{T=oe}}}})(Uc)),Uc}var ig;function l0(){return ig||(ig=1,kc.exports=o0()),kc.exports}var zc={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sg;function u0(){if(sg)return Sn;sg=1;var n=Id();function t(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(t(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(h,f,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:v==null?null:""+v,children:h,containerInfo:f,implementation:g}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Sn.createPortal=function(h,f){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return u(h,f,null,g)},Sn.flushSync=function(h){var f=c.T,g=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=f,r.p=g,r.d.f()}},Sn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(h,f))},Sn.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},Sn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var g=f.as,v=p(g,f.crossOrigin),T=typeof f.integrity=="string"?f.integrity:void 0,C=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;g==="style"?r.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:T,fetchPriority:C}):g==="script"&&r.d.X(h,{crossOrigin:v,integrity:T,fetchPriority:C,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Sn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var g=p(f.as,f.crossOrigin);r.d.M(h,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(h)},Sn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var g=f.as,v=p(g,f.crossOrigin);r.d.L(h,g,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Sn.preloadModule=function(h,f){if(typeof h=="string")if(f){var g=p(f.as,f.crossOrigin);r.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(h)},Sn.requestFormReset=function(h){r.d.r(h)},Sn.unstable_batchedUpdates=function(h,f){return h(f)},Sn.useFormState=function(h,f,g){return c.H.useFormState(h,f,g)},Sn.useFormStatus=function(){return c.H.useHostTransitionStatus()},Sn.version="19.2.4",Sn}var ag;function c0(){if(ag)return zc.exports;ag=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),zc.exports=u0(),zc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rg;function d0(){if(rg)return er;rg=1;var n=l0(),t=Id(),s=c0();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function c(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function p(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function h(e){if(u(e)!==e)throw Error(r(188))}function f(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,o=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(o=d.return,o!==null){a=o;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return h(d),e;if(m===o)return h(d),i;m=m.sibling}throw Error(r(188))}if(a.return!==o.return)a=d,o=m;else{for(var _=!1,A=d.child;A;){if(A===a){_=!0,a=d,o=m;break}if(A===o){_=!0,o=d,a=m;break}A=A.sibling}if(!_){for(A=m.child;A;){if(A===a){_=!0,a=m,o=d;break}if(A===o){_=!0,o=m,a=d;break}A=A.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==o)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function g(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=g(e),i!==null)return i;e=e.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),O=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function ne(e){return e===null||typeof e!="object"?null:(e=ee&&e[ee]||e["@@iterator"],typeof e=="function"?e:null)}var Te=Symbol.for("react.client.reference");function ie(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Te?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case M:return"Fragment";case y:return"Profiler";case q:return"StrictMode";case J:return"Suspense";case x:return"SuspenseList";case ue:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case O:return e.displayName||"Context";case I:return(e._context.displayName||"Context")+".Consumer";case G:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return i=e.displayName||null,i!==null?i:ie(e.type)||"Memo";case ae:i=e._payload,e=e._init;try{return ie(e(i))}catch{}}return null}var X=Array.isArray,U=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},Se=[],b=-1;function D(e){return{current:e}}function H(e){0>b||(e.current=Se[b],Se[b]=null,b--)}function S(e,i){b++,Se[b]=e.current,e.current=i}var te=D(null),fe=D(null),ce=D(null),Oe=D(null);function Ye(e,i){switch(S(ce,i),S(fe,e),S(te,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Ah(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Ah(i),e=Eh(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(te),S(te,e)}function ke(){H(te),H(fe),H(ce)}function Zn(e){e.memoizedState!==null&&S(Oe,e);var i=te.current,a=Eh(i,e.type);i!==a&&(S(fe,e),S(te,a))}function bt(e){fe.current===e&&(H(te),H(fe)),Oe.current===e&&(H(Oe),Ja._currentValue=oe)}var ra,yr;function yt(e){if(ra===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);ra=i&&i[1]||"",yr=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ra+e+yr}var Zi=!1;function es(e,i){if(!e||Zi)return"";Zi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(i){var K=function(){throw Error()};if(Object.defineProperty(K.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(K,[])}catch(z){var k=z}Reflect.construct(e,[],K)}else{try{K.call()}catch(z){k=z}e.call(K.prototype)}}else{try{throw Error()}catch(z){k=z}(K=e())&&typeof K.catch=="function"&&K.catch(function(){})}}catch(z){if(z&&k&&typeof z.stack=="string")return[z.stack,k.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),_=m[0],A=m[1];if(_&&A){var R=_.split(`
`),w=A.split(`
`);for(d=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;d<w.length&&!w[d].includes("DetermineComponentFrameRoot");)d++;if(o===R.length||d===w.length)for(o=R.length-1,d=w.length-1;1<=o&&0<=d&&R[o]!==w[d];)d--;for(;1<=o&&0<=d;o--,d--)if(R[o]!==w[d]){if(o!==1||d!==1)do if(o--,d--,0>d||R[o]!==w[d]){var F=`
`+R[o].replace(" at new "," at ");return e.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",e.displayName)),F}while(1<=o&&0<=d);break}}}finally{Zi=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?yt(a):""}function Rr(e,i){switch(e.tag){case 26:case 27:case 5:return yt(e.type);case 16:return yt("Lazy");case 13:return e.child!==i&&i!==null?yt("Suspense Fallback"):yt("Suspense");case 19:return yt("SuspenseList");case 0:case 15:return es(e.type,!1);case 11:return es(e.type.render,!1);case 1:return es(e.type,!0);case 31:return yt("Activity");default:return""}}function Or(e){try{var i="",a=null;do i+=Rr(e,a),a=e,e=e.return;while(e);return i}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ns=Object.prototype.hasOwnProperty,ts=n.unstable_scheduleCallback,oa=n.unstable_cancelCallback,Al=n.unstable_shouldYield,El=n.unstable_requestPaint,yn=n.unstable_now,Sl=n.unstable_getCurrentPriorityLevel,B=n.unstable_ImmediatePriority,Z=n.unstable_UserBlockingPriority,ve=n.unstable_NormalPriority,Me=n.unstable_LowPriority,Le=n.unstable_IdlePriority,zn=n.log,Rt=n.unstable_setDisableYieldValue,Rn=null,dn=null;function Nn(e){if(typeof zn=="function"&&Rt(e),dn&&typeof dn.setStrictMode=="function")try{dn.setStrictMode(Rn,e)}catch{}}var Ge=Math.clz32?Math.clz32:H_,Jt=Math.log,dt=Math.LN2;function H_(e){return e>>>=0,e===0?32:31-(Jt(e)/dt|0)|0}var Dr=256,qr=262144,Nr=4194304;function bi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Vr(e,i,a){var o=e.pendingLanes;if(o===0)return 0;var d=0,m=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var A=o&134217727;return A!==0?(o=A&~m,o!==0?d=bi(o):(_&=A,_!==0?d=bi(_):a||(a=A&~e,a!==0&&(d=bi(a))))):(A=o&~m,A!==0?d=bi(A):_!==0?d=bi(_):a||(a=o&~e,a!==0&&(d=bi(a)))),d===0?0:i!==0&&i!==d&&(i&m)===0&&(m=d&-d,a=i&-i,m>=a||m===32&&(a&4194048)!==0)?i:d}function la(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function B_(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function np(){var e=Nr;return Nr<<=1,(Nr&62914560)===0&&(Nr=4194304),e}function Ml(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function ua(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Q_(e,i,a,o,d,m){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var A=e.entanglements,R=e.expirationTimes,w=e.hiddenUpdates;for(a=_&~a;0<a;){var F=31-Ge(a),K=1<<F;A[F]=0,R[F]=-1;var k=w[F];if(k!==null)for(w[F]=null,F=0;F<k.length;F++){var z=k[F];z!==null&&(z.lane&=-536870913)}a&=~K}o!==0&&tp(e,o,0),m!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=m&~(_&~i))}function tp(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var o=31-Ge(i);e.entangledLanes|=i,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function ip(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var o=31-Ge(a),d=1<<o;d&i|e[o]&i&&(e[o]|=i),a&=~d}}function sp(e,i){var a=i&-i;return a=(a&42)!==0?1:bl(a),(a&(e.suspendedLanes|i))!==0?0:a}function bl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function yl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ap(){var e=Y.p;return e!==0?e:(e=window.event,e===void 0?32:Bh(e.type))}function rp(e,i){var a=Y.p;try{return Y.p=e,i()}finally{Y.p=a}}var Yt=Math.random().toString(36).slice(2),gn="__reactFiber$"+Yt,Vn="__reactProps$"+Yt,is="__reactContainer$"+Yt,Rl="__reactEvents$"+Yt,K_="__reactListeners$"+Yt,$_="__reactHandles$"+Yt,op="__reactResources$"+Yt,ca="__reactMarker$"+Yt;function Ol(e){delete e[gn],delete e[Vn],delete e[Rl],delete e[K_],delete e[$_]}function ss(e){var i=e[gn];if(i)return i;for(var a=e.parentNode;a;){if(i=a[is]||a[gn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=Dh(e);e!==null;){if(a=e[gn])return a;e=Dh(e)}return i}e=a,a=e.parentNode}return null}function as(e){if(e=e[gn]||e[is]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function da(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function rs(e){var i=e[op];return i||(i=e[op]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function fn(e){e[ca]=!0}var lp=new Set,up={};function yi(e,i){os(e,i),os(e+"Capture",i)}function os(e,i){for(up[e]=i,e=0;e<i.length;e++)lp.add(i[e])}var J_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cp={},dp={};function Y_(e){return ns.call(dp,e)?!0:ns.call(cp,e)?!1:J_.test(e)?dp[e]=!0:(cp[e]=!0,!1)}function Ir(e,i,a){if(Y_(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var o=i.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Pr(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Ot(e,i,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+o)}}function et(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function pp(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function W_(e,i,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,m=o.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return d.call(this)},set:function(_){a=""+_,m.call(this,_)}}),Object.defineProperty(e,i,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function Dl(e){if(!e._valueTracker){var i=pp(e)?"checked":"value";e._valueTracker=W_(e,i,""+e[i])}}function mp(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),o="";return e&&(o=pp(e)?e.checked?"true":"false":e.value),e=o,e!==a?(i.setValue(e),!0):!1}function xr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var X_=/[\n"\\]/g;function nt(e){return e.replace(X_,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function ql(e,i,a,o,d,m,_,A){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),i!=null?_==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+et(i)):e.value!==""+et(i)&&(e.value=""+et(i)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),i!=null?Nl(e,_,et(i)):a!=null?Nl(e,_,et(a)):o!=null&&e.removeAttribute("value"),d==null&&m!=null&&(e.defaultChecked=!!m),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.name=""+et(A):e.removeAttribute("name")}function fp(e,i,a,o,d,m,_,A){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),i!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||i!=null)){Dl(e);return}a=a!=null?""+et(a):"",i=i!=null?""+et(i):a,A||i===e.value||(e.value=i),e.defaultValue=i}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=A?e.checked:!!o,e.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Dl(e)}function Nl(e,i,a){i==="number"&&xr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function ls(e,i,a,o){if(e=e.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=i.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&o&&(e[a].defaultSelected=!0)}else{for(a=""+et(a),i=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}i!==null||e[d].disabled||(i=e[d])}i!==null&&(i.selected=!0)}}function hp(e,i,a){if(i!=null&&(i=""+et(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+et(a):""}function gp(e,i,a,o){if(i==null){if(o!=null){if(a!=null)throw Error(r(92));if(X(o)){if(1<o.length)throw Error(r(93));o=o[0]}a=o}a==null&&(a=""),i=a}a=et(i),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),Dl(e)}function us(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Z_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vp(e,i,a){var o=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":o?e.setProperty(i,a):typeof a!="number"||a===0||Z_.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function _p(e,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||i!=null&&i.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in i)o=i[d],i.hasOwnProperty(d)&&a[d]!==o&&vp(e,d,o)}else for(var m in i)i.hasOwnProperty(m)&&vp(e,m,i[m])}function Vl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lr(e){return nC.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Dt(){}var Il=null;function Pl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var cs=null,ds=null;function Cp(e){var i=as(e);if(i&&(e=i.stateNode)){var a=e[Vn]||null;e:switch(e=i.stateNode,i.type){case"input":if(ql(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+nt(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var o=a[i];if(o!==e&&o.form===e.form){var d=o[Vn]||null;if(!d)throw Error(r(90));ql(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(i=0;i<a.length;i++)o=a[i],o.form===e.form&&mp(o)}break e;case"textarea":hp(e,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&ls(e,!!a.multiple,i,!1)}}}var xl=!1;function Tp(e,i,a){if(xl)return e(i,a);xl=!0;try{var o=e(i);return o}finally{if(xl=!1,(cs!==null||ds!==null)&&(Mo(),cs&&(i=cs,e=ds,ds=cs=null,Cp(i),e)))for(i=0;i<e.length;i++)Cp(e[i])}}function pa(e,i){var a=e.stateNode;if(a===null)return null;var o=a[Vn]||null;if(o===null)return null;a=o[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ll=!1;if(qt)try{var ma={};Object.defineProperty(ma,"passive",{get:function(){Ll=!0}}),window.addEventListener("test",ma,ma),window.removeEventListener("test",ma,ma)}catch{Ll=!1}var Wt=null,wl=null,wr=null;function Ap(){if(wr)return wr;var e,i=wl,a=i.length,o,d="value"in Wt?Wt.value:Wt.textContent,m=d.length;for(e=0;e<a&&i[e]===d[e];e++);var _=a-e;for(o=1;o<=_&&i[a-o]===d[m-o];o++);return wr=d.slice(e,1<o?1-o:void 0)}function jr(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function kr(){return!0}function Ep(){return!1}function In(e){function i(a,o,d,m,_){this._reactName=a,this._targetInst=d,this.type=o,this.nativeEvent=m,this.target=_,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(a=e[A],this[A]=a?a(m):m[A]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?kr:Ep,this.isPropagationStopped=Ep,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=kr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=kr)},persist:function(){},isPersistent:kr}),i}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ur=In(Ri),fa=v({},Ri,{view:0,detail:0}),tC=In(fa),jl,kl,ha,zr=v({},fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ha&&(ha&&e.type==="mousemove"?(jl=e.screenX-ha.screenX,kl=e.screenY-ha.screenY):kl=jl=0,ha=e),jl)},movementY:function(e){return"movementY"in e?e.movementY:kl}}),Sp=In(zr),iC=v({},zr,{dataTransfer:0}),sC=In(iC),aC=v({},fa,{relatedTarget:0}),Ul=In(aC),rC=v({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),oC=In(rC),lC=v({},Ri,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uC=In(lC),cC=v({},Ri,{data:0}),Mp=In(cC),dC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fC(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=mC[e])?!!i[e]:!1}function zl(){return fC}var hC=v({},fa,{key:function(e){if(e.key){var i=dC[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=jr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zl,charCode:function(e){return e.type==="keypress"?jr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gC=In(hC),vC=v({},zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bp=In(vC),_C=v({},fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zl}),CC=In(_C),TC=v({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),AC=In(TC),EC=v({},zr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),SC=In(EC),MC=v({},Ri,{newState:0,oldState:0}),bC=In(MC),yC=[9,13,27,32],Fl=qt&&"CompositionEvent"in window,ga=null;qt&&"documentMode"in document&&(ga=document.documentMode);var RC=qt&&"TextEvent"in window&&!ga,yp=qt&&(!Fl||ga&&8<ga&&11>=ga),Rp=" ",Op=!1;function Dp(e,i){switch(e){case"keyup":return yC.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ps=!1;function OC(e,i){switch(e){case"compositionend":return qp(i);case"keypress":return i.which!==32?null:(Op=!0,Rp);case"textInput":return e=i.data,e===Rp&&Op?null:e;default:return null}}function DC(e,i){if(ps)return e==="compositionend"||!Fl&&Dp(e,i)?(e=Ap(),wr=wl=Wt=null,ps=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yp&&i.locale!=="ko"?null:i.data;default:return null}}var qC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Np(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!qC[e.type]:i==="textarea"}function Vp(e,i,a,o){cs?ds?ds.push(o):ds=[o]:cs=o,i=No(i,"onChange"),0<i.length&&(a=new Ur("onChange","change",null,a,o),e.push({event:a,listeners:i}))}var va=null,_a=null;function NC(e){hh(e,0)}function Fr(e){var i=da(e);if(mp(i))return e}function Ip(e,i){if(e==="change")return i}var Pp=!1;if(qt){var Gl;if(qt){var Hl="oninput"in document;if(!Hl){var xp=document.createElement("div");xp.setAttribute("oninput","return;"),Hl=typeof xp.oninput=="function"}Gl=Hl}else Gl=!1;Pp=Gl&&(!document.documentMode||9<document.documentMode)}function Lp(){va&&(va.detachEvent("onpropertychange",wp),_a=va=null)}function wp(e){if(e.propertyName==="value"&&Fr(_a)){var i=[];Vp(i,_a,e,Pl(e)),Tp(NC,i)}}function VC(e,i,a){e==="focusin"?(Lp(),va=i,_a=a,va.attachEvent("onpropertychange",wp)):e==="focusout"&&Lp()}function IC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fr(_a)}function PC(e,i){if(e==="click")return Fr(i)}function xC(e,i){if(e==="input"||e==="change")return Fr(i)}function LC(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Fn=typeof Object.is=="function"?Object.is:LC;function Ca(e,i){if(Fn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),o=Object.keys(i);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var d=a[o];if(!ns.call(i,d)||!Fn(e[d],i[d]))return!1}return!0}function jp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kp(e,i){var a=jp(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=i&&o>=i)return{node:a,offset:i-e};e=o}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=jp(a)}}function Up(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Up(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function zp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=xr(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=xr(e.document)}return i}function Bl(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var wC=qt&&"documentMode"in document&&11>=document.documentMode,ms=null,Ql=null,Ta=null,Kl=!1;function Fp(e,i,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Kl||ms==null||ms!==xr(o)||(o=ms,"selectionStart"in o&&Bl(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ta&&Ca(Ta,o)||(Ta=o,o=No(Ql,"onSelect"),0<o.length&&(i=new Ur("onSelect","select",null,i,a),e.push({event:i,listeners:o}),i.target=ms)))}function Oi(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var fs={animationend:Oi("Animation","AnimationEnd"),animationiteration:Oi("Animation","AnimationIteration"),animationstart:Oi("Animation","AnimationStart"),transitionrun:Oi("Transition","TransitionRun"),transitionstart:Oi("Transition","TransitionStart"),transitioncancel:Oi("Transition","TransitionCancel"),transitionend:Oi("Transition","TransitionEnd")},$l={},Gp={};qt&&(Gp=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Di(e){if($l[e])return $l[e];if(!fs[e])return e;var i=fs[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Gp)return $l[e]=i[a];return e}var Hp=Di("animationend"),Bp=Di("animationiteration"),Qp=Di("animationstart"),jC=Di("transitionrun"),kC=Di("transitionstart"),UC=Di("transitioncancel"),Kp=Di("transitionend"),$p=new Map,Jl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jl.push("scrollEnd");function pt(e,i){$p.set(e,i),yi(i,[e])}var Gr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},tt=[],hs=0,Yl=0;function Hr(){for(var e=hs,i=Yl=hs=0;i<e;){var a=tt[i];tt[i++]=null;var o=tt[i];tt[i++]=null;var d=tt[i];tt[i++]=null;var m=tt[i];if(tt[i++]=null,o!==null&&d!==null){var _=o.pending;_===null?d.next=d:(d.next=_.next,_.next=d),o.pending=d}m!==0&&Jp(a,d,m)}}function Br(e,i,a,o){tt[hs++]=e,tt[hs++]=i,tt[hs++]=a,tt[hs++]=o,Yl|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Wl(e,i,a,o){return Br(e,i,a,o),Qr(e)}function qi(e,i){return Br(e,null,null,i),Qr(e)}function Jp(e,i,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var d=!1,m=e.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(d=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,d&&i!==null&&(d=31-Ge(a),e=m.hiddenUpdates,o=e[d],o===null?e[d]=[i]:o.push(i),i.lane=a|536870912),m):null}function Qr(e){if(50<Fa)throw Fa=0,rc=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var gs={};function zC(e,i,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(e,i,a,o){return new zC(e,i,a,o)}function Xl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nt(e,i){var a=e.alternate;return a===null?(a=Gn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Yp(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function Kr(e,i,a,o,d,m){var _=0;if(o=e,typeof e=="function")Xl(e)&&(_=1);else if(typeof e=="string")_=QT(e,a,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ue:return e=Gn(31,a,i,d),e.elementType=ue,e.lanes=m,e;case M:return Ni(a.children,d,m,i);case q:_=8,d|=24;break;case y:return e=Gn(12,a,i,d|2),e.elementType=y,e.lanes=m,e;case J:return e=Gn(13,a,i,d),e.elementType=J,e.lanes=m,e;case x:return e=Gn(19,a,i,d),e.elementType=x,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:_=10;break e;case I:_=9;break e;case G:_=11;break e;case $:_=14;break e;case ae:_=16,o=null;break e}_=29,a=Error(r(130,e===null?"null":typeof e,"")),o=null}return i=Gn(_,a,i,d),i.elementType=e,i.type=o,i.lanes=m,i}function Ni(e,i,a,o){return e=Gn(7,e,o,i),e.lanes=a,e}function Zl(e,i,a){return e=Gn(6,e,null,i),e.lanes=a,e}function Wp(e){var i=Gn(18,null,null,0);return i.stateNode=e,i}function eu(e,i,a){return i=Gn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Xp=new WeakMap;function it(e,i){if(typeof e=="object"&&e!==null){var a=Xp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:Or(i)},Xp.set(e,i),i)}return{value:e,source:i,stack:Or(i)}}var vs=[],_s=0,$r=null,Aa=0,st=[],at=0,Xt=null,Ct=1,Tt="";function Vt(e,i){vs[_s++]=Aa,vs[_s++]=$r,$r=e,Aa=i}function Zp(e,i,a){st[at++]=Ct,st[at++]=Tt,st[at++]=Xt,Xt=e;var o=Ct;e=Tt;var d=32-Ge(o)-1;o&=~(1<<d),a+=1;var m=32-Ge(i)+d;if(30<m){var _=d-d%5;m=(o&(1<<_)-1).toString(32),o>>=_,d-=_,Ct=1<<32-Ge(i)+d|a<<d|o,Tt=m+e}else Ct=1<<m|a<<d|o,Tt=e}function nu(e){e.return!==null&&(Vt(e,1),Zp(e,1,0))}function tu(e){for(;e===$r;)$r=vs[--_s],vs[_s]=null,Aa=vs[--_s],vs[_s]=null;for(;e===Xt;)Xt=st[--at],st[at]=null,Tt=st[--at],st[at]=null,Ct=st[--at],st[at]=null}function em(e,i){st[at++]=Ct,st[at++]=Tt,st[at++]=Xt,Ct=i.id,Tt=i.overflow,Xt=e}var vn=null,$e=null,Ne=!1,Zt=null,rt=!1,iu=Error(r(519));function ei(e){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ea(it(i,e)),iu}function nm(e){var i=e.stateNode,a=e.type,o=e.memoizedProps;switch(i[gn]=e,i[Vn]=o,a){case"dialog":ye("cancel",i),ye("close",i);break;case"iframe":case"object":case"embed":ye("load",i);break;case"video":case"audio":for(a=0;a<Ha.length;a++)ye(Ha[a],i);break;case"source":ye("error",i);break;case"img":case"image":case"link":ye("error",i),ye("load",i);break;case"details":ye("toggle",i);break;case"input":ye("invalid",i),fp(i,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ye("invalid",i);break;case"textarea":ye("invalid",i),gp(i,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||o.suppressHydrationWarning===!0||Ch(i.textContent,a)?(o.popover!=null&&(ye("beforetoggle",i),ye("toggle",i)),o.onScroll!=null&&ye("scroll",i),o.onScrollEnd!=null&&ye("scrollend",i),o.onClick!=null&&(i.onclick=Dt),i=!0):i=!1,i||ei(e,!0)}function tm(e){for(vn=e.return;vn;)switch(vn.tag){case 5:case 31:case 13:rt=!1;return;case 27:case 3:rt=!0;return;default:vn=vn.return}}function Cs(e){if(e!==vn)return!1;if(!Ne)return tm(e),Ne=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Ac(e.type,e.memoizedProps)),a=!a),a&&$e&&ei(e),tm(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));$e=Oh(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));$e=Oh(e)}else i===27?(i=$e,fi(e.type)?(e=yc,yc=null,$e=e):$e=i):$e=vn?lt(e.stateNode.nextSibling):null;return!0}function Vi(){$e=vn=null,Ne=!1}function su(){var e=Zt;return e!==null&&(wn===null?wn=e:wn.push.apply(wn,e),Zt=null),e}function Ea(e){Zt===null?Zt=[e]:Zt.push(e)}var au=D(null),Ii=null,It=null;function ni(e,i,a){S(au,i._currentValue),i._currentValue=a}function Pt(e){e._currentValue=au.current,H(au)}function ru(e,i,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,o!==null&&(o.childLanes|=i)):o!==null&&(o.childLanes&i)!==i&&(o.childLanes|=i),e===a)break;e=e.return}}function ou(e,i,a,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var m=d.dependencies;if(m!==null){var _=d.child;m=m.firstContext;e:for(;m!==null;){var A=m;m=d;for(var R=0;R<i.length;R++)if(A.context===i[R]){m.lanes|=a,A=m.alternate,A!==null&&(A.lanes|=a),ru(m.return,a,e),o||(_=null);break e}m=A.next}}else if(d.tag===18){if(_=d.return,_===null)throw Error(r(341));_.lanes|=a,m=_.alternate,m!==null&&(m.lanes|=a),ru(_,a,e),_=null}else _=d.child;if(_!==null)_.return=d;else for(_=d;_!==null;){if(_===e){_=null;break}if(d=_.sibling,d!==null){d.return=_.return,_=d;break}_=_.return}d=_}}function Ts(e,i,a,o){e=null;for(var d=i,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var _=d.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var A=d.type;Fn(d.pendingProps.value,_.value)||(e!==null?e.push(A):e=[A])}}else if(d===Oe.current){if(_=d.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Ja):e=[Ja])}d=d.return}e!==null&&ou(i,e,a,o),i.flags|=262144}function Jr(e){for(e=e.firstContext;e!==null;){if(!Fn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Pi(e){Ii=e,It=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function _n(e){return im(Ii,e)}function Yr(e,i){return Ii===null&&Pi(e),im(e,i)}function im(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},It===null){if(e===null)throw Error(r(308));It=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else It=It.next=i;return a}var FC=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},GC=n.unstable_scheduleCallback,HC=n.unstable_NormalPriority,an={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lu(){return{controller:new FC,data:new Map,refCount:0}}function Sa(e){e.refCount--,e.refCount===0&&GC(HC,function(){e.controller.abort()})}var Ma=null,uu=0,As=0,Es=null;function BC(e,i){if(Ma===null){var a=Ma=[];uu=0,As=pc(),Es={status:"pending",value:void 0,then:function(o){a.push(o)}}}return uu++,i.then(sm,sm),i}function sm(){if(--uu===0&&Ma!==null){Es!==null&&(Es.status="fulfilled");var e=Ma;Ma=null,As=0,Es=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function QC(e,i){var a=[],o={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){o.status="fulfilled",o.value=i;for(var d=0;d<a.length;d++)(0,a[d])(i)},function(d){for(o.status="rejected",o.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),o}var am=U.S;U.S=function(e,i){Gf=yn(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&BC(e,i),am!==null&&am(e,i)};var xi=D(null);function cu(){var e=xi.current;return e!==null?e:He.pooledCache}function Wr(e,i){i===null?S(xi,xi.current):S(xi,i.pool)}function rm(){var e=cu();return e===null?null:{parent:an._currentValue,pool:e}}var Ss=Error(r(460)),du=Error(r(474)),Xr=Error(r(542)),Zr={then:function(){}};function om(e){return e=e.status,e==="fulfilled"||e==="rejected"}function lm(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(Dt,Dt),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,cm(e),e;default:if(typeof i.status=="string")i.then(Dt,Dt);else{if(e=He,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(o){if(i.status==="pending"){var d=i;d.status="fulfilled",d.value=o}},function(o){if(i.status==="pending"){var d=i;d.status="rejected",d.reason=o}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,cm(e),e}throw wi=i,Ss}}function Li(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(wi=a,Ss):a}}var wi=null;function um(){if(wi===null)throw Error(r(459));var e=wi;return wi=null,e}function cm(e){if(e===Ss||e===Xr)throw Error(r(483))}var Ms=null,ba=0;function eo(e){var i=ba;return ba+=1,Ms===null&&(Ms=[]),lm(Ms,e,i)}function ya(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function no(e,i){throw i.$$typeof===T?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function dm(e){function i(P,N){if(e){var L=P.deletions;L===null?(P.deletions=[N],P.flags|=16):L.push(N)}}function a(P,N){if(!e)return null;for(;N!==null;)i(P,N),N=N.sibling;return null}function o(P){for(var N=new Map;P!==null;)P.key!==null?N.set(P.key,P):N.set(P.index,P),P=P.sibling;return N}function d(P,N){return P=Nt(P,N),P.index=0,P.sibling=null,P}function m(P,N,L){return P.index=L,e?(L=P.alternate,L!==null?(L=L.index,L<N?(P.flags|=67108866,N):L):(P.flags|=67108866,N)):(P.flags|=1048576,N)}function _(P){return e&&P.alternate===null&&(P.flags|=67108866),P}function A(P,N,L,Q){return N===null||N.tag!==6?(N=Zl(L,P.mode,Q),N.return=P,N):(N=d(N,L),N.return=P,N)}function R(P,N,L,Q){var de=L.type;return de===M?F(P,N,L.props.children,Q,L.key):N!==null&&(N.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ae&&Li(de)===N.type)?(N=d(N,L.props),ya(N,L),N.return=P,N):(N=Kr(L.type,L.key,L.props,null,P.mode,Q),ya(N,L),N.return=P,N)}function w(P,N,L,Q){return N===null||N.tag!==4||N.stateNode.containerInfo!==L.containerInfo||N.stateNode.implementation!==L.implementation?(N=eu(L,P.mode,Q),N.return=P,N):(N=d(N,L.children||[]),N.return=P,N)}function F(P,N,L,Q,de){return N===null||N.tag!==7?(N=Ni(L,P.mode,Q,de),N.return=P,N):(N=d(N,L),N.return=P,N)}function K(P,N,L){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Zl(""+N,P.mode,L),N.return=P,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case C:return L=Kr(N.type,N.key,N.props,null,P.mode,L),ya(L,N),L.return=P,L;case E:return N=eu(N,P.mode,L),N.return=P,N;case ae:return N=Li(N),K(P,N,L)}if(X(N)||ne(N))return N=Ni(N,P.mode,L,null),N.return=P,N;if(typeof N.then=="function")return K(P,eo(N),L);if(N.$$typeof===O)return K(P,Yr(P,N),L);no(P,N)}return null}function k(P,N,L,Q){var de=N!==null?N.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return de!==null?null:A(P,N,""+L,Q);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case C:return L.key===de?R(P,N,L,Q):null;case E:return L.key===de?w(P,N,L,Q):null;case ae:return L=Li(L),k(P,N,L,Q)}if(X(L)||ne(L))return de!==null?null:F(P,N,L,Q,null);if(typeof L.then=="function")return k(P,N,eo(L),Q);if(L.$$typeof===O)return k(P,N,Yr(P,L),Q);no(P,L)}return null}function z(P,N,L,Q,de){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return P=P.get(L)||null,A(N,P,""+Q,de);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case C:return P=P.get(Q.key===null?L:Q.key)||null,R(N,P,Q,de);case E:return P=P.get(Q.key===null?L:Q.key)||null,w(N,P,Q,de);case ae:return Q=Li(Q),z(P,N,L,Q,de)}if(X(Q)||ne(Q))return P=P.get(L)||null,F(N,P,Q,de,null);if(typeof Q.then=="function")return z(P,N,L,eo(Q),de);if(Q.$$typeof===O)return z(P,N,L,Yr(N,Q),de);no(N,Q)}return null}function se(P,N,L,Q){for(var de=null,Ie=null,re=N,Ae=N=0,qe=null;re!==null&&Ae<L.length;Ae++){re.index>Ae?(qe=re,re=null):qe=re.sibling;var Pe=k(P,re,L[Ae],Q);if(Pe===null){re===null&&(re=qe);break}e&&re&&Pe.alternate===null&&i(P,re),N=m(Pe,N,Ae),Ie===null?de=Pe:Ie.sibling=Pe,Ie=Pe,re=qe}if(Ae===L.length)return a(P,re),Ne&&Vt(P,Ae),de;if(re===null){for(;Ae<L.length;Ae++)re=K(P,L[Ae],Q),re!==null&&(N=m(re,N,Ae),Ie===null?de=re:Ie.sibling=re,Ie=re);return Ne&&Vt(P,Ae),de}for(re=o(re);Ae<L.length;Ae++)qe=z(re,P,Ae,L[Ae],Q),qe!==null&&(e&&qe.alternate!==null&&re.delete(qe.key===null?Ae:qe.key),N=m(qe,N,Ae),Ie===null?de=qe:Ie.sibling=qe,Ie=qe);return e&&re.forEach(function(Ci){return i(P,Ci)}),Ne&&Vt(P,Ae),de}function me(P,N,L,Q){if(L==null)throw Error(r(151));for(var de=null,Ie=null,re=N,Ae=N=0,qe=null,Pe=L.next();re!==null&&!Pe.done;Ae++,Pe=L.next()){re.index>Ae?(qe=re,re=null):qe=re.sibling;var Ci=k(P,re,Pe.value,Q);if(Ci===null){re===null&&(re=qe);break}e&&re&&Ci.alternate===null&&i(P,re),N=m(Ci,N,Ae),Ie===null?de=Ci:Ie.sibling=Ci,Ie=Ci,re=qe}if(Pe.done)return a(P,re),Ne&&Vt(P,Ae),de;if(re===null){for(;!Pe.done;Ae++,Pe=L.next())Pe=K(P,Pe.value,Q),Pe!==null&&(N=m(Pe,N,Ae),Ie===null?de=Pe:Ie.sibling=Pe,Ie=Pe);return Ne&&Vt(P,Ae),de}for(re=o(re);!Pe.done;Ae++,Pe=L.next())Pe=z(re,P,Ae,Pe.value,Q),Pe!==null&&(e&&Pe.alternate!==null&&re.delete(Pe.key===null?Ae:Pe.key),N=m(Pe,N,Ae),Ie===null?de=Pe:Ie.sibling=Pe,Ie=Pe);return e&&re.forEach(function(i0){return i(P,i0)}),Ne&&Vt(P,Ae),de}function Fe(P,N,L,Q){if(typeof L=="object"&&L!==null&&L.type===M&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case C:e:{for(var de=L.key;N!==null;){if(N.key===de){if(de=L.type,de===M){if(N.tag===7){a(P,N.sibling),Q=d(N,L.props.children),Q.return=P,P=Q;break e}}else if(N.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===ae&&Li(de)===N.type){a(P,N.sibling),Q=d(N,L.props),ya(Q,L),Q.return=P,P=Q;break e}a(P,N);break}else i(P,N);N=N.sibling}L.type===M?(Q=Ni(L.props.children,P.mode,Q,L.key),Q.return=P,P=Q):(Q=Kr(L.type,L.key,L.props,null,P.mode,Q),ya(Q,L),Q.return=P,P=Q)}return _(P);case E:e:{for(de=L.key;N!==null;){if(N.key===de)if(N.tag===4&&N.stateNode.containerInfo===L.containerInfo&&N.stateNode.implementation===L.implementation){a(P,N.sibling),Q=d(N,L.children||[]),Q.return=P,P=Q;break e}else{a(P,N);break}else i(P,N);N=N.sibling}Q=eu(L,P.mode,Q),Q.return=P,P=Q}return _(P);case ae:return L=Li(L),Fe(P,N,L,Q)}if(X(L))return se(P,N,L,Q);if(ne(L)){if(de=ne(L),typeof de!="function")throw Error(r(150));return L=de.call(L),me(P,N,L,Q)}if(typeof L.then=="function")return Fe(P,N,eo(L),Q);if(L.$$typeof===O)return Fe(P,N,Yr(P,L),Q);no(P,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,N!==null&&N.tag===6?(a(P,N.sibling),Q=d(N,L),Q.return=P,P=Q):(a(P,N),Q=Zl(L,P.mode,Q),Q.return=P,P=Q),_(P)):a(P,N)}return function(P,N,L,Q){try{ba=0;var de=Fe(P,N,L,Q);return Ms=null,de}catch(re){if(re===Ss||re===Xr)throw re;var Ie=Gn(29,re,null,P.mode);return Ie.lanes=Q,Ie.return=P,Ie}finally{}}}var ji=dm(!0),pm=dm(!1),ti=!1;function pu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mu(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ii(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function si(e,i,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(xe&2)!==0){var d=o.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),o.pending=i,i=Qr(e),Jp(e,null,a),i}return Br(e,o,i,a),Qr(e)}function Ra(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,ip(e,a)}}function fu(e,i){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=_:m=m.next=_,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var hu=!1;function Oa(){if(hu){var e=Es;if(e!==null)throw e}}function Da(e,i,a,o){hu=!1;var d=e.updateQueue;ti=!1;var m=d.firstBaseUpdate,_=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var R=A,w=R.next;R.next=null,_===null?m=w:_.next=w,_=R;var F=e.alternate;F!==null&&(F=F.updateQueue,A=F.lastBaseUpdate,A!==_&&(A===null?F.firstBaseUpdate=w:A.next=w,F.lastBaseUpdate=R))}if(m!==null){var K=d.baseState;_=0,F=w=R=null,A=m;do{var k=A.lane&-536870913,z=k!==A.lane;if(z?(De&k)===k:(o&k)===k){k!==0&&k===As&&(hu=!0),F!==null&&(F=F.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var se=e,me=A;k=i;var Fe=a;switch(me.tag){case 1:if(se=me.payload,typeof se=="function"){K=se.call(Fe,K,k);break e}K=se;break e;case 3:se.flags=se.flags&-65537|128;case 0:if(se=me.payload,k=typeof se=="function"?se.call(Fe,K,k):se,k==null)break e;K=v({},K,k);break e;case 2:ti=!0}}k=A.callback,k!==null&&(e.flags|=64,z&&(e.flags|=8192),z=d.callbacks,z===null?d.callbacks=[k]:z.push(k))}else z={lane:k,tag:A.tag,payload:A.payload,callback:A.callback,next:null},F===null?(w=F=z,R=K):F=F.next=z,_|=k;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;z=A,A=z.next,z.next=null,d.lastBaseUpdate=z,d.shared.pending=null}}while(!0);F===null&&(R=K),d.baseState=R,d.firstBaseUpdate=w,d.lastBaseUpdate=F,m===null&&(d.shared.lanes=0),ui|=_,e.lanes=_,e.memoizedState=K}}function mm(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function fm(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)mm(a[e],i)}var bs=D(null),to=D(0);function hm(e,i){e=Gt,S(to,e),S(bs,i),Gt=e|i.baseLanes}function gu(){S(to,Gt),S(bs,bs.current)}function vu(){Gt=to.current,H(bs),H(to)}var Hn=D(null),ot=null;function ai(e){var i=e.alternate;S(tn,tn.current&1),S(Hn,e),ot===null&&(i===null||bs.current!==null||i.memoizedState!==null)&&(ot=e)}function _u(e){S(tn,tn.current),S(Hn,e),ot===null&&(ot=e)}function gm(e){e.tag===22?(S(tn,tn.current),S(Hn,e),ot===null&&(ot=e)):ri()}function ri(){S(tn,tn.current),S(Hn,Hn.current)}function Bn(e){H(Hn),ot===e&&(ot=null),H(tn)}var tn=D(0);function io(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Mc(a)||bc(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var xt=0,Ce=null,Ue=null,rn=null,so=!1,ys=!1,ki=!1,ao=0,qa=0,Rs=null,KC=0;function Ze(){throw Error(r(321))}function Cu(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!Fn(e[a],i[a]))return!1;return!0}function Tu(e,i,a,o,d,m){return xt=m,Ce=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,U.H=e===null||e.memoizedState===null?Zm:xu,ki=!1,m=a(o,d),ki=!1,ys&&(m=_m(i,a,o,d)),vm(e),m}function vm(e){U.H=Ia;var i=Ue!==null&&Ue.next!==null;if(xt=0,rn=Ue=Ce=null,so=!1,qa=0,Rs=null,i)throw Error(r(300));e===null||on||(e=e.dependencies,e!==null&&Jr(e)&&(on=!0))}function _m(e,i,a,o){Ce=e;var d=0;do{if(ys&&(Rs=null),qa=0,ys=!1,25<=d)throw Error(r(301));if(d+=1,rn=Ue=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}U.H=ef,m=i(a,o)}while(ys);return m}function $C(){var e=U.H,i=e.useState()[0];return i=typeof i.then=="function"?Na(i):i,e=e.useState()[0],(Ue!==null?Ue.memoizedState:null)!==e&&(Ce.flags|=1024),i}function Au(){var e=ao!==0;return ao=0,e}function Eu(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function Su(e){if(so){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}so=!1}xt=0,rn=Ue=Ce=null,ys=!1,qa=ao=0,Rs=null}function On(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Ce.memoizedState=rn=e:rn=rn.next=e,rn}function sn(){if(Ue===null){var e=Ce.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var i=rn===null?Ce.memoizedState:rn.next;if(i!==null)rn=i,Ue=e;else{if(e===null)throw Ce.alternate===null?Error(r(467)):Error(r(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},rn===null?Ce.memoizedState=rn=e:rn=rn.next=e}return rn}function ro(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Na(e){var i=qa;return qa+=1,Rs===null&&(Rs=[]),e=lm(Rs,e,i),i=Ce,(rn===null?i.memoizedState:rn.next)===null&&(i=i.alternate,U.H=i===null||i.memoizedState===null?Zm:xu),e}function oo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Na(e);if(e.$$typeof===O)return _n(e)}throw Error(r(438,String(e)))}function Mu(e){var i=null,a=Ce.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var o=Ce.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(i={data:o.data.map(function(d){return d.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=ro(),Ce.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),o=0;o<e;o++)a[o]=j;return i.index++,a}function Lt(e,i){return typeof i=="function"?i(e):i}function lo(e){var i=sn();return bu(i,Ue,e)}function bu(e,i,a){var o=e.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=a;var d=e.baseQueue,m=o.pending;if(m!==null){if(d!==null){var _=d.next;d.next=m.next,m.next=_}i.baseQueue=d=m,o.pending=null}if(m=e.baseState,d===null)e.memoizedState=m;else{i=d.next;var A=_=null,R=null,w=i,F=!1;do{var K=w.lane&-536870913;if(K!==w.lane?(De&K)===K:(xt&K)===K){var k=w.revertLane;if(k===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),K===As&&(F=!0);else if((xt&k)===k){w=w.next,k===As&&(F=!0);continue}else K={lane:0,revertLane:w.revertLane,gesture:null,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},R===null?(A=R=K,_=m):R=R.next=K,Ce.lanes|=k,ui|=k;K=w.action,ki&&a(m,K),m=w.hasEagerState?w.eagerState:a(m,K)}else k={lane:K,revertLane:w.revertLane,gesture:w.gesture,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null},R===null?(A=R=k,_=m):R=R.next=k,Ce.lanes|=K,ui|=K;w=w.next}while(w!==null&&w!==i);if(R===null?_=m:R.next=A,!Fn(m,e.memoizedState)&&(on=!0,F&&(a=Es,a!==null)))throw a;e.memoizedState=m,e.baseState=_,e.baseQueue=R,o.lastRenderedState=m}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function yu(e){var i=sn(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var o=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var _=d=d.next;do m=e(m,_.action),_=_.next;while(_!==d);Fn(m,i.memoizedState)||(on=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,o]}function Cm(e,i,a){var o=Ce,d=sn(),m=Ne;if(m){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!Fn((Ue||d).memoizedState,a);if(_&&(d.memoizedState=a,on=!0),d=d.queue,Du(Em.bind(null,o,d,e),[e]),d.getSnapshot!==i||_||rn!==null&&rn.memoizedState.tag&1){if(o.flags|=2048,Os(9,{destroy:void 0},Am.bind(null,o,d,a,i),null),He===null)throw Error(r(349));m||(xt&127)!==0||Tm(o,i,a)}return a}function Tm(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Ce.updateQueue,i===null?(i=ro(),Ce.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function Am(e,i,a,o){i.value=a,i.getSnapshot=o,Sm(i)&&Mm(e)}function Em(e,i,a){return a(function(){Sm(i)&&Mm(e)})}function Sm(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!Fn(e,a)}catch{return!0}}function Mm(e){var i=qi(e,2);i!==null&&jn(i,e,2)}function Ru(e){var i=On();if(typeof e=="function"){var a=e;if(e=a(),ki){Nn(!0);try{a()}finally{Nn(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lt,lastRenderedState:e},i}function bm(e,i,a,o){return e.baseState=a,bu(e,Ue,typeof o=="function"?o:Lt)}function JC(e,i,a,o,d){if(po(e))throw Error(r(485));if(e=i.action,e!==null){var m={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){m.listeners.push(_)}};U.T!==null?a(!0):m.isTransition=!1,o(m),a=i.pending,a===null?(m.next=i.pending=m,ym(i,m)):(m.next=a.next,i.pending=a.next=m)}}function ym(e,i){var a=i.action,o=i.payload,d=e.state;if(i.isTransition){var m=U.T,_={};U.T=_;try{var A=a(d,o),R=U.S;R!==null&&R(_,A),Rm(e,i,A)}catch(w){Ou(e,i,w)}finally{m!==null&&_.types!==null&&(m.types=_.types),U.T=m}}else try{m=a(d,o),Rm(e,i,m)}catch(w){Ou(e,i,w)}}function Rm(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){Om(e,i,o)},function(o){return Ou(e,i,o)}):Om(e,i,a)}function Om(e,i,a){i.status="fulfilled",i.value=a,Dm(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,ym(e,a)))}function Ou(e,i,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do i.status="rejected",i.reason=a,Dm(i),i=i.next;while(i!==o)}e.action=null}function Dm(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function qm(e,i){return i}function Nm(e,i){if(Ne){var a=He.formState;if(a!==null){e:{var o=Ce;if(Ne){if($e){n:{for(var d=$e,m=rt;d.nodeType!==8;){if(!m){d=null;break n}if(d=lt(d.nextSibling),d===null){d=null;break n}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){$e=lt(d.nextSibling),o=d.data==="F!";break e}}ei(o)}o=!1}o&&(i=a[0])}}return a=On(),a.memoizedState=a.baseState=i,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qm,lastRenderedState:i},a.queue=o,a=Ym.bind(null,Ce,o),o.dispatch=a,o=Ru(!1),m=Pu.bind(null,Ce,!1,o.queue),o=On(),d={state:i,dispatch:null,action:e,pending:null},o.queue=d,a=JC.bind(null,Ce,d,m,a),d.dispatch=a,o.memoizedState=e,[i,a,!1]}function Vm(e){var i=sn();return Im(i,Ue,e)}function Im(e,i,a){if(i=bu(e,i,qm)[0],e=lo(Lt)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var o=Na(i)}catch(_){throw _===Ss?Xr:_}else o=i;i=sn();var d=i.queue,m=d.dispatch;return a!==i.memoizedState&&(Ce.flags|=2048,Os(9,{destroy:void 0},YC.bind(null,d,a),null)),[o,m,e]}function YC(e,i){e.action=i}function Pm(e){var i=sn(),a=Ue;if(a!==null)return Im(i,a,e);sn(),i=i.memoizedState,a=sn();var o=a.queue.dispatch;return a.memoizedState=e,[i,o,!1]}function Os(e,i,a,o){return e={tag:e,create:a,deps:o,inst:i,next:null},i=Ce.updateQueue,i===null&&(i=ro(),Ce.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,i.lastEffect=e),e}function xm(){return sn().memoizedState}function uo(e,i,a,o){var d=On();Ce.flags|=e,d.memoizedState=Os(1|i,{destroy:void 0},a,o===void 0?null:o)}function co(e,i,a,o){var d=sn();o=o===void 0?null:o;var m=d.memoizedState.inst;Ue!==null&&o!==null&&Cu(o,Ue.memoizedState.deps)?d.memoizedState=Os(i,m,a,o):(Ce.flags|=e,d.memoizedState=Os(1|i,m,a,o))}function Lm(e,i){uo(8390656,8,e,i)}function Du(e,i){co(2048,8,e,i)}function WC(e){Ce.flags|=4;var i=Ce.updateQueue;if(i===null)i=ro(),Ce.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function wm(e){var i=sn().memoizedState;return WC({ref:i,nextImpl:e}),function(){if((xe&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function jm(e,i){return co(4,2,e,i)}function km(e,i){return co(4,4,e,i)}function Um(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function zm(e,i,a){a=a!=null?a.concat([e]):null,co(4,4,Um.bind(null,i,e),a)}function qu(){}function Fm(e,i){var a=sn();i=i===void 0?null:i;var o=a.memoizedState;return i!==null&&Cu(i,o[1])?o[0]:(a.memoizedState=[e,i],e)}function Gm(e,i){var a=sn();i=i===void 0?null:i;var o=a.memoizedState;if(i!==null&&Cu(i,o[1]))return o[0];if(o=e(),ki){Nn(!0);try{e()}finally{Nn(!1)}}return a.memoizedState=[o,i],o}function Nu(e,i,a){return a===void 0||(xt&1073741824)!==0&&(De&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=Bf(),Ce.lanes|=e,ui|=e,a)}function Hm(e,i,a,o){return Fn(a,i)?a:bs.current!==null?(e=Nu(e,a,o),Fn(e,i)||(on=!0),e):(xt&42)===0||(xt&1073741824)!==0&&(De&261930)===0?(on=!0,e.memoizedState=a):(e=Bf(),Ce.lanes|=e,ui|=e,i)}function Bm(e,i,a,o,d){var m=Y.p;Y.p=m!==0&&8>m?m:8;var _=U.T,A={};U.T=A,Pu(e,!1,i,a);try{var R=d(),w=U.S;if(w!==null&&w(A,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var F=QC(R,o);Va(e,i,F,$n(e))}else Va(e,i,o,$n(e))}catch(K){Va(e,i,{then:function(){},status:"rejected",reason:K},$n())}finally{Y.p=m,_!==null&&A.types!==null&&(_.types=A.types),U.T=_}}function XC(){}function Vu(e,i,a,o){if(e.tag!==5)throw Error(r(476));var d=Qm(e).queue;Bm(e,d,i,oe,a===null?XC:function(){return Km(e),a(o)})}function Qm(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lt,lastRenderedState:oe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lt,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function Km(e){var i=Qm(e);i.next===null&&(i=e.alternate.memoizedState),Va(e,i.next.queue,{},$n())}function Iu(){return _n(Ja)}function $m(){return sn().memoizedState}function Jm(){return sn().memoizedState}function ZC(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=$n();e=ii(a);var o=si(i,e,a);o!==null&&(jn(o,i,a),Ra(o,i,a)),i={cache:lu()},e.payload=i;return}i=i.return}}function eT(e,i,a){var o=$n();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},po(e)?Wm(i,a):(a=Wl(e,i,a,o),a!==null&&(jn(a,e,o),Xm(a,i,o)))}function Ym(e,i,a){var o=$n();Va(e,i,a,o)}function Va(e,i,a,o){var d={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(po(e))Wm(i,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var _=i.lastRenderedState,A=m(_,a);if(d.hasEagerState=!0,d.eagerState=A,Fn(A,_))return Br(e,i,d,0),He===null&&Hr(),!1}catch{}finally{}if(a=Wl(e,i,d,o),a!==null)return jn(a,e,o),Xm(a,i,o),!0}return!1}function Pu(e,i,a,o){if(o={lane:2,revertLane:pc(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},po(e)){if(i)throw Error(r(479))}else i=Wl(e,a,o,2),i!==null&&jn(i,e,2)}function po(e){var i=e.alternate;return e===Ce||i!==null&&i===Ce}function Wm(e,i){ys=so=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function Xm(e,i,a){if((a&4194048)!==0){var o=i.lanes;o&=e.pendingLanes,a|=o,i.lanes=a,ip(e,a)}}var Ia={readContext:_n,use:oo,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useLayoutEffect:Ze,useInsertionEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useSyncExternalStore:Ze,useId:Ze,useHostTransitionStatus:Ze,useFormState:Ze,useActionState:Ze,useOptimistic:Ze,useMemoCache:Ze,useCacheRefresh:Ze};Ia.useEffectEvent=Ze;var Zm={readContext:_n,use:oo,useCallback:function(e,i){return On().memoizedState=[e,i===void 0?null:i],e},useContext:_n,useEffect:Lm,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,uo(4194308,4,Um.bind(null,i,e),a)},useLayoutEffect:function(e,i){return uo(4194308,4,e,i)},useInsertionEffect:function(e,i){uo(4,2,e,i)},useMemo:function(e,i){var a=On();i=i===void 0?null:i;var o=e();if(ki){Nn(!0);try{e()}finally{Nn(!1)}}return a.memoizedState=[o,i],o},useReducer:function(e,i,a){var o=On();if(a!==void 0){var d=a(i);if(ki){Nn(!0);try{a(i)}finally{Nn(!1)}}}else d=i;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=eT.bind(null,Ce,e),[o.memoizedState,e]},useRef:function(e){var i=On();return e={current:e},i.memoizedState=e},useState:function(e){e=Ru(e);var i=e.queue,a=Ym.bind(null,Ce,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:qu,useDeferredValue:function(e,i){var a=On();return Nu(a,e,i)},useTransition:function(){var e=Ru(!1);return e=Bm.bind(null,Ce,e.queue,!0,!1),On().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var o=Ce,d=On();if(Ne){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),He===null)throw Error(r(349));(De&127)!==0||Tm(o,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,Lm(Em.bind(null,o,m,e),[e]),o.flags|=2048,Os(9,{destroy:void 0},Am.bind(null,o,m,a,i),null),a},useId:function(){var e=On(),i=He.identifierPrefix;if(Ne){var a=Tt,o=Ct;a=(o&~(1<<32-Ge(o)-1)).toString(32)+a,i="_"+i+"R_"+a,a=ao++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=KC++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Iu,useFormState:Nm,useActionState:Nm,useOptimistic:function(e){var i=On();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=Pu.bind(null,Ce,!0,a),a.dispatch=i,[e,i]},useMemoCache:Mu,useCacheRefresh:function(){return On().memoizedState=ZC.bind(null,Ce)},useEffectEvent:function(e){var i=On(),a={impl:e};return i.memoizedState=a,function(){if((xe&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},xu={readContext:_n,use:oo,useCallback:Fm,useContext:_n,useEffect:Du,useImperativeHandle:zm,useInsertionEffect:jm,useLayoutEffect:km,useMemo:Gm,useReducer:lo,useRef:xm,useState:function(){return lo(Lt)},useDebugValue:qu,useDeferredValue:function(e,i){var a=sn();return Hm(a,Ue.memoizedState,e,i)},useTransition:function(){var e=lo(Lt)[0],i=sn().memoizedState;return[typeof e=="boolean"?e:Na(e),i]},useSyncExternalStore:Cm,useId:$m,useHostTransitionStatus:Iu,useFormState:Vm,useActionState:Vm,useOptimistic:function(e,i){var a=sn();return bm(a,Ue,e,i)},useMemoCache:Mu,useCacheRefresh:Jm};xu.useEffectEvent=wm;var ef={readContext:_n,use:oo,useCallback:Fm,useContext:_n,useEffect:Du,useImperativeHandle:zm,useInsertionEffect:jm,useLayoutEffect:km,useMemo:Gm,useReducer:yu,useRef:xm,useState:function(){return yu(Lt)},useDebugValue:qu,useDeferredValue:function(e,i){var a=sn();return Ue===null?Nu(a,e,i):Hm(a,Ue.memoizedState,e,i)},useTransition:function(){var e=yu(Lt)[0],i=sn().memoizedState;return[typeof e=="boolean"?e:Na(e),i]},useSyncExternalStore:Cm,useId:$m,useHostTransitionStatus:Iu,useFormState:Pm,useActionState:Pm,useOptimistic:function(e,i){var a=sn();return Ue!==null?bm(a,Ue,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Mu,useCacheRefresh:Jm};ef.useEffectEvent=wm;function Lu(e,i,a,o){i=e.memoizedState,a=a(o,i),a=a==null?i:v({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var wu={enqueueSetState:function(e,i,a){e=e._reactInternals;var o=$n(),d=ii(o);d.payload=i,a!=null&&(d.callback=a),i=si(e,d,o),i!==null&&(jn(i,e,o),Ra(i,e,o))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var o=$n(),d=ii(o);d.tag=1,d.payload=i,a!=null&&(d.callback=a),i=si(e,d,o),i!==null&&(jn(i,e,o),Ra(i,e,o))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=$n(),o=ii(a);o.tag=2,i!=null&&(o.callback=i),i=si(e,o,a),i!==null&&(jn(i,e,a),Ra(i,e,a))}};function nf(e,i,a,o,d,m,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,m,_):i.prototype&&i.prototype.isPureReactComponent?!Ca(a,o)||!Ca(d,m):!0}function tf(e,i,a,o){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,o),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,o),i.state!==e&&wu.enqueueReplaceState(i,i.state,null)}function Ui(e,i){var a=i;if("ref"in i){a={};for(var o in i)o!=="ref"&&(a[o]=i[o])}if(e=e.defaultProps){a===i&&(a=v({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function sf(e){Gr(e)}function af(e){console.error(e)}function rf(e){Gr(e)}function mo(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(o){setTimeout(function(){throw o})}}function of(e,i,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function ju(e,i,a){return a=ii(a),a.tag=3,a.payload={element:null},a.callback=function(){mo(e,i)},a}function lf(e){return e=ii(e),e.tag=3,e}function uf(e,i,a,o){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;e.payload=function(){return d(m)},e.callback=function(){of(i,a,o)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){of(i,a,o),typeof d!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var A=o.stack;this.componentDidCatch(o.value,{componentStack:A!==null?A:""})})}function nT(e,i,a,o,d){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(i=a.alternate,i!==null&&Ts(i,a,d,!0),a=Hn.current,a!==null){switch(a.tag){case 31:case 13:return ot===null?bo():a.alternate===null&&en===0&&(en=3),a.flags&=-257,a.flags|=65536,a.lanes=d,o===Zr?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([o]):i.add(o),uc(e,o,d)),!1;case 22:return a.flags|=65536,o===Zr?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([o]):a.add(o)),uc(e,o,d)),!1}throw Error(r(435,a.tag))}return uc(e,o,d),bo(),!1}if(Ne)return i=Hn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=d,o!==iu&&(e=Error(r(422),{cause:o}),Ea(it(e,a)))):(o!==iu&&(i=Error(r(423),{cause:o}),Ea(it(i,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=it(o,a),d=ju(e.stateNode,o,d),fu(e,d),en!==4&&(en=2)),!1;var m=Error(r(520),{cause:o});if(m=it(m,a),za===null?za=[m]:za.push(m),en!==4&&(en=2),i===null)return!0;o=it(o,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=ju(a.stateNode,o,e),fu(a,e),!1;case 1:if(i=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ci===null||!ci.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=lf(d),uf(d,e,a,o),fu(a,d),!1}a=a.return}while(a!==null);return!1}var ku=Error(r(461)),on=!1;function Cn(e,i,a,o){i.child=e===null?pm(i,null,a,o):ji(i,e.child,a,o)}function cf(e,i,a,o,d){a=a.render;var m=i.ref;if("ref"in o){var _={};for(var A in o)A!=="ref"&&(_[A]=o[A])}else _=o;return Pi(i),o=Tu(e,i,a,_,m,d),A=Au(),e!==null&&!on?(Eu(e,i,d),wt(e,i,d)):(Ne&&A&&nu(i),i.flags|=1,Cn(e,i,o,d),i.child)}function df(e,i,a,o,d){if(e===null){var m=a.type;return typeof m=="function"&&!Xl(m)&&m.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=m,pf(e,i,m,o,d)):(e=Kr(a.type,null,o,i,i.mode,d),e.ref=i.ref,e.return=i,i.child=e)}if(m=e.child,!Ku(e,d)){var _=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ca,a(_,o)&&e.ref===i.ref)return wt(e,i,d)}return i.flags|=1,e=Nt(m,o),e.ref=i.ref,e.return=i,i.child=e}function pf(e,i,a,o,d){if(e!==null){var m=e.memoizedProps;if(Ca(m,o)&&e.ref===i.ref)if(on=!1,i.pendingProps=o=m,Ku(e,d))(e.flags&131072)!==0&&(on=!0);else return i.lanes=e.lanes,wt(e,i,d)}return Uu(e,i,a,o,d)}function mf(e,i,a,o){var d=o.children,m=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((i.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(o=i.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~m}else o=0,i.child=null;return ff(e,i,m,a,o)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Wr(i,m!==null?m.cachePool:null),m!==null?hm(i,m):gu(),gm(i);else return o=i.lanes=536870912,ff(e,i,m!==null?m.baseLanes|a:a,a,o)}else m!==null?(Wr(i,m.cachePool),hm(i,m),ri(),i.memoizedState=null):(e!==null&&Wr(i,null),gu(),ri());return Cn(e,i,d,a),i.child}function Pa(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function ff(e,i,a,o,d){var m=cu();return m=m===null?null:{parent:an._currentValue,pool:m},i.memoizedState={baseLanes:a,cachePool:m},e!==null&&Wr(i,null),gu(),gm(i),e!==null&&Ts(e,i,o,!0),i.childLanes=d,null}function fo(e,i){return i=go({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function hf(e,i,a){return ji(i,e.child,null,a),e=fo(i,i.pendingProps),e.flags|=2,Bn(i),i.memoizedState=null,e}function tT(e,i,a){var o=i.pendingProps,d=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Ne){if(o.mode==="hidden")return e=fo(i,o),i.lanes=536870912,Pa(null,e);if(_u(i),(e=$e)?(e=Rh(e,rt),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Xt!==null?{id:Ct,overflow:Tt}:null,retryLane:536870912,hydrationErrors:null},a=Wp(e),a.return=i,i.child=a,vn=i,$e=null)):e=null,e===null)throw ei(i);return i.lanes=536870912,null}return fo(i,o)}var m=e.memoizedState;if(m!==null){var _=m.dehydrated;if(_u(i),d)if(i.flags&256)i.flags&=-257,i=hf(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(r(558));else if(on||Ts(e,i,a,!1),d=(a&e.childLanes)!==0,on||d){if(o=He,o!==null&&(_=sp(o,a),_!==0&&_!==m.retryLane))throw m.retryLane=_,qi(e,_),jn(o,e,_),ku;bo(),i=hf(e,i,a)}else e=m.treeContext,$e=lt(_.nextSibling),vn=i,Ne=!0,Zt=null,rt=!1,e!==null&&em(i,e),i=fo(i,o),i.flags|=4096;return i}return e=Nt(e.child,{mode:o.mode,children:o.children}),e.ref=i.ref,i.child=e,e.return=i,e}function ho(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Uu(e,i,a,o,d){return Pi(i),a=Tu(e,i,a,o,void 0,d),o=Au(),e!==null&&!on?(Eu(e,i,d),wt(e,i,d)):(Ne&&o&&nu(i),i.flags|=1,Cn(e,i,a,d),i.child)}function gf(e,i,a,o,d,m){return Pi(i),i.updateQueue=null,a=_m(i,o,a,d),vm(e),o=Au(),e!==null&&!on?(Eu(e,i,m),wt(e,i,m)):(Ne&&o&&nu(i),i.flags|=1,Cn(e,i,a,m),i.child)}function vf(e,i,a,o,d){if(Pi(i),i.stateNode===null){var m=gs,_=a.contextType;typeof _=="object"&&_!==null&&(m=_n(_)),m=new a(o,m),i.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=wu,i.stateNode=m,m._reactInternals=i,m=i.stateNode,m.props=o,m.state=i.memoizedState,m.refs={},pu(i),_=a.contextType,m.context=typeof _=="object"&&_!==null?_n(_):gs,m.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(Lu(i,a,_,o),m.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(_=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),_!==m.state&&wu.enqueueReplaceState(m,m.state,null),Da(i,o,m,d),Oa(),m.state=i.memoizedState),typeof m.componentDidMount=="function"&&(i.flags|=4194308),o=!0}else if(e===null){m=i.stateNode;var A=i.memoizedProps,R=Ui(a,A);m.props=R;var w=m.context,F=a.contextType;_=gs,typeof F=="object"&&F!==null&&(_=_n(F));var K=a.getDerivedStateFromProps;F=typeof K=="function"||typeof m.getSnapshotBeforeUpdate=="function",A=i.pendingProps!==A,F||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(A||w!==_)&&tf(i,m,o,_),ti=!1;var k=i.memoizedState;m.state=k,Da(i,o,m,d),Oa(),w=i.memoizedState,A||k!==w||ti?(typeof K=="function"&&(Lu(i,a,K,o),w=i.memoizedState),(R=ti||nf(i,a,R,o,k,w,_))?(F||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(i.flags|=4194308)):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=o,i.memoizedState=w),m.props=o,m.state=w,m.context=_,o=R):(typeof m.componentDidMount=="function"&&(i.flags|=4194308),o=!1)}else{m=i.stateNode,mu(e,i),_=i.memoizedProps,F=Ui(a,_),m.props=F,K=i.pendingProps,k=m.context,w=a.contextType,R=gs,typeof w=="object"&&w!==null&&(R=_n(w)),A=a.getDerivedStateFromProps,(w=typeof A=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_!==K||k!==R)&&tf(i,m,o,R),ti=!1,k=i.memoizedState,m.state=k,Da(i,o,m,d),Oa();var z=i.memoizedState;_!==K||k!==z||ti||e!==null&&e.dependencies!==null&&Jr(e.dependencies)?(typeof A=="function"&&(Lu(i,a,A,o),z=i.memoizedState),(F=ti||nf(i,a,F,o,k,z,R)||e!==null&&e.dependencies!==null&&Jr(e.dependencies))?(w||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,z,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,z,R)),typeof m.componentDidUpdate=="function"&&(i.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&k===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&k===e.memoizedState||(i.flags|=1024),i.memoizedProps=o,i.memoizedState=z),m.props=o,m.state=z,m.context=R,o=F):(typeof m.componentDidUpdate!="function"||_===e.memoizedProps&&k===e.memoizedState||(i.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&k===e.memoizedState||(i.flags|=1024),o=!1)}return m=o,ho(e,i),o=(i.flags&128)!==0,m||o?(m=i.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),i.flags|=1,e!==null&&o?(i.child=ji(i,e.child,null,d),i.child=ji(i,null,a,d)):Cn(e,i,a,d),i.memoizedState=m.state,e=i.child):e=wt(e,i,d),e}function _f(e,i,a,o){return Vi(),i.flags|=256,Cn(e,i,a,o),i.child}var zu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fu(e){return{baseLanes:e,cachePool:rm()}}function Gu(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Kn),e}function Cf(e,i,a){var o=i.pendingProps,d=!1,m=(i.flags&128)!==0,_;if((_=m)||(_=e!==null&&e.memoizedState===null?!1:(tn.current&2)!==0),_&&(d=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ne){if(d?ai(i):ri(),(e=$e)?(e=Rh(e,rt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Xt!==null?{id:Ct,overflow:Tt}:null,retryLane:536870912,hydrationErrors:null},a=Wp(e),a.return=i,i.child=a,vn=i,$e=null)):e=null,e===null)throw ei(i);return bc(e)?i.lanes=32:i.lanes=536870912,null}var A=o.children;return o=o.fallback,d?(ri(),d=i.mode,A=go({mode:"hidden",children:A},d),o=Ni(o,d,a,null),A.return=i,o.return=i,A.sibling=o,i.child=A,o=i.child,o.memoizedState=Fu(a),o.childLanes=Gu(e,_,a),i.memoizedState=zu,Pa(null,o)):(ai(i),Hu(i,A))}var R=e.memoizedState;if(R!==null&&(A=R.dehydrated,A!==null)){if(m)i.flags&256?(ai(i),i.flags&=-257,i=Bu(e,i,a)):i.memoizedState!==null?(ri(),i.child=e.child,i.flags|=128,i=null):(ri(),A=o.fallback,d=i.mode,o=go({mode:"visible",children:o.children},d),A=Ni(A,d,a,null),A.flags|=2,o.return=i,A.return=i,o.sibling=A,i.child=o,ji(i,e.child,null,a),o=i.child,o.memoizedState=Fu(a),o.childLanes=Gu(e,_,a),i.memoizedState=zu,i=Pa(null,o));else if(ai(i),bc(A)){if(_=A.nextSibling&&A.nextSibling.dataset,_)var w=_.dgst;_=w,o=Error(r(419)),o.stack="",o.digest=_,Ea({value:o,source:null,stack:null}),i=Bu(e,i,a)}else if(on||Ts(e,i,a,!1),_=(a&e.childLanes)!==0,on||_){if(_=He,_!==null&&(o=sp(_,a),o!==0&&o!==R.retryLane))throw R.retryLane=o,qi(e,o),jn(_,e,o),ku;Mc(A)||bo(),i=Bu(e,i,a)}else Mc(A)?(i.flags|=192,i.child=e.child,i=null):(e=R.treeContext,$e=lt(A.nextSibling),vn=i,Ne=!0,Zt=null,rt=!1,e!==null&&em(i,e),i=Hu(i,o.children),i.flags|=4096);return i}return d?(ri(),A=o.fallback,d=i.mode,R=e.child,w=R.sibling,o=Nt(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,w!==null?A=Nt(w,A):(A=Ni(A,d,a,null),A.flags|=2),A.return=i,o.return=i,o.sibling=A,i.child=o,Pa(null,o),o=i.child,A=e.child.memoizedState,A===null?A=Fu(a):(d=A.cachePool,d!==null?(R=an._currentValue,d=d.parent!==R?{parent:R,pool:R}:d):d=rm(),A={baseLanes:A.baseLanes|a,cachePool:d}),o.memoizedState=A,o.childLanes=Gu(e,_,a),i.memoizedState=zu,Pa(e.child,o)):(ai(i),a=e.child,e=a.sibling,a=Nt(a,{mode:"visible",children:o.children}),a.return=i,a.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=a,i.memoizedState=null,a)}function Hu(e,i){return i=go({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function go(e,i){return e=Gn(22,e,null,i),e.lanes=0,e}function Bu(e,i,a){return ji(i,e.child,null,a),e=Hu(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Tf(e,i,a){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i),ru(e.return,i,a)}function Qu(e,i,a,o,d,m){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:d,treeForkCount:m}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=a,_.tailMode=d,_.treeForkCount=m)}function Af(e,i,a){var o=i.pendingProps,d=o.revealOrder,m=o.tail;o=o.children;var _=tn.current,A=(_&2)!==0;if(A?(_=_&1|2,i.flags|=128):_&=1,S(tn,_),Cn(e,i,o,a),o=Ne?Aa:0,!A&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Tf(e,a,i);else if(e.tag===19)Tf(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=i.child,d=null;a!==null;)e=a.alternate,e!==null&&io(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Qu(i,!1,d,a,m,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(e=d.alternate,e!==null&&io(e)===null){i.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}Qu(i,!0,a,null,m,o);break;case"together":Qu(i,!1,null,null,void 0,o);break;default:i.memoizedState=null}return i.child}function wt(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),ui|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(Ts(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=Nt(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Nt(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function Ku(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Jr(e)))}function iT(e,i,a){switch(i.tag){case 3:Ye(i,i.stateNode.containerInfo),ni(i,an,e.memoizedState.cache),Vi();break;case 27:case 5:Zn(i);break;case 4:Ye(i,i.stateNode.containerInfo);break;case 10:ni(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,_u(i),null;break;case 13:var o=i.memoizedState;if(o!==null)return o.dehydrated!==null?(ai(i),i.flags|=128,null):(a&i.child.childLanes)!==0?Cf(e,i,a):(ai(i),e=wt(e,i,a),e!==null?e.sibling:null);ai(i);break;case 19:var d=(e.flags&128)!==0;if(o=(a&i.childLanes)!==0,o||(Ts(e,i,a,!1),o=(a&i.childLanes)!==0),d){if(o)return Af(e,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),S(tn,tn.current),o)break;return null;case 22:return i.lanes=0,mf(e,i,a,i.pendingProps);case 24:ni(i,an,e.memoizedState.cache)}return wt(e,i,a)}function Ef(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)on=!0;else{if(!Ku(e,a)&&(i.flags&128)===0)return on=!1,iT(e,i,a);on=(e.flags&131072)!==0}else on=!1,Ne&&(i.flags&1048576)!==0&&Zp(i,Aa,i.index);switch(i.lanes=0,i.tag){case 16:e:{var o=i.pendingProps;if(e=Li(i.elementType),i.type=e,typeof e=="function")Xl(e)?(o=Ui(e,o),i.tag=1,i=vf(null,i,e,o,a)):(i.tag=0,i=Uu(null,i,e,o,a));else{if(e!=null){var d=e.$$typeof;if(d===G){i.tag=11,i=cf(null,i,e,o,a);break e}else if(d===$){i.tag=14,i=df(null,i,e,o,a);break e}}throw i=ie(e)||e,Error(r(306,i,""))}}return i;case 0:return Uu(e,i,i.type,i.pendingProps,a);case 1:return o=i.type,d=Ui(o,i.pendingProps),vf(e,i,o,d,a);case 3:e:{if(Ye(i,i.stateNode.containerInfo),e===null)throw Error(r(387));o=i.pendingProps;var m=i.memoizedState;d=m.element,mu(e,i),Da(i,o,null,a);var _=i.memoizedState;if(o=_.cache,ni(i,an,o),o!==m.cache&&ou(i,[an],a,!0),Oa(),o=_.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){i=_f(e,i,o,a);break e}else if(o!==d){d=it(Error(r(424)),i),Ea(d),i=_f(e,i,o,a);break e}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for($e=lt(e.firstChild),vn=i,Ne=!0,Zt=null,rt=!0,a=pm(i,null,o,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Vi(),o===d){i=wt(e,i,a);break e}Cn(e,i,o,a)}i=i.child}return i;case 26:return ho(e,i),e===null?(a=Ih(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ne||(a=i.type,e=i.pendingProps,o=Vo(ce.current).createElement(a),o[gn]=i,o[Vn]=e,Tn(o,a,e),fn(o),i.stateNode=o):i.memoizedState=Ih(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Zn(i),e===null&&Ne&&(o=i.stateNode=qh(i.type,i.pendingProps,ce.current),vn=i,rt=!0,d=$e,fi(i.type)?(yc=d,$e=lt(o.firstChild)):$e=d),Cn(e,i,i.pendingProps.children,a),ho(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ne&&((d=o=$e)&&(o=IT(o,i.type,i.pendingProps,rt),o!==null?(i.stateNode=o,vn=i,$e=lt(o.firstChild),rt=!1,d=!0):d=!1),d||ei(i)),Zn(i),d=i.type,m=i.pendingProps,_=e!==null?e.memoizedProps:null,o=m.children,Ac(d,m)?o=null:_!==null&&Ac(d,_)&&(i.flags|=32),i.memoizedState!==null&&(d=Tu(e,i,$C,null,null,a),Ja._currentValue=d),ho(e,i),Cn(e,i,o,a),i.child;case 6:return e===null&&Ne&&((e=a=$e)&&(a=PT(a,i.pendingProps,rt),a!==null?(i.stateNode=a,vn=i,$e=null,e=!0):e=!1),e||ei(i)),null;case 13:return Cf(e,i,a);case 4:return Ye(i,i.stateNode.containerInfo),o=i.pendingProps,e===null?i.child=ji(i,null,o,a):Cn(e,i,o,a),i.child;case 11:return cf(e,i,i.type,i.pendingProps,a);case 7:return Cn(e,i,i.pendingProps,a),i.child;case 8:return Cn(e,i,i.pendingProps.children,a),i.child;case 12:return Cn(e,i,i.pendingProps.children,a),i.child;case 10:return o=i.pendingProps,ni(i,i.type,o.value),Cn(e,i,o.children,a),i.child;case 9:return d=i.type._context,o=i.pendingProps.children,Pi(i),d=_n(d),o=o(d),i.flags|=1,Cn(e,i,o,a),i.child;case 14:return df(e,i,i.type,i.pendingProps,a);case 15:return pf(e,i,i.type,i.pendingProps,a);case 19:return Af(e,i,a);case 31:return tT(e,i,a);case 22:return mf(e,i,a,i.pendingProps);case 24:return Pi(i),o=_n(an),e===null?(d=cu(),d===null&&(d=He,m=lu(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),i.memoizedState={parent:o,cache:d},pu(i),ni(i,an,d)):((e.lanes&a)!==0&&(mu(e,i),Da(i,null,null,a),Oa()),d=e.memoizedState,m=i.memoizedState,d.parent!==o?(d={parent:o,cache:o},i.memoizedState=d,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=d),ni(i,an,o)):(o=m.cache,ni(i,an,o),o!==d.cache&&ou(i,[an],a,!0))),Cn(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function jt(e){e.flags|=4}function $u(e,i,a,o,d){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Jf())e.flags|=8192;else throw wi=Zr,du}else e.flags&=-16777217}function Sf(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!jh(i))if(Jf())e.flags|=8192;else throw wi=Zr,du}function vo(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?np():536870912,e.lanes|=i,Vs|=i)}function xa(e,i){if(!Ne)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Je(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(i)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=a,i}function sT(e,i,a){var o=i.pendingProps;switch(tu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(i),null;case 1:return Je(i),null;case 3:return a=i.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),i.memoizedState.cache!==o&&(i.flags|=2048),Pt(an),ke(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Cs(i)?jt(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,su())),Je(i),null;case 26:var d=i.type,m=i.memoizedState;return e===null?(jt(i),m!==null?(Je(i),Sf(i,m)):(Je(i),$u(i,d,null,o,a))):m?m!==e.memoizedState?(jt(i),Je(i),Sf(i,m)):(Je(i),i.flags&=-16777217):(e=e.memoizedProps,e!==o&&jt(i),Je(i),$u(i,d,e,o,a)),null;case 27:if(bt(i),a=ce.current,d=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&jt(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return Je(i),null}e=te.current,Cs(i)?nm(i):(e=qh(d,o,a),i.stateNode=e,jt(i))}return Je(i),null;case 5:if(bt(i),d=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==o&&jt(i);else{if(!o){if(i.stateNode===null)throw Error(r(166));return Je(i),null}if(m=te.current,Cs(i))nm(i);else{var _=Vo(ce.current);switch(m){case 1:m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=_.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=_.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=_.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?_.createElement(d,{is:o.is}):_.createElement(d)}}m[gn]=i,m[Vn]=o;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)m.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=m;e:switch(Tn(m,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&jt(i)}}return Je(i),$u(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==o&&jt(i);else{if(typeof o!="string"&&i.stateNode===null)throw Error(r(166));if(e=ce.current,Cs(i)){if(e=i.stateNode,a=i.memoizedProps,o=null,d=vn,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[gn]=i,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||Ch(e.nodeValue,a)),e||ei(i,!0)}else e=Vo(e).createTextNode(o),e[gn]=i,i.stateNode=e}return Je(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(o=Cs(i),a!==null){if(e===null){if(!o)throw Error(r(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[gn]=i}else Vi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Je(i),e=!1}else a=su(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(Bn(i),i):(Bn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return Je(i),null;case 13:if(o=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Cs(i),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(r(318));if(d=i.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[gn]=i}else Vi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Je(i),d=!1}else d=su(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return i.flags&256?(Bn(i),i):(Bn(i),null)}return Bn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=i.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==d&&(o.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),vo(i,i.updateQueue),Je(i),null);case 4:return ke(),e===null&&gc(i.stateNode.containerInfo),Je(i),null;case 10:return Pt(i.type),Je(i),null;case 19:if(H(tn),o=i.memoizedState,o===null)return Je(i),null;if(d=(i.flags&128)!==0,m=o.rendering,m===null)if(d)xa(o,!1);else{if(en!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(m=io(e),m!==null){for(i.flags|=128,xa(o,!1),e=m.updateQueue,i.updateQueue=e,vo(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Yp(a,e),a=a.sibling;return S(tn,tn.current&1|2),Ne&&Vt(i,o.treeForkCount),i.child}e=e.sibling}o.tail!==null&&yn()>Eo&&(i.flags|=128,d=!0,xa(o,!1),i.lanes=4194304)}else{if(!d)if(e=io(m),e!==null){if(i.flags|=128,d=!0,e=e.updateQueue,i.updateQueue=e,vo(i,e),xa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!Ne)return Je(i),null}else 2*yn()-o.renderingStartTime>Eo&&a!==536870912&&(i.flags|=128,d=!0,xa(o,!1),i.lanes=4194304);o.isBackwards?(m.sibling=i.child,i.child=m):(e=o.last,e!==null?e.sibling=m:i.child=m,o.last=m)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=yn(),e.sibling=null,a=tn.current,S(tn,d?a&1|2:a&1),Ne&&Vt(i,o.treeForkCount),e):(Je(i),null);case 22:case 23:return Bn(i),vu(),o=i.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(i.flags|=8192):o&&(i.flags|=8192),o?(a&536870912)!==0&&(i.flags&128)===0&&(Je(i),i.subtreeFlags&6&&(i.flags|=8192)):Je(i),a=i.updateQueue,a!==null&&vo(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==a&&(i.flags|=2048),e!==null&&H(xi),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Pt(an),Je(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function aT(e,i){switch(tu(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Pt(an),ke(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return bt(i),null;case 31:if(i.memoizedState!==null){if(Bn(i),i.alternate===null)throw Error(r(340));Vi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Bn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));Vi()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return H(tn),null;case 4:return ke(),null;case 10:return Pt(i.type),null;case 22:case 23:return Bn(i),vu(),e!==null&&H(xi),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Pt(an),null;case 25:return null;default:return null}}function Mf(e,i){switch(tu(i),i.tag){case 3:Pt(an),ke();break;case 26:case 27:case 5:bt(i);break;case 4:ke();break;case 31:i.memoizedState!==null&&Bn(i);break;case 13:Bn(i);break;case 19:H(tn);break;case 10:Pt(i.type);break;case 22:case 23:Bn(i),vu(),e!==null&&H(xi);break;case 24:Pt(an)}}function La(e,i){try{var a=i.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var d=o.next;a=d;do{if((a.tag&e)===e){o=void 0;var m=a.create,_=a.inst;o=m(),_.destroy=o}a=a.next}while(a!==d)}}catch(A){je(i,i.return,A)}}function oi(e,i,a){try{var o=i.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var m=d.next;o=m;do{if((o.tag&e)===e){var _=o.inst,A=_.destroy;if(A!==void 0){_.destroy=void 0,d=i;var R=a,w=A;try{w()}catch(F){je(d,R,F)}}}o=o.next}while(o!==m)}}catch(F){je(i,i.return,F)}}function bf(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{fm(i,a)}catch(o){je(e,e.return,o)}}}function yf(e,i,a){a.props=Ui(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){je(e,i,o)}}function wa(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(d){je(e,i,d)}}function At(e,i){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(d){je(e,i,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){je(e,i,d)}else a.current=null}function Rf(e){var i=e.type,a=e.memoizedProps,o=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break e;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(d){je(e,e.return,d)}}function Ju(e,i,a){try{var o=e.stateNode;RT(o,e.type,a,i),o[Vn]=i}catch(d){je(e,e.return,d)}}function Of(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fi(e.type)||e.tag===4}function Yu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Of(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fi(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Wu(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Dt));else if(o!==4&&(o===27&&fi(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(Wu(e,i,a),e=e.sibling;e!==null;)Wu(e,i,a),e=e.sibling}function _o(e,i,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(o!==4&&(o===27&&fi(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(_o(e,i,a),e=e.sibling;e!==null;)_o(e,i,a),e=e.sibling}function Df(e){var i=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,d=i.attributes;d.length;)i.removeAttributeNode(d[0]);Tn(i,o,a),i[gn]=e,i[Vn]=a}catch(m){je(e,e.return,m)}}var kt=!1,ln=!1,Xu=!1,qf=typeof WeakSet=="function"?WeakSet:Set,hn=null;function rT(e,i){if(e=e.containerInfo,Cc=ko,e=zp(e),Bl(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var d=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var _=0,A=-1,R=-1,w=0,F=0,K=e,k=null;n:for(;;){for(var z;K!==a||d!==0&&K.nodeType!==3||(A=_+d),K!==m||o!==0&&K.nodeType!==3||(R=_+o),K.nodeType===3&&(_+=K.nodeValue.length),(z=K.firstChild)!==null;)k=K,K=z;for(;;){if(K===e)break n;if(k===a&&++w===d&&(A=_),k===m&&++F===o&&(R=_),(z=K.nextSibling)!==null)break;K=k,k=K.parentNode}K=z}a=A===-1||R===-1?null:{start:A,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(Tc={focusedElem:e,selectionRange:a},ko=!1,hn=i;hn!==null;)if(i=hn,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,hn=e;else for(;hn!==null;){switch(i=hn,m=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=i,d=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var se=Ui(a.type,d);e=o.getSnapshotBeforeUpdate(se,m),o.__reactInternalSnapshotBeforeUpdate=e}catch(me){je(a,a.return,me)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)Sc(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Sc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,hn=e;break}hn=i.return}}function Nf(e,i,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:zt(e,a),o&4&&La(5,a);break;case 1:if(zt(e,a),o&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(_){je(a,a.return,_)}else{var d=Ui(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(d,i,e.__reactInternalSnapshotBeforeUpdate)}catch(_){je(a,a.return,_)}}o&64&&bf(a),o&512&&wa(a,a.return);break;case 3:if(zt(e,a),o&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{fm(e,i)}catch(_){je(a,a.return,_)}}break;case 27:i===null&&o&4&&Df(a);case 26:case 5:zt(e,a),i===null&&o&4&&Rf(a),o&512&&wa(a,a.return);break;case 12:zt(e,a);break;case 31:zt(e,a),o&4&&Pf(e,a);break;case 13:zt(e,a),o&4&&xf(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=hT.bind(null,a),xT(e,a))));break;case 22:if(o=a.memoizedState!==null||kt,!o){i=i!==null&&i.memoizedState!==null||ln,d=kt;var m=ln;kt=o,(ln=i)&&!m?Ft(e,a,(a.subtreeFlags&8772)!==0):zt(e,a),kt=d,ln=m}break;case 30:break;default:zt(e,a)}}function Vf(e){var i=e.alternate;i!==null&&(e.alternate=null,Vf(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Ol(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var We=null,Pn=!1;function Ut(e,i,a){for(a=a.child;a!==null;)If(e,i,a),a=a.sibling}function If(e,i,a){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(Rn,a)}catch{}switch(a.tag){case 26:ln||At(a,i),Ut(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ln||At(a,i);var o=We,d=Pn;fi(a.type)&&(We=a.stateNode,Pn=!1),Ut(e,i,a),Qa(a.stateNode),We=o,Pn=d;break;case 5:ln||At(a,i);case 6:if(o=We,d=Pn,We=null,Ut(e,i,a),We=o,Pn=d,We!==null)if(Pn)try{(We.nodeType===9?We.body:We.nodeName==="HTML"?We.ownerDocument.body:We).removeChild(a.stateNode)}catch(m){je(a,i,m)}else try{We.removeChild(a.stateNode)}catch(m){je(a,i,m)}break;case 18:We!==null&&(Pn?(e=We,bh(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Us(e)):bh(We,a.stateNode));break;case 4:o=We,d=Pn,We=a.stateNode.containerInfo,Pn=!0,Ut(e,i,a),We=o,Pn=d;break;case 0:case 11:case 14:case 15:oi(2,a,i),ln||oi(4,a,i),Ut(e,i,a);break;case 1:ln||(At(a,i),o=a.stateNode,typeof o.componentWillUnmount=="function"&&yf(a,i,o)),Ut(e,i,a);break;case 21:Ut(e,i,a);break;case 22:ln=(o=ln)||a.memoizedState!==null,Ut(e,i,a),ln=o;break;default:Ut(e,i,a)}}function Pf(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Us(e)}catch(a){je(i,i.return,a)}}}function xf(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Us(e)}catch(a){je(i,i.return,a)}}function oT(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new qf),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new qf),i;default:throw Error(r(435,e.tag))}}function Co(e,i){var a=oT(e);i.forEach(function(o){if(!a.has(o)){a.add(o);var d=gT.bind(null,e,o);o.then(d,d)}})}function xn(e,i){var a=i.deletions;if(a!==null)for(var o=0;o<a.length;o++){var d=a[o],m=e,_=i,A=_;e:for(;A!==null;){switch(A.tag){case 27:if(fi(A.type)){We=A.stateNode,Pn=!1;break e}break;case 5:We=A.stateNode,Pn=!1;break e;case 3:case 4:We=A.stateNode.containerInfo,Pn=!0;break e}A=A.return}if(We===null)throw Error(r(160));If(m,_,d),We=null,Pn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Lf(i,e),i=i.sibling}var mt=null;function Lf(e,i){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:xn(i,e),Ln(e),o&4&&(oi(3,e,e.return),La(3,e),oi(5,e,e.return));break;case 1:xn(i,e),Ln(e),o&512&&(ln||a===null||At(a,a.return)),o&64&&kt&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var d=mt;if(xn(i,e),Ln(e),o&512&&(ln||a===null||At(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){e:{o=e.type,a=e.memoizedProps,d=d.ownerDocument||d;n:switch(o){case"title":m=d.getElementsByTagName("title")[0],(!m||m[ca]||m[gn]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(o),d.head.insertBefore(m,d.querySelector("head > title"))),Tn(m,o,a),m[gn]=e,fn(m),o=m;break e;case"link":var _=Lh("link","href",d).get(o+(a.href||""));if(_){for(var A=0;A<_.length;A++)if(m=_[A],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(A,1);break n}}m=d.createElement(o),Tn(m,o,a),d.head.appendChild(m);break;case"meta":if(_=Lh("meta","content",d).get(o+(a.content||""))){for(A=0;A<_.length;A++)if(m=_[A],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(A,1);break n}}m=d.createElement(o),Tn(m,o,a),d.head.appendChild(m);break;default:throw Error(r(468,o))}m[gn]=e,fn(m),o=m}e.stateNode=o}else wh(d,e.type,e.stateNode);else e.stateNode=xh(d,o,e.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?wh(d,e.type,e.stateNode):xh(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Ju(e,e.memoizedProps,a.memoizedProps)}break;case 27:xn(i,e),Ln(e),o&512&&(ln||a===null||At(a,a.return)),a!==null&&o&4&&Ju(e,e.memoizedProps,a.memoizedProps);break;case 5:if(xn(i,e),Ln(e),o&512&&(ln||a===null||At(a,a.return)),e.flags&32){d=e.stateNode;try{us(d,"")}catch(se){je(e,e.return,se)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,Ju(e,d,a!==null?a.memoizedProps:d)),o&1024&&(Xu=!0);break;case 6:if(xn(i,e),Ln(e),o&4){if(e.stateNode===null)throw Error(r(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(se){je(e,e.return,se)}}break;case 3:if(xo=null,d=mt,mt=Io(i.containerInfo),xn(i,e),mt=d,Ln(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Us(i.containerInfo)}catch(se){je(e,e.return,se)}Xu&&(Xu=!1,wf(e));break;case 4:o=mt,mt=Io(e.stateNode.containerInfo),xn(i,e),Ln(e),mt=o;break;case 12:xn(i,e),Ln(e);break;case 31:xn(i,e),Ln(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Co(e,o)));break;case 13:xn(i,e),Ln(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ao=yn()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Co(e,o)));break;case 22:d=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,w=kt,F=ln;if(kt=w||d,ln=F||R,xn(i,e),ln=F,kt=w,Ln(e),o&8192)e:for(i=e.stateNode,i._visibility=d?i._visibility&-2:i._visibility|1,d&&(a===null||R||kt||ln||zi(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){R=a=i;try{if(m=R.stateNode,d)_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{A=R.stateNode;var K=R.memoizedProps.style,k=K!=null&&K.hasOwnProperty("display")?K.display:null;A.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(se){je(R,R.return,se)}}}else if(i.tag===6){if(a===null){R=i;try{R.stateNode.nodeValue=d?"":R.memoizedProps}catch(se){je(R,R.return,se)}}}else if(i.tag===18){if(a===null){R=i;try{var z=R.stateNode;d?yh(z,!0):yh(R.stateNode,!1)}catch(se){je(R,R.return,se)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,Co(e,a))));break;case 19:xn(i,e),Ln(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Co(e,o)));break;case 30:break;case 21:break;default:xn(i,e),Ln(e)}}function Ln(e){var i=e.flags;if(i&2){try{for(var a,o=e.return;o!==null;){if(Of(o)){a=o;break}o=o.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var d=a.stateNode,m=Yu(e);_o(e,m,d);break;case 5:var _=a.stateNode;a.flags&32&&(us(_,""),a.flags&=-33);var A=Yu(e);_o(e,A,_);break;case 3:case 4:var R=a.stateNode.containerInfo,w=Yu(e);Wu(e,w,R);break;default:throw Error(r(161))}}catch(F){je(e,e.return,F)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function wf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;wf(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function zt(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Nf(e,i.alternate,i),i=i.sibling}function zi(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:oi(4,i,i.return),zi(i);break;case 1:At(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&yf(i,i.return,a),zi(i);break;case 27:Qa(i.stateNode);case 26:case 5:At(i,i.return),zi(i);break;case 22:i.memoizedState===null&&zi(i);break;case 30:zi(i);break;default:zi(i)}e=e.sibling}}function Ft(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var o=i.alternate,d=e,m=i,_=m.flags;switch(m.tag){case 0:case 11:case 15:Ft(d,m,a),La(4,m);break;case 1:if(Ft(d,m,a),o=m,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(w){je(o,o.return,w)}if(o=m,d=o.updateQueue,d!==null){var A=o.stateNode;try{var R=d.shared.hiddenCallbacks;if(R!==null)for(d.shared.hiddenCallbacks=null,d=0;d<R.length;d++)mm(R[d],A)}catch(w){je(o,o.return,w)}}a&&_&64&&bf(m),wa(m,m.return);break;case 27:Df(m);case 26:case 5:Ft(d,m,a),a&&o===null&&_&4&&Rf(m),wa(m,m.return);break;case 12:Ft(d,m,a);break;case 31:Ft(d,m,a),a&&_&4&&Pf(d,m);break;case 13:Ft(d,m,a),a&&_&4&&xf(d,m);break;case 22:m.memoizedState===null&&Ft(d,m,a),wa(m,m.return);break;case 30:break;default:Ft(d,m,a)}i=i.sibling}}function Zu(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Sa(a))}function ec(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Sa(e))}function ft(e,i,a,o){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)jf(e,i,a,o),i=i.sibling}function jf(e,i,a,o){var d=i.flags;switch(i.tag){case 0:case 11:case 15:ft(e,i,a,o),d&2048&&La(9,i);break;case 1:ft(e,i,a,o);break;case 3:ft(e,i,a,o),d&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Sa(e)));break;case 12:if(d&2048){ft(e,i,a,o),e=i.stateNode;try{var m=i.memoizedProps,_=m.id,A=m.onPostCommit;typeof A=="function"&&A(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){je(i,i.return,R)}}else ft(e,i,a,o);break;case 31:ft(e,i,a,o);break;case 13:ft(e,i,a,o);break;case 23:break;case 22:m=i.stateNode,_=i.alternate,i.memoizedState!==null?m._visibility&2?ft(e,i,a,o):ja(e,i):m._visibility&2?ft(e,i,a,o):(m._visibility|=2,Ds(e,i,a,o,(i.subtreeFlags&10256)!==0||!1)),d&2048&&Zu(_,i);break;case 24:ft(e,i,a,o),d&2048&&ec(i.alternate,i);break;default:ft(e,i,a,o)}}function Ds(e,i,a,o,d){for(d=d&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var m=e,_=i,A=a,R=o,w=_.flags;switch(_.tag){case 0:case 11:case 15:Ds(m,_,A,R,d),La(8,_);break;case 23:break;case 22:var F=_.stateNode;_.memoizedState!==null?F._visibility&2?Ds(m,_,A,R,d):ja(m,_):(F._visibility|=2,Ds(m,_,A,R,d)),d&&w&2048&&Zu(_.alternate,_);break;case 24:Ds(m,_,A,R,d),d&&w&2048&&ec(_.alternate,_);break;default:Ds(m,_,A,R,d)}i=i.sibling}}function ja(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,o=i,d=o.flags;switch(o.tag){case 22:ja(a,o),d&2048&&Zu(o.alternate,o);break;case 24:ja(a,o),d&2048&&ec(o.alternate,o);break;default:ja(a,o)}i=i.sibling}}var ka=8192;function qs(e,i,a){if(e.subtreeFlags&ka)for(e=e.child;e!==null;)kf(e,i,a),e=e.sibling}function kf(e,i,a){switch(e.tag){case 26:qs(e,i,a),e.flags&ka&&e.memoizedState!==null&&KT(a,mt,e.memoizedState,e.memoizedProps);break;case 5:qs(e,i,a);break;case 3:case 4:var o=mt;mt=Io(e.stateNode.containerInfo),qs(e,i,a),mt=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=ka,ka=16777216,qs(e,i,a),ka=o):qs(e,i,a));break;default:qs(e,i,a)}}function Uf(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Ua(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];hn=o,Ff(o,e)}Uf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)zf(e),e=e.sibling}function zf(e){switch(e.tag){case 0:case 11:case 15:Ua(e),e.flags&2048&&oi(9,e,e.return);break;case 3:Ua(e);break;case 12:Ua(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,To(e)):Ua(e);break;default:Ua(e)}}function To(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var o=i[a];hn=o,Ff(o,e)}Uf(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:oi(8,i,i.return),To(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,To(i));break;default:To(i)}e=e.sibling}}function Ff(e,i){for(;hn!==null;){var a=hn;switch(a.tag){case 0:case 11:case 15:oi(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Sa(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,hn=o;else e:for(a=e;hn!==null;){o=hn;var d=o.sibling,m=o.return;if(Vf(o),o===a){hn=null;break e}if(d!==null){d.return=m,hn=d;break e}hn=m}}}var lT={getCacheForType:function(e){var i=_n(an),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return _n(an).controller.signal}},uT=typeof WeakMap=="function"?WeakMap:Map,xe=0,He=null,be=null,De=0,we=0,Qn=null,li=!1,Ns=!1,nc=!1,Gt=0,en=0,ui=0,Fi=0,tc=0,Kn=0,Vs=0,za=null,wn=null,ic=!1,Ao=0,Gf=0,Eo=1/0,So=null,ci=null,pn=0,di=null,Is=null,Ht=0,sc=0,ac=null,Hf=null,Fa=0,rc=null;function $n(){return(xe&2)!==0&&De!==0?De&-De:U.T!==null?pc():ap()}function Bf(){if(Kn===0)if((De&536870912)===0||Ne){var e=qr;qr<<=1,(qr&3932160)===0&&(qr=262144),Kn=e}else Kn=536870912;return e=Hn.current,e!==null&&(e.flags|=32),Kn}function jn(e,i,a){(e===He&&(we===2||we===9)||e.cancelPendingCommit!==null)&&(Ps(e,0),pi(e,De,Kn,!1)),ua(e,a),((xe&2)===0||e!==He)&&(e===He&&((xe&2)===0&&(Fi|=a),en===4&&pi(e,De,Kn,!1)),Et(e))}function Qf(e,i,a){if((xe&6)!==0)throw Error(r(327));var o=!a&&(i&127)===0&&(i&e.expiredLanes)===0||la(e,i),d=o?pT(e,i):lc(e,i,!0),m=o;do{if(d===0){Ns&&!o&&pi(e,i,0,!1);break}else{if(a=e.current.alternate,m&&!cT(a)){d=lc(e,i,!1),m=!1;continue}if(d===2){if(m=i,e.errorRecoveryDisabledLanes&m)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var A=e;d=za;var R=A.current.memoizedState.isDehydrated;if(R&&(Ps(A,_).flags|=256),_=lc(A,_,!1),_!==2){if(nc&&!R){A.errorRecoveryDisabledLanes|=m,Fi|=m,d=4;break e}m=wn,wn=d,m!==null&&(wn===null?wn=m:wn.push.apply(wn,m))}d=_}if(m=!1,d!==2)continue}}if(d===1){Ps(e,0),pi(e,i,0,!0);break}e:{switch(o=e,m=d,m){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:pi(o,i,Kn,!li);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(d=Ao+300-yn(),10<d)){if(pi(o,i,Kn,!li),Vr(o,0,!0)!==0)break e;Ht=i,o.timeoutHandle=Sh(Kf.bind(null,o,a,wn,So,ic,i,Kn,Fi,Vs,li,m,"Throttled",-0,0),d);break e}Kf(o,a,wn,So,ic,i,Kn,Fi,Vs,li,m,null,-0,0)}}break}while(!0);Et(e)}function Kf(e,i,a,o,d,m,_,A,R,w,F,K,k,z){if(e.timeoutHandle=-1,K=i.subtreeFlags,K&8192||(K&16785408)===16785408){K={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Dt},kf(i,m,K);var se=(m&62914560)===m?Ao-yn():(m&4194048)===m?Gf-yn():0;if(se=$T(K,se),se!==null){Ht=m,e.cancelPendingCommit=se(nh.bind(null,e,i,m,a,o,d,_,A,R,F,K,null,k,z)),pi(e,m,_,!w);return}}nh(e,i,m,a,o,d,_,A,R)}function cT(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var d=a[o],m=d.getSnapshot;d=d.value;try{if(!Fn(m(),d))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function pi(e,i,a,o){i&=~tc,i&=~Fi,e.suspendedLanes|=i,e.pingedLanes&=~i,o&&(e.warmLanes|=i),o=e.expirationTimes;for(var d=i;0<d;){var m=31-Ge(d),_=1<<m;o[m]=-1,d&=~_}a!==0&&tp(e,a,i)}function Mo(){return(xe&6)===0?(Ga(0),!1):!0}function oc(){if(be!==null){if(we===0)var e=be.return;else e=be,It=Ii=null,Su(e),Ms=null,ba=0,e=be;for(;e!==null;)Mf(e.alternate,e),e=e.return;be=null}}function Ps(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,qT(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ht=0,oc(),He=e,be=a=Nt(e.current,null),De=i,we=0,Qn=null,li=!1,Ns=la(e,i),nc=!1,Vs=Kn=tc=Fi=ui=en=0,wn=za=null,ic=!1,(i&8)!==0&&(i|=i&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=i;0<o;){var d=31-Ge(o),m=1<<d;i|=e[d],o&=~m}return Gt=i,Hr(),a}function $f(e,i){Ce=null,U.H=Ia,i===Ss||i===Xr?(i=um(),we=3):i===du?(i=um(),we=4):we=i===ku?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Qn=i,be===null&&(en=1,mo(e,it(i,e.current)))}function Jf(){var e=Hn.current;return e===null?!0:(De&4194048)===De?ot===null:(De&62914560)===De||(De&536870912)!==0?e===ot:!1}function Yf(){var e=U.H;return U.H=Ia,e===null?Ia:e}function Wf(){var e=U.A;return U.A=lT,e}function bo(){en=4,li||(De&4194048)!==De&&Hn.current!==null||(Ns=!0),(ui&134217727)===0&&(Fi&134217727)===0||He===null||pi(He,De,Kn,!1)}function lc(e,i,a){var o=xe;xe|=2;var d=Yf(),m=Wf();(He!==e||De!==i)&&(So=null,Ps(e,i)),i=!1;var _=en;e:do try{if(we!==0&&be!==null){var A=be,R=Qn;switch(we){case 8:oc(),_=6;break e;case 3:case 2:case 9:case 6:Hn.current===null&&(i=!0);var w=we;if(we=0,Qn=null,xs(e,A,R,w),a&&Ns){_=0;break e}break;default:w=we,we=0,Qn=null,xs(e,A,R,w)}}dT(),_=en;break}catch(F){$f(e,F)}while(!0);return i&&e.shellSuspendCounter++,It=Ii=null,xe=o,U.H=d,U.A=m,be===null&&(He=null,De=0,Hr()),_}function dT(){for(;be!==null;)Xf(be)}function pT(e,i){var a=xe;xe|=2;var o=Yf(),d=Wf();He!==e||De!==i?(So=null,Eo=yn()+500,Ps(e,i)):Ns=la(e,i);e:do try{if(we!==0&&be!==null){i=be;var m=Qn;n:switch(we){case 1:we=0,Qn=null,xs(e,i,m,1);break;case 2:case 9:if(om(m)){we=0,Qn=null,Zf(i);break}i=function(){we!==2&&we!==9||He!==e||(we=7),Et(e)},m.then(i,i);break e;case 3:we=7;break e;case 4:we=5;break e;case 7:om(m)?(we=0,Qn=null,Zf(i)):(we=0,Qn=null,xs(e,i,m,7));break;case 5:var _=null;switch(be.tag){case 26:_=be.memoizedState;case 5:case 27:var A=be;if(_?jh(_):A.stateNode.complete){we=0,Qn=null;var R=A.sibling;if(R!==null)be=R;else{var w=A.return;w!==null?(be=w,yo(w)):be=null}break n}}we=0,Qn=null,xs(e,i,m,5);break;case 6:we=0,Qn=null,xs(e,i,m,6);break;case 8:oc(),en=6;break e;default:throw Error(r(462))}}mT();break}catch(F){$f(e,F)}while(!0);return It=Ii=null,U.H=o,U.A=d,xe=a,be!==null?0:(He=null,De=0,Hr(),en)}function mT(){for(;be!==null&&!Al();)Xf(be)}function Xf(e){var i=Ef(e.alternate,e,Gt);e.memoizedProps=e.pendingProps,i===null?yo(e):be=i}function Zf(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=gf(a,i,i.pendingProps,i.type,void 0,De);break;case 11:i=gf(a,i,i.pendingProps,i.type.render,i.ref,De);break;case 5:Su(i);default:Mf(a,i),i=be=Yp(i,Gt),i=Ef(a,i,Gt)}e.memoizedProps=e.pendingProps,i===null?yo(e):be=i}function xs(e,i,a,o){It=Ii=null,Su(i),Ms=null,ba=0;var d=i.return;try{if(nT(e,d,i,a,De)){en=1,mo(e,it(a,e.current)),be=null;return}}catch(m){if(d!==null)throw be=d,m;en=1,mo(e,it(a,e.current)),be=null;return}i.flags&32768?(Ne||o===1?e=!0:Ns||(De&536870912)!==0?e=!1:(li=e=!0,(o===2||o===9||o===3||o===6)&&(o=Hn.current,o!==null&&o.tag===13&&(o.flags|=16384))),eh(i,e)):yo(i)}function yo(e){var i=e;do{if((i.flags&32768)!==0){eh(i,li);return}e=i.return;var a=sT(i.alternate,i,Gt);if(a!==null){be=a;return}if(i=i.sibling,i!==null){be=i;return}be=i=e}while(i!==null);en===0&&(en=5)}function eh(e,i){do{var a=aT(e.alternate,e);if(a!==null){a.flags&=32767,be=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){be=e;return}be=e=a}while(e!==null);en=6,be=null}function nh(e,i,a,o,d,m,_,A,R){e.cancelPendingCommit=null;do Ro();while(pn!==0);if((xe&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(m=i.lanes|i.childLanes,m|=Yl,Q_(e,a,m,_,A,R),e===He&&(be=He=null,De=0),Is=i,di=e,Ht=a,sc=m,ac=d,Hf=o,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,vT(ve,function(){return rh(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||o){o=U.T,U.T=null,d=Y.p,Y.p=2,_=xe,xe|=4;try{rT(e,i,a)}finally{xe=_,Y.p=d,U.T=o}}pn=1,th(),ih(),sh()}}function th(){if(pn===1){pn=0;var e=di,i=Is,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=U.T,U.T=null;var o=Y.p;Y.p=2;var d=xe;xe|=4;try{Lf(i,e);var m=Tc,_=zp(e.containerInfo),A=m.focusedElem,R=m.selectionRange;if(_!==A&&A&&A.ownerDocument&&Up(A.ownerDocument.documentElement,A)){if(R!==null&&Bl(A)){var w=R.start,F=R.end;if(F===void 0&&(F=w),"selectionStart"in A)A.selectionStart=w,A.selectionEnd=Math.min(F,A.value.length);else{var K=A.ownerDocument||document,k=K&&K.defaultView||window;if(k.getSelection){var z=k.getSelection(),se=A.textContent.length,me=Math.min(R.start,se),Fe=R.end===void 0?me:Math.min(R.end,se);!z.extend&&me>Fe&&(_=Fe,Fe=me,me=_);var P=kp(A,me),N=kp(A,Fe);if(P&&N&&(z.rangeCount!==1||z.anchorNode!==P.node||z.anchorOffset!==P.offset||z.focusNode!==N.node||z.focusOffset!==N.offset)){var L=K.createRange();L.setStart(P.node,P.offset),z.removeAllRanges(),me>Fe?(z.addRange(L),z.extend(N.node,N.offset)):(L.setEnd(N.node,N.offset),z.addRange(L))}}}}for(K=[],z=A;z=z.parentNode;)z.nodeType===1&&K.push({element:z,left:z.scrollLeft,top:z.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<K.length;A++){var Q=K[A];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}ko=!!Cc,Tc=Cc=null}finally{xe=d,Y.p=o,U.T=a}}e.current=i,pn=2}}function ih(){if(pn===2){pn=0;var e=di,i=Is,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=U.T,U.T=null;var o=Y.p;Y.p=2;var d=xe;xe|=4;try{Nf(e,i.alternate,i)}finally{xe=d,Y.p=o,U.T=a}}pn=3}}function sh(){if(pn===4||pn===3){pn=0,El();var e=di,i=Is,a=Ht,o=Hf;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?pn=5:(pn=0,Is=di=null,ah(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(ci=null),yl(a),i=i.stateNode,dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(Rn,i,void 0,(i.current.flags&128)===128)}catch{}if(o!==null){i=U.T,d=Y.p,Y.p=2,U.T=null;try{for(var m=e.onRecoverableError,_=0;_<o.length;_++){var A=o[_];m(A.value,{componentStack:A.stack})}}finally{U.T=i,Y.p=d}}(Ht&3)!==0&&Ro(),Et(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===rc?Fa++:(Fa=0,rc=e):Fa=0,Ga(0)}}function ah(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Sa(i)))}function Ro(){return th(),ih(),sh(),rh()}function rh(){if(pn!==5)return!1;var e=di,i=sc;sc=0;var a=yl(Ht),o=U.T,d=Y.p;try{Y.p=32>a?32:a,U.T=null,a=ac,ac=null;var m=di,_=Ht;if(pn=0,Is=di=null,Ht=0,(xe&6)!==0)throw Error(r(331));var A=xe;if(xe|=4,zf(m.current),jf(m,m.current,_,a),xe=A,Ga(0,!1),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(Rn,m)}catch{}return!0}finally{Y.p=d,U.T=o,ah(e,i)}}function oh(e,i,a){i=it(a,i),i=ju(e.stateNode,i,2),e=si(e,i,2),e!==null&&(ua(e,2),Et(e))}function je(e,i,a){if(e.tag===3)oh(e,e,a);else for(;i!==null;){if(i.tag===3){oh(i,e,a);break}else if(i.tag===1){var o=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ci===null||!ci.has(o))){e=it(a,e),a=lf(2),o=si(i,a,2),o!==null&&(uf(a,o,i,e),ua(o,2),Et(o));break}}i=i.return}}function uc(e,i,a){var o=e.pingCache;if(o===null){o=e.pingCache=new uT;var d=new Set;o.set(i,d)}else d=o.get(i),d===void 0&&(d=new Set,o.set(i,d));d.has(a)||(nc=!0,d.add(a),e=fT.bind(null,e,i,a),i.then(e,e))}function fT(e,i,a){var o=e.pingCache;o!==null&&o.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,He===e&&(De&a)===a&&(en===4||en===3&&(De&62914560)===De&&300>yn()-Ao?(xe&2)===0&&Ps(e,0):tc|=a,Vs===De&&(Vs=0)),Et(e)}function lh(e,i){i===0&&(i=np()),e=qi(e,i),e!==null&&(ua(e,i),Et(e))}function hT(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),lh(e,a)}function gT(e,i){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(r(314))}o!==null&&o.delete(i),lh(e,a)}function vT(e,i){return ts(e,i)}var Oo=null,Ls=null,cc=!1,Do=!1,dc=!1,mi=0;function Et(e){e!==Ls&&e.next===null&&(Ls===null?Oo=Ls=e:Ls=Ls.next=e),Do=!0,cc||(cc=!0,CT())}function Ga(e,i){if(!dc&&Do){dc=!0;do for(var a=!1,o=Oo;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var m=0;else{var _=o.suspendedLanes,A=o.pingedLanes;m=(1<<31-Ge(42|e)+1)-1,m&=d&~(_&~A),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,ph(o,m))}else m=De,m=Vr(o,o===He?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||la(o,m)||(a=!0,ph(o,m));o=o.next}while(a);dc=!1}}function _T(){uh()}function uh(){Do=cc=!1;var e=0;mi!==0&&DT()&&(e=mi);for(var i=yn(),a=null,o=Oo;o!==null;){var d=o.next,m=ch(o,i);m===0?(o.next=null,a===null?Oo=d:a.next=d,d===null&&(Ls=a)):(a=o,(e!==0||(m&3)!==0)&&(Do=!0)),o=d}pn!==0&&pn!==5||Ga(e),mi!==0&&(mi=0)}function ch(e,i){for(var a=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var _=31-Ge(m),A=1<<_,R=d[_];R===-1?((A&a)===0||(A&o)!==0)&&(d[_]=B_(A,i)):R<=i&&(e.expiredLanes|=A),m&=~A}if(i=He,a=De,a=Vr(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===i&&(we===2||we===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&oa(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||la(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(o!==null&&oa(o),yl(a)){case 2:case 8:a=Z;break;case 32:a=ve;break;case 268435456:a=Le;break;default:a=ve}return o=dh.bind(null,e),a=ts(a,o),e.callbackPriority=i,e.callbackNode=a,i}return o!==null&&o!==null&&oa(o),e.callbackPriority=2,e.callbackNode=null,2}function dh(e,i){if(pn!==0&&pn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Ro()&&e.callbackNode!==a)return null;var o=De;return o=Vr(e,e===He?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Qf(e,o,i),ch(e,yn()),e.callbackNode!=null&&e.callbackNode===a?dh.bind(null,e):null)}function ph(e,i){if(Ro())return null;Qf(e,i,!0)}function CT(){NT(function(){(xe&6)!==0?ts(B,_T):uh()})}function pc(){if(mi===0){var e=As;e===0&&(e=Dr,Dr<<=1,(Dr&261888)===0&&(Dr=256)),mi=e}return mi}function mh(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Lr(""+e)}function fh(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function TT(e,i,a,o,d){if(i==="submit"&&a&&a.stateNode===d){var m=mh((d[Vn]||null).action),_=o.submitter;_&&(i=(i=_[Vn]||null)?mh(i.formAction):_.getAttribute("formAction"),i!==null&&(m=i,_=null));var A=new Ur("action","action",null,o,d);e.push({event:A,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(mi!==0){var R=_?fh(d,_):new FormData(d);Vu(a,{pending:!0,data:R,method:d.method,action:m},null,R)}}else typeof m=="function"&&(A.preventDefault(),R=_?fh(d,_):new FormData(d),Vu(a,{pending:!0,data:R,method:d.method,action:m},m,R))},currentTarget:d}]})}}for(var mc=0;mc<Jl.length;mc++){var fc=Jl[mc],AT=fc.toLowerCase(),ET=fc[0].toUpperCase()+fc.slice(1);pt(AT,"on"+ET)}pt(Hp,"onAnimationEnd"),pt(Bp,"onAnimationIteration"),pt(Qp,"onAnimationStart"),pt("dblclick","onDoubleClick"),pt("focusin","onFocus"),pt("focusout","onBlur"),pt(jC,"onTransitionRun"),pt(kC,"onTransitionStart"),pt(UC,"onTransitionCancel"),pt(Kp,"onTransitionEnd"),os("onMouseEnter",["mouseout","mouseover"]),os("onMouseLeave",["mouseout","mouseover"]),os("onPointerEnter",["pointerout","pointerover"]),os("onPointerLeave",["pointerout","pointerover"]),yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),yi("onBeforeInput",["compositionend","keypress","textInput","paste"]),yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ha="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ST=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ha));function hh(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],d=o.event;o=o.listeners;e:{var m=void 0;if(i)for(var _=o.length-1;0<=_;_--){var A=o[_],R=A.instance,w=A.currentTarget;if(A=A.listener,R!==m&&d.isPropagationStopped())break e;m=A,d.currentTarget=w;try{m(d)}catch(F){Gr(F)}d.currentTarget=null,m=R}else for(_=0;_<o.length;_++){if(A=o[_],R=A.instance,w=A.currentTarget,A=A.listener,R!==m&&d.isPropagationStopped())break e;m=A,d.currentTarget=w;try{m(d)}catch(F){Gr(F)}d.currentTarget=null,m=R}}}}function ye(e,i){var a=i[Rl];a===void 0&&(a=i[Rl]=new Set);var o=e+"__bubble";a.has(o)||(gh(i,e,2,!1),a.add(o))}function hc(e,i,a){var o=0;i&&(o|=4),gh(a,e,o,i)}var qo="_reactListening"+Math.random().toString(36).slice(2);function gc(e){if(!e[qo]){e[qo]=!0,lp.forEach(function(a){a!=="selectionchange"&&(ST.has(a)||hc(a,!1,e),hc(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[qo]||(i[qo]=!0,hc("selectionchange",!1,i))}}function gh(e,i,a,o){switch(Bh(i)){case 2:var d=WT;break;case 8:d=XT;break;default:d=Nc}a=d.bind(null,i,a,e),d=void 0,!Ll||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(i,a,{capture:!0,passive:d}):e.addEventListener(i,a,!0):d!==void 0?e.addEventListener(i,a,{passive:d}):e.addEventListener(i,a,!1)}function vc(e,i,a,o,d){var m=o;if((i&1)===0&&(i&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var A=o.stateNode.containerInfo;if(A===d)break;if(_===4)for(_=o.return;_!==null;){var R=_.tag;if((R===3||R===4)&&_.stateNode.containerInfo===d)return;_=_.return}for(;A!==null;){if(_=ss(A),_===null)return;if(R=_.tag,R===5||R===6||R===26||R===27){o=m=_;continue e}A=A.parentNode}}o=o.return}Tp(function(){var w=m,F=Pl(a),K=[];e:{var k=$p.get(e);if(k!==void 0){var z=Ur,se=e;switch(e){case"keypress":if(jr(a)===0)break e;case"keydown":case"keyup":z=gC;break;case"focusin":se="focus",z=Ul;break;case"focusout":se="blur",z=Ul;break;case"beforeblur":case"afterblur":z=Ul;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":z=Sp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":z=sC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":z=CC;break;case Hp:case Bp:case Qp:z=oC;break;case Kp:z=AC;break;case"scroll":case"scrollend":z=tC;break;case"wheel":z=SC;break;case"copy":case"cut":case"paste":z=uC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":z=bp;break;case"toggle":case"beforetoggle":z=bC}var me=(i&4)!==0,Fe=!me&&(e==="scroll"||e==="scrollend"),P=me?k!==null?k+"Capture":null:k;me=[];for(var N=w,L;N!==null;){var Q=N;if(L=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||L===null||P===null||(Q=pa(N,P),Q!=null&&me.push(Ba(N,Q,L))),Fe)break;N=N.return}0<me.length&&(k=new z(k,se,null,a,F),K.push({event:k,listeners:me}))}}if((i&7)===0){e:{if(k=e==="mouseover"||e==="pointerover",z=e==="mouseout"||e==="pointerout",k&&a!==Il&&(se=a.relatedTarget||a.fromElement)&&(ss(se)||se[is]))break e;if((z||k)&&(k=F.window===F?F:(k=F.ownerDocument)?k.defaultView||k.parentWindow:window,z?(se=a.relatedTarget||a.toElement,z=w,se=se?ss(se):null,se!==null&&(Fe=u(se),me=se.tag,se!==Fe||me!==5&&me!==27&&me!==6)&&(se=null)):(z=null,se=w),z!==se)){if(me=Sp,Q="onMouseLeave",P="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(me=bp,Q="onPointerLeave",P="onPointerEnter",N="pointer"),Fe=z==null?k:da(z),L=se==null?k:da(se),k=new me(Q,N+"leave",z,a,F),k.target=Fe,k.relatedTarget=L,Q=null,ss(F)===w&&(me=new me(P,N+"enter",se,a,F),me.target=L,me.relatedTarget=Fe,Q=me),Fe=Q,z&&se)n:{for(me=MT,P=z,N=se,L=0,Q=P;Q;Q=me(Q))L++;Q=0;for(var de=N;de;de=me(de))Q++;for(;0<L-Q;)P=me(P),L--;for(;0<Q-L;)N=me(N),Q--;for(;L--;){if(P===N||N!==null&&P===N.alternate){me=P;break n}P=me(P),N=me(N)}me=null}else me=null;z!==null&&vh(K,k,z,me,!1),se!==null&&Fe!==null&&vh(K,Fe,se,me,!0)}}e:{if(k=w?da(w):window,z=k.nodeName&&k.nodeName.toLowerCase(),z==="select"||z==="input"&&k.type==="file")var Ie=Ip;else if(Np(k))if(Pp)Ie=xC;else{Ie=IC;var re=VC}else z=k.nodeName,!z||z.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?w&&Vl(w.elementType)&&(Ie=Ip):Ie=PC;if(Ie&&(Ie=Ie(e,w))){Vp(K,Ie,a,F);break e}re&&re(e,k,w),e==="focusout"&&w&&k.type==="number"&&w.memoizedProps.value!=null&&Nl(k,"number",k.value)}switch(re=w?da(w):window,e){case"focusin":(Np(re)||re.contentEditable==="true")&&(ms=re,Ql=w,Ta=null);break;case"focusout":Ta=Ql=ms=null;break;case"mousedown":Kl=!0;break;case"contextmenu":case"mouseup":case"dragend":Kl=!1,Fp(K,a,F);break;case"selectionchange":if(wC)break;case"keydown":case"keyup":Fp(K,a,F)}var Ae;if(Fl)e:{switch(e){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else ps?Dp(e,a)&&(qe="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(qe="onCompositionStart");qe&&(yp&&a.locale!=="ko"&&(ps||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&ps&&(Ae=Ap()):(Wt=F,wl="value"in Wt?Wt.value:Wt.textContent,ps=!0)),re=No(w,qe),0<re.length&&(qe=new Mp(qe,e,null,a,F),K.push({event:qe,listeners:re}),Ae?qe.data=Ae:(Ae=qp(a),Ae!==null&&(qe.data=Ae)))),(Ae=RC?OC(e,a):DC(e,a))&&(qe=No(w,"onBeforeInput"),0<qe.length&&(re=new Mp("onBeforeInput","beforeinput",null,a,F),K.push({event:re,listeners:qe}),re.data=Ae)),TT(K,e,w,a,F)}hh(K,i)})}function Ba(e,i,a){return{instance:e,listener:i,currentTarget:a}}function No(e,i){for(var a=i+"Capture",o=[];e!==null;){var d=e,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=pa(e,a),d!=null&&o.unshift(Ba(e,d,m)),d=pa(e,i),d!=null&&o.push(Ba(e,d,m))),e.tag===3)return o;e=e.return}return[]}function MT(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function vh(e,i,a,o,d){for(var m=i._reactName,_=[];a!==null&&a!==o;){var A=a,R=A.alternate,w=A.stateNode;if(A=A.tag,R!==null&&R===o)break;A!==5&&A!==26&&A!==27||w===null||(R=w,d?(w=pa(a,m),w!=null&&_.unshift(Ba(a,w,R))):d||(w=pa(a,m),w!=null&&_.push(Ba(a,w,R)))),a=a.return}_.length!==0&&e.push({event:i,listeners:_})}var bT=/\r\n?/g,yT=/\u0000|\uFFFD/g;function _h(e){return(typeof e=="string"?e:""+e).replace(bT,`
`).replace(yT,"")}function Ch(e,i){return i=_h(i),_h(e)===i}function ze(e,i,a,o,d,m){switch(a){case"children":typeof o=="string"?i==="body"||i==="textarea"&&o===""||us(e,o):(typeof o=="number"||typeof o=="bigint")&&i!=="body"&&us(e,""+o);break;case"className":Pr(e,"class",o);break;case"tabIndex":Pr(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Pr(e,a,o);break;case"style":_p(e,o,m);break;case"data":if(i!=="object"){Pr(e,"data",o);break}case"src":case"href":if(o===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Lr(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(i!=="input"&&ze(e,i,"name",d.name,d,null),ze(e,i,"formEncType",d.formEncType,d,null),ze(e,i,"formMethod",d.formMethod,d,null),ze(e,i,"formTarget",d.formTarget,d,null)):(ze(e,i,"encType",d.encType,d,null),ze(e,i,"method",d.method,d,null),ze(e,i,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=Lr(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=Dt);break;case"onScroll":o!=null&&ye("scroll",e);break;case"onScrollEnd":o!=null&&ye("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=Lr(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":ye("beforetoggle",e),ye("toggle",e),Ir(e,"popover",o);break;case"xlinkActuate":Ot(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ot(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ot(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ot(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ot(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ot(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ot(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ot(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ot(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ir(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=eC.get(a)||a,Ir(e,a,o))}}function _c(e,i,a,o,d,m){switch(a){case"style":_p(e,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(r(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof o=="string"?us(e,o):(typeof o=="number"||typeof o=="bigint")&&us(e,""+o);break;case"onScroll":o!=null&&ye("scroll",e);break;case"onScrollEnd":o!=null&&ye("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Dt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!up.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),i=a.slice(2,d?a.length-7:void 0),m=e[Vn]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(i,m,d),typeof o=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,o,d);break e}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Ir(e,a,o)}}}function Tn(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ye("error",e),ye("load",e);var o=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var _=a[m];if(_!=null)switch(m){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ze(e,i,m,_,a,null)}}d&&ze(e,i,"srcSet",a.srcSet,a,null),o&&ze(e,i,"src",a.src,a,null);return;case"input":ye("invalid",e);var A=m=_=d=null,R=null,w=null;for(o in a)if(a.hasOwnProperty(o)){var F=a[o];if(F!=null)switch(o){case"name":d=F;break;case"type":_=F;break;case"checked":R=F;break;case"defaultChecked":w=F;break;case"value":m=F;break;case"defaultValue":A=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:ze(e,i,o,F,a,null)}}fp(e,m,A,R,w,_,d,!1);return;case"select":ye("invalid",e),o=_=m=null;for(d in a)if(a.hasOwnProperty(d)&&(A=a[d],A!=null))switch(d){case"value":m=A;break;case"defaultValue":_=A;break;case"multiple":o=A;default:ze(e,i,d,A,a,null)}i=m,a=_,e.multiple=!!o,i!=null?ls(e,!!o,i,!1):a!=null&&ls(e,!!o,a,!0);return;case"textarea":ye("invalid",e),m=d=o=null;for(_ in a)if(a.hasOwnProperty(_)&&(A=a[_],A!=null))switch(_){case"value":o=A;break;case"defaultValue":d=A;break;case"children":m=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:ze(e,i,_,A,a,null)}gp(e,o,d,m);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(o=a[R],o!=null))switch(R){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:ze(e,i,R,o,a,null)}return;case"dialog":ye("beforetoggle",e),ye("toggle",e),ye("cancel",e),ye("close",e);break;case"iframe":case"object":ye("load",e);break;case"video":case"audio":for(o=0;o<Ha.length;o++)ye(Ha[o],e);break;case"image":ye("error",e),ye("load",e);break;case"details":ye("toggle",e);break;case"embed":case"source":case"link":ye("error",e),ye("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(w in a)if(a.hasOwnProperty(w)&&(o=a[w],o!=null))switch(w){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:ze(e,i,w,o,a,null)}return;default:if(Vl(i)){for(F in a)a.hasOwnProperty(F)&&(o=a[F],o!==void 0&&_c(e,i,F,o,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(o=a[A],o!=null&&ze(e,i,A,o,a,null))}function RT(e,i,a,o){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,_=null,A=null,R=null,w=null,F=null;for(z in a){var K=a[z];if(a.hasOwnProperty(z)&&K!=null)switch(z){case"checked":break;case"value":break;case"defaultValue":R=K;default:o.hasOwnProperty(z)||ze(e,i,z,null,o,K)}}for(var k in o){var z=o[k];if(K=a[k],o.hasOwnProperty(k)&&(z!=null||K!=null))switch(k){case"type":m=z;break;case"name":d=z;break;case"checked":w=z;break;case"defaultChecked":F=z;break;case"value":_=z;break;case"defaultValue":A=z;break;case"children":case"dangerouslySetInnerHTML":if(z!=null)throw Error(r(137,i));break;default:z!==K&&ze(e,i,k,z,o,K)}}ql(e,_,A,R,w,F,m,d);return;case"select":z=_=A=k=null;for(m in a)if(R=a[m],a.hasOwnProperty(m)&&R!=null)switch(m){case"value":break;case"multiple":z=R;default:o.hasOwnProperty(m)||ze(e,i,m,null,o,R)}for(d in o)if(m=o[d],R=a[d],o.hasOwnProperty(d)&&(m!=null||R!=null))switch(d){case"value":k=m;break;case"defaultValue":A=m;break;case"multiple":_=m;default:m!==R&&ze(e,i,d,m,o,R)}i=A,a=_,o=z,k!=null?ls(e,!!a,k,!1):!!o!=!!a&&(i!=null?ls(e,!!a,i,!0):ls(e,!!a,a?[]:"",!1));return;case"textarea":z=k=null;for(A in a)if(d=a[A],a.hasOwnProperty(A)&&d!=null&&!o.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ze(e,i,A,null,o,d)}for(_ in o)if(d=o[_],m=a[_],o.hasOwnProperty(_)&&(d!=null||m!=null))switch(_){case"value":k=d;break;case"defaultValue":z=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==m&&ze(e,i,_,d,o,m)}hp(e,k,z);return;case"option":for(var se in a)if(k=a[se],a.hasOwnProperty(se)&&k!=null&&!o.hasOwnProperty(se))switch(se){case"selected":e.selected=!1;break;default:ze(e,i,se,null,o,k)}for(R in o)if(k=o[R],z=a[R],o.hasOwnProperty(R)&&k!==z&&(k!=null||z!=null))switch(R){case"selected":e.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:ze(e,i,R,k,o,z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in a)k=a[me],a.hasOwnProperty(me)&&k!=null&&!o.hasOwnProperty(me)&&ze(e,i,me,null,o,k);for(w in o)if(k=o[w],z=a[w],o.hasOwnProperty(w)&&k!==z&&(k!=null||z!=null))switch(w){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(r(137,i));break;default:ze(e,i,w,k,o,z)}return;default:if(Vl(i)){for(var Fe in a)k=a[Fe],a.hasOwnProperty(Fe)&&k!==void 0&&!o.hasOwnProperty(Fe)&&_c(e,i,Fe,void 0,o,k);for(F in o)k=o[F],z=a[F],!o.hasOwnProperty(F)||k===z||k===void 0&&z===void 0||_c(e,i,F,k,o,z);return}}for(var P in a)k=a[P],a.hasOwnProperty(P)&&k!=null&&!o.hasOwnProperty(P)&&ze(e,i,P,null,o,k);for(K in o)k=o[K],z=a[K],!o.hasOwnProperty(K)||k===z||k==null&&z==null||ze(e,i,K,k,o,z)}function Th(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function OT(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var d=a[o],m=d.transferSize,_=d.initiatorType,A=d.duration;if(m&&A&&Th(_)){for(_=0,A=d.responseEnd,o+=1;o<a.length;o++){var R=a[o],w=R.startTime;if(w>A)break;var F=R.transferSize,K=R.initiatorType;F&&Th(K)&&(R=R.responseEnd,_+=F*(R<A?1:(A-w)/(R-w)))}if(--o,i+=8*(m+_)/(d.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Cc=null,Tc=null;function Vo(e){return e.nodeType===9?e:e.ownerDocument}function Ah(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Eh(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function Ac(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ec=null;function DT(){var e=window.event;return e&&e.type==="popstate"?e===Ec?!1:(Ec=e,!0):(Ec=null,!1)}var Sh=typeof setTimeout=="function"?setTimeout:void 0,qT=typeof clearTimeout=="function"?clearTimeout:void 0,Mh=typeof Promise=="function"?Promise:void 0,NT=typeof queueMicrotask=="function"?queueMicrotask:typeof Mh<"u"?function(e){return Mh.resolve(null).then(e).catch(VT)}:Sh;function VT(e){setTimeout(function(){throw e})}function fi(e){return e==="head"}function bh(e,i){var a=i,o=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(d),Us(i);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")Qa(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Qa(a);for(var m=a.firstChild;m;){var _=m.nextSibling,A=m.nodeName;m[ca]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=_}}else a==="body"&&Qa(e.ownerDocument.body);a=d}while(a);Us(i)}function yh(e,i){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function Sc(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Sc(a),Ol(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function IT(e,i,a,o){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ca])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=lt(e.nextSibling),e===null)break}return null}function PT(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=lt(e.nextSibling),e===null))return null;return e}function Rh(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=lt(e.nextSibling),e===null))return null;return e}function Mc(e){return e.data==="$?"||e.data==="$~"}function bc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function xT(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var o=function(){i(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function lt(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var yc=null;function Oh(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return lt(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function Dh(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function qh(e,i,a){switch(i=Vo(a),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function Qa(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Ol(e)}var ut=new Map,Nh=new Set;function Io(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Bt=Y.d;Y.d={f:LT,r:wT,D:jT,C:kT,L:UT,m:zT,X:GT,S:FT,M:HT};function LT(){var e=Bt.f(),i=Mo();return e||i}function wT(e){var i=as(e);i!==null&&i.tag===5&&i.type==="form"?Km(i):Bt.r(e)}var ws=typeof document>"u"?null:document;function Vh(e,i,a){var o=ws;if(o&&typeof i=="string"&&i){var d=nt(i);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),Nh.has(d)||(Nh.add(d),e={rel:e,crossOrigin:a,href:i},o.querySelector(d)===null&&(i=o.createElement("link"),Tn(i,"link",e),fn(i),o.head.appendChild(i)))}}function jT(e){Bt.D(e),Vh("dns-prefetch",e,null)}function kT(e,i){Bt.C(e,i),Vh("preconnect",e,i)}function UT(e,i,a){Bt.L(e,i,a);var o=ws;if(o&&e&&i){var d='link[rel="preload"][as="'+nt(i)+'"]';i==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+nt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+nt(a.imageSizes)+'"]')):d+='[href="'+nt(e)+'"]';var m=d;switch(i){case"style":m=js(e);break;case"script":m=ks(e)}ut.has(m)||(e=v({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),ut.set(m,e),o.querySelector(d)!==null||i==="style"&&o.querySelector(Ka(m))||i==="script"&&o.querySelector($a(m))||(i=o.createElement("link"),Tn(i,"link",e),fn(i),o.head.appendChild(i)))}}function zT(e,i){Bt.m(e,i);var a=ws;if(a&&e){var o=i&&typeof i.as=="string"?i.as:"script",d='link[rel="modulepreload"][as="'+nt(o)+'"][href="'+nt(e)+'"]',m=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=ks(e)}if(!ut.has(m)&&(e=v({rel:"modulepreload",href:e},i),ut.set(m,e),a.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector($a(m)))return}o=a.createElement("link"),Tn(o,"link",e),fn(o),a.head.appendChild(o)}}}function FT(e,i,a){Bt.S(e,i,a);var o=ws;if(o&&e){var d=rs(o).hoistableStyles,m=js(e);i=i||"default";var _=d.get(m);if(!_){var A={loading:0,preload:null};if(_=o.querySelector(Ka(m)))A.loading=5;else{e=v({rel:"stylesheet",href:e,"data-precedence":i},a),(a=ut.get(m))&&Rc(e,a);var R=_=o.createElement("link");fn(R),Tn(R,"link",e),R._p=new Promise(function(w,F){R.onload=w,R.onerror=F}),R.addEventListener("load",function(){A.loading|=1}),R.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Po(_,i,o)}_={type:"stylesheet",instance:_,count:1,state:A},d.set(m,_)}}}function GT(e,i){Bt.X(e,i);var a=ws;if(a&&e){var o=rs(a).hoistableScripts,d=ks(e),m=o.get(d);m||(m=a.querySelector($a(d)),m||(e=v({src:e,async:!0},i),(i=ut.get(d))&&Oc(e,i),m=a.createElement("script"),fn(m),Tn(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(d,m))}}function HT(e,i){Bt.M(e,i);var a=ws;if(a&&e){var o=rs(a).hoistableScripts,d=ks(e),m=o.get(d);m||(m=a.querySelector($a(d)),m||(e=v({src:e,async:!0,type:"module"},i),(i=ut.get(d))&&Oc(e,i),m=a.createElement("script"),fn(m),Tn(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(d,m))}}function Ih(e,i,a,o){var d=(d=ce.current)?Io(d):null;if(!d)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=js(a.href),a=rs(d).hoistableStyles,o=a.get(i),o||(o={type:"style",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=js(a.href);var m=rs(d).hoistableStyles,_=m.get(e);if(_||(d=d.ownerDocument||d,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,_),(m=d.querySelector(Ka(e)))&&!m._p&&(_.instance=m,_.state.loading=5),ut.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ut.set(e,a),m||BT(d,e,a,_.state))),i&&o===null)throw Error(r(528,""));return _}if(i&&o!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=ks(a),a=rs(d).hoistableScripts,o=a.get(i),o||(o={type:"script",instance:null,count:0,state:null},a.set(i,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function js(e){return'href="'+nt(e)+'"'}function Ka(e){return'link[rel="stylesheet"]['+e+"]"}function Ph(e){return v({},e,{"data-precedence":e.precedence,precedence:null})}function BT(e,i,a,o){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?o.loading=1:(i=e.createElement("link"),o.preload=i,i.addEventListener("load",function(){return o.loading|=1}),i.addEventListener("error",function(){return o.loading|=2}),Tn(i,"link",a),fn(i),e.head.appendChild(i))}function ks(e){return'[src="'+nt(e)+'"]'}function $a(e){return"script[async]"+e}function xh(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var o=e.querySelector('style[data-href~="'+nt(a.href)+'"]');if(o)return i.instance=o,fn(o),o;var d=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),fn(o),Tn(o,"style",d),Po(o,a.precedence,e),i.instance=o;case"stylesheet":d=js(a.href);var m=e.querySelector(Ka(d));if(m)return i.state.loading|=4,i.instance=m,fn(m),m;o=Ph(a),(d=ut.get(d))&&Rc(o,d),m=(e.ownerDocument||e).createElement("link"),fn(m);var _=m;return _._p=new Promise(function(A,R){_.onload=A,_.onerror=R}),Tn(m,"link",o),i.state.loading|=4,Po(m,a.precedence,e),i.instance=m;case"script":return m=ks(a.src),(d=e.querySelector($a(m)))?(i.instance=d,fn(d),d):(o=a,(d=ut.get(m))&&(o=v({},a),Oc(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),fn(d),Tn(d,"link",o),e.head.appendChild(d),i.instance=d);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(o=i.instance,i.state.loading|=4,Po(o,a.precedence,e));return i.instance}function Po(e,i,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,m=d,_=0;_<o.length;_++){var A=o[_];if(A.dataset.precedence===i)m=A;else if(m!==d)break}m?m.parentNode.insertBefore(e,m.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function Rc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function Oc(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var xo=null;function Lh(e,i,a){if(xo===null){var o=new Map,d=xo=new Map;d.set(a,o)}else d=xo,o=d.get(a),o||(o=new Map,d.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var m=a[d];if(!(m[ca]||m[gn]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var _=m.getAttribute(i)||"";_=e+_;var A=o.get(_);A?A.push(m):o.set(_,[m])}}return o}function wh(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function QT(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function jh(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function KT(e,i,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=js(o.href),m=i.querySelector(Ka(d));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=Lo.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=m,fn(m);return}m=i.ownerDocument||i,o=Ph(o),(d=ut.get(d))&&Rc(o,d),m=m.createElement("link"),fn(m);var _=m;_._p=new Promise(function(A,R){_.onload=A,_.onerror=R}),Tn(m,"link",o),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=Lo.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var Dc=0;function $T(e,i){return e.stylesheets&&e.count===0&&jo(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&jo(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+i);0<e.imgBytes&&Dc===0&&(Dc=62500*OT());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&jo(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>Dc?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function Lo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jo(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var wo=null;function jo(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,wo=new Map,i.forEach(JT,e),wo=null,Lo.call(e))}function JT(e,i){if(!(i.state.loading&4)){var a=wo.get(e);if(a)var o=a.get(null);else{a=new Map,wo.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var _=d[m];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),o=_)}o&&a.set(null,o)}d=i.instance,_=d.getAttribute("data-precedence"),m=a.get(_)||o,m===o&&a.set(null,d),a.set(_,d),this.count++,o=Lo.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),m?m.parentNode.insertBefore(d,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),i.state.loading|=4}}var Ja={$$typeof:O,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function YT(e,i,a,o,d,m,_,A,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ml(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ml(0),this.hiddenUpdates=Ml(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function kh(e,i,a,o,d,m,_,A,R,w,F,K){return e=new YT(e,i,a,_,R,w,F,K,A),i=1,m===!0&&(i|=24),m=Gn(3,null,null,i),e.current=m,m.stateNode=e,i=lu(),i.refCount++,e.pooledCache=i,i.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:i},pu(m),e}function Uh(e){return e?(e=gs,e):gs}function zh(e,i,a,o,d,m){d=Uh(d),o.context===null?o.context=d:o.pendingContext=d,o=ii(i),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=si(e,o,i),a!==null&&(jn(a,e,i),Ra(a,e,i))}function Fh(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function qc(e,i){Fh(e,i),(e=e.alternate)&&Fh(e,i)}function Gh(e){if(e.tag===13||e.tag===31){var i=qi(e,67108864);i!==null&&jn(i,e,67108864),qc(e,67108864)}}function Hh(e){if(e.tag===13||e.tag===31){var i=$n();i=bl(i);var a=qi(e,i);a!==null&&jn(a,e,i),qc(e,i)}}var ko=!0;function WT(e,i,a,o){var d=U.T;U.T=null;var m=Y.p;try{Y.p=2,Nc(e,i,a,o)}finally{Y.p=m,U.T=d}}function XT(e,i,a,o){var d=U.T;U.T=null;var m=Y.p;try{Y.p=8,Nc(e,i,a,o)}finally{Y.p=m,U.T=d}}function Nc(e,i,a,o){if(ko){var d=Vc(o);if(d===null)vc(e,i,o,Uo,a),Qh(e,o);else if(e0(d,e,i,a,o))o.stopPropagation();else if(Qh(e,o),i&4&&-1<ZT.indexOf(e)){for(;d!==null;){var m=as(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var _=bi(m.pendingLanes);if(_!==0){var A=m;for(A.pendingLanes|=2,A.entangledLanes|=2;_;){var R=1<<31-Ge(_);A.entanglements[1]|=R,_&=~R}Et(m),(xe&6)===0&&(Eo=yn()+500,Ga(0))}}break;case 31:case 13:A=qi(m,2),A!==null&&jn(A,m,2),Mo(),qc(m,2)}if(m=Vc(o),m===null&&vc(e,i,o,Uo,a),m===d)break;d=m}d!==null&&o.stopPropagation()}else vc(e,i,o,null,a)}}function Vc(e){return e=Pl(e),Ic(e)}var Uo=null;function Ic(e){if(Uo=null,e=ss(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=c(i),e!==null)return e;e=null}else if(a===31){if(e=p(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return Uo=e,null}function Bh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Sl()){case B:return 2;case Z:return 8;case ve:case Me:return 32;case Le:return 268435456;default:return 32}default:return 32}}var Pc=!1,hi=null,gi=null,vi=null,Ya=new Map,Wa=new Map,_i=[],ZT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qh(e,i){switch(e){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":gi=null;break;case"mouseover":case"mouseout":vi=null;break;case"pointerover":case"pointerout":Ya.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(i.pointerId)}}function Xa(e,i,a,o,d,m){return e===null||e.nativeEvent!==m?(e={blockedOn:i,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[d]},i!==null&&(i=as(i),i!==null&&Gh(i)),e):(e.eventSystemFlags|=o,i=e.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),e)}function e0(e,i,a,o,d){switch(i){case"focusin":return hi=Xa(hi,e,i,a,o,d),!0;case"dragenter":return gi=Xa(gi,e,i,a,o,d),!0;case"mouseover":return vi=Xa(vi,e,i,a,o,d),!0;case"pointerover":var m=d.pointerId;return Ya.set(m,Xa(Ya.get(m)||null,e,i,a,o,d)),!0;case"gotpointercapture":return m=d.pointerId,Wa.set(m,Xa(Wa.get(m)||null,e,i,a,o,d)),!0}return!1}function Kh(e){var i=ss(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=c(a),i!==null){e.blockedOn=i,rp(e.priority,function(){Hh(a)});return}}else if(i===31){if(i=p(a),i!==null){e.blockedOn=i,rp(e.priority,function(){Hh(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zo(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Vc(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Il=o,a.target.dispatchEvent(o),Il=null}else return i=as(a),i!==null&&Gh(i),e.blockedOn=a,!1;i.shift()}return!0}function $h(e,i,a){zo(e)&&a.delete(i)}function n0(){Pc=!1,hi!==null&&zo(hi)&&(hi=null),gi!==null&&zo(gi)&&(gi=null),vi!==null&&zo(vi)&&(vi=null),Ya.forEach($h),Wa.forEach($h)}function Fo(e,i){e.blockedOn===i&&(e.blockedOn=null,Pc||(Pc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,n0)))}var Go=null;function Jh(e){Go!==e&&(Go=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Go===e&&(Go=null);for(var i=0;i<e.length;i+=3){var a=e[i],o=e[i+1],d=e[i+2];if(typeof o!="function"){if(Ic(o||a)===null)continue;break}var m=as(a);m!==null&&(e.splice(i,3),i-=3,Vu(m,{pending:!0,data:d,method:a.method,action:o},o,d))}}))}function Us(e){function i(R){return Fo(R,e)}hi!==null&&Fo(hi,e),gi!==null&&Fo(gi,e),vi!==null&&Fo(vi,e),Ya.forEach(i),Wa.forEach(i);for(var a=0;a<_i.length;a++){var o=_i[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<_i.length&&(a=_i[0],a.blockedOn===null);)Kh(a),a.blockedOn===null&&_i.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var d=a[o],m=a[o+1],_=d[Vn]||null;if(typeof m=="function")_||Jh(a);else if(_){var A=null;if(m&&m.hasAttribute("formAction")){if(d=m,_=m[Vn]||null)A=_.formAction;else if(Ic(d)!==null)continue}else A=_.action;typeof A=="function"?a[o+1]=A:(a.splice(o,3),o-=3),Jh(a)}}}function Yh(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(_){return d=_})},focusReset:"manual",scroll:"manual"})}function i(){d!==null&&(d(),d=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),d!==null&&(d(),d=null)}}}function xc(e){this._internalRoot=e}Ho.prototype.render=xc.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,o=$n();zh(a,o,e,i,null,null)},Ho.prototype.unmount=xc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;zh(e.current,2,null,e,null,null),Mo(),i[is]=null}};function Ho(e){this._internalRoot=e}Ho.prototype.unstable_scheduleHydration=function(e){if(e){var i=ap();e={blockedOn:null,target:e,priority:i};for(var a=0;a<_i.length&&i!==0&&i<_i[a].priority;a++);_i.splice(a,0,e),a===0&&Kh(e)}};var Wh=t.version;if(Wh!=="19.2.4")throw Error(r(527,Wh,"19.2.4"));Y.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=f(i),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var t0={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:U,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bo.isDisabled&&Bo.supportsFiber)try{Rn=Bo.inject(t0),dn=Bo}catch{}}return er.createRoot=function(e,i){if(!l(e))throw Error(r(299));var a=!1,o="",d=sf,m=af,_=rf;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(o=i.identifierPrefix),i.onUncaughtError!==void 0&&(d=i.onUncaughtError),i.onCaughtError!==void 0&&(m=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=kh(e,1,!1,null,null,a,o,null,d,m,_,Yh),e[is]=i.current,gc(e),new xc(i)},er.hydrateRoot=function(e,i,a){if(!l(e))throw Error(r(299));var o=!1,d="",m=sf,_=af,A=rf,R=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),i=kh(e,1,!0,i,a??null,o,d,R,m,_,A,Yh),i.context=Uh(null),a=i.current,o=$n(),o=bl(o),d=ii(o),d.callback=null,si(a,d,o),a=o,i.current.lanes=a,ua(i,a),Et(i),e[is]=i.current,gc(e),new Ho(i)},er.version="19.2.4",er}var og;function p0(){if(og)return jc.exports;og=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),jc.exports=d0(),jc.exports}var m0=p0();function f0(n,t){const s={};return(n[n.length-1]===""?[...n,""]:n).join((s.padRight?" ":"")+","+(s.padLeft===!1?"":" ")).trim()}const h0=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,g0=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,v0={};function lg(n,t){return(v0.jsx?g0:h0).test(n)}const _0=/[ \t\n\f\r]/g;function C0(n){return typeof n=="object"?n.type==="text"?ug(n.value):!1:ug(n)}function ug(n){return n.replace(_0,"")===""}class Er{constructor(t,s,r){this.normal=s,this.property=t,r&&(this.space=r)}}Er.prototype.normal={};Er.prototype.property={};Er.prototype.space=void 0;function Mv(n,t){const s={},r={};for(const l of n)Object.assign(s,l.property),Object.assign(r,l.normal);return new Er(s,r,t)}function pd(n){return n.toLowerCase()}class Un{constructor(t,s){this.attribute=s,this.property=t}}Un.prototype.attribute="";Un.prototype.booleanish=!1;Un.prototype.boolean=!1;Un.prototype.commaOrSpaceSeparated=!1;Un.prototype.commaSeparated=!1;Un.prototype.defined=!1;Un.prototype.mustUseProperty=!1;Un.prototype.number=!1;Un.prototype.overloadedBoolean=!1;Un.prototype.property="";Un.prototype.spaceSeparated=!1;Un.prototype.space=void 0;let T0=0;const Ee=Xi(),un=Xi(),md=Xi(),W=Xi(),Ke=Xi(),ea=Xi(),Jn=Xi();function Xi(){return 2**++T0}const fd=Object.freeze(Object.defineProperty({__proto__:null,boolean:Ee,booleanish:un,commaOrSpaceSeparated:Jn,commaSeparated:ea,number:W,overloadedBoolean:md,spaceSeparated:Ke},Symbol.toStringTag,{value:"Module"})),Fc=Object.keys(fd);class Pd extends Un{constructor(t,s,r,l){let u=-1;if(super(t,s),cg(this,"space",l),typeof r=="number")for(;++u<Fc.length;){const c=Fc[u];cg(this,Fc[u],(r&fd[c])===fd[c])}}}Pd.prototype.defined=!0;function cg(n,t,s){s&&(n[t]=s)}function ia(n){const t={},s={};for(const[r,l]of Object.entries(n.properties)){const u=new Pd(r,n.transform(n.attributes||{},r),l,n.space);n.mustUseProperty&&n.mustUseProperty.includes(r)&&(u.mustUseProperty=!0),t[r]=u,s[pd(r)]=r,s[pd(u.attribute)]=r}return new Er(t,s,n.space)}const bv=ia({properties:{ariaActiveDescendant:null,ariaAtomic:un,ariaAutoComplete:null,ariaBusy:un,ariaChecked:un,ariaColCount:W,ariaColIndex:W,ariaColSpan:W,ariaControls:Ke,ariaCurrent:null,ariaDescribedBy:Ke,ariaDetails:null,ariaDisabled:un,ariaDropEffect:Ke,ariaErrorMessage:null,ariaExpanded:un,ariaFlowTo:Ke,ariaGrabbed:un,ariaHasPopup:null,ariaHidden:un,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ke,ariaLevel:W,ariaLive:null,ariaModal:un,ariaMultiLine:un,ariaMultiSelectable:un,ariaOrientation:null,ariaOwns:Ke,ariaPlaceholder:null,ariaPosInSet:W,ariaPressed:un,ariaReadOnly:un,ariaRelevant:null,ariaRequired:un,ariaRoleDescription:Ke,ariaRowCount:W,ariaRowIndex:W,ariaRowSpan:W,ariaSelected:un,ariaSetSize:W,ariaSort:null,ariaValueMax:W,ariaValueMin:W,ariaValueNow:W,ariaValueText:null,role:null},transform(n,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()}});function yv(n,t){return t in n?n[t]:t}function Rv(n,t){return yv(n,t.toLowerCase())}const A0=ia({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ea,acceptCharset:Ke,accessKey:Ke,action:null,allow:null,allowFullScreen:Ee,allowPaymentRequest:Ee,allowUserMedia:Ee,alt:null,as:null,async:Ee,autoCapitalize:null,autoComplete:Ke,autoFocus:Ee,autoPlay:Ee,blocking:Ke,capture:null,charSet:null,checked:Ee,cite:null,className:Ke,cols:W,colSpan:null,content:null,contentEditable:un,controls:Ee,controlsList:Ke,coords:W|ea,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Ee,defer:Ee,dir:null,dirName:null,disabled:Ee,download:md,draggable:un,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Ee,formTarget:null,headers:Ke,height:W,hidden:md,high:W,href:null,hrefLang:null,htmlFor:Ke,httpEquiv:Ke,id:null,imageSizes:null,imageSrcSet:null,inert:Ee,inputMode:null,integrity:null,is:null,isMap:Ee,itemId:null,itemProp:Ke,itemRef:Ke,itemScope:Ee,itemType:Ke,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Ee,low:W,manifest:null,max:null,maxLength:W,media:null,method:null,min:null,minLength:W,multiple:Ee,muted:Ee,name:null,nonce:null,noModule:Ee,noValidate:Ee,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Ee,optimum:W,pattern:null,ping:Ke,placeholder:null,playsInline:Ee,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Ee,referrerPolicy:null,rel:Ke,required:Ee,reversed:Ee,rows:W,rowSpan:W,sandbox:Ke,scope:null,scoped:Ee,seamless:Ee,selected:Ee,shadowRootClonable:Ee,shadowRootDelegatesFocus:Ee,shadowRootMode:null,shape:null,size:W,sizes:null,slot:null,span:W,spellCheck:un,src:null,srcDoc:null,srcLang:null,srcSet:null,start:W,step:null,style:null,tabIndex:W,target:null,title:null,translate:null,type:null,typeMustMatch:Ee,useMap:null,value:un,width:W,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ke,axis:null,background:null,bgColor:null,border:W,borderColor:null,bottomMargin:W,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Ee,declare:Ee,event:null,face:null,frame:null,frameBorder:null,hSpace:W,leftMargin:W,link:null,longDesc:null,lowSrc:null,marginHeight:W,marginWidth:W,noResize:Ee,noHref:Ee,noShade:Ee,noWrap:Ee,object:null,profile:null,prompt:null,rev:null,rightMargin:W,rules:null,scheme:null,scrolling:un,standby:null,summary:null,text:null,topMargin:W,valueType:null,version:null,vAlign:null,vLink:null,vSpace:W,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Ee,disableRemotePlayback:Ee,prefix:null,property:null,results:W,security:null,unselectable:null},space:"html",transform:Rv}),E0=ia({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Jn,accentHeight:W,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:W,amplitude:W,arabicForm:null,ascent:W,attributeName:null,attributeType:null,azimuth:W,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:W,by:null,calcMode:null,capHeight:W,className:Ke,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:W,diffuseConstant:W,direction:null,display:null,dur:null,divisor:W,dominantBaseline:null,download:Ee,dx:null,dy:null,edgeMode:null,editable:null,elevation:W,enableBackground:null,end:null,event:null,exponent:W,externalResourcesRequired:null,fill:null,fillOpacity:W,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ea,g2:ea,glyphName:ea,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:W,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:W,horizOriginX:W,horizOriginY:W,id:null,ideographic:W,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:W,k:W,k1:W,k2:W,k3:W,k4:W,kernelMatrix:Jn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:W,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:W,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:W,overlineThickness:W,paintOrder:null,panose1:null,path:null,pathLength:W,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ke,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:W,pointsAtY:W,pointsAtZ:W,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Jn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Jn,rev:Jn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Jn,requiredFeatures:Jn,requiredFonts:Jn,requiredFormats:Jn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:W,specularExponent:W,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:W,strikethroughThickness:W,string:null,stroke:null,strokeDashArray:Jn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:W,strokeOpacity:W,strokeWidth:null,style:null,surfaceScale:W,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Jn,tabIndex:W,tableValues:null,target:null,targetX:W,targetY:W,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Jn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:W,underlineThickness:W,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:W,values:null,vAlphabetic:W,vMathematical:W,vectorEffect:null,vHanging:W,vIdeographic:W,version:null,vertAdvY:W,vertOriginX:W,vertOriginY:W,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:W,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:yv}),Ov=ia({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(n,t){return"xlink:"+t.slice(5).toLowerCase()}}),Dv=ia({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Rv}),qv=ia({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(n,t){return"xml:"+t.slice(3).toLowerCase()}}),S0={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},M0=/[A-Z]/g,dg=/-[a-z]/g,b0=/^data[-\w.:]+$/i;function y0(n,t){const s=pd(t);let r=t,l=Un;if(s in n.normal)return n.property[n.normal[s]];if(s.length>4&&s.slice(0,4)==="data"&&b0.test(t)){if(t.charAt(4)==="-"){const u=t.slice(5).replace(dg,O0);r="data"+u.charAt(0).toUpperCase()+u.slice(1)}else{const u=t.slice(4);if(!dg.test(u)){let c=u.replace(M0,R0);c.charAt(0)!=="-"&&(c="-"+c),t="data"+c}}l=Pd}return new l(r,t)}function R0(n){return"-"+n.toLowerCase()}function O0(n){return n.charAt(1).toUpperCase()}const D0=Mv([bv,A0,Ov,Dv,qv],"html"),xd=Mv([bv,E0,Ov,Dv,qv],"svg");function q0(n){return n.join(" ").trim()}var zs={},Gc,pg;function N0(){if(pg)return Gc;pg=1;var n=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,s=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,l=/^:\s*/,u=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,p=/^\s+|\s+$/g,h=`
`,f="/",g="*",v="",T="comment",C="declaration";function E(q,y){if(typeof q!="string")throw new TypeError("First argument must be a string");if(!q)return[];y=y||{};var I=1,O=1;function G(ie){var X=ie.match(t);X&&(I+=X.length);var U=ie.lastIndexOf(h);O=~U?ie.length-U:O+ie.length}function J(){var ie={line:I,column:O};return function(X){return X.position=new x(ie),ue(),X}}function x(ie){this.start=ie,this.end={line:I,column:O},this.source=y.source}x.prototype.content=q;function $(ie){var X=new Error(y.source+":"+I+":"+O+": "+ie);if(X.reason=ie,X.filename=y.source,X.line=I,X.column=O,X.source=q,!y.silent)throw X}function ae(ie){var X=ie.exec(q);if(X){var U=X[0];return G(U),q=q.slice(U.length),X}}function ue(){ae(s)}function j(ie){var X;for(ie=ie||[];X=ee();)X!==!1&&ie.push(X);return ie}function ee(){var ie=J();if(!(f!=q.charAt(0)||g!=q.charAt(1))){for(var X=2;v!=q.charAt(X)&&(g!=q.charAt(X)||f!=q.charAt(X+1));)++X;if(X+=2,v===q.charAt(X-1))return $("End of comment missing");var U=q.slice(2,X-2);return O+=2,G(U),q=q.slice(X),O+=2,ie({type:T,comment:U})}}function ne(){var ie=J(),X=ae(r);if(X){if(ee(),!ae(l))return $("property missing ':'");var U=ae(u),Y=ie({type:C,property:M(X[0].replace(n,v)),value:U?M(U[0].replace(n,v)):v});return ae(c),Y}}function Te(){var ie=[];j(ie);for(var X;X=ne();)X!==!1&&(ie.push(X),j(ie));return ie}return ue(),Te()}function M(q){return q?q.replace(p,v):v}return Gc=E,Gc}var mg;function V0(){if(mg)return zs;mg=1;var n=zs&&zs.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zs,"__esModule",{value:!0}),zs.default=s;const t=n(N0());function s(r,l){let u=null;if(!r||typeof r!="string")return u;const c=(0,t.default)(r),p=typeof l=="function";return c.forEach(h=>{if(h.type!=="declaration")return;const{property:f,value:g}=h;p?l(f,g,h):g&&(u=u||{},u[f]=g)}),u}return zs}var nr={},fg;function I0(){if(fg)return nr;fg=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.camelCase=void 0;var n=/^--[a-zA-Z0-9_-]+$/,t=/-([a-z])/g,s=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,l=/^-(ms)-/,u=function(f){return!f||s.test(f)||n.test(f)},c=function(f,g){return g.toUpperCase()},p=function(f,g){return"".concat(g,"-")},h=function(f,g){return g===void 0&&(g={}),u(f)?f:(f=f.toLowerCase(),g.reactCompat?f=f.replace(l,p):f=f.replace(r,p),f.replace(t,c))};return nr.camelCase=h,nr}var tr,hg;function P0(){if(hg)return tr;hg=1;var n=tr&&tr.__importDefault||function(l){return l&&l.__esModule?l:{default:l}},t=n(V0()),s=I0();function r(l,u){var c={};return!l||typeof l!="string"||(0,t.default)(l,function(p,h){p&&h&&(c[(0,s.camelCase)(p,u)]=h)}),c}return r.default=r,tr=r,tr}var x0=P0();const L0=Sv(x0),Nv=Vv("end"),Ld=Vv("start");function Vv(n){return t;function t(s){const r=s&&s.position&&s.position[n]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function w0(n){const t=Ld(n),s=Nv(n);if(t&&s)return{start:t,end:s}}function lr(n){return!n||typeof n!="object"?"":"position"in n||"type"in n?gg(n.position):"start"in n||"end"in n?gg(n):"line"in n||"column"in n?hd(n):""}function hd(n){return vg(n&&n.line)+":"+vg(n&&n.column)}function gg(n){return hd(n&&n.start)+"-"+hd(n&&n.end)}function vg(n){return n&&typeof n=="number"?n:1}class bn extends Error{constructor(t,s,r){super(),typeof s=="string"&&(r=s,s=void 0);let l="",u={},c=!1;if(s&&("line"in s&&"column"in s?u={place:s}:"start"in s&&"end"in s?u={place:s}:"type"in s?u={ancestors:[s],place:s.position}:u={...s}),typeof t=="string"?l=t:!u.cause&&t&&(c=!0,l=t.message,u.cause=t),!u.ruleId&&!u.source&&typeof r=="string"){const h=r.indexOf(":");h===-1?u.ruleId=r:(u.source=r.slice(0,h),u.ruleId=r.slice(h+1))}if(!u.place&&u.ancestors&&u.ancestors){const h=u.ancestors[u.ancestors.length-1];h&&(u.place=h.position)}const p=u.place&&"start"in u.place?u.place.start:u.place;this.ancestors=u.ancestors||void 0,this.cause=u.cause||void 0,this.column=p?p.column:void 0,this.fatal=void 0,this.file="",this.message=l,this.line=p?p.line:void 0,this.name=lr(u.place)||"1:1",this.place=u.place||void 0,this.reason=this.message,this.ruleId=u.ruleId||void 0,this.source=u.source||void 0,this.stack=c&&u.cause&&typeof u.cause.stack=="string"?u.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}bn.prototype.file="";bn.prototype.name="";bn.prototype.reason="";bn.prototype.message="";bn.prototype.stack="";bn.prototype.column=void 0;bn.prototype.line=void 0;bn.prototype.ancestors=void 0;bn.prototype.cause=void 0;bn.prototype.fatal=void 0;bn.prototype.place=void 0;bn.prototype.ruleId=void 0;bn.prototype.source=void 0;const wd={}.hasOwnProperty,j0=new Map,k0=/[A-Z]/g,U0=new Set(["table","tbody","thead","tfoot","tr"]),z0=new Set(["td","th"]),Iv="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function F0(n,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const s=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Y0(s,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=J0(s,t.jsx,t.jsxs)}const l={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:s,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?xd:D0,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},u=Pv(l,n,void 0);return u&&typeof u!="string"?u:l.create(n,l.Fragment,{children:u||void 0},void 0)}function Pv(n,t,s){if(t.type==="element")return G0(n,t,s);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return H0(n,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Q0(n,t,s);if(t.type==="mdxjsEsm")return B0(n,t);if(t.type==="root")return K0(n,t,s);if(t.type==="text")return $0(n,t)}function G0(n,t,s){const r=n.schema;let l=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(l=xd,n.schema=l),n.ancestors.push(t);const u=Lv(n,t.tagName,!1),c=W0(n,t);let p=kd(n,t);return U0.has(t.tagName)&&(p=p.filter(function(h){return typeof h=="string"?!C0(h):!0})),xv(n,c,u,t),jd(c,p),n.ancestors.pop(),n.schema=r,n.create(t,u,c,s)}function H0(n,t){if(t.data&&t.data.estree&&n.evaluater){const r=t.data.estree.body[0];return r.type,n.evaluater.evaluateExpression(r.expression)}mr(n,t.position)}function B0(n,t){if(t.data&&t.data.estree&&n.evaluater)return n.evaluater.evaluateProgram(t.data.estree);mr(n,t.position)}function Q0(n,t,s){const r=n.schema;let l=r;t.name==="svg"&&r.space==="html"&&(l=xd,n.schema=l),n.ancestors.push(t);const u=t.name===null?n.Fragment:Lv(n,t.name,!0),c=X0(n,t),p=kd(n,t);return xv(n,c,u,t),jd(c,p),n.ancestors.pop(),n.schema=r,n.create(t,u,c,s)}function K0(n,t,s){const r={};return jd(r,kd(n,t)),n.create(t,n.Fragment,r,s)}function $0(n,t){return t.value}function xv(n,t,s,r){typeof s!="string"&&s!==n.Fragment&&n.passNode&&(t.node=r)}function jd(n,t){if(t.length>0){const s=t.length>1?t:t[0];s&&(n.children=s)}}function J0(n,t,s){return r;function r(l,u,c,p){const f=Array.isArray(c.children)?s:t;return p?f(u,c,p):f(u,c)}}function Y0(n,t){return s;function s(r,l,u,c){const p=Array.isArray(u.children),h=Ld(r);return t(l,u,c,p,{columnNumber:h?h.column-1:void 0,fileName:n,lineNumber:h?h.line:void 0},void 0)}}function W0(n,t){const s={};let r,l;for(l in t.properties)if(l!=="children"&&wd.call(t.properties,l)){const u=Z0(n,l,t.properties[l]);if(u){const[c,p]=u;n.tableCellAlignToStyle&&c==="align"&&typeof p=="string"&&z0.has(t.tagName)?r=p:s[c]=p}}if(r){const u=s.style||(s.style={});u[n.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return s}function X0(n,t){const s={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&n.evaluater){const u=r.data.estree.body[0];u.type;const c=u.expression;c.type;const p=c.properties[0];p.type,Object.assign(s,n.evaluater.evaluateExpression(p.argument))}else mr(n,t.position);else{const l=r.name;let u;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&n.evaluater){const p=r.value.data.estree.body[0];p.type,u=n.evaluater.evaluateExpression(p.expression)}else mr(n,t.position);else u=r.value===null?!0:r.value;s[l]=u}return s}function kd(n,t){const s=[];let r=-1;const l=n.passKeys?new Map:j0;for(;++r<t.children.length;){const u=t.children[r];let c;if(n.passKeys){const h=u.type==="element"?u.tagName:u.type==="mdxJsxFlowElement"||u.type==="mdxJsxTextElement"?u.name:void 0;if(h){const f=l.get(h)||0;c=h+"-"+f,l.set(h,f+1)}}const p=Pv(n,u,c);p!==void 0&&s.push(p)}return s}function Z0(n,t,s){const r=y0(n.schema,t);if(!(s==null||typeof s=="number"&&Number.isNaN(s))){if(Array.isArray(s)&&(s=r.commaSeparated?f0(s):q0(s)),r.property==="style"){let l=typeof s=="object"?s:eA(n,String(s));return n.stylePropertyNameCase==="css"&&(l=nA(l)),["style",l]}return[n.elementAttributeNameCase==="react"&&r.space?S0[r.property]||r.property:r.attribute,s]}}function eA(n,t){try{return L0(t,{reactCompat:!0})}catch(s){if(n.ignoreInvalidStyle)return{};const r=s,l=new bn("Cannot parse `style` attribute",{ancestors:n.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw l.file=n.filePath||void 0,l.url=Iv+"#cannot-parse-style-attribute",l}}function Lv(n,t,s){let r;if(!s)r={type:"Literal",value:t};else if(t.includes(".")){const l=t.split(".");let u=-1,c;for(;++u<l.length;){const p=lg(l[u])?{type:"Identifier",name:l[u]}:{type:"Literal",value:l[u]};c=c?{type:"MemberExpression",object:c,property:p,computed:!!(u&&p.type==="Literal"),optional:!1}:p}r=c}else r=lg(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const l=r.value;return wd.call(n.components,l)?n.components[l]:l}if(n.evaluater)return n.evaluater.evaluateExpression(r);mr(n)}function mr(n,t){const s=new bn("Cannot handle MDX estrees without `createEvaluater`",{ancestors:n.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw s.file=n.filePath||void 0,s.url=Iv+"#cannot-handle-mdx-estrees-without-createevaluater",s}function nA(n){const t={};let s;for(s in n)wd.call(n,s)&&(t[tA(s)]=n[s]);return t}function tA(n){let t=n.replace(k0,iA);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function iA(n){return"-"+n.toLowerCase()}const Hc={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},sA={};function Ud(n,t){const s=sA,r=typeof s.includeImageAlt=="boolean"?s.includeImageAlt:!0,l=typeof s.includeHtml=="boolean"?s.includeHtml:!0;return wv(n,r,l)}function wv(n,t,s){if(aA(n)){if("value"in n)return n.type==="html"&&!s?"":n.value;if(t&&"alt"in n&&n.alt)return n.alt;if("children"in n)return _g(n.children,t,s)}return Array.isArray(n)?_g(n,t,s):""}function _g(n,t,s){const r=[];let l=-1;for(;++l<n.length;)r[l]=wv(n[l],t,s);return r.join("")}function aA(n){return!!(n&&typeof n=="object")}const Cg=document.createElement("i");function zd(n){const t="&"+n+";";Cg.innerHTML=t;const s=Cg.textContent;return s.charCodeAt(s.length-1)===59&&n!=="semi"||s===t?!1:s}function Xn(n,t,s,r){const l=n.length;let u=0,c;if(t<0?t=-t>l?0:l+t:t=t>l?l:t,s=s>0?s:0,r.length<1e4)c=Array.from(r),c.unshift(t,s),n.splice(...c);else for(s&&n.splice(t,s);u<r.length;)c=r.slice(u,u+1e4),c.unshift(t,0),n.splice(...c),u+=1e4,t+=1e4}function ct(n,t){return n.length>0?(Xn(n,n.length,0,t),n):t}const Tg={}.hasOwnProperty;function jv(n){const t={};let s=-1;for(;++s<n.length;)rA(t,n[s]);return t}function rA(n,t){let s;for(s in t){const l=(Tg.call(n,s)?n[s]:void 0)||(n[s]={}),u=t[s];let c;if(u)for(c in u){Tg.call(l,c)||(l[c]=[]);const p=u[c];oA(l[c],Array.isArray(p)?p:p?[p]:[])}}}function oA(n,t){let s=-1;const r=[];for(;++s<t.length;)(t[s].add==="after"?n:r).push(t[s]);Xn(n,0,0,r)}function kv(n,t){const s=Number.parseInt(n,t);return s<9||s===11||s>13&&s<32||s>126&&s<160||s>55295&&s<57344||s>64975&&s<65008||(s&65535)===65535||(s&65535)===65534||s>1114111?"":String.fromCodePoint(s)}function _t(n){return n.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const qn=Mi(/[A-Za-z]/),Mn=Mi(/[\dA-Za-z]/),lA=Mi(/[#-'*+\--9=?A-Z^-~]/);function sl(n){return n!==null&&(n<32||n===127)}const gd=Mi(/\d/),uA=Mi(/[\dA-Fa-f]/),cA=Mi(/[!-/:-@[-`{-~]/);function pe(n){return n!==null&&n<-2}function Be(n){return n!==null&&(n<0||n===32)}function Re(n){return n===-2||n===-1||n===32}const dl=Mi(new RegExp("\\p{P}|\\p{S}","u")),Wi=Mi(/\s/);function Mi(n){return t;function t(s){return s!==null&&s>-1&&n.test(String.fromCharCode(s))}}function sa(n){const t=[];let s=-1,r=0,l=0;for(;++s<n.length;){const u=n.charCodeAt(s);let c="";if(u===37&&Mn(n.charCodeAt(s+1))&&Mn(n.charCodeAt(s+2)))l=2;else if(u<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(u))||(c=String.fromCharCode(u));else if(u>55295&&u<57344){const p=n.charCodeAt(s+1);u<56320&&p>56319&&p<57344?(c=String.fromCharCode(u,p),l=1):c=""}else c=String.fromCharCode(u);c&&(t.push(n.slice(r,s),encodeURIComponent(c)),r=s+l+1,c=""),l&&(s+=l,l=0)}return t.join("")+n.slice(r)}function Ve(n,t,s,r){const l=r?r-1:Number.POSITIVE_INFINITY;let u=0;return c;function c(h){return Re(h)?(n.enter(s),p(h)):t(h)}function p(h){return Re(h)&&u++<l?(n.consume(h),p):(n.exit(s),t(h))}}const dA={tokenize:pA};function pA(n){const t=n.attempt(this.parser.constructs.contentInitial,r,l);let s;return t;function r(p){if(p===null){n.consume(p);return}return n.enter("lineEnding"),n.consume(p),n.exit("lineEnding"),Ve(n,t,"linePrefix")}function l(p){return n.enter("paragraph"),u(p)}function u(p){const h=n.enter("chunkText",{contentType:"text",previous:s});return s&&(s.next=h),s=h,c(p)}function c(p){if(p===null){n.exit("chunkText"),n.exit("paragraph"),n.consume(p);return}return pe(p)?(n.consume(p),n.exit("chunkText"),u):(n.consume(p),c)}}const mA={tokenize:fA},Ag={tokenize:hA};function fA(n){const t=this,s=[];let r=0,l,u,c;return p;function p(O){if(r<s.length){const G=s[r];return t.containerState=G[1],n.attempt(G[0].continuation,h,f)(O)}return f(O)}function h(O){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,l&&I();const G=t.events.length;let J=G,x;for(;J--;)if(t.events[J][0]==="exit"&&t.events[J][1].type==="chunkFlow"){x=t.events[J][1].end;break}y(r);let $=G;for(;$<t.events.length;)t.events[$][1].end={...x},$++;return Xn(t.events,J+1,0,t.events.slice(G)),t.events.length=$,f(O)}return p(O)}function f(O){if(r===s.length){if(!l)return T(O);if(l.currentConstruct&&l.currentConstruct.concrete)return E(O);t.interrupt=!!(l.currentConstruct&&!l._gfmTableDynamicInterruptHack)}return t.containerState={},n.check(Ag,g,v)(O)}function g(O){return l&&I(),y(r),T(O)}function v(O){return t.parser.lazy[t.now().line]=r!==s.length,c=t.now().offset,E(O)}function T(O){return t.containerState={},n.attempt(Ag,C,E)(O)}function C(O){return r++,s.push([t.currentConstruct,t.containerState]),T(O)}function E(O){if(O===null){l&&I(),y(0),n.consume(O);return}return l=l||t.parser.flow(t.now()),n.enter("chunkFlow",{_tokenizer:l,contentType:"flow",previous:u}),M(O)}function M(O){if(O===null){q(n.exit("chunkFlow"),!0),y(0),n.consume(O);return}return pe(O)?(n.consume(O),q(n.exit("chunkFlow")),r=0,t.interrupt=void 0,p):(n.consume(O),M)}function q(O,G){const J=t.sliceStream(O);if(G&&J.push(null),O.previous=u,u&&(u.next=O),u=O,l.defineSkip(O.start),l.write(J),t.parser.lazy[O.start.line]){let x=l.events.length;for(;x--;)if(l.events[x][1].start.offset<c&&(!l.events[x][1].end||l.events[x][1].end.offset>c))return;const $=t.events.length;let ae=$,ue,j;for(;ae--;)if(t.events[ae][0]==="exit"&&t.events[ae][1].type==="chunkFlow"){if(ue){j=t.events[ae][1].end;break}ue=!0}for(y(r),x=$;x<t.events.length;)t.events[x][1].end={...j},x++;Xn(t.events,ae+1,0,t.events.slice($)),t.events.length=x}}function y(O){let G=s.length;for(;G-- >O;){const J=s[G];t.containerState=J[1],J[0].exit.call(t,n)}s.length=O}function I(){l.write([null]),u=void 0,l=void 0,t.containerState._closeFlow=void 0}}function hA(n,t,s){return Ve(n,n.attempt(this.parser.constructs.document,t,s),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function ta(n){if(n===null||Be(n)||Wi(n))return 1;if(dl(n))return 2}function pl(n,t,s){const r=[];let l=-1;for(;++l<n.length;){const u=n[l].resolveAll;u&&!r.includes(u)&&(t=u(t,s),r.push(u))}return t}const vd={name:"attention",resolveAll:gA,tokenize:vA};function gA(n,t){let s=-1,r,l,u,c,p,h,f,g;for(;++s<n.length;)if(n[s][0]==="enter"&&n[s][1].type==="attentionSequence"&&n[s][1]._close){for(r=s;r--;)if(n[r][0]==="exit"&&n[r][1].type==="attentionSequence"&&n[r][1]._open&&t.sliceSerialize(n[r][1]).charCodeAt(0)===t.sliceSerialize(n[s][1]).charCodeAt(0)){if((n[r][1]._close||n[s][1]._open)&&(n[s][1].end.offset-n[s][1].start.offset)%3&&!((n[r][1].end.offset-n[r][1].start.offset+n[s][1].end.offset-n[s][1].start.offset)%3))continue;h=n[r][1].end.offset-n[r][1].start.offset>1&&n[s][1].end.offset-n[s][1].start.offset>1?2:1;const v={...n[r][1].end},T={...n[s][1].start};Eg(v,-h),Eg(T,h),c={type:h>1?"strongSequence":"emphasisSequence",start:v,end:{...n[r][1].end}},p={type:h>1?"strongSequence":"emphasisSequence",start:{...n[s][1].start},end:T},u={type:h>1?"strongText":"emphasisText",start:{...n[r][1].end},end:{...n[s][1].start}},l={type:h>1?"strong":"emphasis",start:{...c.start},end:{...p.end}},n[r][1].end={...c.start},n[s][1].start={...p.end},f=[],n[r][1].end.offset-n[r][1].start.offset&&(f=ct(f,[["enter",n[r][1],t],["exit",n[r][1],t]])),f=ct(f,[["enter",l,t],["enter",c,t],["exit",c,t],["enter",u,t]]),f=ct(f,pl(t.parser.constructs.insideSpan.null,n.slice(r+1,s),t)),f=ct(f,[["exit",u,t],["enter",p,t],["exit",p,t],["exit",l,t]]),n[s][1].end.offset-n[s][1].start.offset?(g=2,f=ct(f,[["enter",n[s][1],t],["exit",n[s][1],t]])):g=0,Xn(n,r-1,s-r+3,f),s=r+f.length-g-2;break}}for(s=-1;++s<n.length;)n[s][1].type==="attentionSequence"&&(n[s][1].type="data");return n}function vA(n,t){const s=this.parser.constructs.attentionMarkers.null,r=this.previous,l=ta(r);let u;return c;function c(h){return u=h,n.enter("attentionSequence"),p(h)}function p(h){if(h===u)return n.consume(h),p;const f=n.exit("attentionSequence"),g=ta(h),v=!g||g===2&&l||s.includes(h),T=!l||l===2&&g||s.includes(r);return f._open=!!(u===42?v:v&&(l||!T)),f._close=!!(u===42?T:T&&(g||!v)),t(h)}}function Eg(n,t){n.column+=t,n.offset+=t,n._bufferIndex+=t}const _A={name:"autolink",tokenize:CA};function CA(n,t,s){let r=0;return l;function l(C){return n.enter("autolink"),n.enter("autolinkMarker"),n.consume(C),n.exit("autolinkMarker"),n.enter("autolinkProtocol"),u}function u(C){return qn(C)?(n.consume(C),c):C===64?s(C):f(C)}function c(C){return C===43||C===45||C===46||Mn(C)?(r=1,p(C)):f(C)}function p(C){return C===58?(n.consume(C),r=0,h):(C===43||C===45||C===46||Mn(C))&&r++<32?(n.consume(C),p):(r=0,f(C))}function h(C){return C===62?(n.exit("autolinkProtocol"),n.enter("autolinkMarker"),n.consume(C),n.exit("autolinkMarker"),n.exit("autolink"),t):C===null||C===32||C===60||sl(C)?s(C):(n.consume(C),h)}function f(C){return C===64?(n.consume(C),g):lA(C)?(n.consume(C),f):s(C)}function g(C){return Mn(C)?v(C):s(C)}function v(C){return C===46?(n.consume(C),r=0,g):C===62?(n.exit("autolinkProtocol").type="autolinkEmail",n.enter("autolinkMarker"),n.consume(C),n.exit("autolinkMarker"),n.exit("autolink"),t):T(C)}function T(C){if((C===45||Mn(C))&&r++<63){const E=C===45?T:v;return n.consume(C),E}return s(C)}}const Sr={partial:!0,tokenize:TA};function TA(n,t,s){return r;function r(u){return Re(u)?Ve(n,l,"linePrefix")(u):l(u)}function l(u){return u===null||pe(u)?t(u):s(u)}}const Uv={continuation:{tokenize:EA},exit:SA,name:"blockQuote",tokenize:AA};function AA(n,t,s){const r=this;return l;function l(c){if(c===62){const p=r.containerState;return p.open||(n.enter("blockQuote",{_container:!0}),p.open=!0),n.enter("blockQuotePrefix"),n.enter("blockQuoteMarker"),n.consume(c),n.exit("blockQuoteMarker"),u}return s(c)}function u(c){return Re(c)?(n.enter("blockQuotePrefixWhitespace"),n.consume(c),n.exit("blockQuotePrefixWhitespace"),n.exit("blockQuotePrefix"),t):(n.exit("blockQuotePrefix"),t(c))}}function EA(n,t,s){const r=this;return l;function l(c){return Re(c)?Ve(n,u,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):u(c)}function u(c){return n.attempt(Uv,t,s)(c)}}function SA(n){n.exit("blockQuote")}const zv={name:"characterEscape",tokenize:MA};function MA(n,t,s){return r;function r(u){return n.enter("characterEscape"),n.enter("escapeMarker"),n.consume(u),n.exit("escapeMarker"),l}function l(u){return cA(u)?(n.enter("characterEscapeValue"),n.consume(u),n.exit("characterEscapeValue"),n.exit("characterEscape"),t):s(u)}}const Fv={name:"characterReference",tokenize:bA};function bA(n,t,s){const r=this;let l=0,u,c;return p;function p(v){return n.enter("characterReference"),n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),h}function h(v){return v===35?(n.enter("characterReferenceMarkerNumeric"),n.consume(v),n.exit("characterReferenceMarkerNumeric"),f):(n.enter("characterReferenceValue"),u=31,c=Mn,g(v))}function f(v){return v===88||v===120?(n.enter("characterReferenceMarkerHexadecimal"),n.consume(v),n.exit("characterReferenceMarkerHexadecimal"),n.enter("characterReferenceValue"),u=6,c=uA,g):(n.enter("characterReferenceValue"),u=7,c=gd,g(v))}function g(v){if(v===59&&l){const T=n.exit("characterReferenceValue");return c===Mn&&!zd(r.sliceSerialize(T))?s(v):(n.enter("characterReferenceMarker"),n.consume(v),n.exit("characterReferenceMarker"),n.exit("characterReference"),t)}return c(v)&&l++<u?(n.consume(v),g):s(v)}}const Sg={partial:!0,tokenize:RA},Mg={concrete:!0,name:"codeFenced",tokenize:yA};function yA(n,t,s){const r=this,l={partial:!0,tokenize:J};let u=0,c=0,p;return h;function h(x){return f(x)}function f(x){const $=r.events[r.events.length-1];return u=$&&$[1].type==="linePrefix"?$[2].sliceSerialize($[1],!0).length:0,p=x,n.enter("codeFenced"),n.enter("codeFencedFence"),n.enter("codeFencedFenceSequence"),g(x)}function g(x){return x===p?(c++,n.consume(x),g):c<3?s(x):(n.exit("codeFencedFenceSequence"),Re(x)?Ve(n,v,"whitespace")(x):v(x))}function v(x){return x===null||pe(x)?(n.exit("codeFencedFence"),r.interrupt?t(x):n.check(Sg,M,G)(x)):(n.enter("codeFencedFenceInfo"),n.enter("chunkString",{contentType:"string"}),T(x))}function T(x){return x===null||pe(x)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),v(x)):Re(x)?(n.exit("chunkString"),n.exit("codeFencedFenceInfo"),Ve(n,C,"whitespace")(x)):x===96&&x===p?s(x):(n.consume(x),T)}function C(x){return x===null||pe(x)?v(x):(n.enter("codeFencedFenceMeta"),n.enter("chunkString",{contentType:"string"}),E(x))}function E(x){return x===null||pe(x)?(n.exit("chunkString"),n.exit("codeFencedFenceMeta"),v(x)):x===96&&x===p?s(x):(n.consume(x),E)}function M(x){return n.attempt(l,G,q)(x)}function q(x){return n.enter("lineEnding"),n.consume(x),n.exit("lineEnding"),y}function y(x){return u>0&&Re(x)?Ve(n,I,"linePrefix",u+1)(x):I(x)}function I(x){return x===null||pe(x)?n.check(Sg,M,G)(x):(n.enter("codeFlowValue"),O(x))}function O(x){return x===null||pe(x)?(n.exit("codeFlowValue"),I(x)):(n.consume(x),O)}function G(x){return n.exit("codeFenced"),t(x)}function J(x,$,ae){let ue=0;return j;function j(X){return x.enter("lineEnding"),x.consume(X),x.exit("lineEnding"),ee}function ee(X){return x.enter("codeFencedFence"),Re(X)?Ve(x,ne,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(X):ne(X)}function ne(X){return X===p?(x.enter("codeFencedFenceSequence"),Te(X)):ae(X)}function Te(X){return X===p?(ue++,x.consume(X),Te):ue>=c?(x.exit("codeFencedFenceSequence"),Re(X)?Ve(x,ie,"whitespace")(X):ie(X)):ae(X)}function ie(X){return X===null||pe(X)?(x.exit("codeFencedFence"),$(X)):ae(X)}}}function RA(n,t,s){const r=this;return l;function l(c){return c===null?s(c):(n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),u)}function u(c){return r.parser.lazy[r.now().line]?s(c):t(c)}}const Bc={name:"codeIndented",tokenize:DA},OA={partial:!0,tokenize:qA};function DA(n,t,s){const r=this;return l;function l(f){return n.enter("codeIndented"),Ve(n,u,"linePrefix",5)(f)}function u(f){const g=r.events[r.events.length-1];return g&&g[1].type==="linePrefix"&&g[2].sliceSerialize(g[1],!0).length>=4?c(f):s(f)}function c(f){return f===null?h(f):pe(f)?n.attempt(OA,c,h)(f):(n.enter("codeFlowValue"),p(f))}function p(f){return f===null||pe(f)?(n.exit("codeFlowValue"),c(f)):(n.consume(f),p)}function h(f){return n.exit("codeIndented"),t(f)}}function qA(n,t,s){const r=this;return l;function l(c){return r.parser.lazy[r.now().line]?s(c):pe(c)?(n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),l):Ve(n,u,"linePrefix",5)(c)}function u(c){const p=r.events[r.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?t(c):pe(c)?l(c):s(c)}}const NA={name:"codeText",previous:IA,resolve:VA,tokenize:PA};function VA(n){let t=n.length-4,s=3,r,l;if((n[s][1].type==="lineEnding"||n[s][1].type==="space")&&(n[t][1].type==="lineEnding"||n[t][1].type==="space")){for(r=s;++r<t;)if(n[r][1].type==="codeTextData"){n[s][1].type="codeTextPadding",n[t][1].type="codeTextPadding",s+=2,t-=2;break}}for(r=s-1,t++;++r<=t;)l===void 0?r!==t&&n[r][1].type!=="lineEnding"&&(l=r):(r===t||n[r][1].type==="lineEnding")&&(n[l][1].type="codeTextData",r!==l+2&&(n[l][1].end=n[r-1][1].end,n.splice(l+2,r-l-2),t-=r-l-2,r=l+2),l=void 0);return n}function IA(n){return n!==96||this.events[this.events.length-1][1].type==="characterEscape"}function PA(n,t,s){let r=0,l,u;return c;function c(v){return n.enter("codeText"),n.enter("codeTextSequence"),p(v)}function p(v){return v===96?(n.consume(v),r++,p):(n.exit("codeTextSequence"),h(v))}function h(v){return v===null?s(v):v===32?(n.enter("space"),n.consume(v),n.exit("space"),h):v===96?(u=n.enter("codeTextSequence"),l=0,g(v)):pe(v)?(n.enter("lineEnding"),n.consume(v),n.exit("lineEnding"),h):(n.enter("codeTextData"),f(v))}function f(v){return v===null||v===32||v===96||pe(v)?(n.exit("codeTextData"),h(v)):(n.consume(v),f)}function g(v){return v===96?(n.consume(v),l++,g):l===r?(n.exit("codeTextSequence"),n.exit("codeText"),t(v)):(u.type="codeTextData",f(v))}}class xA{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,s){const r=s??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,s,r){const l=s||0;this.setCursor(Math.trunc(t));const u=this.right.splice(this.right.length-l,Number.POSITIVE_INFINITY);return r&&ir(this.left,r),u.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ir(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ir(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const s=this.left.splice(t,Number.POSITIVE_INFINITY);ir(this.right,s.reverse())}else{const s=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ir(this.left,s.reverse())}}}function ir(n,t){let s=0;if(t.length<1e4)n.push(...t);else for(;s<t.length;)n.push(...t.slice(s,s+1e4)),s+=1e4}function Gv(n){const t={};let s=-1,r,l,u,c,p,h,f;const g=new xA(n);for(;++s<g.length;){for(;s in t;)s=t[s];if(r=g.get(s),s&&r[1].type==="chunkFlow"&&g.get(s-1)[1].type==="listItemPrefix"&&(h=r[1]._tokenizer.events,u=0,u<h.length&&h[u][1].type==="lineEndingBlank"&&(u+=2),u<h.length&&h[u][1].type==="content"))for(;++u<h.length&&h[u][1].type!=="content";)h[u][1].type==="chunkText"&&(h[u][1]._isInFirstContentOfListItem=!0,u++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,LA(g,s)),s=t[s],f=!0);else if(r[1]._container){for(u=s,l=void 0;u--;)if(c=g.get(u),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(l&&(g.get(l)[1].type="lineEndingBlank"),c[1].type="lineEnding",l=u);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;l&&(r[1].end={...g.get(l)[1].start},p=g.slice(l,s),p.unshift(r),g.splice(l,s-l+1,p))}}return Xn(n,0,Number.POSITIVE_INFINITY,g.slice(0)),!f}function LA(n,t){const s=n.get(t)[1],r=n.get(t)[2];let l=t-1;const u=[];let c=s._tokenizer;c||(c=r.parser[s.contentType](s.start),s._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const p=c.events,h=[],f={};let g,v,T=-1,C=s,E=0,M=0;const q=[M];for(;C;){for(;n.get(++l)[1]!==C;);u.push(l),C._tokenizer||(g=r.sliceStream(C),C.next||g.push(null),v&&c.defineSkip(C.start),C._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(g),C._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),v=C,C=C.next}for(C=s;++T<p.length;)p[T][0]==="exit"&&p[T-1][0]==="enter"&&p[T][1].type===p[T-1][1].type&&p[T][1].start.line!==p[T][1].end.line&&(M=T+1,q.push(M),C._tokenizer=void 0,C.previous=void 0,C=C.next);for(c.events=[],C?(C._tokenizer=void 0,C.previous=void 0):q.pop(),T=q.length;T--;){const y=p.slice(q[T],q[T+1]),I=u.pop();h.push([I,I+y.length-1]),n.splice(I,2,y)}for(h.reverse(),T=-1;++T<h.length;)f[E+h[T][0]]=E+h[T][1],E+=h[T][1]-h[T][0]-1;return f}const wA={resolve:kA,tokenize:UA},jA={partial:!0,tokenize:zA};function kA(n){return Gv(n),n}function UA(n,t){let s;return r;function r(p){return n.enter("content"),s=n.enter("chunkContent",{contentType:"content"}),l(p)}function l(p){return p===null?u(p):pe(p)?n.check(jA,c,u)(p):(n.consume(p),l)}function u(p){return n.exit("chunkContent"),n.exit("content"),t(p)}function c(p){return n.consume(p),n.exit("chunkContent"),s.next=n.enter("chunkContent",{contentType:"content",previous:s}),s=s.next,l}}function zA(n,t,s){const r=this;return l;function l(c){return n.exit("chunkContent"),n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),Ve(n,u,"linePrefix")}function u(c){if(c===null||pe(c))return s(c);const p=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?t(c):n.interrupt(r.parser.constructs.flow,s,t)(c)}}function Hv(n,t,s,r,l,u,c,p,h){const f=h||Number.POSITIVE_INFINITY;let g=0;return v;function v(y){return y===60?(n.enter(r),n.enter(l),n.enter(u),n.consume(y),n.exit(u),T):y===null||y===32||y===41||sl(y)?s(y):(n.enter(r),n.enter(c),n.enter(p),n.enter("chunkString",{contentType:"string"}),M(y))}function T(y){return y===62?(n.enter(u),n.consume(y),n.exit(u),n.exit(l),n.exit(r),t):(n.enter(p),n.enter("chunkString",{contentType:"string"}),C(y))}function C(y){return y===62?(n.exit("chunkString"),n.exit(p),T(y)):y===null||y===60||pe(y)?s(y):(n.consume(y),y===92?E:C)}function E(y){return y===60||y===62||y===92?(n.consume(y),C):C(y)}function M(y){return!g&&(y===null||y===41||Be(y))?(n.exit("chunkString"),n.exit(p),n.exit(c),n.exit(r),t(y)):g<f&&y===40?(n.consume(y),g++,M):y===41?(n.consume(y),g--,M):y===null||y===32||y===40||sl(y)?s(y):(n.consume(y),y===92?q:M)}function q(y){return y===40||y===41||y===92?(n.consume(y),M):M(y)}}function Bv(n,t,s,r,l,u){const c=this;let p=0,h;return f;function f(C){return n.enter(r),n.enter(l),n.consume(C),n.exit(l),n.enter(u),g}function g(C){return p>999||C===null||C===91||C===93&&!h||C===94&&!p&&"_hiddenFootnoteSupport"in c.parser.constructs?s(C):C===93?(n.exit(u),n.enter(l),n.consume(C),n.exit(l),n.exit(r),t):pe(C)?(n.enter("lineEnding"),n.consume(C),n.exit("lineEnding"),g):(n.enter("chunkString",{contentType:"string"}),v(C))}function v(C){return C===null||C===91||C===93||pe(C)||p++>999?(n.exit("chunkString"),g(C)):(n.consume(C),h||(h=!Re(C)),C===92?T:v)}function T(C){return C===91||C===92||C===93?(n.consume(C),p++,v):v(C)}}function Qv(n,t,s,r,l,u){let c;return p;function p(T){return T===34||T===39||T===40?(n.enter(r),n.enter(l),n.consume(T),n.exit(l),c=T===40?41:T,h):s(T)}function h(T){return T===c?(n.enter(l),n.consume(T),n.exit(l),n.exit(r),t):(n.enter(u),f(T))}function f(T){return T===c?(n.exit(u),h(c)):T===null?s(T):pe(T)?(n.enter("lineEnding"),n.consume(T),n.exit("lineEnding"),Ve(n,f,"linePrefix")):(n.enter("chunkString",{contentType:"string"}),g(T))}function g(T){return T===c||T===null||pe(T)?(n.exit("chunkString"),f(T)):(n.consume(T),T===92?v:g)}function v(T){return T===c||T===92?(n.consume(T),g):g(T)}}function ur(n,t){let s;return r;function r(l){return pe(l)?(n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),s=!0,r):Re(l)?Ve(n,r,s?"linePrefix":"lineSuffix")(l):t(l)}}const FA={name:"definition",tokenize:HA},GA={partial:!0,tokenize:BA};function HA(n,t,s){const r=this;let l;return u;function u(C){return n.enter("definition"),c(C)}function c(C){return Bv.call(r,n,p,s,"definitionLabel","definitionLabelMarker","definitionLabelString")(C)}function p(C){return l=_t(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),C===58?(n.enter("definitionMarker"),n.consume(C),n.exit("definitionMarker"),h):s(C)}function h(C){return Be(C)?ur(n,f)(C):f(C)}function f(C){return Hv(n,g,s,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(C)}function g(C){return n.attempt(GA,v,v)(C)}function v(C){return Re(C)?Ve(n,T,"whitespace")(C):T(C)}function T(C){return C===null||pe(C)?(n.exit("definition"),r.parser.defined.push(l),t(C)):s(C)}}function BA(n,t,s){return r;function r(p){return Be(p)?ur(n,l)(p):s(p)}function l(p){return Qv(n,u,s,"definitionTitle","definitionTitleMarker","definitionTitleString")(p)}function u(p){return Re(p)?Ve(n,c,"whitespace")(p):c(p)}function c(p){return p===null||pe(p)?t(p):s(p)}}const QA={name:"hardBreakEscape",tokenize:KA};function KA(n,t,s){return r;function r(u){return n.enter("hardBreakEscape"),n.consume(u),l}function l(u){return pe(u)?(n.exit("hardBreakEscape"),t(u)):s(u)}}const $A={name:"headingAtx",resolve:JA,tokenize:YA};function JA(n,t){let s=n.length-2,r=3,l,u;return n[r][1].type==="whitespace"&&(r+=2),s-2>r&&n[s][1].type==="whitespace"&&(s-=2),n[s][1].type==="atxHeadingSequence"&&(r===s-1||s-4>r&&n[s-2][1].type==="whitespace")&&(s-=r+1===s?2:4),s>r&&(l={type:"atxHeadingText",start:n[r][1].start,end:n[s][1].end},u={type:"chunkText",start:n[r][1].start,end:n[s][1].end,contentType:"text"},Xn(n,r,s-r+1,[["enter",l,t],["enter",u,t],["exit",u,t],["exit",l,t]])),n}function YA(n,t,s){let r=0;return l;function l(g){return n.enter("atxHeading"),u(g)}function u(g){return n.enter("atxHeadingSequence"),c(g)}function c(g){return g===35&&r++<6?(n.consume(g),c):g===null||Be(g)?(n.exit("atxHeadingSequence"),p(g)):s(g)}function p(g){return g===35?(n.enter("atxHeadingSequence"),h(g)):g===null||pe(g)?(n.exit("atxHeading"),t(g)):Re(g)?Ve(n,p,"whitespace")(g):(n.enter("atxHeadingText"),f(g))}function h(g){return g===35?(n.consume(g),h):(n.exit("atxHeadingSequence"),p(g))}function f(g){return g===null||g===35||Be(g)?(n.exit("atxHeadingText"),p(g)):(n.consume(g),f)}}const WA=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],bg=["pre","script","style","textarea"],XA={concrete:!0,name:"htmlFlow",resolveTo:n1,tokenize:t1},ZA={partial:!0,tokenize:s1},e1={partial:!0,tokenize:i1};function n1(n){let t=n.length;for(;t--&&!(n[t][0]==="enter"&&n[t][1].type==="htmlFlow"););return t>1&&n[t-2][1].type==="linePrefix"&&(n[t][1].start=n[t-2][1].start,n[t+1][1].start=n[t-2][1].start,n.splice(t-2,2)),n}function t1(n,t,s){const r=this;let l,u,c,p,h;return f;function f(S){return g(S)}function g(S){return n.enter("htmlFlow"),n.enter("htmlFlowData"),n.consume(S),v}function v(S){return S===33?(n.consume(S),T):S===47?(n.consume(S),u=!0,M):S===63?(n.consume(S),l=3,r.interrupt?t:b):qn(S)?(n.consume(S),c=String.fromCharCode(S),q):s(S)}function T(S){return S===45?(n.consume(S),l=2,C):S===91?(n.consume(S),l=5,p=0,E):qn(S)?(n.consume(S),l=4,r.interrupt?t:b):s(S)}function C(S){return S===45?(n.consume(S),r.interrupt?t:b):s(S)}function E(S){const te="CDATA[";return S===te.charCodeAt(p++)?(n.consume(S),p===te.length?r.interrupt?t:ne:E):s(S)}function M(S){return qn(S)?(n.consume(S),c=String.fromCharCode(S),q):s(S)}function q(S){if(S===null||S===47||S===62||Be(S)){const te=S===47,fe=c.toLowerCase();return!te&&!u&&bg.includes(fe)?(l=1,r.interrupt?t(S):ne(S)):WA.includes(c.toLowerCase())?(l=6,te?(n.consume(S),y):r.interrupt?t(S):ne(S)):(l=7,r.interrupt&&!r.parser.lazy[r.now().line]?s(S):u?I(S):O(S))}return S===45||Mn(S)?(n.consume(S),c+=String.fromCharCode(S),q):s(S)}function y(S){return S===62?(n.consume(S),r.interrupt?t:ne):s(S)}function I(S){return Re(S)?(n.consume(S),I):j(S)}function O(S){return S===47?(n.consume(S),j):S===58||S===95||qn(S)?(n.consume(S),G):Re(S)?(n.consume(S),O):j(S)}function G(S){return S===45||S===46||S===58||S===95||Mn(S)?(n.consume(S),G):J(S)}function J(S){return S===61?(n.consume(S),x):Re(S)?(n.consume(S),J):O(S)}function x(S){return S===null||S===60||S===61||S===62||S===96?s(S):S===34||S===39?(n.consume(S),h=S,$):Re(S)?(n.consume(S),x):ae(S)}function $(S){return S===h?(n.consume(S),h=null,ue):S===null||pe(S)?s(S):(n.consume(S),$)}function ae(S){return S===null||S===34||S===39||S===47||S===60||S===61||S===62||S===96||Be(S)?J(S):(n.consume(S),ae)}function ue(S){return S===47||S===62||Re(S)?O(S):s(S)}function j(S){return S===62?(n.consume(S),ee):s(S)}function ee(S){return S===null||pe(S)?ne(S):Re(S)?(n.consume(S),ee):s(S)}function ne(S){return S===45&&l===2?(n.consume(S),U):S===60&&l===1?(n.consume(S),Y):S===62&&l===4?(n.consume(S),D):S===63&&l===3?(n.consume(S),b):S===93&&l===5?(n.consume(S),Se):pe(S)&&(l===6||l===7)?(n.exit("htmlFlowData"),n.check(ZA,H,Te)(S)):S===null||pe(S)?(n.exit("htmlFlowData"),Te(S)):(n.consume(S),ne)}function Te(S){return n.check(e1,ie,H)(S)}function ie(S){return n.enter("lineEnding"),n.consume(S),n.exit("lineEnding"),X}function X(S){return S===null||pe(S)?Te(S):(n.enter("htmlFlowData"),ne(S))}function U(S){return S===45?(n.consume(S),b):ne(S)}function Y(S){return S===47?(n.consume(S),c="",oe):ne(S)}function oe(S){if(S===62){const te=c.toLowerCase();return bg.includes(te)?(n.consume(S),D):ne(S)}return qn(S)&&c.length<8?(n.consume(S),c+=String.fromCharCode(S),oe):ne(S)}function Se(S){return S===93?(n.consume(S),b):ne(S)}function b(S){return S===62?(n.consume(S),D):S===45&&l===2?(n.consume(S),b):ne(S)}function D(S){return S===null||pe(S)?(n.exit("htmlFlowData"),H(S)):(n.consume(S),D)}function H(S){return n.exit("htmlFlow"),t(S)}}function i1(n,t,s){const r=this;return l;function l(c){return pe(c)?(n.enter("lineEnding"),n.consume(c),n.exit("lineEnding"),u):s(c)}function u(c){return r.parser.lazy[r.now().line]?s(c):t(c)}}function s1(n,t,s){return r;function r(l){return n.enter("lineEnding"),n.consume(l),n.exit("lineEnding"),n.attempt(Sr,t,s)}}const a1={name:"htmlText",tokenize:r1};function r1(n,t,s){const r=this;let l,u,c;return p;function p(b){return n.enter("htmlText"),n.enter("htmlTextData"),n.consume(b),h}function h(b){return b===33?(n.consume(b),f):b===47?(n.consume(b),J):b===63?(n.consume(b),O):qn(b)?(n.consume(b),ae):s(b)}function f(b){return b===45?(n.consume(b),g):b===91?(n.consume(b),u=0,E):qn(b)?(n.consume(b),I):s(b)}function g(b){return b===45?(n.consume(b),C):s(b)}function v(b){return b===null?s(b):b===45?(n.consume(b),T):pe(b)?(c=v,Y(b)):(n.consume(b),v)}function T(b){return b===45?(n.consume(b),C):v(b)}function C(b){return b===62?U(b):b===45?T(b):v(b)}function E(b){const D="CDATA[";return b===D.charCodeAt(u++)?(n.consume(b),u===D.length?M:E):s(b)}function M(b){return b===null?s(b):b===93?(n.consume(b),q):pe(b)?(c=M,Y(b)):(n.consume(b),M)}function q(b){return b===93?(n.consume(b),y):M(b)}function y(b){return b===62?U(b):b===93?(n.consume(b),y):M(b)}function I(b){return b===null||b===62?U(b):pe(b)?(c=I,Y(b)):(n.consume(b),I)}function O(b){return b===null?s(b):b===63?(n.consume(b),G):pe(b)?(c=O,Y(b)):(n.consume(b),O)}function G(b){return b===62?U(b):O(b)}function J(b){return qn(b)?(n.consume(b),x):s(b)}function x(b){return b===45||Mn(b)?(n.consume(b),x):$(b)}function $(b){return pe(b)?(c=$,Y(b)):Re(b)?(n.consume(b),$):U(b)}function ae(b){return b===45||Mn(b)?(n.consume(b),ae):b===47||b===62||Be(b)?ue(b):s(b)}function ue(b){return b===47?(n.consume(b),U):b===58||b===95||qn(b)?(n.consume(b),j):pe(b)?(c=ue,Y(b)):Re(b)?(n.consume(b),ue):U(b)}function j(b){return b===45||b===46||b===58||b===95||Mn(b)?(n.consume(b),j):ee(b)}function ee(b){return b===61?(n.consume(b),ne):pe(b)?(c=ee,Y(b)):Re(b)?(n.consume(b),ee):ue(b)}function ne(b){return b===null||b===60||b===61||b===62||b===96?s(b):b===34||b===39?(n.consume(b),l=b,Te):pe(b)?(c=ne,Y(b)):Re(b)?(n.consume(b),ne):(n.consume(b),ie)}function Te(b){return b===l?(n.consume(b),l=void 0,X):b===null?s(b):pe(b)?(c=Te,Y(b)):(n.consume(b),Te)}function ie(b){return b===null||b===34||b===39||b===60||b===61||b===96?s(b):b===47||b===62||Be(b)?ue(b):(n.consume(b),ie)}function X(b){return b===47||b===62||Be(b)?ue(b):s(b)}function U(b){return b===62?(n.consume(b),n.exit("htmlTextData"),n.exit("htmlText"),t):s(b)}function Y(b){return n.exit("htmlTextData"),n.enter("lineEnding"),n.consume(b),n.exit("lineEnding"),oe}function oe(b){return Re(b)?Ve(n,Se,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):Se(b)}function Se(b){return n.enter("htmlTextData"),c(b)}}const Fd={name:"labelEnd",resolveAll:c1,resolveTo:d1,tokenize:p1},o1={tokenize:m1},l1={tokenize:f1},u1={tokenize:h1};function c1(n){let t=-1;const s=[];for(;++t<n.length;){const r=n[t][1];if(s.push(n[t]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const l=r.type==="labelImage"?4:2;r.type="data",t+=l}}return n.length!==s.length&&Xn(n,0,n.length,s),n}function d1(n,t){let s=n.length,r=0,l,u,c,p;for(;s--;)if(l=n[s][1],u){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;n[s][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(c){if(n[s][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(u=s,l.type!=="labelLink")){r=2;break}}else l.type==="labelEnd"&&(c=s);const h={type:n[u][1].type==="labelLink"?"link":"image",start:{...n[u][1].start},end:{...n[n.length-1][1].end}},f={type:"label",start:{...n[u][1].start},end:{...n[c][1].end}},g={type:"labelText",start:{...n[u+r+2][1].end},end:{...n[c-2][1].start}};return p=[["enter",h,t],["enter",f,t]],p=ct(p,n.slice(u+1,u+r+3)),p=ct(p,[["enter",g,t]]),p=ct(p,pl(t.parser.constructs.insideSpan.null,n.slice(u+r+4,c-3),t)),p=ct(p,[["exit",g,t],n[c-2],n[c-1],["exit",f,t]]),p=ct(p,n.slice(c+1)),p=ct(p,[["exit",h,t]]),Xn(n,u,n.length,p),n}function p1(n,t,s){const r=this;let l=r.events.length,u,c;for(;l--;)if((r.events[l][1].type==="labelImage"||r.events[l][1].type==="labelLink")&&!r.events[l][1]._balanced){u=r.events[l][1];break}return p;function p(T){return u?u._inactive?v(T):(c=r.parser.defined.includes(_t(r.sliceSerialize({start:u.end,end:r.now()}))),n.enter("labelEnd"),n.enter("labelMarker"),n.consume(T),n.exit("labelMarker"),n.exit("labelEnd"),h):s(T)}function h(T){return T===40?n.attempt(o1,g,c?g:v)(T):T===91?n.attempt(l1,g,c?f:v)(T):c?g(T):v(T)}function f(T){return n.attempt(u1,g,v)(T)}function g(T){return t(T)}function v(T){return u._balanced=!0,s(T)}}function m1(n,t,s){return r;function r(v){return n.enter("resource"),n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),l}function l(v){return Be(v)?ur(n,u)(v):u(v)}function u(v){return v===41?g(v):Hv(n,c,p,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(v)}function c(v){return Be(v)?ur(n,h)(v):g(v)}function p(v){return s(v)}function h(v){return v===34||v===39||v===40?Qv(n,f,s,"resourceTitle","resourceTitleMarker","resourceTitleString")(v):g(v)}function f(v){return Be(v)?ur(n,g)(v):g(v)}function g(v){return v===41?(n.enter("resourceMarker"),n.consume(v),n.exit("resourceMarker"),n.exit("resource"),t):s(v)}}function f1(n,t,s){const r=this;return l;function l(p){return Bv.call(r,n,u,c,"reference","referenceMarker","referenceString")(p)}function u(p){return r.parser.defined.includes(_t(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(p):s(p)}function c(p){return s(p)}}function h1(n,t,s){return r;function r(u){return n.enter("reference"),n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),l}function l(u){return u===93?(n.enter("referenceMarker"),n.consume(u),n.exit("referenceMarker"),n.exit("reference"),t):s(u)}}const g1={name:"labelStartImage",resolveAll:Fd.resolveAll,tokenize:v1};function v1(n,t,s){const r=this;return l;function l(p){return n.enter("labelImage"),n.enter("labelImageMarker"),n.consume(p),n.exit("labelImageMarker"),u}function u(p){return p===91?(n.enter("labelMarker"),n.consume(p),n.exit("labelMarker"),n.exit("labelImage"),c):s(p)}function c(p){return p===94&&"_hiddenFootnoteSupport"in r.parser.constructs?s(p):t(p)}}const _1={name:"labelStartLink",resolveAll:Fd.resolveAll,tokenize:C1};function C1(n,t,s){const r=this;return l;function l(c){return n.enter("labelLink"),n.enter("labelMarker"),n.consume(c),n.exit("labelMarker"),n.exit("labelLink"),u}function u(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?s(c):t(c)}}const Qc={name:"lineEnding",tokenize:T1};function T1(n,t){return s;function s(r){return n.enter("lineEnding"),n.consume(r),n.exit("lineEnding"),Ve(n,t,"linePrefix")}}const il={name:"thematicBreak",tokenize:A1};function A1(n,t,s){let r=0,l;return u;function u(f){return n.enter("thematicBreak"),c(f)}function c(f){return l=f,p(f)}function p(f){return f===l?(n.enter("thematicBreakSequence"),h(f)):r>=3&&(f===null||pe(f))?(n.exit("thematicBreak"),t(f)):s(f)}function h(f){return f===l?(n.consume(f),r++,h):(n.exit("thematicBreakSequence"),Re(f)?Ve(n,p,"whitespace")(f):p(f))}}const kn={continuation:{tokenize:b1},exit:R1,name:"list",tokenize:M1},E1={partial:!0,tokenize:O1},S1={partial:!0,tokenize:y1};function M1(n,t,s){const r=this,l=r.events[r.events.length-1];let u=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,c=0;return p;function p(C){const E=r.containerState.type||(C===42||C===43||C===45?"listUnordered":"listOrdered");if(E==="listUnordered"?!r.containerState.marker||C===r.containerState.marker:gd(C)){if(r.containerState.type||(r.containerState.type=E,n.enter(E,{_container:!0})),E==="listUnordered")return n.enter("listItemPrefix"),C===42||C===45?n.check(il,s,f)(C):f(C);if(!r.interrupt||C===49)return n.enter("listItemPrefix"),n.enter("listItemValue"),h(C)}return s(C)}function h(C){return gd(C)&&++c<10?(n.consume(C),h):(!r.interrupt||c<2)&&(r.containerState.marker?C===r.containerState.marker:C===41||C===46)?(n.exit("listItemValue"),f(C)):s(C)}function f(C){return n.enter("listItemMarker"),n.consume(C),n.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||C,n.check(Sr,r.interrupt?s:g,n.attempt(E1,T,v))}function g(C){return r.containerState.initialBlankLine=!0,u++,T(C)}function v(C){return Re(C)?(n.enter("listItemPrefixWhitespace"),n.consume(C),n.exit("listItemPrefixWhitespace"),T):s(C)}function T(C){return r.containerState.size=u+r.sliceSerialize(n.exit("listItemPrefix"),!0).length,t(C)}}function b1(n,t,s){const r=this;return r.containerState._closeFlow=void 0,n.check(Sr,l,u);function l(p){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ve(n,t,"listItemIndent",r.containerState.size+1)(p)}function u(p){return r.containerState.furtherBlankLines||!Re(p)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,c(p)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,n.attempt(S1,t,c)(p))}function c(p){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ve(n,n.attempt(kn,t,s),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(p)}}function y1(n,t,s){const r=this;return Ve(n,l,"listItemIndent",r.containerState.size+1);function l(u){const c=r.events[r.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===r.containerState.size?t(u):s(u)}}function R1(n){n.exit(this.containerState.type)}function O1(n,t,s){const r=this;return Ve(n,l,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function l(u){const c=r.events[r.events.length-1];return!Re(u)&&c&&c[1].type==="listItemPrefixWhitespace"?t(u):s(u)}}const yg={name:"setextUnderline",resolveTo:D1,tokenize:q1};function D1(n,t){let s=n.length,r,l,u;for(;s--;)if(n[s][0]==="enter"){if(n[s][1].type==="content"){r=s;break}n[s][1].type==="paragraph"&&(l=s)}else n[s][1].type==="content"&&n.splice(s,1),!u&&n[s][1].type==="definition"&&(u=s);const c={type:"setextHeading",start:{...n[r][1].start},end:{...n[n.length-1][1].end}};return n[l][1].type="setextHeadingText",u?(n.splice(l,0,["enter",c,t]),n.splice(u+1,0,["exit",n[r][1],t]),n[r][1].end={...n[u][1].end}):n[r][1]=c,n.push(["exit",c,t]),n}function q1(n,t,s){const r=this;let l;return u;function u(f){let g=r.events.length,v;for(;g--;)if(r.events[g][1].type!=="lineEnding"&&r.events[g][1].type!=="linePrefix"&&r.events[g][1].type!=="content"){v=r.events[g][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||v)?(n.enter("setextHeadingLine"),l=f,c(f)):s(f)}function c(f){return n.enter("setextHeadingLineSequence"),p(f)}function p(f){return f===l?(n.consume(f),p):(n.exit("setextHeadingLineSequence"),Re(f)?Ve(n,h,"lineSuffix")(f):h(f))}function h(f){return f===null||pe(f)?(n.exit("setextHeadingLine"),t(f)):s(f)}}const N1={tokenize:V1};function V1(n){const t=this,s=n.attempt(Sr,r,n.attempt(this.parser.constructs.flowInitial,l,Ve(n,n.attempt(this.parser.constructs.flow,l,n.attempt(wA,l)),"linePrefix")));return s;function r(u){if(u===null){n.consume(u);return}return n.enter("lineEndingBlank"),n.consume(u),n.exit("lineEndingBlank"),t.currentConstruct=void 0,s}function l(u){if(u===null){n.consume(u);return}return n.enter("lineEnding"),n.consume(u),n.exit("lineEnding"),t.currentConstruct=void 0,s}}const I1={resolveAll:$v()},P1=Kv("string"),x1=Kv("text");function Kv(n){return{resolveAll:$v(n==="text"?L1:void 0),tokenize:t};function t(s){const r=this,l=this.parser.constructs[n],u=s.attempt(l,c,p);return c;function c(g){return f(g)?u(g):p(g)}function p(g){if(g===null){s.consume(g);return}return s.enter("data"),s.consume(g),h}function h(g){return f(g)?(s.exit("data"),u(g)):(s.consume(g),h)}function f(g){if(g===null)return!0;const v=l[g];let T=-1;if(v)for(;++T<v.length;){const C=v[T];if(!C.previous||C.previous.call(r,r.previous))return!0}return!1}}}function $v(n){return t;function t(s,r){let l=-1,u;for(;++l<=s.length;)u===void 0?s[l]&&s[l][1].type==="data"&&(u=l,l++):(!s[l]||s[l][1].type!=="data")&&(l!==u+2&&(s[u][1].end=s[l-1][1].end,s.splice(u+2,l-u-2),l=u+2),u=void 0);return n?n(s,r):s}}function L1(n,t){let s=0;for(;++s<=n.length;)if((s===n.length||n[s][1].type==="lineEnding")&&n[s-1][1].type==="data"){const r=n[s-1][1],l=t.sliceStream(r);let u=l.length,c=-1,p=0,h;for(;u--;){const f=l[u];if(typeof f=="string"){for(c=f.length;f.charCodeAt(c-1)===32;)p++,c--;if(c)break;c=-1}else if(f===-2)h=!0,p++;else if(f!==-1){u++;break}}if(t._contentTypeTextTrailing&&s===n.length&&(p=0),p){const f={type:s===n.length||h||p<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:u?c:r.start._bufferIndex+c,_index:r.start._index+u,line:r.end.line,column:r.end.column-p,offset:r.end.offset-p},end:{...r.end}};r.end={...f.start},r.start.offset===r.end.offset?Object.assign(r,f):(n.splice(s,0,["enter",f,t],["exit",f,t]),s+=2)}s++}return n}const w1={42:kn,43:kn,45:kn,48:kn,49:kn,50:kn,51:kn,52:kn,53:kn,54:kn,55:kn,56:kn,57:kn,62:Uv},j1={91:FA},k1={[-2]:Bc,[-1]:Bc,32:Bc},U1={35:$A,42:il,45:[yg,il],60:XA,61:yg,95:il,96:Mg,126:Mg},z1={38:Fv,92:zv},F1={[-5]:Qc,[-4]:Qc,[-3]:Qc,33:g1,38:Fv,42:vd,60:[_A,a1],91:_1,92:[QA,zv],93:Fd,95:vd,96:NA},G1={null:[vd,I1]},H1={null:[42,95]},B1={null:[]},Q1=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:H1,contentInitial:j1,disable:B1,document:w1,flow:U1,flowInitial:k1,insideSpan:G1,string:z1,text:F1},Symbol.toStringTag,{value:"Module"}));function K1(n,t,s){let r={_bufferIndex:-1,_index:0,line:s&&s.line||1,column:s&&s.column||1,offset:s&&s.offset||0};const l={},u=[];let c=[],p=[];const h={attempt:$(J),check:$(x),consume:I,enter:O,exit:G,interrupt:$(x,{interrupt:!0})},f={code:null,containerState:{},defineSkip:M,events:[],now:E,parser:n,previous:null,sliceSerialize:T,sliceStream:C,write:v};let g=t.tokenize.call(f,h);return t.resolveAll&&u.push(t),f;function v(ee){return c=ct(c,ee),q(),c[c.length-1]!==null?[]:(ae(t,0),f.events=pl(u,f.events,f),f.events)}function T(ee,ne){return J1(C(ee),ne)}function C(ee){return $1(c,ee)}function E(){const{_bufferIndex:ee,_index:ne,line:Te,column:ie,offset:X}=r;return{_bufferIndex:ee,_index:ne,line:Te,column:ie,offset:X}}function M(ee){l[ee.line]=ee.column,j()}function q(){let ee;for(;r._index<c.length;){const ne=c[r._index];if(typeof ne=="string")for(ee=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===ee&&r._bufferIndex<ne.length;)y(ne.charCodeAt(r._bufferIndex));else y(ne)}}function y(ee){g=g(ee)}function I(ee){pe(ee)?(r.line++,r.column=1,r.offset+=ee===-3?2:1,j()):ee!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===c[r._index].length&&(r._bufferIndex=-1,r._index++)),f.previous=ee}function O(ee,ne){const Te=ne||{};return Te.type=ee,Te.start=E(),f.events.push(["enter",Te,f]),p.push(Te),Te}function G(ee){const ne=p.pop();return ne.end=E(),f.events.push(["exit",ne,f]),ne}function J(ee,ne){ae(ee,ne.from)}function x(ee,ne){ne.restore()}function $(ee,ne){return Te;function Te(ie,X,U){let Y,oe,Se,b;return Array.isArray(ie)?H(ie):"tokenize"in ie?H([ie]):D(ie);function D(ce){return Oe;function Oe(Ye){const ke=Ye!==null&&ce[Ye],Zn=Ye!==null&&ce.null,bt=[...Array.isArray(ke)?ke:ke?[ke]:[],...Array.isArray(Zn)?Zn:Zn?[Zn]:[]];return H(bt)(Ye)}}function H(ce){return Y=ce,oe=0,ce.length===0?U:S(ce[oe])}function S(ce){return Oe;function Oe(Ye){return b=ue(),Se=ce,ce.partial||(f.currentConstruct=ce),ce.name&&f.parser.constructs.disable.null.includes(ce.name)?fe():ce.tokenize.call(ne?Object.assign(Object.create(f),ne):f,h,te,fe)(Ye)}}function te(ce){return ee(Se,b),X}function fe(ce){return b.restore(),++oe<Y.length?S(Y[oe]):U}}}function ae(ee,ne){ee.resolveAll&&!u.includes(ee)&&u.push(ee),ee.resolve&&Xn(f.events,ne,f.events.length-ne,ee.resolve(f.events.slice(ne),f)),ee.resolveTo&&(f.events=ee.resolveTo(f.events,f))}function ue(){const ee=E(),ne=f.previous,Te=f.currentConstruct,ie=f.events.length,X=Array.from(p);return{from:ie,restore:U};function U(){r=ee,f.previous=ne,f.currentConstruct=Te,f.events.length=ie,p=X,j()}}function j(){r.line in l&&r.column<2&&(r.column=l[r.line],r.offset+=l[r.line]-1)}}function $1(n,t){const s=t.start._index,r=t.start._bufferIndex,l=t.end._index,u=t.end._bufferIndex;let c;if(s===l)c=[n[s].slice(r,u)];else{if(c=n.slice(s,l),r>-1){const p=c[0];typeof p=="string"?c[0]=p.slice(r):c.shift()}u>0&&c.push(n[l].slice(0,u))}return c}function J1(n,t){let s=-1;const r=[];let l;for(;++s<n.length;){const u=n[s];let c;if(typeof u=="string")c=u;else switch(u){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=t?" ":"	";break}case-1:{if(!t&&l)continue;c=" ";break}default:c=String.fromCharCode(u)}l=u===-2,r.push(c)}return r.join("")}function Y1(n){const r={constructs:jv([Q1,...(n||{}).extensions||[]]),content:l(dA),defined:[],document:l(mA),flow:l(N1),lazy:{},string:l(P1),text:l(x1)};return r;function l(u){return c;function c(p){return K1(r,u,p)}}}function W1(n){for(;!Gv(n););return n}const Rg=/[\0\t\n\r]/g;function X1(){let n=1,t="",s=!0,r;return l;function l(u,c,p){const h=[];let f,g,v,T,C;for(u=t+(typeof u=="string"?u.toString():new TextDecoder(c||void 0).decode(u)),v=0,t="",s&&(u.charCodeAt(0)===65279&&v++,s=void 0);v<u.length;){if(Rg.lastIndex=v,f=Rg.exec(u),T=f&&f.index!==void 0?f.index:u.length,C=u.charCodeAt(T),!f){t=u.slice(v);break}if(C===10&&v===T&&r)h.push(-3),r=void 0;else switch(r&&(h.push(-5),r=void 0),v<T&&(h.push(u.slice(v,T)),n+=T-v),C){case 0:{h.push(65533),n++;break}case 9:{for(g=Math.ceil(n/4)*4,h.push(-2);n++<g;)h.push(-1);break}case 10:{h.push(-4),n=1;break}default:r=!0,n=1}v=T+1}return p&&(r&&h.push(-5),t&&h.push(t),h.push(null)),h}}const Z1=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function eE(n){return n.replace(Z1,nE)}function nE(n,t,s){if(t)return t;if(s.charCodeAt(0)===35){const l=s.charCodeAt(1),u=l===120||l===88;return kv(s.slice(u?2:1),u?16:10)}return zd(s)||n}const Jv={}.hasOwnProperty;function tE(n,t,s){return typeof t!="string"&&(s=t,t=void 0),iE(s)(W1(Y1(s).document().write(X1()(n,t,!0))))}function iE(n){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:u(ns),autolinkProtocol:ue,autolinkEmail:ue,atxHeading:u(Zi),blockQuote:u(Zn),characterEscape:ue,characterReference:ue,codeFenced:u(bt),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:u(bt,c),codeText:u(ra,c),codeTextData:ue,data:ue,codeFlowValue:ue,definition:u(yr),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:u(yt),hardBreakEscape:u(es),hardBreakTrailing:u(es),htmlFlow:u(Rr,c),htmlFlowData:ue,htmlText:u(Rr,c),htmlTextData:ue,image:u(Or),label:c,link:u(ns),listItem:u(oa),listItemValue:T,listOrdered:u(ts,v),listUnordered:u(ts),paragraph:u(Al),reference:S,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:u(Zi),strong:u(El),thematicBreak:u(Sl)},exit:{atxHeading:h(),atxHeadingSequence:J,autolink:h(),autolinkEmail:ke,autolinkProtocol:Ye,blockQuote:h(),characterEscapeValue:j,characterReferenceMarkerHexadecimal:fe,characterReferenceMarkerNumeric:fe,characterReferenceValue:ce,characterReference:Oe,codeFenced:h(q),codeFencedFence:M,codeFencedFenceInfo:C,codeFencedFenceMeta:E,codeFlowValue:j,codeIndented:h(y),codeText:h(X),codeTextData:j,data:j,definition:h(),definitionDestinationString:G,definitionLabelString:I,definitionTitleString:O,emphasis:h(),hardBreakEscape:h(ne),hardBreakTrailing:h(ne),htmlFlow:h(Te),htmlFlowData:j,htmlText:h(ie),htmlTextData:j,image:h(Y),label:Se,labelText:oe,lineEnding:ee,link:h(U),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:te,resourceDestinationString:b,resourceTitleString:D,resource:H,setextHeading:h(ae),setextHeadingLineSequence:$,setextHeadingText:x,strong:h(),thematicBreak:h()}};Yv(t,(n||{}).mdastExtensions||[]);const s={};return r;function r(B){let Z={type:"root",children:[]};const ve={stack:[Z],tokenStack:[],config:t,enter:p,exit:f,buffer:c,resume:g,data:s},Me=[];let Le=-1;for(;++Le<B.length;)if(B[Le][1].type==="listOrdered"||B[Le][1].type==="listUnordered")if(B[Le][0]==="enter")Me.push(Le);else{const zn=Me.pop();Le=l(B,zn,Le)}for(Le=-1;++Le<B.length;){const zn=t[B[Le][0]];Jv.call(zn,B[Le][1].type)&&zn[B[Le][1].type].call(Object.assign({sliceSerialize:B[Le][2].sliceSerialize},ve),B[Le][1])}if(ve.tokenStack.length>0){const zn=ve.tokenStack[ve.tokenStack.length-1];(zn[1]||Og).call(ve,void 0,zn[0])}for(Z.position={start:Ti(B.length>0?B[0][1].start:{line:1,column:1,offset:0}),end:Ti(B.length>0?B[B.length-2][1].end:{line:1,column:1,offset:0})},Le=-1;++Le<t.transforms.length;)Z=t.transforms[Le](Z)||Z;return Z}function l(B,Z,ve){let Me=Z-1,Le=-1,zn=!1,Rt,Rn,dn,Nn;for(;++Me<=ve;){const Ge=B[Me];switch(Ge[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ge[0]==="enter"?Le++:Le--,Nn=void 0;break}case"lineEndingBlank":{Ge[0]==="enter"&&(Rt&&!Nn&&!Le&&!dn&&(dn=Me),Nn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Nn=void 0}if(!Le&&Ge[0]==="enter"&&Ge[1].type==="listItemPrefix"||Le===-1&&Ge[0]==="exit"&&(Ge[1].type==="listUnordered"||Ge[1].type==="listOrdered")){if(Rt){let Jt=Me;for(Rn=void 0;Jt--;){const dt=B[Jt];if(dt[1].type==="lineEnding"||dt[1].type==="lineEndingBlank"){if(dt[0]==="exit")continue;Rn&&(B[Rn][1].type="lineEndingBlank",zn=!0),dt[1].type="lineEnding",Rn=Jt}else if(!(dt[1].type==="linePrefix"||dt[1].type==="blockQuotePrefix"||dt[1].type==="blockQuotePrefixWhitespace"||dt[1].type==="blockQuoteMarker"||dt[1].type==="listItemIndent"))break}dn&&(!Rn||dn<Rn)&&(Rt._spread=!0),Rt.end=Object.assign({},Rn?B[Rn][1].start:Ge[1].end),B.splice(Rn||Me,0,["exit",Rt,Ge[2]]),Me++,ve++}if(Ge[1].type==="listItemPrefix"){const Jt={type:"listItem",_spread:!1,start:Object.assign({},Ge[1].start),end:void 0};Rt=Jt,B.splice(Me,0,["enter",Jt,Ge[2]]),Me++,ve++,dn=void 0,Nn=!0}}}return B[Z][1]._spread=zn,ve}function u(B,Z){return ve;function ve(Me){p.call(this,B(Me),Me),Z&&Z.call(this,Me)}}function c(){this.stack.push({type:"fragment",children:[]})}function p(B,Z,ve){this.stack[this.stack.length-1].children.push(B),this.stack.push(B),this.tokenStack.push([Z,ve||void 0]),B.position={start:Ti(Z.start),end:void 0}}function h(B){return Z;function Z(ve){B&&B.call(this,ve),f.call(this,ve)}}function f(B,Z){const ve=this.stack.pop(),Me=this.tokenStack.pop();if(Me)Me[0].type!==B.type&&(Z?Z.call(this,B,Me[0]):(Me[1]||Og).call(this,B,Me[0]));else throw new Error("Cannot close `"+B.type+"` ("+lr({start:B.start,end:B.end})+"): its not open");ve.position.end=Ti(B.end)}function g(){return Ud(this.stack.pop())}function v(){this.data.expectingFirstListItemValue=!0}function T(B){if(this.data.expectingFirstListItemValue){const Z=this.stack[this.stack.length-2];Z.start=Number.parseInt(this.sliceSerialize(B),10),this.data.expectingFirstListItemValue=void 0}}function C(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.lang=B}function E(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.meta=B}function M(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function q(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.value=B.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.value=B.replace(/(\r?\n|\r)$/g,"")}function I(B){const Z=this.resume(),ve=this.stack[this.stack.length-1];ve.label=Z,ve.identifier=_t(this.sliceSerialize(B)).toLowerCase()}function O(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.title=B}function G(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.url=B}function J(B){const Z=this.stack[this.stack.length-1];if(!Z.depth){const ve=this.sliceSerialize(B).length;Z.depth=ve}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function $(B){const Z=this.stack[this.stack.length-1];Z.depth=this.sliceSerialize(B).codePointAt(0)===61?1:2}function ae(){this.data.setextHeadingSlurpLineEnding=void 0}function ue(B){const ve=this.stack[this.stack.length-1].children;let Me=ve[ve.length-1];(!Me||Me.type!=="text")&&(Me=yn(),Me.position={start:Ti(B.start),end:void 0},ve.push(Me)),this.stack.push(Me)}function j(B){const Z=this.stack.pop();Z.value+=this.sliceSerialize(B),Z.position.end=Ti(B.end)}function ee(B){const Z=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ve=Z.children[Z.children.length-1];ve.position.end=Ti(B.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Z.type)&&(ue.call(this,B),j.call(this,B))}function ne(){this.data.atHardBreak=!0}function Te(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.value=B}function ie(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.value=B}function X(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.value=B}function U(){const B=this.stack[this.stack.length-1];if(this.data.inReference){const Z=this.data.referenceType||"shortcut";B.type+="Reference",B.referenceType=Z,delete B.url,delete B.title}else delete B.identifier,delete B.label;this.data.referenceType=void 0}function Y(){const B=this.stack[this.stack.length-1];if(this.data.inReference){const Z=this.data.referenceType||"shortcut";B.type+="Reference",B.referenceType=Z,delete B.url,delete B.title}else delete B.identifier,delete B.label;this.data.referenceType=void 0}function oe(B){const Z=this.sliceSerialize(B),ve=this.stack[this.stack.length-2];ve.label=eE(Z),ve.identifier=_t(Z).toLowerCase()}function Se(){const B=this.stack[this.stack.length-1],Z=this.resume(),ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,ve.type==="link"){const Me=B.children;ve.children=Me}else ve.alt=Z}function b(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.url=B}function D(){const B=this.resume(),Z=this.stack[this.stack.length-1];Z.title=B}function H(){this.data.inReference=void 0}function S(){this.data.referenceType="collapsed"}function te(B){const Z=this.resume(),ve=this.stack[this.stack.length-1];ve.label=Z,ve.identifier=_t(this.sliceSerialize(B)).toLowerCase(),this.data.referenceType="full"}function fe(B){this.data.characterReferenceType=B.type}function ce(B){const Z=this.sliceSerialize(B),ve=this.data.characterReferenceType;let Me;ve?(Me=kv(Z,ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Me=zd(Z);const Le=this.stack[this.stack.length-1];Le.value+=Me}function Oe(B){const Z=this.stack.pop();Z.position.end=Ti(B.end)}function Ye(B){j.call(this,B);const Z=this.stack[this.stack.length-1];Z.url=this.sliceSerialize(B)}function ke(B){j.call(this,B);const Z=this.stack[this.stack.length-1];Z.url="mailto:"+this.sliceSerialize(B)}function Zn(){return{type:"blockquote",children:[]}}function bt(){return{type:"code",lang:null,meta:null,value:""}}function ra(){return{type:"inlineCode",value:""}}function yr(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function yt(){return{type:"emphasis",children:[]}}function Zi(){return{type:"heading",depth:0,children:[]}}function es(){return{type:"break"}}function Rr(){return{type:"html",value:""}}function Or(){return{type:"image",title:null,url:"",alt:null}}function ns(){return{type:"link",title:null,url:"",children:[]}}function ts(B){return{type:"list",ordered:B.type==="listOrdered",start:null,spread:B._spread,children:[]}}function oa(B){return{type:"listItem",spread:B._spread,checked:null,children:[]}}function Al(){return{type:"paragraph",children:[]}}function El(){return{type:"strong",children:[]}}function yn(){return{type:"text",value:""}}function Sl(){return{type:"thematicBreak"}}}function Ti(n){return{line:n.line,column:n.column,offset:n.offset}}function Yv(n,t){let s=-1;for(;++s<t.length;){const r=t[s];Array.isArray(r)?Yv(n,r):sE(n,r)}}function sE(n,t){let s;for(s in t)if(Jv.call(t,s))switch(s){case"canContainEols":{const r=t[s];r&&n[s].push(...r);break}case"transforms":{const r=t[s];r&&n[s].push(...r);break}case"enter":case"exit":{const r=t[s];r&&Object.assign(n[s],r);break}}}function Og(n,t){throw n?new Error("Cannot close `"+n.type+"` ("+lr({start:n.start,end:n.end})+"): a different token (`"+t.type+"`, "+lr({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+lr({start:t.start,end:t.end})+") is still open")}function aE(n){const t=this;t.parser=s;function s(r){return tE(r,{...t.data("settings"),...n,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function rE(n,t){const s={type:"element",tagName:"blockquote",properties:{},children:n.wrap(n.all(t),!0)};return n.patch(t,s),n.applyData(t,s)}function oE(n,t){const s={type:"element",tagName:"br",properties:{},children:[]};return n.patch(t,s),[n.applyData(t,s),{type:"text",value:`
`}]}function lE(n,t){const s=t.value?t.value+`
`:"",r={},l=t.lang?t.lang.split(/\s+/):[];l.length>0&&(r.className=["language-"+l[0]]);let u={type:"element",tagName:"code",properties:r,children:[{type:"text",value:s}]};return t.meta&&(u.data={meta:t.meta}),n.patch(t,u),u=n.applyData(t,u),u={type:"element",tagName:"pre",properties:{},children:[u]},n.patch(t,u),u}function uE(n,t){const s={type:"element",tagName:"del",properties:{},children:n.all(t)};return n.patch(t,s),n.applyData(t,s)}function cE(n,t){const s={type:"element",tagName:"em",properties:{},children:n.all(t)};return n.patch(t,s),n.applyData(t,s)}function dE(n,t){const s=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),l=sa(r.toLowerCase()),u=n.footnoteOrder.indexOf(r);let c,p=n.footnoteCounts.get(r);p===void 0?(p=0,n.footnoteOrder.push(r),c=n.footnoteOrder.length):c=u+1,p+=1,n.footnoteCounts.set(r,p);const h={type:"element",tagName:"a",properties:{href:"#"+s+"fn-"+l,id:s+"fnref-"+l+(p>1?"-"+p:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};n.patch(t,h);const f={type:"element",tagName:"sup",properties:{},children:[h]};return n.patch(t,f),n.applyData(t,f)}function pE(n,t){const s={type:"element",tagName:"h"+t.depth,properties:{},children:n.all(t)};return n.patch(t,s),n.applyData(t,s)}function mE(n,t){if(n.options.allowDangerousHtml){const s={type:"raw",value:t.value};return n.patch(t,s),n.applyData(t,s)}}function Wv(n,t){const s=t.referenceType;let r="]";if(s==="collapsed"?r+="[]":s==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const l=n.all(t),u=l[0];u&&u.type==="text"?u.value="["+u.value:l.unshift({type:"text",value:"["});const c=l[l.length-1];return c&&c.type==="text"?c.value+=r:l.push({type:"text",value:r}),l}function fE(n,t){const s=String(t.identifier).toUpperCase(),r=n.definitionById.get(s);if(!r)return Wv(n,t);const l={src:sa(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(l.title=r.title);const u={type:"element",tagName:"img",properties:l,children:[]};return n.patch(t,u),n.applyData(t,u)}function hE(n,t){const s={src:sa(t.url)};t.alt!==null&&t.alt!==void 0&&(s.alt=t.alt),t.title!==null&&t.title!==void 0&&(s.title=t.title);const r={type:"element",tagName:"img",properties:s,children:[]};return n.patch(t,r),n.applyData(t,r)}function gE(n,t){const s={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};n.patch(t,s);const r={type:"element",tagName:"code",properties:{},children:[s]};return n.patch(t,r),n.applyData(t,r)}function vE(n,t){const s=String(t.identifier).toUpperCase(),r=n.definitionById.get(s);if(!r)return Wv(n,t);const l={href:sa(r.url||"")};r.title!==null&&r.title!==void 0&&(l.title=r.title);const u={type:"element",tagName:"a",properties:l,children:n.all(t)};return n.patch(t,u),n.applyData(t,u)}function _E(n,t){const s={href:sa(t.url)};t.title!==null&&t.title!==void 0&&(s.title=t.title);const r={type:"element",tagName:"a",properties:s,children:n.all(t)};return n.patch(t,r),n.applyData(t,r)}function CE(n,t,s){const r=n.all(t),l=s?TE(s):Xv(t),u={},c=[];if(typeof t.checked=="boolean"){const g=r[0];let v;g&&g.type==="element"&&g.tagName==="p"?v=g:(v={type:"element",tagName:"p",properties:{},children:[]},r.unshift(v)),v.children.length>0&&v.children.unshift({type:"text",value:" "}),v.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),u.className=["task-list-item"]}let p=-1;for(;++p<r.length;){const g=r[p];(l||p!==0||g.type!=="element"||g.tagName!=="p")&&c.push({type:"text",value:`
`}),g.type==="element"&&g.tagName==="p"&&!l?c.push(...g.children):c.push(g)}const h=r[r.length-1];h&&(l||h.type!=="element"||h.tagName!=="p")&&c.push({type:"text",value:`
`});const f={type:"element",tagName:"li",properties:u,children:c};return n.patch(t,f),n.applyData(t,f)}function TE(n){let t=!1;if(n.type==="list"){t=n.spread||!1;const s=n.children;let r=-1;for(;!t&&++r<s.length;)t=Xv(s[r])}return t}function Xv(n){const t=n.spread;return t??n.children.length>1}function AE(n,t){const s={},r=n.all(t);let l=-1;for(typeof t.start=="number"&&t.start!==1&&(s.start=t.start);++l<r.length;){const c=r[l];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){s.className=["contains-task-list"];break}}const u={type:"element",tagName:t.ordered?"ol":"ul",properties:s,children:n.wrap(r,!0)};return n.patch(t,u),n.applyData(t,u)}function EE(n,t){const s={type:"element",tagName:"p",properties:{},children:n.all(t)};return n.patch(t,s),n.applyData(t,s)}function SE(n,t){const s={type:"root",children:n.wrap(n.all(t))};return n.patch(t,s),n.applyData(t,s)}function ME(n,t){const s={type:"element",tagName:"strong",properties:{},children:n.all(t)};return n.patch(t,s),n.applyData(t,s)}function bE(n,t){const s=n.all(t),r=s.shift(),l=[];if(r){const c={type:"element",tagName:"thead",properties:{},children:n.wrap([r],!0)};n.patch(t.children[0],c),l.push(c)}if(s.length>0){const c={type:"element",tagName:"tbody",properties:{},children:n.wrap(s,!0)},p=Ld(t.children[1]),h=Nv(t.children[t.children.length-1]);p&&h&&(c.position={start:p,end:h}),l.push(c)}const u={type:"element",tagName:"table",properties:{},children:n.wrap(l,!0)};return n.patch(t,u),n.applyData(t,u)}function yE(n,t,s){const r=s?s.children:void 0,u=(r?r.indexOf(t):1)===0?"th":"td",c=s&&s.type==="table"?s.align:void 0,p=c?c.length:t.children.length;let h=-1;const f=[];for(;++h<p;){const v=t.children[h],T={},C=c?c[h]:void 0;C&&(T.align=C);let E={type:"element",tagName:u,properties:T,children:[]};v&&(E.children=n.all(v),n.patch(v,E),E=n.applyData(v,E)),f.push(E)}const g={type:"element",tagName:"tr",properties:{},children:n.wrap(f,!0)};return n.patch(t,g),n.applyData(t,g)}function RE(n,t){const s={type:"element",tagName:"td",properties:{},children:n.all(t)};return n.patch(t,s),n.applyData(t,s)}const Dg=9,qg=32;function OE(n){const t=String(n),s=/\r?\n|\r/g;let r=s.exec(t),l=0;const u=[];for(;r;)u.push(Ng(t.slice(l,r.index),l>0,!0),r[0]),l=r.index+r[0].length,r=s.exec(t);return u.push(Ng(t.slice(l),l>0,!1)),u.join("")}function Ng(n,t,s){let r=0,l=n.length;if(t){let u=n.codePointAt(r);for(;u===Dg||u===qg;)r++,u=n.codePointAt(r)}if(s){let u=n.codePointAt(l-1);for(;u===Dg||u===qg;)l--,u=n.codePointAt(l-1)}return l>r?n.slice(r,l):""}function DE(n,t){const s={type:"text",value:OE(String(t.value))};return n.patch(t,s),n.applyData(t,s)}function qE(n,t){const s={type:"element",tagName:"hr",properties:{},children:[]};return n.patch(t,s),n.applyData(t,s)}const NE={blockquote:rE,break:oE,code:lE,delete:uE,emphasis:cE,footnoteReference:dE,heading:pE,html:mE,imageReference:fE,image:hE,inlineCode:gE,linkReference:vE,link:_E,listItem:CE,list:AE,paragraph:EE,root:SE,strong:ME,table:bE,tableCell:RE,tableRow:yE,text:DE,thematicBreak:qE,toml:Qo,yaml:Qo,definition:Qo,footnoteDefinition:Qo};function Qo(){}const Zv=-1,ml=0,cr=1,al=2,Gd=3,Hd=4,Bd=5,Qd=6,e_=7,n_=8,Vg=typeof self=="object"?self:globalThis,VE=(n,t)=>{const s=(l,u)=>(n.set(u,l),l),r=l=>{if(n.has(l))return n.get(l);const[u,c]=t[l];switch(u){case ml:case Zv:return s(c,l);case cr:{const p=s([],l);for(const h of c)p.push(r(h));return p}case al:{const p=s({},l);for(const[h,f]of c)p[r(h)]=r(f);return p}case Gd:return s(new Date(c),l);case Hd:{const{source:p,flags:h}=c;return s(new RegExp(p,h),l)}case Bd:{const p=s(new Map,l);for(const[h,f]of c)p.set(r(h),r(f));return p}case Qd:{const p=s(new Set,l);for(const h of c)p.add(r(h));return p}case e_:{const{name:p,message:h}=c;return s(new Vg[p](h),l)}case n_:return s(BigInt(c),l);case"BigInt":return s(Object(BigInt(c)),l);case"ArrayBuffer":return s(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:p}=new Uint8Array(c);return s(new DataView(p),c)}}return s(new Vg[u](c),l)};return r},Ig=n=>VE(new Map,n)(0),Fs="",{toString:IE}={},{keys:PE}=Object,sr=n=>{const t=typeof n;if(t!=="object"||!n)return[ml,t];const s=IE.call(n).slice(8,-1);switch(s){case"Array":return[cr,Fs];case"Object":return[al,Fs];case"Date":return[Gd,Fs];case"RegExp":return[Hd,Fs];case"Map":return[Bd,Fs];case"Set":return[Qd,Fs];case"DataView":return[cr,s]}return s.includes("Array")?[cr,s]:s.includes("Error")?[e_,s]:[al,s]},Ko=([n,t])=>n===ml&&(t==="function"||t==="symbol"),xE=(n,t,s,r)=>{const l=(c,p)=>{const h=r.push(c)-1;return s.set(p,h),h},u=c=>{if(s.has(c))return s.get(c);let[p,h]=sr(c);switch(p){case ml:{let g=c;switch(h){case"bigint":p=n_,g=c.toString();break;case"function":case"symbol":if(n)throw new TypeError("unable to serialize "+h);g=null;break;case"undefined":return l([Zv],c)}return l([p,g],c)}case cr:{if(h){let T=c;return h==="DataView"?T=new Uint8Array(c.buffer):h==="ArrayBuffer"&&(T=new Uint8Array(c)),l([h,[...T]],c)}const g=[],v=l([p,g],c);for(const T of c)g.push(u(T));return v}case al:{if(h)switch(h){case"BigInt":return l([h,c.toString()],c);case"Boolean":case"Number":case"String":return l([h,c.valueOf()],c)}if(t&&"toJSON"in c)return u(c.toJSON());const g=[],v=l([p,g],c);for(const T of PE(c))(n||!Ko(sr(c[T])))&&g.push([u(T),u(c[T])]);return v}case Gd:return l([p,c.toISOString()],c);case Hd:{const{source:g,flags:v}=c;return l([p,{source:g,flags:v}],c)}case Bd:{const g=[],v=l([p,g],c);for(const[T,C]of c)(n||!(Ko(sr(T))||Ko(sr(C))))&&g.push([u(T),u(C)]);return v}case Qd:{const g=[],v=l([p,g],c);for(const T of c)(n||!Ko(sr(T)))&&g.push(u(T));return v}}const{message:f}=c;return l([p,{name:h,message:f}],c)};return u},Pg=(n,{json:t,lossy:s}={})=>{const r=[];return xE(!(t||s),!!t,new Map,r)(n),r},rl=typeof structuredClone=="function"?(n,t)=>t&&("json"in t||"lossy"in t)?Ig(Pg(n,t)):structuredClone(n):(n,t)=>Ig(Pg(n,t));function LE(n,t){const s=[{type:"text",value:""}];return t>1&&s.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),s}function wE(n,t){return"Back to reference "+(n+1)+(t>1?"-"+t:"")}function jE(n){const t=typeof n.options.clobberPrefix=="string"?n.options.clobberPrefix:"user-content-",s=n.options.footnoteBackContent||LE,r=n.options.footnoteBackLabel||wE,l=n.options.footnoteLabel||"Footnotes",u=n.options.footnoteLabelTagName||"h2",c=n.options.footnoteLabelProperties||{className:["sr-only"]},p=[];let h=-1;for(;++h<n.footnoteOrder.length;){const f=n.footnoteById.get(n.footnoteOrder[h]);if(!f)continue;const g=n.all(f),v=String(f.identifier).toUpperCase(),T=sa(v.toLowerCase());let C=0;const E=[],M=n.footnoteCounts.get(v);for(;M!==void 0&&++C<=M;){E.length>0&&E.push({type:"text",value:" "});let I=typeof s=="string"?s:s(h,C);typeof I=="string"&&(I={type:"text",value:I}),E.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+T+(C>1?"-"+C:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(h,C),className:["data-footnote-backref"]},children:Array.isArray(I)?I:[I]})}const q=g[g.length-1];if(q&&q.type==="element"&&q.tagName==="p"){const I=q.children[q.children.length-1];I&&I.type==="text"?I.value+=" ":q.children.push({type:"text",value:" "}),q.children.push(...E)}else g.push(...E);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+T},children:n.wrap(g,!0)};n.patch(f,y),p.push(y)}if(p.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:u,properties:{...rl(c),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:n.wrap(p,!0)},{type:"text",value:`
`}]}}const fl=(function(n){if(n==null)return FE;if(typeof n=="function")return hl(n);if(typeof n=="object")return Array.isArray(n)?kE(n):UE(n);if(typeof n=="string")return zE(n);throw new Error("Expected function, string, or object as test")});function kE(n){const t=[];let s=-1;for(;++s<n.length;)t[s]=fl(n[s]);return hl(r);function r(...l){let u=-1;for(;++u<t.length;)if(t[u].apply(this,l))return!0;return!1}}function UE(n){const t=n;return hl(s);function s(r){const l=r;let u;for(u in n)if(l[u]!==t[u])return!1;return!0}}function zE(n){return hl(t);function t(s){return s&&s.type===n}}function hl(n){return t;function t(s,r,l){return!!(GE(s)&&n.call(this,s,typeof r=="number"?r:void 0,l||void 0))}}function FE(){return!0}function GE(n){return n!==null&&typeof n=="object"&&"type"in n}const t_=[],HE=!0,_d=!1,BE="skip";function i_(n,t,s,r){let l;typeof t=="function"&&typeof s!="function"?(r=s,s=t):l=t;const u=fl(l),c=r?-1:1;p(n,void 0,[])();function p(h,f,g){const v=h&&typeof h=="object"?h:{};if(typeof v.type=="string"){const C=typeof v.tagName=="string"?v.tagName:typeof v.name=="string"?v.name:void 0;Object.defineProperty(T,"name",{value:"node ("+(h.type+(C?"<"+C+">":""))+")"})}return T;function T(){let C=t_,E,M,q;if((!t||u(h,f,g[g.length-1]||void 0))&&(C=QE(s(h,g)),C[0]===_d))return C;if("children"in h&&h.children){const y=h;if(y.children&&C[0]!==BE)for(M=(r?y.children.length:-1)+c,q=g.concat(y);M>-1&&M<y.children.length;){const I=y.children[M];if(E=p(I,M,q)(),E[0]===_d)return E;M=typeof E[1]=="number"?E[1]:M+c}}return C}}}function QE(n){return Array.isArray(n)?n:typeof n=="number"?[HE,n]:n==null?t_:[n]}function Kd(n,t,s,r){let l,u,c;typeof t=="function"&&typeof s!="function"?(u=void 0,c=t,l=s):(u=t,c=s,l=r),i_(n,u,p,l);function p(h,f){const g=f[f.length-1],v=g?g.children.indexOf(h):void 0;return c(h,v,g)}}const Cd={}.hasOwnProperty,KE={};function $E(n,t){const s=t||KE,r=new Map,l=new Map,u=new Map,c={...NE,...s.handlers},p={all:f,applyData:YE,definitionById:r,footnoteById:l,footnoteCounts:u,footnoteOrder:[],handlers:c,one:h,options:s,patch:JE,wrap:XE};return Kd(n,function(g){if(g.type==="definition"||g.type==="footnoteDefinition"){const v=g.type==="definition"?r:l,T=String(g.identifier).toUpperCase();v.has(T)||v.set(T,g)}}),p;function h(g,v){const T=g.type,C=p.handlers[T];if(Cd.call(p.handlers,T)&&C)return C(p,g,v);if(p.options.passThrough&&p.options.passThrough.includes(T)){if("children"in g){const{children:M,...q}=g,y=rl(q);return y.children=p.all(g),y}return rl(g)}return(p.options.unknownHandler||WE)(p,g,v)}function f(g){const v=[];if("children"in g){const T=g.children;let C=-1;for(;++C<T.length;){const E=p.one(T[C],g);if(E){if(C&&T[C-1].type==="break"&&(!Array.isArray(E)&&E.type==="text"&&(E.value=xg(E.value)),!Array.isArray(E)&&E.type==="element")){const M=E.children[0];M&&M.type==="text"&&(M.value=xg(M.value))}Array.isArray(E)?v.push(...E):v.push(E)}}}return v}}function JE(n,t){n.position&&(t.position=w0(n))}function YE(n,t){let s=t;if(n&&n.data){const r=n.data.hName,l=n.data.hChildren,u=n.data.hProperties;if(typeof r=="string")if(s.type==="element")s.tagName=r;else{const c="children"in s?s.children:[s];s={type:"element",tagName:r,properties:{},children:c}}s.type==="element"&&u&&Object.assign(s.properties,rl(u)),"children"in s&&s.children&&l!==null&&l!==void 0&&(s.children=l)}return s}function WE(n,t){const s=t.data||{},r="value"in t&&!(Cd.call(s,"hProperties")||Cd.call(s,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:n.all(t)};return n.patch(t,r),n.applyData(t,r)}function XE(n,t){const s=[];let r=-1;for(t&&s.push({type:"text",value:`
`});++r<n.length;)r&&s.push({type:"text",value:`
`}),s.push(n[r]);return t&&n.length>0&&s.push({type:"text",value:`
`}),s}function xg(n){let t=0,s=n.charCodeAt(t);for(;s===9||s===32;)t++,s=n.charCodeAt(t);return n.slice(t)}function Lg(n,t){const s=$E(n,t),r=s.one(n,void 0),l=jE(s),u=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return l&&u.children.push({type:"text",value:`
`},l),u}function ZE(n,t){return n&&"run"in n?async function(s,r){const l=Lg(s,{file:r,...t});await n.run(l,r)}:function(s,r){return Lg(s,{file:r,...n||t})}}function wg(n){if(n)throw n}var Kc,jg;function eS(){if(jg)return Kc;jg=1;var n=Object.prototype.hasOwnProperty,t=Object.prototype.toString,s=Object.defineProperty,r=Object.getOwnPropertyDescriptor,l=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},u=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var g=n.call(f,"constructor"),v=f.constructor&&f.constructor.prototype&&n.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!g&&!v)return!1;var T;for(T in f);return typeof T>"u"||n.call(f,T)},c=function(f,g){s&&g.name==="__proto__"?s(f,g.name,{enumerable:!0,configurable:!0,value:g.newValue,writable:!0}):f[g.name]=g.newValue},p=function(f,g){if(g==="__proto__")if(n.call(f,g)){if(r)return r(f,g).value}else return;return f[g]};return Kc=function h(){var f,g,v,T,C,E,M=arguments[0],q=1,y=arguments.length,I=!1;for(typeof M=="boolean"&&(I=M,M=arguments[1]||{},q=2),(M==null||typeof M!="object"&&typeof M!="function")&&(M={});q<y;++q)if(f=arguments[q],f!=null)for(g in f)v=p(M,g),T=p(f,g),M!==T&&(I&&T&&(u(T)||(C=l(T)))?(C?(C=!1,E=v&&l(v)?v:[]):E=v&&u(v)?v:{},c(M,{name:g,newValue:h(I,E,T)})):typeof T<"u"&&c(M,{name:g,newValue:T}));return M},Kc}var nS=eS();const $c=Sv(nS);function Td(n){if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)}function tS(){const n=[],t={run:s,use:r};return t;function s(...l){let u=-1;const c=l.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);p(null,...l);function p(h,...f){const g=n[++u];let v=-1;if(h){c(h);return}for(;++v<l.length;)(f[v]===null||f[v]===void 0)&&(f[v]=l[v]);l=f,g?iS(g,p)(...f):c(null,...f)}}function r(l){if(typeof l!="function")throw new TypeError("Expected `middelware` to be a function, not "+l);return n.push(l),t}}function iS(n,t){let s;return r;function r(...c){const p=n.length>c.length;let h;p&&c.push(l);try{h=n.apply(this,c)}catch(f){const g=f;if(p&&s)throw g;return l(g)}p||(h&&h.then&&typeof h.then=="function"?h.then(u,l):h instanceof Error?l(h):u(h))}function l(c,...p){s||(s=!0,t(c,...p))}function u(c){l(null,c)}}const St={basename:sS,dirname:aS,extname:rS,join:oS,sep:"/"};function sS(n,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Mr(n);let s=0,r=-1,l=n.length,u;if(t===void 0||t.length===0||t.length>n.length){for(;l--;)if(n.codePointAt(l)===47){if(u){s=l+1;break}}else r<0&&(u=!0,r=l+1);return r<0?"":n.slice(s,r)}if(t===n)return"";let c=-1,p=t.length-1;for(;l--;)if(n.codePointAt(l)===47){if(u){s=l+1;break}}else c<0&&(u=!0,c=l+1),p>-1&&(n.codePointAt(l)===t.codePointAt(p--)?p<0&&(r=l):(p=-1,r=c));return s===r?r=c:r<0&&(r=n.length),n.slice(s,r)}function aS(n){if(Mr(n),n.length===0)return".";let t=-1,s=n.length,r;for(;--s;)if(n.codePointAt(s)===47){if(r){t=s;break}}else r||(r=!0);return t<0?n.codePointAt(0)===47?"/":".":t===1&&n.codePointAt(0)===47?"//":n.slice(0,t)}function rS(n){Mr(n);let t=n.length,s=-1,r=0,l=-1,u=0,c;for(;t--;){const p=n.codePointAt(t);if(p===47){if(c){r=t+1;break}continue}s<0&&(c=!0,s=t+1),p===46?l<0?l=t:u!==1&&(u=1):l>-1&&(u=-1)}return l<0||s<0||u===0||u===1&&l===s-1&&l===r+1?"":n.slice(l,s)}function oS(...n){let t=-1,s;for(;++t<n.length;)Mr(n[t]),n[t]&&(s=s===void 0?n[t]:s+"/"+n[t]);return s===void 0?".":lS(s)}function lS(n){Mr(n);const t=n.codePointAt(0)===47;let s=uS(n,!t);return s.length===0&&!t&&(s="."),s.length>0&&n.codePointAt(n.length-1)===47&&(s+="/"),t?"/"+s:s}function uS(n,t){let s="",r=0,l=-1,u=0,c=-1,p,h;for(;++c<=n.length;){if(c<n.length)p=n.codePointAt(c);else{if(p===47)break;p=47}if(p===47){if(!(l===c-1||u===1))if(l!==c-1&&u===2){if(s.length<2||r!==2||s.codePointAt(s.length-1)!==46||s.codePointAt(s.length-2)!==46){if(s.length>2){if(h=s.lastIndexOf("/"),h!==s.length-1){h<0?(s="",r=0):(s=s.slice(0,h),r=s.length-1-s.lastIndexOf("/")),l=c,u=0;continue}}else if(s.length>0){s="",r=0,l=c,u=0;continue}}t&&(s=s.length>0?s+"/..":"..",r=2)}else s.length>0?s+="/"+n.slice(l+1,c):s=n.slice(l+1,c),r=c-l-1;l=c,u=0}else p===46&&u>-1?u++:u=-1}return s}function Mr(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}const cS={cwd:dS};function dS(){return"/"}function Ad(n){return!!(n!==null&&typeof n=="object"&&"href"in n&&n.href&&"protocol"in n&&n.protocol&&n.auth===void 0)}function pS(n){if(typeof n=="string")n=new URL(n);else if(!Ad(n)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+n+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(n.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return mS(n)}function mS(n){if(n.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=n.pathname;let s=-1;for(;++s<t.length;)if(t.codePointAt(s)===37&&t.codePointAt(s+1)===50){const r=t.codePointAt(s+2);if(r===70||r===102){const l=new TypeError("File URL path must not include encoded / characters");throw l.code="ERR_INVALID_FILE_URL_PATH",l}}return decodeURIComponent(t)}const Jc=["history","path","basename","stem","extname","dirname"];class s_{constructor(t){let s;t?Ad(t)?s={path:t}:typeof t=="string"||fS(t)?s={value:t}:s=t:s={},this.cwd="cwd"in s?"":cS.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Jc.length;){const u=Jc[r];u in s&&s[u]!==void 0&&s[u]!==null&&(this[u]=u==="history"?[...s[u]]:s[u])}let l;for(l in s)Jc.includes(l)||(this[l]=s[l])}get basename(){return typeof this.path=="string"?St.basename(this.path):void 0}set basename(t){Wc(t,"basename"),Yc(t,"basename"),this.path=St.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?St.dirname(this.path):void 0}set dirname(t){kg(this.basename,"dirname"),this.path=St.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?St.extname(this.path):void 0}set extname(t){if(Yc(t,"extname"),kg(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=St.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Ad(t)&&(t=pS(t)),Wc(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?St.basename(this.path,this.extname):void 0}set stem(t){Wc(t,"stem"),Yc(t,"stem"),this.path=St.join(this.dirname||"",t+(this.extname||""))}fail(t,s,r){const l=this.message(t,s,r);throw l.fatal=!0,l}info(t,s,r){const l=this.message(t,s,r);return l.fatal=void 0,l}message(t,s,r){const l=new bn(t,s,r);return this.path&&(l.name=this.path+":"+l.name,l.file=this.path),l.fatal=!1,this.messages.push(l),l}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Yc(n,t){if(n&&n.includes(St.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+St.sep+"`")}function Wc(n,t){if(!n)throw new Error("`"+t+"` cannot be empty")}function kg(n,t){if(!n)throw new Error("Setting `"+t+"` requires `path` to be set too")}function fS(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const hS=(function(n){const r=this.constructor.prototype,l=r[n],u=function(){return l.apply(u,arguments)};return Object.setPrototypeOf(u,r),u}),gS={}.hasOwnProperty;class $d extends hS{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=tS()}copy(){const t=new $d;let s=-1;for(;++s<this.attachers.length;){const r=this.attachers[s];t.use(...r)}return t.data($c(!0,{},this.namespace)),t}data(t,s){return typeof t=="string"?arguments.length===2?(ed("data",this.frozen),this.namespace[t]=s,this):gS.call(this.namespace,t)&&this.namespace[t]||void 0:t?(ed("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[s,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const l=s.call(t,...r);typeof l=="function"&&this.transformers.use(l)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const s=$o(t),r=this.parser||this.Parser;return Xc("parse",r),r(String(s),s)}process(t,s){const r=this;return this.freeze(),Xc("process",this.parser||this.Parser),Zc("process",this.compiler||this.Compiler),s?l(void 0,s):new Promise(l);function l(u,c){const p=$o(t),h=r.parse(p);r.run(h,p,function(g,v,T){if(g||!v||!T)return f(g);const C=v,E=r.stringify(C,T);CS(E)?T.value=E:T.result=E,f(g,T)});function f(g,v){g||!v?c(g):u?u(v):s(void 0,v)}}}processSync(t){let s=!1,r;return this.freeze(),Xc("processSync",this.parser||this.Parser),Zc("processSync",this.compiler||this.Compiler),this.process(t,l),zg("processSync","process",s),r;function l(u,c){s=!0,wg(u),r=c}}run(t,s,r){Ug(t),this.freeze();const l=this.transformers;return!r&&typeof s=="function"&&(r=s,s=void 0),r?u(void 0,r):new Promise(u);function u(c,p){const h=$o(s);l.run(t,h,f);function f(g,v,T){const C=v||t;g?p(g):c?c(C):r(void 0,C,T)}}}runSync(t,s){let r=!1,l;return this.run(t,s,u),zg("runSync","run",r),l;function u(c,p){wg(c),l=p,r=!0}}stringify(t,s){this.freeze();const r=$o(s),l=this.compiler||this.Compiler;return Zc("stringify",l),Ug(t),l(t,r)}use(t,...s){const r=this.attachers,l=this.namespace;if(ed("use",this.frozen),t!=null)if(typeof t=="function")h(t,s);else if(typeof t=="object")Array.isArray(t)?p(t):c(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function u(f){if(typeof f=="function")h(f,[]);else if(typeof f=="object")if(Array.isArray(f)){const[g,...v]=f;h(g,v)}else c(f);else throw new TypeError("Expected usable value, not `"+f+"`")}function c(f){if(!("plugins"in f)&&!("settings"in f))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");p(f.plugins),f.settings&&(l.settings=$c(!0,l.settings,f.settings))}function p(f){let g=-1;if(f!=null)if(Array.isArray(f))for(;++g<f.length;){const v=f[g];u(v)}else throw new TypeError("Expected a list of plugins, not `"+f+"`")}function h(f,g){let v=-1,T=-1;for(;++v<r.length;)if(r[v][0]===f){T=v;break}if(T===-1)r.push([f,...g]);else if(g.length>0){let[C,...E]=g;const M=r[T][1];Td(M)&&Td(C)&&(C=$c(!0,M,C)),r[T]=[f,C,...E]}}}}const vS=new $d().freeze();function Xc(n,t){if(typeof t!="function")throw new TypeError("Cannot `"+n+"` without `parser`")}function Zc(n,t){if(typeof t!="function")throw new TypeError("Cannot `"+n+"` without `compiler`")}function ed(n,t){if(t)throw new Error("Cannot call `"+n+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ug(n){if(!Td(n)||typeof n.type!="string")throw new TypeError("Expected node, got `"+n+"`")}function zg(n,t,s){if(!s)throw new Error("`"+n+"` finished async. Use `"+t+"` instead")}function $o(n){return _S(n)?n:new s_(n)}function _S(n){return!!(n&&typeof n=="object"&&"message"in n&&"messages"in n)}function CS(n){return typeof n=="string"||TS(n)}function TS(n){return!!(n&&typeof n=="object"&&"byteLength"in n&&"byteOffset"in n)}const AS="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Fg=[],Gg={allowDangerousHtml:!0},ES=/^(https?|ircs?|mailto|xmpp)$/i,SS=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function MS(n){const t=bS(n),s=yS(n);return RS(t.runSync(t.parse(s),s),n)}function bS(n){const t=n.rehypePlugins||Fg,s=n.remarkPlugins||Fg,r=n.remarkRehypeOptions?{...n.remarkRehypeOptions,...Gg}:Gg;return vS().use(aE).use(s).use(ZE,r).use(t)}function yS(n){const t=n.children||"",s=new s_;return typeof t=="string"&&(s.value=t),s}function RS(n,t){const s=t.allowedElements,r=t.allowElement,l=t.components,u=t.disallowedElements,c=t.skipHtml,p=t.unwrapDisallowed,h=t.urlTransform||OS;for(const g of SS)Object.hasOwn(t,g.from)&&(""+g.from+(g.to?"use `"+g.to+"` instead":"remove it")+AS+g.id,void 0);return t.className&&(n={type:"element",tagName:"div",properties:{className:t.className},children:n.type==="root"?n.children:[n]}),Kd(n,f),F0(n,{Fragment:V.Fragment,components:l,ignoreInvalidStyle:!0,jsx:V.jsx,jsxs:V.jsxs,passKeys:!0,passNode:!0});function f(g,v,T){if(g.type==="raw"&&T&&typeof v=="number")return c?T.children.splice(v,1):T.children[v]={type:"text",value:g.value},v;if(g.type==="element"){let C;for(C in Hc)if(Object.hasOwn(Hc,C)&&Object.hasOwn(g.properties,C)){const E=g.properties[C],M=Hc[C];(M===null||M.includes(g.tagName))&&(g.properties[C]=h(String(E||""),C,g))}}if(g.type==="element"){let C=s?!s.includes(g.tagName):u?u.includes(g.tagName):!1;if(!C&&r&&typeof v=="number"&&(C=!r(g,v,T)),C&&T&&typeof v=="number")return p&&g.children?T.children.splice(v,1,...g.children):T.children.splice(v,1),v}}}function OS(n){const t=n.indexOf(":"),s=n.indexOf("?"),r=n.indexOf("#"),l=n.indexOf("/");return t===-1||l!==-1&&t>l||s!==-1&&t>s||r!==-1&&t>r||ES.test(n.slice(0,t))?n:""}function Hg(n,t){const s=String(n);if(typeof t!="string")throw new TypeError("Expected character");let r=0,l=s.indexOf(t);for(;l!==-1;)r++,l=s.indexOf(t,l+t.length);return r}function DS(n){if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function qS(n,t,s){const l=fl((s||{}).ignore||[]),u=NS(t);let c=-1;for(;++c<u.length;)i_(n,"text",p);function p(f,g){let v=-1,T;for(;++v<g.length;){const C=g[v],E=T?T.children:void 0;if(l(C,E?E.indexOf(C):void 0,T))return;T=C}if(T)return h(f,g)}function h(f,g){const v=g[g.length-1],T=u[c][0],C=u[c][1];let E=0;const q=v.children.indexOf(f);let y=!1,I=[];T.lastIndex=0;let O=T.exec(f.value);for(;O;){const G=O.index,J={index:O.index,input:O.input,stack:[...g,f]};let x=C(...O,J);if(typeof x=="string"&&(x=x.length>0?{type:"text",value:x}:void 0),x===!1?T.lastIndex=G+1:(E!==G&&I.push({type:"text",value:f.value.slice(E,G)}),Array.isArray(x)?I.push(...x):x&&I.push(x),E=G+O[0].length,y=!0),!T.global)break;O=T.exec(f.value)}return y?(E<f.value.length&&I.push({type:"text",value:f.value.slice(E)}),v.children.splice(q,1,...I)):I=[f],q+I.length}}function NS(n){const t=[];if(!Array.isArray(n))throw new TypeError("Expected find and replace tuple or list of tuples");const s=!n[0]||Array.isArray(n[0])?n:[n];let r=-1;for(;++r<s.length;){const l=s[r];t.push([VS(l[0]),IS(l[1])])}return t}function VS(n){return typeof n=="string"?new RegExp(DS(n),"g"):n}function IS(n){return typeof n=="function"?n:function(){return n}}const nd="phrasing",td=["autolink","link","image","label"];function PS(){return{transforms:[zS],enter:{literalAutolink:LS,literalAutolinkEmail:id,literalAutolinkHttp:id,literalAutolinkWww:id},exit:{literalAutolink:US,literalAutolinkEmail:kS,literalAutolinkHttp:wS,literalAutolinkWww:jS}}}function xS(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:nd,notInConstruct:td},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:nd,notInConstruct:td},{character:":",before:"[ps]",after:"\\/",inConstruct:nd,notInConstruct:td}]}}function LS(n){this.enter({type:"link",title:null,url:"",children:[]},n)}function id(n){this.config.enter.autolinkProtocol.call(this,n)}function wS(n){this.config.exit.autolinkProtocol.call(this,n)}function jS(n){this.config.exit.data.call(this,n);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(n)}function kS(n){this.config.exit.autolinkEmail.call(this,n)}function US(n){this.exit(n)}function zS(n){qS(n,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,FS],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),GS]],{ignore:["link","linkReference"]})}function FS(n,t,s,r,l){let u="";if(!a_(l)||(/^w/i.test(t)&&(s=t+s,t="",u="http://"),!HS(s)))return!1;const c=BS(s+r);if(!c[0])return!1;const p={type:"link",title:null,url:u+t+c[0],children:[{type:"text",value:t+c[0]}]};return c[1]?[p,{type:"text",value:c[1]}]:p}function GS(n,t,s,r){return!a_(r,!0)||/[-\d_]$/.test(s)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+s,children:[{type:"text",value:t+"@"+s}]}}function HS(n){const t=n.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function BS(n){const t=/[!"&'),.:;<>?\]}]+$/.exec(n);if(!t)return[n,void 0];n=n.slice(0,t.index);let s=t[0],r=s.indexOf(")");const l=Hg(n,"(");let u=Hg(n,")");for(;r!==-1&&l>u;)n+=s.slice(0,r+1),s=s.slice(r+1),r=s.indexOf(")"),u++;return[n,s]}function a_(n,t){const s=n.input.charCodeAt(n.index-1);return(n.index===0||Wi(s)||dl(s))&&(!t||s!==47)}r_.peek=eM;function QS(){this.buffer()}function KS(n){this.enter({type:"footnoteReference",identifier:"",label:""},n)}function $S(){this.buffer()}function JS(n){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},n)}function YS(n){const t=this.resume(),s=this.stack[this.stack.length-1];s.type,s.identifier=_t(this.sliceSerialize(n)).toLowerCase(),s.label=t}function WS(n){this.exit(n)}function XS(n){const t=this.resume(),s=this.stack[this.stack.length-1];s.type,s.identifier=_t(this.sliceSerialize(n)).toLowerCase(),s.label=t}function ZS(n){this.exit(n)}function eM(){return"["}function r_(n,t,s,r){const l=s.createTracker(r);let u=l.move("[^");const c=s.enter("footnoteReference"),p=s.enter("reference");return u+=l.move(s.safe(s.associationId(n),{after:"]",before:u})),p(),c(),u+=l.move("]"),u}function nM(){return{enter:{gfmFootnoteCallString:QS,gfmFootnoteCall:KS,gfmFootnoteDefinitionLabelString:$S,gfmFootnoteDefinition:JS},exit:{gfmFootnoteCallString:YS,gfmFootnoteCall:WS,gfmFootnoteDefinitionLabelString:XS,gfmFootnoteDefinition:ZS}}}function tM(n){let t=!1;return n&&n.firstLineBlank&&(t=!0),{handlers:{footnoteDefinition:s,footnoteReference:r_},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function s(r,l,u,c){const p=u.createTracker(c);let h=p.move("[^");const f=u.enter("footnoteDefinition"),g=u.enter("label");return h+=p.move(u.safe(u.associationId(r),{before:h,after:"]"})),g(),h+=p.move("]:"),r.children&&r.children.length>0&&(p.shift(4),h+=p.move((t?`
`:" ")+u.indentLines(u.containerFlow(r,p.current()),t?o_:iM))),f(),h}}function iM(n,t,s){return t===0?n:o_(n,t,s)}function o_(n,t,s){return(s?"":"    ")+n}const sM=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];l_.peek=uM;function aM(){return{canContainEols:["delete"],enter:{strikethrough:oM},exit:{strikethrough:lM}}}function rM(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:sM}],handlers:{delete:l_}}}function oM(n){this.enter({type:"delete",children:[]},n)}function lM(n){this.exit(n)}function l_(n,t,s,r){const l=s.createTracker(r),u=s.enter("strikethrough");let c=l.move("~~");return c+=s.containerPhrasing(n,{...l.current(),before:c,after:"~"}),c+=l.move("~~"),u(),c}function uM(){return"~"}function cM(n){return n.length}function dM(n,t){const s=t||{},r=(s.align||[]).concat(),l=s.stringLength||cM,u=[],c=[],p=[],h=[];let f=0,g=-1;for(;++g<n.length;){const M=[],q=[];let y=-1;for(n[g].length>f&&(f=n[g].length);++y<n[g].length;){const I=pM(n[g][y]);if(s.alignDelimiters!==!1){const O=l(I);q[y]=O,(h[y]===void 0||O>h[y])&&(h[y]=O)}M.push(I)}c[g]=M,p[g]=q}let v=-1;if(typeof r=="object"&&"length"in r)for(;++v<f;)u[v]=Bg(r[v]);else{const M=Bg(r);for(;++v<f;)u[v]=M}v=-1;const T=[],C=[];for(;++v<f;){const M=u[v];let q="",y="";M===99?(q=":",y=":"):M===108?q=":":M===114&&(y=":");let I=s.alignDelimiters===!1?1:Math.max(1,h[v]-q.length-y.length);const O=q+"-".repeat(I)+y;s.alignDelimiters!==!1&&(I=q.length+I+y.length,I>h[v]&&(h[v]=I),C[v]=I),T[v]=O}c.splice(1,0,T),p.splice(1,0,C),g=-1;const E=[];for(;++g<c.length;){const M=c[g],q=p[g];v=-1;const y=[];for(;++v<f;){const I=M[v]||"";let O="",G="";if(s.alignDelimiters!==!1){const J=h[v]-(q[v]||0),x=u[v];x===114?O=" ".repeat(J):x===99?J%2?(O=" ".repeat(J/2+.5),G=" ".repeat(J/2-.5)):(O=" ".repeat(J/2),G=O):G=" ".repeat(J)}s.delimiterStart!==!1&&!v&&y.push("|"),s.padding!==!1&&!(s.alignDelimiters===!1&&I==="")&&(s.delimiterStart!==!1||v)&&y.push(" "),s.alignDelimiters!==!1&&y.push(O),y.push(I),s.alignDelimiters!==!1&&y.push(G),s.padding!==!1&&y.push(" "),(s.delimiterEnd!==!1||v!==f-1)&&y.push("|")}E.push(s.delimiterEnd===!1?y.join("").replace(/ +$/,""):y.join(""))}return E.join(`
`)}function pM(n){return n==null?"":String(n)}function Bg(n){const t=typeof n=="string"?n.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function mM(n,t,s,r){const l=s.enter("blockquote"),u=s.createTracker(r);u.move("> "),u.shift(2);const c=s.indentLines(s.containerFlow(n,u.current()),fM);return l(),c}function fM(n,t,s){return">"+(s?"":" ")+n}function hM(n,t){return Qg(n,t.inConstruct,!0)&&!Qg(n,t.notInConstruct,!1)}function Qg(n,t,s){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return s;let r=-1;for(;++r<t.length;)if(n.includes(t[r]))return!0;return!1}function Kg(n,t,s,r){let l=-1;for(;++l<s.unsafe.length;)if(s.unsafe[l].character===`
`&&hM(s.stack,s.unsafe[l]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function gM(n,t){const s=String(n);let r=s.indexOf(t),l=r,u=0,c=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===l?++u>c&&(c=u):u=1,l=r+t.length,r=s.indexOf(t,l);return c}function vM(n,t){return!!(t.options.fences===!1&&n.value&&!n.lang&&/[^ \r\n]/.test(n.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(n.value))}function _M(n){const t=n.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function CM(n,t,s,r){const l=_M(s),u=n.value||"",c=l==="`"?"GraveAccent":"Tilde";if(vM(n,s)){const v=s.enter("codeIndented"),T=s.indentLines(u,TM);return v(),T}const p=s.createTracker(r),h=l.repeat(Math.max(gM(u,l)+1,3)),f=s.enter("codeFenced");let g=p.move(h);if(n.lang){const v=s.enter(`codeFencedLang${c}`);g+=p.move(s.safe(n.lang,{before:g,after:" ",encode:["`"],...p.current()})),v()}if(n.lang&&n.meta){const v=s.enter(`codeFencedMeta${c}`);g+=p.move(" "),g+=p.move(s.safe(n.meta,{before:g,after:`
`,encode:["`"],...p.current()})),v()}return g+=p.move(`
`),u&&(g+=p.move(u+`
`)),g+=p.move(h),f(),g}function TM(n,t,s){return(s?"":"    ")+n}function Jd(n){const t=n.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function AM(n,t,s,r){const l=Jd(s),u=l==='"'?"Quote":"Apostrophe",c=s.enter("definition");let p=s.enter("label");const h=s.createTracker(r);let f=h.move("[");return f+=h.move(s.safe(s.associationId(n),{before:f,after:"]",...h.current()})),f+=h.move("]: "),p(),!n.url||/[\0- \u007F]/.test(n.url)?(p=s.enter("destinationLiteral"),f+=h.move("<"),f+=h.move(s.safe(n.url,{before:f,after:">",...h.current()})),f+=h.move(">")):(p=s.enter("destinationRaw"),f+=h.move(s.safe(n.url,{before:f,after:n.title?" ":`
`,...h.current()}))),p(),n.title&&(p=s.enter(`title${u}`),f+=h.move(" "+l),f+=h.move(s.safe(n.title,{before:f,after:l,...h.current()})),f+=h.move(l),p()),c(),f}function EM(n){const t=n.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}function fr(n){return"&#x"+n.toString(16).toUpperCase()+";"}function ol(n,t,s){const r=ta(n),l=ta(t);return r===void 0?l===void 0?s==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:r===1?l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:l===void 0?{inside:!1,outside:!1}:l===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}u_.peek=SM;function u_(n,t,s,r){const l=EM(s),u=s.enter("emphasis"),c=s.createTracker(r),p=c.move(l);let h=c.move(s.containerPhrasing(n,{after:l,before:p,...c.current()}));const f=h.charCodeAt(0),g=ol(r.before.charCodeAt(r.before.length-1),f,l);g.inside&&(h=fr(f)+h.slice(1));const v=h.charCodeAt(h.length-1),T=ol(r.after.charCodeAt(0),v,l);T.inside&&(h=h.slice(0,-1)+fr(v));const C=c.move(l);return u(),s.attentionEncodeSurroundingInfo={after:T.outside,before:g.outside},p+h+C}function SM(n,t,s){return s.options.emphasis||"*"}function MM(n,t){let s=!1;return Kd(n,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return s=!0,_d}),!!((!n.depth||n.depth<3)&&Ud(n)&&(t.options.setext||s))}function bM(n,t,s,r){const l=Math.max(Math.min(6,n.depth||1),1),u=s.createTracker(r);if(MM(n,s)){const g=s.enter("headingSetext"),v=s.enter("phrasing"),T=s.containerPhrasing(n,{...u.current(),before:`
`,after:`
`});return v(),g(),T+`
`+(l===1?"=":"-").repeat(T.length-(Math.max(T.lastIndexOf("\r"),T.lastIndexOf(`
`))+1))}const c="#".repeat(l),p=s.enter("headingAtx"),h=s.enter("phrasing");u.move(c+" ");let f=s.containerPhrasing(n,{before:"# ",after:`
`,...u.current()});return/^[\t ]/.test(f)&&(f=fr(f.charCodeAt(0))+f.slice(1)),f=f?c+" "+f:c,s.options.closeAtx&&(f+=" "+c),h(),p(),f}c_.peek=yM;function c_(n){return n.value||""}function yM(){return"<"}d_.peek=RM;function d_(n,t,s,r){const l=Jd(s),u=l==='"'?"Quote":"Apostrophe",c=s.enter("image");let p=s.enter("label");const h=s.createTracker(r);let f=h.move("![");return f+=h.move(s.safe(n.alt,{before:f,after:"]",...h.current()})),f+=h.move("]("),p(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(p=s.enter("destinationLiteral"),f+=h.move("<"),f+=h.move(s.safe(n.url,{before:f,after:">",...h.current()})),f+=h.move(">")):(p=s.enter("destinationRaw"),f+=h.move(s.safe(n.url,{before:f,after:n.title?" ":")",...h.current()}))),p(),n.title&&(p=s.enter(`title${u}`),f+=h.move(" "+l),f+=h.move(s.safe(n.title,{before:f,after:l,...h.current()})),f+=h.move(l),p()),f+=h.move(")"),c(),f}function RM(){return"!"}p_.peek=OM;function p_(n,t,s,r){const l=n.referenceType,u=s.enter("imageReference");let c=s.enter("label");const p=s.createTracker(r);let h=p.move("![");const f=s.safe(n.alt,{before:h,after:"]",...p.current()});h+=p.move(f+"]["),c();const g=s.stack;s.stack=[],c=s.enter("reference");const v=s.safe(s.associationId(n),{before:h,after:"]",...p.current()});return c(),s.stack=g,u(),l==="full"||!f||f!==v?h+=p.move(v+"]"):l==="shortcut"?h=h.slice(0,-1):h+=p.move("]"),h}function OM(){return"!"}m_.peek=DM;function m_(n,t,s){let r=n.value||"",l="`",u=-1;for(;new RegExp("(^|[^`])"+l+"([^`]|$)").test(r);)l+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++u<s.unsafe.length;){const c=s.unsafe[u],p=s.compilePattern(c);let h;if(c.atBreak)for(;h=p.exec(r);){let f=h.index;r.charCodeAt(f)===10&&r.charCodeAt(f-1)===13&&f--,r=r.slice(0,f)+" "+r.slice(h.index+1)}}return l+r+l}function DM(){return"`"}function f_(n,t){const s=Ud(n);return!!(!t.options.resourceLink&&n.url&&!n.title&&n.children&&n.children.length===1&&n.children[0].type==="text"&&(s===n.url||"mailto:"+s===n.url)&&/^[a-z][a-z+.-]+:/i.test(n.url)&&!/[\0- <>\u007F]/.test(n.url))}h_.peek=qM;function h_(n,t,s,r){const l=Jd(s),u=l==='"'?"Quote":"Apostrophe",c=s.createTracker(r);let p,h;if(f_(n,s)){const g=s.stack;s.stack=[],p=s.enter("autolink");let v=c.move("<");return v+=c.move(s.containerPhrasing(n,{before:v,after:">",...c.current()})),v+=c.move(">"),p(),s.stack=g,v}p=s.enter("link"),h=s.enter("label");let f=c.move("[");return f+=c.move(s.containerPhrasing(n,{before:f,after:"](",...c.current()})),f+=c.move("]("),h(),!n.url&&n.title||/[\0- \u007F]/.test(n.url)?(h=s.enter("destinationLiteral"),f+=c.move("<"),f+=c.move(s.safe(n.url,{before:f,after:">",...c.current()})),f+=c.move(">")):(h=s.enter("destinationRaw"),f+=c.move(s.safe(n.url,{before:f,after:n.title?" ":")",...c.current()}))),h(),n.title&&(h=s.enter(`title${u}`),f+=c.move(" "+l),f+=c.move(s.safe(n.title,{before:f,after:l,...c.current()})),f+=c.move(l),h()),f+=c.move(")"),p(),f}function qM(n,t,s){return f_(n,s)?"<":"["}g_.peek=NM;function g_(n,t,s,r){const l=n.referenceType,u=s.enter("linkReference");let c=s.enter("label");const p=s.createTracker(r);let h=p.move("[");const f=s.containerPhrasing(n,{before:h,after:"]",...p.current()});h+=p.move(f+"]["),c();const g=s.stack;s.stack=[],c=s.enter("reference");const v=s.safe(s.associationId(n),{before:h,after:"]",...p.current()});return c(),s.stack=g,u(),l==="full"||!f||f!==v?h+=p.move(v+"]"):l==="shortcut"?h=h.slice(0,-1):h+=p.move("]"),h}function NM(){return"["}function Yd(n){const t=n.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function VM(n){const t=Yd(n),s=n.options.bulletOther;if(!s)return t==="*"?"-":"*";if(s!=="*"&&s!=="+"&&s!=="-")throw new Error("Cannot serialize items with `"+s+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(s===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+s+"`) to be different");return s}function IM(n){const t=n.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function v_(n){const t=n.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function PM(n,t,s,r){const l=s.enter("list"),u=s.bulletCurrent;let c=n.ordered?IM(s):Yd(s);const p=n.ordered?c==="."?")":".":VM(s);let h=t&&s.bulletLastUsed?c===s.bulletLastUsed:!1;if(!n.ordered){const g=n.children?n.children[0]:void 0;if((c==="*"||c==="-")&&g&&(!g.children||!g.children[0])&&s.stack[s.stack.length-1]==="list"&&s.stack[s.stack.length-2]==="listItem"&&s.stack[s.stack.length-3]==="list"&&s.stack[s.stack.length-4]==="listItem"&&s.indexStack[s.indexStack.length-1]===0&&s.indexStack[s.indexStack.length-2]===0&&s.indexStack[s.indexStack.length-3]===0&&(h=!0),v_(s)===c&&g){let v=-1;for(;++v<n.children.length;){const T=n.children[v];if(T&&T.type==="listItem"&&T.children&&T.children[0]&&T.children[0].type==="thematicBreak"){h=!0;break}}}}h&&(c=p),s.bulletCurrent=c;const f=s.containerFlow(n,r);return s.bulletLastUsed=c,s.bulletCurrent=u,l(),f}function xM(n){const t=n.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function LM(n,t,s,r){const l=xM(s);let u=s.bulletCurrent||Yd(s);t&&t.type==="list"&&t.ordered&&(u=(typeof t.start=="number"&&t.start>-1?t.start:1)+(s.options.incrementListMarker===!1?0:t.children.indexOf(n))+u);let c=u.length+1;(l==="tab"||l==="mixed"&&(t&&t.type==="list"&&t.spread||n.spread))&&(c=Math.ceil(c/4)*4);const p=s.createTracker(r);p.move(u+" ".repeat(c-u.length)),p.shift(c);const h=s.enter("listItem"),f=s.indentLines(s.containerFlow(n,p.current()),g);return h(),f;function g(v,T,C){return T?(C?"":" ".repeat(c))+v:(C?u:u+" ".repeat(c-u.length))+v}}function wM(n,t,s,r){const l=s.enter("paragraph"),u=s.enter("phrasing"),c=s.containerPhrasing(n,r);return u(),l(),c}const jM=fl(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function kM(n,t,s,r){return(n.children.some(function(c){return jM(c)})?s.containerPhrasing:s.containerFlow).call(s,n,r)}function UM(n){const t=n.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}__.peek=zM;function __(n,t,s,r){const l=UM(s),u=s.enter("strong"),c=s.createTracker(r),p=c.move(l+l);let h=c.move(s.containerPhrasing(n,{after:l,before:p,...c.current()}));const f=h.charCodeAt(0),g=ol(r.before.charCodeAt(r.before.length-1),f,l);g.inside&&(h=fr(f)+h.slice(1));const v=h.charCodeAt(h.length-1),T=ol(r.after.charCodeAt(0),v,l);T.inside&&(h=h.slice(0,-1)+fr(v));const C=c.move(l+l);return u(),s.attentionEncodeSurroundingInfo={after:T.outside,before:g.outside},p+h+C}function zM(n,t,s){return s.options.strong||"*"}function FM(n,t,s,r){return s.safe(n.value,r)}function GM(n){const t=n.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function HM(n,t,s){const r=(v_(s)+(s.options.ruleSpaces?" ":"")).repeat(GM(s));return s.options.ruleSpaces?r.slice(0,-1):r}const C_={blockquote:mM,break:Kg,code:CM,definition:AM,emphasis:u_,hardBreak:Kg,heading:bM,html:c_,image:d_,imageReference:p_,inlineCode:m_,link:h_,linkReference:g_,list:PM,listItem:LM,paragraph:wM,root:kM,strong:__,text:FM,thematicBreak:HM};function BM(){return{enter:{table:QM,tableData:$g,tableHeader:$g,tableRow:$M},exit:{codeText:JM,table:KM,tableData:sd,tableHeader:sd,tableRow:sd}}}function QM(n){const t=n._align;this.enter({type:"table",align:t.map(function(s){return s==="none"?null:s}),children:[]},n),this.data.inTable=!0}function KM(n){this.exit(n),this.data.inTable=void 0}function $M(n){this.enter({type:"tableRow",children:[]},n)}function sd(n){this.exit(n)}function $g(n){this.enter({type:"tableCell",children:[]},n)}function JM(n){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,YM));const s=this.stack[this.stack.length-1];s.type,s.value=t,this.exit(n)}function YM(n,t){return t==="|"?t:n}function WM(n){const t=n||{},s=t.tableCellPadding,r=t.tablePipeAlign,l=t.stringLength,u=s?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:T,table:c,tableCell:h,tableRow:p}};function c(C,E,M,q){return f(g(C,M,q),C.align)}function p(C,E,M,q){const y=v(C,M,q),I=f([y]);return I.slice(0,I.indexOf(`
`))}function h(C,E,M,q){const y=M.enter("tableCell"),I=M.enter("phrasing"),O=M.containerPhrasing(C,{...q,before:u,after:u});return I(),y(),O}function f(C,E){return dM(C,{align:E,alignDelimiters:r,padding:s,stringLength:l})}function g(C,E,M){const q=C.children;let y=-1;const I=[],O=E.enter("table");for(;++y<q.length;)I[y]=v(q[y],E,M);return O(),I}function v(C,E,M){const q=C.children;let y=-1;const I=[],O=E.enter("tableRow");for(;++y<q.length;)I[y]=h(q[y],C,E,M);return O(),I}function T(C,E,M){let q=C_.inlineCode(C,E,M);return M.stack.includes("tableCell")&&(q=q.replace(/\|/g,"\\$&")),q}}function XM(){return{exit:{taskListCheckValueChecked:Jg,taskListCheckValueUnchecked:Jg,paragraph:eb}}}function ZM(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:nb}}}function Jg(n){const t=this.stack[this.stack.length-2];t.type,t.checked=n.type==="taskListCheckValueChecked"}function eb(n){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const s=this.stack[this.stack.length-1];s.type;const r=s.children[0];if(r&&r.type==="text"){const l=t.children;let u=-1,c;for(;++u<l.length;){const p=l[u];if(p.type==="paragraph"){c=p;break}}c===s&&(r.value=r.value.slice(1),r.value.length===0?s.children.shift():s.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,s.position.start=Object.assign({},r.position.start)))}}this.exit(n)}function nb(n,t,s,r){const l=n.children[0],u=typeof n.checked=="boolean"&&l&&l.type==="paragraph",c="["+(n.checked?"x":" ")+"] ",p=s.createTracker(r);u&&p.move(c);let h=C_.listItem(n,t,s,{...r,...p.current()});return u&&(h=h.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,f)),h;function f(g){return g+c}}function tb(){return[PS(),nM(),aM(),BM(),XM()]}function ib(n){return{extensions:[xS(),tM(n),rM(),WM(n),ZM()]}}const sb={tokenize:cb,partial:!0},T_={tokenize:db,partial:!0},A_={tokenize:pb,partial:!0},E_={tokenize:mb,partial:!0},ab={tokenize:fb,partial:!0},S_={name:"wwwAutolink",tokenize:lb,previous:b_},M_={name:"protocolAutolink",tokenize:ub,previous:y_},Kt={name:"emailAutolink",tokenize:ob,previous:R_},Mt={};function rb(){return{text:Mt}}let Gi=48;for(;Gi<123;)Mt[Gi]=Kt,Gi++,Gi===58?Gi=65:Gi===91&&(Gi=97);Mt[43]=Kt;Mt[45]=Kt;Mt[46]=Kt;Mt[95]=Kt;Mt[72]=[Kt,M_];Mt[104]=[Kt,M_];Mt[87]=[Kt,S_];Mt[119]=[Kt,S_];function ob(n,t,s){const r=this;let l,u;return c;function c(v){return!Ed(v)||!R_.call(r,r.previous)||Wd(r.events)?s(v):(n.enter("literalAutolink"),n.enter("literalAutolinkEmail"),p(v))}function p(v){return Ed(v)?(n.consume(v),p):v===64?(n.consume(v),h):s(v)}function h(v){return v===46?n.check(ab,g,f)(v):v===45||v===95||Mn(v)?(u=!0,n.consume(v),h):g(v)}function f(v){return n.consume(v),l=!0,h}function g(v){return u&&l&&qn(r.previous)?(n.exit("literalAutolinkEmail"),n.exit("literalAutolink"),t(v)):s(v)}}function lb(n,t,s){const r=this;return l;function l(c){return c!==87&&c!==119||!b_.call(r,r.previous)||Wd(r.events)?s(c):(n.enter("literalAutolink"),n.enter("literalAutolinkWww"),n.check(sb,n.attempt(T_,n.attempt(A_,u),s),s)(c))}function u(c){return n.exit("literalAutolinkWww"),n.exit("literalAutolink"),t(c)}}function ub(n,t,s){const r=this;let l="",u=!1;return c;function c(v){return(v===72||v===104)&&y_.call(r,r.previous)&&!Wd(r.events)?(n.enter("literalAutolink"),n.enter("literalAutolinkHttp"),l+=String.fromCodePoint(v),n.consume(v),p):s(v)}function p(v){if(qn(v)&&l.length<5)return l+=String.fromCodePoint(v),n.consume(v),p;if(v===58){const T=l.toLowerCase();if(T==="http"||T==="https")return n.consume(v),h}return s(v)}function h(v){return v===47?(n.consume(v),u?f:(u=!0,h)):s(v)}function f(v){return v===null||sl(v)||Be(v)||Wi(v)||dl(v)?s(v):n.attempt(T_,n.attempt(A_,g),s)(v)}function g(v){return n.exit("literalAutolinkHttp"),n.exit("literalAutolink"),t(v)}}function cb(n,t,s){let r=0;return l;function l(c){return(c===87||c===119)&&r<3?(r++,n.consume(c),l):c===46&&r===3?(n.consume(c),u):s(c)}function u(c){return c===null?s(c):t(c)}}function db(n,t,s){let r,l,u;return c;function c(f){return f===46||f===95?n.check(E_,h,p)(f):f===null||Be(f)||Wi(f)||f!==45&&dl(f)?h(f):(u=!0,n.consume(f),c)}function p(f){return f===95?r=!0:(l=r,r=void 0),n.consume(f),c}function h(f){return l||r||!u?s(f):t(f)}}function pb(n,t){let s=0,r=0;return l;function l(c){return c===40?(s++,n.consume(c),l):c===41&&r<s?u(c):c===33||c===34||c===38||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===60||c===63||c===93||c===95||c===126?n.check(E_,t,u)(c):c===null||Be(c)||Wi(c)?t(c):(n.consume(c),l)}function u(c){return c===41&&r++,n.consume(c),l}}function mb(n,t,s){return r;function r(p){return p===33||p===34||p===39||p===41||p===42||p===44||p===46||p===58||p===59||p===63||p===95||p===126?(n.consume(p),r):p===38?(n.consume(p),u):p===93?(n.consume(p),l):p===60||p===null||Be(p)||Wi(p)?t(p):s(p)}function l(p){return p===null||p===40||p===91||Be(p)||Wi(p)?t(p):r(p)}function u(p){return qn(p)?c(p):s(p)}function c(p){return p===59?(n.consume(p),r):qn(p)?(n.consume(p),c):s(p)}}function fb(n,t,s){return r;function r(u){return n.consume(u),l}function l(u){return Mn(u)?s(u):t(u)}}function b_(n){return n===null||n===40||n===42||n===95||n===91||n===93||n===126||Be(n)}function y_(n){return!qn(n)}function R_(n){return!(n===47||Ed(n))}function Ed(n){return n===43||n===45||n===46||n===95||Mn(n)}function Wd(n){let t=n.length,s=!1;for(;t--;){const r=n[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){s=!0;break}if(r._gfmAutolinkLiteralWalkedInto){s=!1;break}}return n.length>0&&!s&&(n[n.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),s}const hb={tokenize:Sb,partial:!0};function gb(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Tb,continuation:{tokenize:Ab},exit:Eb}},text:{91:{name:"gfmFootnoteCall",tokenize:Cb},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:vb,resolveTo:_b}}}}function vb(n,t,s){const r=this;let l=r.events.length;const u=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let c;for(;l--;){const h=r.events[l][1];if(h.type==="labelImage"){c=h;break}if(h.type==="gfmFootnoteCall"||h.type==="labelLink"||h.type==="label"||h.type==="image"||h.type==="link")break}return p;function p(h){if(!c||!c._balanced)return s(h);const f=_t(r.sliceSerialize({start:c.end,end:r.now()}));return f.codePointAt(0)!==94||!u.includes(f.slice(1))?s(h):(n.enter("gfmFootnoteCallLabelMarker"),n.consume(h),n.exit("gfmFootnoteCallLabelMarker"),t(h))}}function _b(n,t){let s=n.length;for(;s--;)if(n[s][1].type==="labelImage"&&n[s][0]==="enter"){n[s][1];break}n[s+1][1].type="data",n[s+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},n[s+3][1].start),end:Object.assign({},n[n.length-1][1].end)},l={type:"gfmFootnoteCallMarker",start:Object.assign({},n[s+3][1].end),end:Object.assign({},n[s+3][1].end)};l.end.column++,l.end.offset++,l.end._bufferIndex++;const u={type:"gfmFootnoteCallString",start:Object.assign({},l.end),end:Object.assign({},n[n.length-1][1].start)},c={type:"chunkString",contentType:"string",start:Object.assign({},u.start),end:Object.assign({},u.end)},p=[n[s+1],n[s+2],["enter",r,t],n[s+3],n[s+4],["enter",l,t],["exit",l,t],["enter",u,t],["enter",c,t],["exit",c,t],["exit",u,t],n[n.length-2],n[n.length-1],["exit",r,t]];return n.splice(s,n.length-s+1,...p),n}function Cb(n,t,s){const r=this,l=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let u=0,c;return p;function p(v){return n.enter("gfmFootnoteCall"),n.enter("gfmFootnoteCallLabelMarker"),n.consume(v),n.exit("gfmFootnoteCallLabelMarker"),h}function h(v){return v!==94?s(v):(n.enter("gfmFootnoteCallMarker"),n.consume(v),n.exit("gfmFootnoteCallMarker"),n.enter("gfmFootnoteCallString"),n.enter("chunkString").contentType="string",f)}function f(v){if(u>999||v===93&&!c||v===null||v===91||Be(v))return s(v);if(v===93){n.exit("chunkString");const T=n.exit("gfmFootnoteCallString");return l.includes(_t(r.sliceSerialize(T)))?(n.enter("gfmFootnoteCallLabelMarker"),n.consume(v),n.exit("gfmFootnoteCallLabelMarker"),n.exit("gfmFootnoteCall"),t):s(v)}return Be(v)||(c=!0),u++,n.consume(v),v===92?g:f}function g(v){return v===91||v===92||v===93?(n.consume(v),u++,f):f(v)}}function Tb(n,t,s){const r=this,l=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let u,c=0,p;return h;function h(E){return n.enter("gfmFootnoteDefinition")._container=!0,n.enter("gfmFootnoteDefinitionLabel"),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(E),n.exit("gfmFootnoteDefinitionLabelMarker"),f}function f(E){return E===94?(n.enter("gfmFootnoteDefinitionMarker"),n.consume(E),n.exit("gfmFootnoteDefinitionMarker"),n.enter("gfmFootnoteDefinitionLabelString"),n.enter("chunkString").contentType="string",g):s(E)}function g(E){if(c>999||E===93&&!p||E===null||E===91||Be(E))return s(E);if(E===93){n.exit("chunkString");const M=n.exit("gfmFootnoteDefinitionLabelString");return u=_t(r.sliceSerialize(M)),n.enter("gfmFootnoteDefinitionLabelMarker"),n.consume(E),n.exit("gfmFootnoteDefinitionLabelMarker"),n.exit("gfmFootnoteDefinitionLabel"),T}return Be(E)||(p=!0),c++,n.consume(E),E===92?v:g}function v(E){return E===91||E===92||E===93?(n.consume(E),c++,g):g(E)}function T(E){return E===58?(n.enter("definitionMarker"),n.consume(E),n.exit("definitionMarker"),l.includes(u)||l.push(u),Ve(n,C,"gfmFootnoteDefinitionWhitespace")):s(E)}function C(E){return t(E)}}function Ab(n,t,s){return n.check(Sr,t,n.attempt(hb,t,s))}function Eb(n){n.exit("gfmFootnoteDefinition")}function Sb(n,t,s){const r=this;return Ve(n,l,"gfmFootnoteDefinitionIndent",5);function l(u){const c=r.events[r.events.length-1];return c&&c[1].type==="gfmFootnoteDefinitionIndent"&&c[2].sliceSerialize(c[1],!0).length===4?t(u):s(u)}}function Mb(n){let s=(n||{}).singleTilde;const r={name:"strikethrough",tokenize:u,resolveAll:l};return s==null&&(s=!0),{text:{126:r},insideSpan:{null:[r]},attentionMarkers:{null:[126]}};function l(c,p){let h=-1;for(;++h<c.length;)if(c[h][0]==="enter"&&c[h][1].type==="strikethroughSequenceTemporary"&&c[h][1]._close){let f=h;for(;f--;)if(c[f][0]==="exit"&&c[f][1].type==="strikethroughSequenceTemporary"&&c[f][1]._open&&c[h][1].end.offset-c[h][1].start.offset===c[f][1].end.offset-c[f][1].start.offset){c[h][1].type="strikethroughSequence",c[f][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},c[f][1].start),end:Object.assign({},c[h][1].end)},v={type:"strikethroughText",start:Object.assign({},c[f][1].end),end:Object.assign({},c[h][1].start)},T=[["enter",g,p],["enter",c[f][1],p],["exit",c[f][1],p],["enter",v,p]],C=p.parser.constructs.insideSpan.null;C&&Xn(T,T.length,0,pl(C,c.slice(f+1,h),p)),Xn(T,T.length,0,[["exit",v,p],["enter",c[h][1],p],["exit",c[h][1],p],["exit",g,p]]),Xn(c,f-1,h-f+3,T),h=f+T.length-2;break}}for(h=-1;++h<c.length;)c[h][1].type==="strikethroughSequenceTemporary"&&(c[h][1].type="data");return c}function u(c,p,h){const f=this.previous,g=this.events;let v=0;return T;function T(E){return f===126&&g[g.length-1][1].type!=="characterEscape"?h(E):(c.enter("strikethroughSequenceTemporary"),C(E))}function C(E){const M=ta(f);if(E===126)return v>1?h(E):(c.consume(E),v++,C);if(v<2&&!s)return h(E);const q=c.exit("strikethroughSequenceTemporary"),y=ta(E);return q._open=!y||y===2&&!!M,q._close=!M||M===2&&!!y,p(E)}}}class bb{constructor(){this.map=[]}add(t,s,r){yb(this,t,s,r)}consume(t){if(this.map.sort(function(u,c){return u[0]-c[0]}),this.map.length===0)return;let s=this.map.length;const r=[];for(;s>0;)s-=1,r.push(t.slice(this.map[s][0]+this.map[s][1]),this.map[s][2]),t.length=this.map[s][0];r.push(t.slice()),t.length=0;let l=r.pop();for(;l;){for(const u of l)t.push(u);l=r.pop()}this.map.length=0}}function yb(n,t,s,r){let l=0;if(!(s===0&&r.length===0)){for(;l<n.map.length;){if(n.map[l][0]===t){n.map[l][1]+=s,n.map[l][2].push(...r);return}l+=1}n.map.push([t,s,r])}}function Rb(n,t){let s=!1;const r=[];for(;t<n.length;){const l=n[t];if(s){if(l[0]==="enter")l[1].type==="tableContent"&&r.push(n[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(l[1].type==="tableContent"){if(n[t-1][1].type==="tableDelimiterMarker"){const u=r.length-1;r[u]=r[u]==="left"?"center":"right"}}else if(l[1].type==="tableDelimiterRow")break}else l[0]==="enter"&&l[1].type==="tableDelimiterRow"&&(s=!0);t+=1}return r}function Ob(){return{flow:{null:{name:"table",tokenize:Db,resolveAll:qb}}}}function Db(n,t,s){const r=this;let l=0,u=0,c;return p;function p(j){let ee=r.events.length-1;for(;ee>-1;){const ie=r.events[ee][1].type;if(ie==="lineEnding"||ie==="linePrefix")ee--;else break}const ne=ee>-1?r.events[ee][1].type:null,Te=ne==="tableHead"||ne==="tableRow"?x:h;return Te===x&&r.parser.lazy[r.now().line]?s(j):Te(j)}function h(j){return n.enter("tableHead"),n.enter("tableRow"),f(j)}function f(j){return j===124||(c=!0,u+=1),g(j)}function g(j){return j===null?s(j):pe(j)?u>1?(u=0,r.interrupt=!0,n.exit("tableRow"),n.enter("lineEnding"),n.consume(j),n.exit("lineEnding"),C):s(j):Re(j)?Ve(n,g,"whitespace")(j):(u+=1,c&&(c=!1,l+=1),j===124?(n.enter("tableCellDivider"),n.consume(j),n.exit("tableCellDivider"),c=!0,g):(n.enter("data"),v(j)))}function v(j){return j===null||j===124||Be(j)?(n.exit("data"),g(j)):(n.consume(j),j===92?T:v)}function T(j){return j===92||j===124?(n.consume(j),v):v(j)}function C(j){return r.interrupt=!1,r.parser.lazy[r.now().line]?s(j):(n.enter("tableDelimiterRow"),c=!1,Re(j)?Ve(n,E,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(j):E(j))}function E(j){return j===45||j===58?q(j):j===124?(c=!0,n.enter("tableCellDivider"),n.consume(j),n.exit("tableCellDivider"),M):J(j)}function M(j){return Re(j)?Ve(n,q,"whitespace")(j):q(j)}function q(j){return j===58?(u+=1,c=!0,n.enter("tableDelimiterMarker"),n.consume(j),n.exit("tableDelimiterMarker"),y):j===45?(u+=1,y(j)):j===null||pe(j)?G(j):J(j)}function y(j){return j===45?(n.enter("tableDelimiterFiller"),I(j)):J(j)}function I(j){return j===45?(n.consume(j),I):j===58?(c=!0,n.exit("tableDelimiterFiller"),n.enter("tableDelimiterMarker"),n.consume(j),n.exit("tableDelimiterMarker"),O):(n.exit("tableDelimiterFiller"),O(j))}function O(j){return Re(j)?Ve(n,G,"whitespace")(j):G(j)}function G(j){return j===124?E(j):j===null||pe(j)?!c||l!==u?J(j):(n.exit("tableDelimiterRow"),n.exit("tableHead"),t(j)):J(j)}function J(j){return s(j)}function x(j){return n.enter("tableRow"),$(j)}function $(j){return j===124?(n.enter("tableCellDivider"),n.consume(j),n.exit("tableCellDivider"),$):j===null||pe(j)?(n.exit("tableRow"),t(j)):Re(j)?Ve(n,$,"whitespace")(j):(n.enter("data"),ae(j))}function ae(j){return j===null||j===124||Be(j)?(n.exit("data"),$(j)):(n.consume(j),j===92?ue:ae)}function ue(j){return j===92||j===124?(n.consume(j),ae):ae(j)}}function qb(n,t){let s=-1,r=!0,l=0,u=[0,0,0,0],c=[0,0,0,0],p=!1,h=0,f,g,v;const T=new bb;for(;++s<n.length;){const C=n[s],E=C[1];C[0]==="enter"?E.type==="tableHead"?(p=!1,h!==0&&(Yg(T,t,h,f,g),g=void 0,h=0),f={type:"table",start:Object.assign({},E.start),end:Object.assign({},E.end)},T.add(s,0,[["enter",f,t]])):E.type==="tableRow"||E.type==="tableDelimiterRow"?(r=!0,v=void 0,u=[0,0,0,0],c=[0,s+1,0,0],p&&(p=!1,g={type:"tableBody",start:Object.assign({},E.start),end:Object.assign({},E.end)},T.add(s,0,[["enter",g,t]])),l=E.type==="tableDelimiterRow"?2:g?3:1):l&&(E.type==="data"||E.type==="tableDelimiterMarker"||E.type==="tableDelimiterFiller")?(r=!1,c[2]===0&&(u[1]!==0&&(c[0]=c[1],v=Jo(T,t,u,l,void 0,v),u=[0,0,0,0]),c[2]=s)):E.type==="tableCellDivider"&&(r?r=!1:(u[1]!==0&&(c[0]=c[1],v=Jo(T,t,u,l,void 0,v)),u=c,c=[u[1],s,0,0])):E.type==="tableHead"?(p=!0,h=s):E.type==="tableRow"||E.type==="tableDelimiterRow"?(h=s,u[1]!==0?(c[0]=c[1],v=Jo(T,t,u,l,s,v)):c[1]!==0&&(v=Jo(T,t,c,l,s,v)),l=0):l&&(E.type==="data"||E.type==="tableDelimiterMarker"||E.type==="tableDelimiterFiller")&&(c[3]=s)}for(h!==0&&Yg(T,t,h,f,g),T.consume(t.events),s=-1;++s<t.events.length;){const C=t.events[s];C[0]==="enter"&&C[1].type==="table"&&(C[1]._align=Rb(t.events,s))}return n}function Jo(n,t,s,r,l,u){const c=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",p="tableContent";s[0]!==0&&(u.end=Object.assign({},Js(t.events,s[0])),n.add(s[0],0,[["exit",u,t]]));const h=Js(t.events,s[1]);if(u={type:c,start:Object.assign({},h),end:Object.assign({},h)},n.add(s[1],0,[["enter",u,t]]),s[2]!==0){const f=Js(t.events,s[2]),g=Js(t.events,s[3]),v={type:p,start:Object.assign({},f),end:Object.assign({},g)};if(n.add(s[2],0,[["enter",v,t]]),r!==2){const T=t.events[s[2]],C=t.events[s[3]];if(T[1].end=Object.assign({},C[1].end),T[1].type="chunkText",T[1].contentType="text",s[3]>s[2]+1){const E=s[2]+1,M=s[3]-s[2]-1;n.add(E,M,[])}}n.add(s[3]+1,0,[["exit",v,t]])}return l!==void 0&&(u.end=Object.assign({},Js(t.events,l)),n.add(l,0,[["exit",u,t]]),u=void 0),u}function Yg(n,t,s,r,l){const u=[],c=Js(t.events,s);l&&(l.end=Object.assign({},c),u.push(["exit",l,t])),r.end=Object.assign({},c),u.push(["exit",r,t]),n.add(s+1,0,u)}function Js(n,t){const s=n[t],r=s[0]==="enter"?"start":"end";return s[1][r]}const Nb={name:"tasklistCheck",tokenize:Ib};function Vb(){return{text:{91:Nb}}}function Ib(n,t,s){const r=this;return l;function l(h){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?s(h):(n.enter("taskListCheck"),n.enter("taskListCheckMarker"),n.consume(h),n.exit("taskListCheckMarker"),u)}function u(h){return Be(h)?(n.enter("taskListCheckValueUnchecked"),n.consume(h),n.exit("taskListCheckValueUnchecked"),c):h===88||h===120?(n.enter("taskListCheckValueChecked"),n.consume(h),n.exit("taskListCheckValueChecked"),c):s(h)}function c(h){return h===93?(n.enter("taskListCheckMarker"),n.consume(h),n.exit("taskListCheckMarker"),n.exit("taskListCheck"),p):s(h)}function p(h){return pe(h)?t(h):Re(h)?n.check({tokenize:Pb},t,s)(h):s(h)}}function Pb(n,t,s){return Ve(n,r,"whitespace");function r(l){return l===null?s(l):t(l)}}function xb(n){return jv([rb(),gb(),Mb(n),Ob(),Vb()])}const Lb={};function wb(n){const t=this,s=n||Lb,r=t.data(),l=r.micromarkExtensions||(r.micromarkExtensions=[]),u=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),c=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);l.push(xb(s)),u.push(tb()),c.push(ib(s))}const jb=`#  Fiche de Validation MP  R1  Impact sur la vie personnelle et professionnelle

> **Vulnrabilit** : V1  Social & Relationnel  
> **ASR** :  Mesurer l'impact de l'aidance sur votre vie et ajuster   
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## CONTEXTE  Big Picture V1

### Rpartition des 15 questions V1 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **R1** | Impact vie perso/pro | 3 | O27, O28, N7 | Retentissement de l'aidance sur la vie de l'aidant |
| **R2** | Soutien entourage | 4 | E1, E2, E3, N4 | Rseau de soutien, isolement aidant |
| **R3** | Isolement du proche | 3 | N20, O47, O48 | Vie sociale du proche aid |
| **R4** | Relation aidant/proche | 5 | E4, E5, E6, O30, O31 | Qualit de la relation, acceptation aide |

> **R1 se concentre sur l'IMPACT** (la consquence de l'aidance sur la vie de l'aidant) alors que R2 parle du SOUTIEN (le rseau humain), R3 de l'ISOLEMENT DU PROCHE (pas de l'aidant), et R4 de la RELATION INTERPERSONNELLE. La frontire est clinique : R1 = "qu'est-ce que a change dans MA vie", R2 = "qui m'aide", R3 = "mon proche est-il isol", R4 = "comment va notre relation".

---

## 0. DONNES FIGES  Questions rattaches  R1

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | O27 | Vous occuper de la personne aide entrane-t-il des difficults dans votre vie familiale ? | facteur & tat | Oui / Non |
| 2 | O28 | Vous occuper de la personne aide entrane-t-il des difficults dans vos relations avec vos amis, dans vos loisirs ou dans votre travail ? | facteur & tat | Oui / Non |
| 3 | N7 | Avez-vous d amnager votre activit professionnelle pour faire face  votre rle d'aidant ? | facteur | Non / Amnagement horaires / Congs / Arrt |

> Total : 3 questions rattaches  R1

###  Pourquoi ces 3 questions ?

**O27** et **O28** forment un duo qui mesure l'impact subjectif de l'aidance sur deux sphres distinctes :
- O27 = sphre familiale intime (vie de famille)
- O28 = sphre sociale et professionnelle (amis, loisirs, travail)

 Elles sont dans R1 et pas R2 car elles mesurent l'IMPACT de l'aidance (consquence), pas l'ISOLEMENT (cause) ni le SOUTIEN (ressource).

**N7** mesure un marqueur objectif d'impact : l'amnagement professionnel effectu. Ce n'est pas un ressenti mais un fait concret (congs pris, horaires amnags, arrt).  C'est un "facteur" pur qui quantifie les sacrifices professionnels de l'aidant.

###  Analyse des 12 autres questions V1  Pourraient-elles appartenir  R1 ?

> Les questions et leurs options sont **figes**. L'objectif ici est uniquement de vrifier si l'affiliation actuelle est correcte ou si d'autres questions de V1 devraient aussi alimenter R1.

#### Questions R2 (Soutien entourage)

| Question | Libell | Pertinence R1 ? | Raisonnement |
|---|---|---|---|
| **E1** | Rpartition de l'aide dans l'entourage |  Non | Mesure la **ressource humaine** disponible (qui aide), pas l'impact sur la vie de l'aidant. C'est un facteur de soutien  R2. |
| **E2** | En cas de coup dur, personnes sur qui compter ? |  Non | Mesure le **filet de scurit** de l'aidant. C'est de l'isolement/soutien  R2 pur. |
| **E3** | Autres personnes  charge |  Non | Contexte familial factuel (charge additionnelle). Pas un impact de l'aidance mais un facteur de risque d'puisement  R2. |
| **N4** | Seul(e)  s'occuper du proche dans la famille ? |  Non | Situation familiale factuelle. Mesure l'isolement dans le rle d'aidant  R2. |

>  **Verdict R2** : Aucune question R2 ne devrait tre dans R1. R2 mesure le **rseau de soutien**, R1 mesure les **consquences** de l'aidance. La distinction est claire.

#### Questions R3 (Isolement du proche)

| Question | Libell | Pertinence R1 ? | Raisonnement |
|---|---|---|---|
| **N20** | Difficults du proche  maintenir des relations sociales ? |  Non | Concerne le PROCHE, pas l'aidant. R1 = impact sur la vie de l'AIDANT. |
| **O47** | Distance domicile aidant / domicile proche |  Non | Circonstance logistique fixe. Ce n'est pas un impact de l'aidance mais un facteur gographique  R3. |
| **O48** | Frquence des visites |  Non | Habitude de visite. Dtermine l'isolement du proche  R3 pur. |

>  **Verdict R3** : Aucune question R3 ne devrait tre dans R1. R3 concerne entirement le **proche aid**, pas l'aidant.

#### Questions R4 (Relation aidant/proche)

| Question | Libell | Pertinence R1 ? | Raisonnement |
|---|---|---|---|
| **E4** | Comment a volu votre relation depuis que vous aidez ? |  **Dbattable** | Mesure l'volution de la **relation** = c'est R4. Cependant, une relation dgrade EST un impact de l'aidance sur la vie de l'aidant. On pourrait argumenter un double rattachement R1+R4. **Mais** : la relation est un sujet si spcifique qu'elle mrite son propre MP (R4)  pas de double rattachement. |
| **E5** | Tensions ou dsaccords familiaux ? |  **Dbattable** | Les tensions familiales SONT un impact sur la vie familiale  mme registre que O27. **Mais** : E5 est thmatiquement plus proche de la dynamique relationnelle (R4) que de l'impact personnel (R1). E5 parle des AUTRES (tensions entre membres), O27 parle de MOI (difficults dans ma vie).  R4 reste plus juste. |
| **E6** | Le proche accepte-t-il l'aide extrieure ? |  Non | Concerne le comportement du proche vis--vis de l'aide. C'est un facteur de la relation aidant/aid  R4 pur. |
| **O30** | Sentiment de ne plus reconnatre la personne aide ? |  Non | Concerne la perception du PROCHE par l'aidant. C'est un marqueur de la relation  R4. |
| **O31** | Peur pour l'avenir de la personne aide ? |  **Dbattable** | L'anxit pour l'avenir EST un impact psychologique sur l'aidant. **Mais** : cette peur est spcifiquement dirige vers le PROCHE (pas vers soi-mme). C'est une inquitude relationnelle  R4 reste plus juste. Si la question tait  Avez-vous peur pour VOTRE avenir d'aidant ? , elle serait R1. |

>  **Verdict R4** : 3 questions sont cliniquement dbattables (E4, E5, O31) car elles touchent indirectement  l'impact sur la vie de l'aidant. Cependant, leur thme principal est la **relation interpersonnelle**, pas l'impact personnel. On conserve l'affiliation R4.

###  Synthse affiliation

| Question | MP actuel | Pertinence R1 ? | Confiance |
|---|---|---|---|
| E1, E2, E3, N4 | R2 |  Non |  Haute |
| N20, O47, O48 | R3 |  Non |  Haute |
| E6, O30 | R4 |  Non |  Haute |
| E4, E5, O31 | R4 |  Dbattable (mais R4 reste juste) |  Moyenne |

> **Conclusion** : Les 3 questions de R1 (O27, O28, N7) sont les bonnes. Aucune question V1 ne devrait tre ajoute  R1. Les 3 cas dbattables (E4, E5, O31) sont maintenus en R4 car leur thme principal est la relation interpersonnelle, pas l'impact personnel.
>
> ** Point d'attention** : Si E4 = "Relation plus tendue" **ET** O27 = "Oui", ces deux signaux combins (inter-MP) sont dj capts dans R4 via V1_R4_CCC_01 (O30+E4). La couverture inter-MP est assure via les rgles croises.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse des 3 recos legacy (R1_RECO_01, R1_RECO_02, R1_RECO_03) montre 3 actions cliniques distinctes :
1. **Orienter vers l'AS**  pour les impacts administratifs/professionnels  c'est une orientation vers un professionnel
2. **Orienter vers le rpit**  pour soulager la surcharge quotidienne  c'est un accs  un service
3. **Soutien psychologique via MT**  pour grer la souffrance psychique  c'est un acte de soin

Ces 3 actions sont indpendantes : on peut recommander l'AS sans recommander le psy, et inversement. Elles ne se substituent pas l'une  l'autre  ce sont bien 3 catgories distinctes.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | R1_CAT_01 | Accompagnement social (AS) | Orienter vers une assistante sociale pour les impacts administratifs et professionnels | Legacy  |
| 2 | R1_CAT_02 | Rpit et relais | Orienter vers la plateforme de rpit du territoire pour allger la charge quotidienne | Legacy  |
| 3 | R1_CAT_03 | Soutien psychologique | Discuter avec le mdecin traitant des difficults / prescription soutien psychologique | Legacy  |

###  Dcisions Action 1

| # | Proposition | Dcision | Raison |
|---|---|---|---|
| 1 | Ajouter CAT_04 (droits) |  Rejet | MT_V1_033 tombe dans CAT_01 (AS = comptente droits). Pas de catgorie pour 1 MT isole. |
| 2 | Fusionner CAT_02 et CAT_03 |  Rejet | Deux sujets diffrents. Le CCC sert  comprendre la ralit des 2 mondes (rpit  psy). |
| 3 | Renommer CAT_01 |  Rejet | Pas ncessaire. |

>  **Valid : 3 catgories confirmes** (CAT_01 Accompagnement social, CAT_02 Rpit, CAT_03 Soutien psy)

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

Les rgles legacy combinent les 3 questions de R1 pour dtecter des situations de gravit croissante :
- Plus les sphres impactes sont nombreuses  plus le niveau monte
- **STD** = 1 signal isol, **CCC** = 2 signaux combins (condition composite)

### Rappel des questions R1 et de leurs options

> **O27**   Vous occuper de la personne aide entrane-t-il des difficults dans votre **vie familiale** ? 
> - Pas du tout (score 0) / Un peu (score +1) / **Oui** (score +2)

> **O28**   Vous occuper de la personne aide entrane-t-il des difficults dans vos **relations avec vos amis, dans vos loisirs ou dans votre travail** ? 
> - Pas du tout (score 0) / Un peu (score +1) / **Oui** (score +2)

> **N7**   Avez-vous d **amnager votre activit professionnelle** pour faire face  votre rle d'aidant ? 
> - Non / **Amnagement horaires** / **Congs** / Arrt

---

### Catgorie 1  Accompagnement social (AS)

####  Standard  \`V1_R1_STD_01\` _(legacy)_

> **SI** l'aidant a rpondu  la question :
>  Avez-vous d amnager votre activit professionnelle ? 
>  ** Amnagement horaires ** ou ** Congs **
>
> **ALORS** : Recommander l'accompagnement social (AS)
>
> **Sens clinique** : L'aidant a dj d modifier sa vie professionnelle pour assumer son rle. C'est un signal concret d'impact  orientation vers l'AS pour valuer les besoins et les droits.

####  CCC  \`V1_R1_CCC_02\` _(legacy)_

> **SI** l'aidant a rpondu :
> 1.  Avez-vous d amnager votre activit professionnelle ?   ** Amnagement horaires ** ou ** Congs **
> 2. **ET**  entrane-t-il des difficults dans votre vie familiale ?   ** Oui **
>
> **ALORS** : Recommander l'accompagnement social (AS)  niveau CCC ( 30 jours)
>
> **Sens clinique** : L'aidant cumule un ajustement professionnel AVEC un impact familial. Les deux sphres principales de sa vie sont touches  urgence  scuriser l'accompagnement social.

####  Critique  \`V1_R1_CRIT_01\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  Avez-vous d amnager votre activit professionnelle ? 
>  ** Arrt **
>
> **ALORS** : Recommander l'accompagnement social (AS)  niveau Critique ( 7 jours)
>
> **Sens clinique** : Un aidant qui a compltement arrt de travailler est en situation bien plus grave qu'un simple amnagement. C'est un signal d'urgence sociale.

####  Critique  \`V1_R1_CRIT_02\` _(NOUVEAU   active les 3 catgories)_

> **SI** l'aidant a rpondu :
> 1.  Avez-vous d amnager votre activit professionnelle ?   ** Arrt **
> 2. **ET**  entrane-t-il des difficults dans votre **vie familiale** ?   ** Oui **
> 3. **ET**  entrane-t-il des difficults dans vos **relations amis / loisirs / travail** ?   ** Oui **
>
> **ALORS** : Activer les **3 catgories** en Critique ( 7 jours)  CAT_01 + CAT_02 + CAT_03
>
> **Sens clinique** : Triple effondrement  arrt professionnel + impact familial + impact social. L'aidant n'a plus aucune zone prserve.

---

### Catgorie 2  Rpit et relais

####  Standard  \`V1_R1_STD_02\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  entrane-t-il des difficults dans votre **vie familiale** ?   ** Oui **
> _(sans condition sur O28)_
>
> **ALORS** : Orienter vers la plateforme de rpit
>
> **Sens clinique** : Un impact familial seul (mme sans impact social) peut justifier une orientation rpit. L'aidant commence  tre en difficult  agir tt.

####  Standard  \`V1_R1_STD_03\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  entrane-t-il des difficults dans vos **relations amis / loisirs / travail** ?   ** Oui **
> _(sans condition sur O27)_
>
> **ALORS** : Orienter vers la plateforme de rpit
>
> **Sens clinique** : Des difficults dans la vie sociale/professionnelle, mme sans impact familial, sont un signal de surcharge  orientation rpit prventive.

####  CCC  \`V1_R1_CCC_01\` _(legacy)_

> **SI** l'aidant a rpondu :
> 1.  entrane-t-il des difficults dans votre **vie familiale** ?   ** Oui **
> 2. **ET**  entrane-t-il des difficults dans vos **relations amis / loisirs / travail** ?   ** Oui **
>
> **ALORS** : Orienter vers la plateforme de rpit  niveau CCC ( 30 jours)
>
> **Sens clinique** : Double impact. L'aidance retentit  la fois sur la vie intime ET sur la vie sociale/professionnelle. L'aidant n'a plus de  zone prserve   besoin urgent de rpit.

---

### Catgorie 3  Soutien psychologique

####  Standard  \`V1_R1_STD_04\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  entrane-t-il des difficults dans votre **vie familiale** ?   ** Oui **
> _(sans condition sur O28)_
>
> **ALORS** : Conseiller d'en parler avec le mdecin traitant
>
> **Sens clinique** : Impact familial seul = dbut de souffrance psychique  conseil proactif vers le MT.

####  CCC  \`V1_R1_CCC_01\` _(mme rgle que CAT_02, legacy)_

> **SI** l'aidant a rpondu :
> 1.  entrane-t-il des difficults dans votre **vie familiale** ?   ** Oui **
> 2. **ET**  entrane-t-il des difficults dans vos **relations amis / loisirs / travail** ?   ** Oui **
>
> **ALORS** : Orienter vers un soutien psychologique  niveau CCC ( 30 jours)
>
> **Sens clinique** : Quand TOUTES les sphres sont impactes, la souffrance psychique est quasi certaine  en parler avec le mdecin traitant pour valuer un soutien psy.

>  **Observation** : CAT_02 et CAT_03 se dclenchent sur la mme rgle CCC (CCC_01). C'est normal  le mme signal clinique (double impact) justifie deux actions complmentaires mais distinctes : le rpit (soulager la charge) ET le soutien psy (traiter la souffrance).

---

###  Dcisions Action 2

| # | Proposition | Dcision | Rgle cre |
|---|---|---|---|
| 1 |  Critique CAT_01 (N7 = Arrt) |  Valid | \`V1_R1_CRIT_01\` |
| 2 |  Critique triple (Arrt + O27 + O28) |  Valid | \`V1_R1_CRIT_02\`  3 CAT |
| 3 |  Standard CAT_02 (O27 seule) |  Valid | \`V1_R1_STD_02\` |
| 4 |  Standard CAT_03 (O27 seule) |  Valid | \`V1_R1_STD_04\` |
| 5 | O28 seule  Standard CAT_02 |  Valid | \`V1_R1_STD_03\` |

>  **Contrle K3** : Chaque catgorie a maintenant  2 niveaux. Couverture complte.

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **Principe cl** : Les MT sont rattaches  la **catgorie**, pas au niveau (Standard/CCC/Critique). Le niveau dtermine l'**urgence** (90j / 30j / 7j) et le **wording** de la reco, mais les actions IDEC  effectuer restent les mmes. Que la catgorie s'active en Standard ou en Critique, l'IDEC fait les mmes tches  juste plus vite.

**tat legacy** : Les 8 MT taient toutes dans CAT_03 (soutien psy). C'est un artefact du systme legacy qui attachait les MT  une seule reco "principale". En ralit, 4 MT sont thmatiquement lies  d'autres catgories  redistribution.

### CAT_01  Accompagnement social (AS)

> Legacy :  aucune MT. Aprs redistribution + nouvelles MT : **4 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V1_032 | valuer l'impact professionnel | ORGA | IDEC |  | Redistribue de CAT_03 |
| MT_V1_033 | Informer sur les droits des aidants | INFO | IDEC |  | Redistribue de CAT_03 |
| MT_V1_034 | Proposer des solutions d'amnagement | STRUC | IDEC |  | Redistribue de CAT_03 |
| MT_V1_035 | Faciliter la prise de contact avec l'AS | SEC | IDEC |  | NOUVEAU  |

####  Pourquoi 4 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_032 (valuer impact pro)  l'IDEC oriente vers l'AS sans avoir mesur le problme. L'AS reoit un patient sans cadrage.
- Sans MT_V1_033 (droits)  l'aidant peut ignorer ses droits (cong proche aidant, AJPA). L'INFO est indispensable en amont de l'AS.
- Sans MT_V1_034 (solutions d'amnagement)  on diagnostique et on informe, mais on ne propose pas de plan d'action concret. La boucle n'est pas ferme.
- Sans MT_V1_035 (contact AS)  on prpare le terrain mais on ne scurise pas l'accs effectif  l'AS. Risque de perte en route.

**Pourquoi pas 1 de plus ?**
-  Contacter l'employeur   hors scope IDEC, c'est le rle de l'AS une fois orient.
-  valuer la situation financire   couvert par V2 (vulnrabilit administrative). Pas de doublon.
- La chane est complte : ORGA (diagnostiquer)  INFO (informer)  STRUC (proposer)  SEC (scuriser). Les 4 types contributifs sont couverts.

### CAT_02  Rpit et relais

> Legacy :  aucune MT. Aprs redistribution + nouvelles MT : **3 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V1_030 | Orienter vers des solutions de rpit | INFO | IDEC |  | Redistribue de CAT_03 |
| MT_V1_036 | Identifier la plateforme de rpit du territoire | STRUC | IDEC |  | NOUVEAU  |
| MT_V1_037 | Organiser un premier contact avec la plateforme | SEC | IDEC |  | NOUVEAU  |

####  Pourquoi 3 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_030 (orienter)  l'IDEC ne sait mme pas vers quoi orienter. L'INFO est le socle.
- Sans MT_V1_036 (identifier plateforme)  on parle de rpit en gnral mais on n'identifie pas LA plateforme locale. L'info reste abstraite.
- Sans MT_V1_037 (organiser contact)  on identifie la plateforme mais personne ne scurise l'accs effectif. Risque d'abandon.

**Pourquoi pas 1 de plus ?**
-  Suivre l'utilisation du rpit   c'est du suivi post-action, pas une MT d'activation. Couvert par D_suivi.
-  valuer la qualit du rpit   hors scope IDEC, c'est le rle de la plateforme.
- La chane est complte : INFO (informer)  STRUC (localiser)  SEC (connecter).

### CAT_03  Soutien psychologique

> Legacy : 8 MT. Aprs redistribution : 4 MT restantes (les autres redistribues)

| MT_ID | Libell MT | Type | Acteur | / | Pourquoi dans CAT_03 |
|---|---|---|---|---|---|
| MT_V1_029 | Proposer un soutien psychologique | SEC | MT |  | Action psy directe |
| MT_V1_027 | Rester attentif aux signaux de dgradation | ORGA | IDEC |  | Vigilance psychique |
| MT_V1_028 | Identifier les domaines les plus impacts | ORGA | IDEC |  | Diagnostic de souffrance |
| MT_V1_031 | Identifier les activits les plus impactes | ORGA | IDEC |  | Complte le diagnostic |

####  Pourquoi 4 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_029 (soutien psy)  la catgorie perd son action cl : la scurisation (SEC) qui dclenche la prescription via le MT. C'est le cur de CAT_03.
- Sans MT_V1_027 (vigilance)  l'IDEC fait un diagnostic ponctuel mais ne surveille pas l'volution. Risque de dgradation non capte entre deux valuations.
- MT_V1_028 et MT_V1_031 sont complmentaires : 028 identifie les DOMAINES (famille, travail, social) et 031 identifie les ACTIVITS (loisirs, sorties). Supprimer l'une rduit la granularit du diagnostic.

**Pourquoi pas 1 de plus ?**
-  Orienter vers un psychologue   dj couvert par MT_V1_029 via le MT (qui prescrit). Doublon.
-  Proposer un groupe de parole   action trop spcifique, dpend du territoire. Pourrait tre une sous-action de MT_V1_029 plutt qu'une MT autonome.
- Le set est quilibr : 1 SEC (agir) + 3 ORGA (surveiller + diagnostiquer). Complet pour le primtre psy de R1.

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | SEC pour CAT_01 (contact AS) |  Valid | \`MT_V1_035\` |
| 2 | STRUC pour CAT_02 (identifier plateforme) |  Valid | \`MT_V1_036\` |
| 3 | SEC pour CAT_02 (organiser contact) |  Valid | \`MT_V1_037\` |

> **Condition ASR aprs intgration** :
> - CAT_01 :  2 (STRUC + SEC)   ASR complte
> - CAT_02 :  2 (STRUC + SEC)   ASR complte
> - CAT_03 :  1 (SEC)  ASR partielle (pas de STRUC)
>
>  **Redistribution et nouvelles MT valides**  Total R1 : **11 MT** (8 legacy + 3 nouvelles)

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs existants dans la DB** : \`IDEC\`, \`MT\` (mdecin traitant), \`Aidant (autonome)\`, \`AS\` (assistante sociale)
> **Domaines** :  Mdical /  Mdico-social

### Tableau consolid des MT de R1 (final)

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Source |
|---|---|---|---|---|---|---|---|
| MT_V1_032 | valuer l'impact professionnel | ORGA | IDEC |  Mdico-social |  | CAT_01 | Legacy (redistribue) |
| MT_V1_033 | Informer sur les droits des aidants | INFO | IDEC |  Mdico-social |  | CAT_01 | Legacy (redistribue) |
| MT_V1_034 | Proposer des solutions d'amnagement | STRUC | IDEC |  Mdico-social |  | CAT_01 | Legacy (redistribue) |
| MT_V1_035 | Faciliter la prise de contact avec l'AS | SEC | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V1_030 | Orienter vers des solutions de rpit | INFO | IDEC |  Mdico-social |  | CAT_02 | Legacy (redistribue) |
| MT_V1_036 | Identifier la plateforme de rpit du territoire | STRUC | IDEC |  Mdico-social |  | CAT_02 | NOUVEAU  |
| MT_V1_037 | Organiser un premier contact avec la plateforme | SEC | IDEC |  Mdico-social |  | CAT_02 | NOUVEAU  |
| MT_V1_029 | Proposer un soutien psychologique | SEC | MT |  Mdical |  | CAT_03 | Legacy |
| MT_V1_027 | Rester attentif aux signaux de dgradation | ORGA | IDEC |  Mdico-social |  | CAT_03 | Legacy |
| MT_V1_028 | Identifier les domaines les plus impacts | ORGA | IDEC |  Mdico-social |  | CAT_03 | Legacy |
| MT_V1_031 | Identifier les activits les plus impactes | ORGA | IDEC |  Mdico-social |  | CAT_03 | Legacy |

> **Rsum** :
> - Total MT : **11** (8 legacy redistribues + 3 nouvelles)
> - Domaine  Mdico-social : **10 MT** / Domaine  Mdical : **1 MT** (MT_V1_029)
> - CAT_01 : 4 MT (2 contributives : STRUC + SEC)   ASR complte
> - CAT_02 : 3 MT (2 contributives : STRUC + SEC)   ASR complte
> - CAT_03 : 4 MT (1 contributive : SEC)  ASR partielle

###  Propositions d'amlioration  Types, acteurs et domaine

| # | Proposition | Justification |
|---|---|---|
| 1 | **MT_V1_032  type SEC** (au lieu de ORGA) | valuer l'impact professionnel est une action de scurisation (prvenir un arrt non anticip), pas de l'organisation interne. |
| 2 | **MT_V1_033  acteur AS** (au lieu de IDEC) | L'AS est le professionnel lgitime pour informer sur les droits. L'IDEC initie la dmarche mais l'AS la mne. Acteur \`AS\` existe en DB. |
| 3 | **MT_V1_029  ajouter attribut  prescription ** | MT_V1_029 (soutien psy) ncessite une prescription mdicale. Info utile pour le workflow IDEC. |
| 4 | **MT_V1_036  acteur Plateforme de rpit** _(nouvel acteur)_ | L'identification de la plateforme peut impliquer un acteur externe  l'IDEC. Proposition de crer l'acteur \`Plateforme de rpit\` en DB. |
| 5 | **MT_V1_030  acteur Aidant (autonome)** | L'aidant peut se renseigner seul sur le rpit (brochures, sites). L'IDEC facilite mais l'aidant peut agir en autonomie. Acteur \`Aidant (autonome)\` existe en DB. |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

###  Raisonnement

> **Principe** : L'Action 5 se fait APRS l'Action 4 (enrichissement des types/acteurs). On a maintenant les 11 MT avec leur catgorie, leur type et leur acteur. On peut travailler le wording.
>
> **Phase 1** : Valider le wording de BASE de chaque MT et chaque reco. Deux versions obligatoires : **Utilisateur** (conseil bienveillant) et **IDEC** (directive, verbe d'action). Vrifier le ton, les temps, la clart.
>
> **Phase 2** : Versionner le wording de la reco par **niveau de criticit** ( Standard /  CCC /  Critique). Les MT ne changent pas  seul le degr d'urgence dans le libell de la reco varie. Ne versionner que les niveaux qui existent pour chaque catgorie.

---

### Phase 1  Wording de base : MT et Recos

> **Rgle de wording** :
> - **Reco** = conseil succinct. Pas une phrase, pas un verbe d'action. Un label court qui dit "quoi" sans dtailler "comment". C'est un cap, pas une tche.
> - **MT** = action concrte. Pousse l'utilisateur (ou l'IDEC)  FAIRE quelque chose. Verbe d'action des deux cts. L'utilisateur doit aussi tre orient vers une action.

#### Wording des 11 MT (IDEC + Utilisateur)

| MT_ID | CAT | Libell | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|---|
| MT_V1_032 | CAT_01 | valuer l'impact professionnel | valuer avec l'aidant les consquences de l'aidance sur sa situation professionnelle | Faites le point sur l'impact de votre rle d'aidant sur votre travail |  |
| MT_V1_033 | CAT_01 | Informer sur les droits des aidants | Informer l'aidant sur ses droits (cong proche aidant, AJPA, droit au rpit) | Renseignez-vous sur vos droits en tant qu'aidant |  |
| MT_V1_034 | CAT_01 | Proposer des solutions d'amnagement | Proposer des pistes d'amnagement du quotidien en lien avec la situation professionnelle | Explorez les solutions d'amnagement de votre quotidien |  |
| MT_V1_035 | CAT_01 | Faciliter la prise de contact avec l'AS | Organiser le contact avec l'assistante sociale du secteur. Transmettre les lments d'valuation. | Prenez contact avec une assistante sociale spcialise |  |
| MT_V1_030 | CAT_02 | Orienter vers des solutions de rpit | Informer l'aidant sur les solutions de rpit disponibles sur son territoire | Renseignez-vous sur les solutions de rpit prs de chez vous |  |
| MT_V1_036 | CAT_02 | Identifier la plateforme de rpit du territoire | Identifier la plateforme de rpit comptente et vrifier les conditions d'accs | Identifiez la plateforme de rpit adapte  votre situation |  |
| MT_V1_037 | CAT_02 | Organiser un premier contact avec la plateforme | Organiser un premier contact entre l'aidant et la plateforme de rpit | Contactez la plateforme de rpit pour un premier change |  |
| MT_V1_029 | CAT_03 | Proposer un soutien psychologique | Contacter le mdecin traitant pour valuer la pertinence d'un soutien psychologique. Prescription si ncessaire. | Parlez-en  votre mdecin traitant pour envisager un soutien |  |
| MT_V1_027 | CAT_03 | Rester attentif aux signaux de dgradation | Surveiller les signaux de dgradation psychique de l'aidant lors des visites. Rvaluer au prochain suivi. | Soyez attentif aux signes de fatigue ou de mal-tre lis  votre rle d'aidant |  |
| MT_V1_028 | CAT_03 | Identifier les domaines les plus impacts | Identifier les domaines de vie les plus impacts (famille, travail, social) pour prioriser les interventions | Identifiez les domaines de votre vie les plus touchs par votre rle d'aidant |  |
| MT_V1_031 | CAT_03 | Identifier les activits les plus impactes | Identifier les activits abandonnes ou rduites (loisirs, sorties, vie sociale) | Reprez les activits que vous avez rduites ou abandonnes depuis que vous tes aidant |  |

#### Wording des 3 Recos de base

> Rappel : la reco est un **conseil succinct**, pas une phrase complte. C'est un cap pour l'aidant.

| CAT | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | / |
|---|---|---|---|
| CAT_01 | Accompagnement par une assistante sociale | Orienter vers l'AS du secteur |  |
| CAT_02 | Solutions de rpit pour souffler | Orienter vers la plateforme de rpit territoriale |  |
| CAT_03 | Soutien psychologique avec votre mdecin | Contacter le MT pour valuation psy |  |

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit (Reco + MT)

> **Principe** : Le **niveau de criticit** modifie le wording de la reco ET des MT. L'action reste la mme  c'est le **degr d'urgence** qui change.
> - **Reco** : toujours un label court, avec un marqueur d'urgence
> - **MT** : mme verbe d'action, mais intensit diffrente ( Renseignez-vous    Prenez contact    Contactez immdiatement )
> - On ne versionne que les niveaux qui **existent** pour chaque catgorie.

#### CAT_01  Accompagnement social

> Niveaux existants :  STD_01 /  CCC_02 /  CRIT_01 /  CRIT_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Accompagnement social disponible | Informer sur les dispositifs AS |
|  CCC ( 30j) | Accompagnement social recommand | Orienter vers l'AS sous 30 jours |
|  Critique ( 7j) | Accompagnement social urgent | Orienter en urgence vers l'AS sous 7 jours |

**MT versionnes (exemples cls) :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_032 | Faites le point sur l'impact sur votre travail | valuez rapidement l'impact sur votre travail | valuez ds maintenant l'impact sur votre travail |
| MT_V1_033 | Renseignez-vous sur vos droits d'aidant | Informez-vous sur vos droits d'aidant | Faites valoir vos droits d'aidant sans attendre |
| MT_V1_035 | Prenez contact avec une assistante sociale | Contactez une assistante sociale rapidement | Contactez une assistante sociale cette semaine |

#### CAT_02  Rpit et relais

> Niveaux existants :  STD_02 + STD_03 /  CCC_01 /  CRIT_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Solutions de rpit disponibles | Informer sur le rpit territorial |
|  CCC ( 30j) | Rpit recommand | Organiser l'accs au rpit sous 30 jours |
|  Critique ( 7j) | Rpit urgent | Organiser l'accs au rpit sous 7 jours |

**MT versionnes (exemples cls) :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_030 | Renseignez-vous sur les solutions de rpit | Explorez les solutions de rpit rapidement | Explorez les solutions de rpit ds maintenant |
| MT_V1_037 | Contactez la plateforme de rpit si besoin | Contactez la plateforme de rpit dans le mois | Contactez la plateforme de rpit cette semaine |

#### CAT_03  Soutien psychologique

> Niveaux existants :  STD_04 /  CCC_01 /  CRIT_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Soutien psychologique si besoin | Sensibiliser au soutien psy |
|  CCC ( 30j) | Soutien psychologique recommand | Contacter le MT pour valuation psy sous 30 jours |
|  Critique ( 7j) | Soutien psychologique urgent | Contacter le MT pour valuation psy sous 7 jours |

**MT versionnes (exemples cls) :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_029 | Parlez-en  votre mdecin si besoin | Parlez-en  votre mdecin rapidement | Parlez-en  votre mdecin ds que possible |
| MT_V1_027 | Soyez attentif aux signes de fatigue | Surveillez attentivement tout signe de mal-tre | Surveillez tout signe de mal-tre ds maintenant |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP R1 n'est PAS activ (aucune rgle critique, CCC ou standard ne s'est dclenche = l'aidance n'a actuellement pas d'impact dtect sur la vie de l'aidant)

#### Proposition de reco prvention

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  L'aidance peut avoir un impact sur votre vie personnelle et professionnelle sans que vous vous en rendiez compte. N'hsitez pas  en parler si vous ressentez des changements.  |  Surveiller l'apparition de signaux d'impact de l'aidance sur la vie personnelle et professionnelle de l'aidant. Rvaluer au prochain suivi.  |

**MT de prvention proposes :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| _(NOUVELLE)_ | Sensibiliser l'aidant aux signes d'impact | INFO | Profiter du prochain contact pour aborder les changements de vie lis  l'aidance | Soyez attentif aux changements dans votre quotidien lis  votre rle d'aidant |
| _(NOUVELLE)_ | Noter les changements de vie au prochain suivi | ORGA | Renseigner les observations sur l'volution de la situation lors du prochain suivi | Notez les changements que vous observez dans votre vie pour en parler au prochain rendez-vous |

> **Dcision Dr. Monka** :  Reco prvention valide |   reformuler

### 6.2  Checklist de cohrence (post-dcisions)

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  |  | O28 dsormais seule via STD_03 |
| 2 | Chaque rgle d'activation  1 version de reco |  |  | 8 rgles  toutes lies  1 catgorie |
| 3 | Chaque catgorie de reco  ses MT assignes |  |  | CAT_01: 4 MT, CAT_02: 3 MT, CAT_03: 4 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  |  | Chaque CAT a Standard + CCC (+ Critique pour CAT_01) |
| 5 | Aucune MT orpheline |  |  | 11 MT toutes rattaches |
| 6 | Reco prvention prsente |  |  | Propose, en attente validation |
| 7 | Wording reco = conseil, MT = verbe d'action |  |  | Phase 1 + Phase 2 proposes, en attente validation |
| 8 | Sens clinique renseign pour chaque rgle |  |  | 8 rgles documentes |

> **Score** : **5/8 valids**, 2 en attente validation (prvention + wording), 1 OK
>
> Quand prvention et wording seront valids  **8/8** 

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 3 | 3 (confirmes) |
| Rgles d'activation | 3 (:1 :2) | **8** (:4, :2, :2) |
| MT totales | 8 (toutes CAT_03) | **11** (CAT_01:4, CAT_02:3, CAT_03:4) |
| MT contributives | 2 | **5** (STRUC:2, SEC:3) |
| ASR | CAT_03 seule | CAT_01  + CAT_02  + CAT_03 partielle |
| Reco prvention |  |  Propose |
| Checks OK | 4/8 | 5/8 ( 8/8 aprs validation wording + prvention) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories confirmes (CAT_04 rejete, fusion CAT_02/03 rejete) |  Valid |
| 2 |  CRIT_01 : N7 = Arrt  CAT_01 |  Valid |
| 3 |  CRIT_02 : Triple (Arrt + O27 + O28)  3 CAT |  Valid |
| 4 |  STD_02 : O27 seule  CAT_02 |  Valid |
| 5 |  STD_03 : O28 seule  CAT_02 |  Valid |
| 6 |  STD_04 : O27 seule  CAT_03 |  Valid |
| 7 | Redistribution MT vers CAT_01 et CAT_02 |  Valid |
| 8 | MT_V1_035 (SEC CAT_01) cre |  Valid |
| 9 | MT_V1_036 (STRUC CAT_02) + MT_V1_037 (SEC CAT_02) cres |  Valid |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider wording Phase 1 (base MT + reco) |  Haute |
| 2 | Valider wording Phase 2 (versioning criticit) |  Haute |
| 3 | Valider reco prvention |  Haute |
| 4 | Valider propositions types/acteurs (Action 4) |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,kb=`#  Fiche de Validation MP  R2  Soutien de l'entourage et partage de l'aide

> **Vulnrabilit** : V1  Social & Relationnel  
> **ASR** :  Renforcer le soutien autour de vous   
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## CONTEXTE  Big Picture V1

### Rpartition des 15 questions V1 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **R1** | Impact vie perso/pro | 3 | O27, O28, N7 | Retentissement de l'aidance sur la vie de l'aidant |
| **R2** | Soutien entourage | 4 | E1, E2, E3, N4 | Rseau de soutien, isolement aidant |
| **R3** | Isolement du proche | 3 | N20, O47, O48 | Vie sociale du proche aid |
| **R4** | Relation aidant/proche | 5 | E4, E5, E6, O30, O31 | Qualit de la relation, acceptation aide |

> **R2 se concentre sur le RSEAU DE SOUTIEN** (qui aide l'aidant, sur qui compter) alors que R1 parle de l'IMPACT (consquences sur la vie), R3 de l'ISOLEMENT DU PROCHE (pas de l'aidant), et R4 de la RELATION INTERPERSONNELLE. La frontire est clinique : R2 = "qui m'aide et suis-je soutenu", R1 = "qu'est-ce que a change dans MA vie", R3 = "mon proche est-il isol", R4 = "comment va notre relation".

---

## 0. DONNES FIGES  Questions rattaches  R2

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E1 | Comment se passe la rpartition de l'aide dans votre entourage (famille, proches) ? | facteur | Plutt quilibre et satisfaisante / Je fais la plus grande partie mais cela reste acceptable / Je fais presque tout et cela cre des tensions ou un sentiment d'injustice / Je suis totalement seule |
| 2 | E2 | En cas de coup dur, avez-vous autour de vous des personnes sur qui vous pouvez vraiment compter (famille, amis, voisins) ? | facteur | Oui, plusieurs personnes / Oui, une personne / Trs peu / presque personne / Personne |
| 3 | E3 | Quelles sont les autres personnes  charge autour de vous que vous devez aider ? | facteur | Aucun / Enfant(s) mineurs / Autre(s) proche(s) dpendant(s) |
| 4 | N4 | Au sein de votre famille, tes-vous seul(e)  vous occuper de la personne aide ? | facteur | Oui / Non |

> Total : 4 questions rattaches  R2

###  Pourquoi ces 4 questions ?

**E1** mesure la **rpartition de la charge** d'aide dans l'entourage  c'est le facteur central de R2. Quelqu'un qui fait "presque tout" n'est pas dans la mme situation qu'un entourage mobilis de faon quilibre.

**E2** mesure le **filet de scurit** en cas de coup dur. Ce n'est pas la charge quotidienne (E1) mais la capacit de l'aidant  trouver de l'aide en situation de crise. "Personne" = signal d'alarme maximal.

**E3** identifie les **charges additionnelles**  un aidant qui gre aussi des enfants mineurs ou d'autres proches dpendants cumule les contraintes. C'est un facteur aggravant du risque d'puisement.

**N4** est un marqueur factuel binaire : seule ou pas dans la famille  aider.  C'est une mesure structurelle de l'isolement dans le rle d'aidant, complmentaire d'E1 (qui mesure la rpartition effective).

###  Analyse des 11 autres questions V1  Pourraient-elles appartenir  R2 ?

> Les questions et leurs options sont **figes**. L'objectif ici est uniquement de vrifier si l'affiliation actuelle est correcte ou si d'autres questions de V1 devraient aussi alimenter R2.

#### Questions R1 (Impact vie perso/pro)

| Question | Libell | Pertinence R2 ? | Raisonnement |
|---|---|---|---|
| **O27** | Difficults dans la vie familiale ? |  Non | Mesure l'**impact** (consquence) de l'aidance, pas le **soutien** (ressource). R1. |
| **O28** | Difficults relations amis/loisirs/travail ? |  Non | Mesure l'**impact** social/pro. Si O28 tait dans R2, on confondrait "tre impact" et "ne pas tre soutenu"  ce sont deux choses diffrentes. |
| **N7** | Amnagement activit professionnelle ? |  Non | Marqueur concret d'impact professionnel  R1. Le lien avec le soutien est indirect : un aidant bien soutenu peut aussi avoir d amnager son travail. |

>  **Verdict R1** : Aucune question R1 ne devrait tre dans R2. R1 mesure les **consquences**, R2 les **ressources**. La distinction est claire.

#### Questions R3 (Isolement du proche)

| Question | Libell | Pertinence R2 ? | Raisonnement |
|---|---|---|---|
| **N20** | Difficults du proche  maintenir des relations sociales ? |  Non | Concerne le PROCHE, pas l'aidant. R2 = soutien autour de l'AIDANT. |
| **O47** | Distance domicile aidant / proche |  Non | Facteur gographique fixe. Ne mesure pas le soutien de l'entourage. |
| **O48** | Frquence des visites |  Non | Habitude de prsence auprs du proche. R3 pur. |

>  **Verdict R3** : Aucune question R3 ne devrait tre dans R2. R3 concerne l'isolement du **proche aid**, pas le soutien autour de l'**aidant**.

#### Questions R4 (Relation aidant/proche)

| Question | Libell | Pertinence R2 ? | Raisonnement |
|---|---|---|---|
| **E4** | Comment a volu votre relation ? |  Non | Mesure la qualit de la relation interpersonnelle  R4 pur. |
| **E5** | Tensions ou dsaccords familiaux ? |  **Dbattable** | Les tensions familiales peuvent tre un SIGNAL de rpartition dsquilibre (E1). Si les tensions viennent du fait que l'aidant porte tout seul, E5 croise avec R2. **Mais** : E5 cible la dynamique familiale (tensions entre membres), pas le soutien disponible. La nuance est : E5 = "la famille est tendue" vs E1 = "la famille ne m'aide pas assez".  R4 reste plus juste. |
| **E6** | Acceptation aide extrieure par le proche ? |  Non | Concerne le comportement du PROCHE (pas de l'entourage aidant)  R4. |
| **O30** | Sentiment de ne plus reconnatre la personne aide ? |  Non | Perception du proche  R4 pur. |
| **O31** | Peur pour l'avenir de la personne aide ? |  Non | Inquitude projete vers le proche. Pas le soutien. |

>  **Verdict R4** : E5 est cliniquement dbattable (tensions familiales  dsquilibre potentiel). Mais son thme principal est la relation interpersonnelle, pas le rseau de soutien. On conserve l'affiliation R4.

###  Synthse affiliation

| Question | MP actuel | Pertinence R2 ? | Confiance |
|---|---|---|---|
| O27, O28, N7 | R1 |  Non |  Haute |
| N20, O47, O48 | R3 |  Non |  Haute |
| E4, E6, O30, O31 | R4 |  Non |  Haute |
| E5 | R4 |  Dbattable (mais R4 reste juste) |  Moyenne |

> **Conclusion** : Les 4 questions de R2 (E1, E2, E3, N4) sont les bonnes. Aucune question V1 ne devrait tre ajoute  R2. E5 (tensions) a un lien indirect mais son thme principal est la dynamique relationnelle  reste en R4.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse des 2 recos legacy (R2_RECO_01, R2_RECO_02) montre 2 axes cliniques :
1. **Accompagnement renforc** (R2_RECO_01)  quand la situation est critique : mobiliser des aides extrieures, rompre l'isolement, scuriser  c'est de l'**intervention**
2. **Prvention puisement** (R2_RECO_02)  quand la situation est tendue mais pas critique : identifier des solutions de soutien pour prvenir la dgradation  c'est de la **prvention active**

Ces 2 axes correspondent  2 intensits d'action diffrentes MAIS elles ciblent le mme objectif : renforcer le rseau de soutien. La question est : faut-il les garder comme 2 catgories distinctes ou les fusionner ?

**Argument pour fusionner** : Les MT des deux recos couvrent le mme spectre (identifier, valuer, proposer, orienter). La diffrence est surtout dans l'urgence.

**Argument pour sparer** : L'accompagnement renforc (CCC) implique une mobilisation multi-acteurs l o la prvention (Standard) est plus cible IDEC.

**Dcision** : On garde 2 catgories car elles correspondent  2 niveaux d'intervention cliniquement distincts. On ajoute une 3e catgorie pour l'valuation de la charge additionnelle (E3) qui n'est couverte par aucune des 2 recos legacy.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | R2_CAT_01 | Mobilisation du rseau d'aide | Identifier et mobiliser les ressources de l'entourage pour rpartir la charge d'aide | Legacy  |
| 2 | R2_CAT_02 | Accs au rpit et aux relais professionnels | Orienter vers des solutions de rpit et d'aide professionnelle pour soulager l'aidant | Legacy  |
| 3 | R2_CAT_03 | Prvention de l'isolement et du surmenage | valuer et surveiller le risque d'puisement li  la charge cumule (multi-aidance, solitude) |  IA |

###  Raisonnement

- **CAT_01** (Mobilisation rseau) : Regroupe ce qui concernait R2_RECO_01 ct "entourage". L'ide cl : avant de chercher des pros, essayer de mieux rpartir dans la famille/entourage. C'est la premire ligne.
- **CAT_02** (Rpit / pros) : Quand l'entourage ne suffit pas  accs aux services professionnels (SAD, plateforme de rpit, accueil temporaire). C'est la deuxime ligne.
- **CAT_03** (Prvention) : E3 (charges additionnelles) n'tait relie  aucune action spcifique. Un aidant qui gre aussi des enfants ou d'autres proches est en situation de double charge  besoin de surveillance et d'anticipation spcifique.

**Pourquoi pas 2 catgories (fusionner CAT_01 et CAT_02) ?**  Parce que la mobilisation de l'entourage et l'accs aux services pro sont deux dmarches diffrentes avec des acteurs diffrents. L'aidant peut avoir un rseau familial mobilisable sans avoir besoin de pros, ou inversement.

**Pourquoi pas 4 ?**  On a envisag une CAT ddie "groupes de parole / entraide" mais c'est un moyen (INFO) dans CAT_01 ou CAT_02, pas un axe clinique  part entire.

>  **Valid : 3 catgories** (CAT_01 Mobilisation rseau, CAT_02 Rpit / relais pro, CAT_03 Prvention isolement/surmenage)

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

Les rgles legacy combinent les 4 questions pour dtecter des niveaux de gravit croissante :
- **STD** = 1 signal isol (seul dans la famille, par exemple)
- **CCC** = 2 signaux combins (seul ET personne sur qui compter)
- **Critique** = signal d'alerte maximal (aucune personne sur qui compter)

### Rappel des questions R2 et de leurs options

> **E1**   Comment se passe la rpartition de l'aide dans votre entourage (famille, proches) ? 
> - Plutt quilibre et satisfaisante (score 0) / Je fais la plus grande partie mais cela reste acceptable (score +1) / **Je fais presque tout et cela cre des tensions** (score +2) / **Je suis totalement seule** (score +2)

> **E2**   En cas de coup dur, avez-vous autour de vous des personnes sur qui vous pouvez vraiment compter ? 
> - Oui, plusieurs personnes (score 0) / Oui, une personne (score +1) / **Trs peu / presque personne** (score +2) / **Personne** (score +2)

> **E3**   Quelles sont les autres personnes  charge autour de vous que vous devez aider ? 
> - Aucun / Enfant(s) mineurs / Autre(s) proche(s) dpendant(s) _(non scorante)_

> **N4**   Au sein de votre famille, tes-vous seul(e)  vous occuper de la personne aide ? 
> - Oui / Non _(non scorante)_

---

### Catgorie 1  Mobilisation du rseau d'aide

####  Standard  \`V1_R2_STD_01\` _(legacy)_

> **SI** l'aidant a rpondu  la question :
>  Au sein de votre famille, tes-vous seul(e)  vous occuper de la personne aide ? 
>  ** Oui **
>
> **ALORS** : Recommander la mobilisation du rseau d'aide
>
> **Sens clinique** : L'aidant est seul dans la famille mais a peut-tre des ressources extrieures (amis, voisins). Signal d'alerte modr  explorer les possibilits de mobilisation avant que l'isolement ne s'aggrave.

####  Standard  \`V1_R2_STD_02\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  Comment se passe la rpartition de l'aide dans votre entourage ? 
>  ** Je fais la plus grande partie mais cela reste acceptable **
>
> **ALORS** : Recommander la mobilisation du rseau d'aide
>
> **Sens clinique** : L'aidant porte la charge principale mais le considre "acceptable". C'est un signal prcoce : la situation est tenable aujourd'hui mais fragile. Explorer une meilleure rpartition peut prvenir l'puisement.

####  CCC  \`V1_R2_CCC_01\` _(legacy)_

> **SI** l'aidant a rpondu :
> 1.  Au sein de votre famille, tes-vous seul(e) ?   ** Oui **
> 2. **ET**  En cas de coup dur, personnes sur qui compter ?   ** Trs peu / presque personne ** ou ** Personne **
>
> **ALORS** : Recommander la mobilisation du rseau  niveau CCC ( 30 jours)
>
> **Sens clinique** : Aidant seul dans la famille ET sans filet de scurit. Isolement structurel confirm  risque d'effondrement si la situation se dgrade.

####  CCC  \`V1_R2_CCC_02\` _(legacy)_

> **SI** l'aidant a rpondu :
> 1.  Rpartition de l'aide ?   ** Je fais presque tout tensions/injustice ** ou ** Je suis totalement seule **
> 2. **ET**  En cas de coup dur, personnes sur qui compter ?   ** Trs peu / presque personne ** ou ** Personne **
>
> **ALORS** : Recommander la mobilisation du rseau  niveau CCC ( 30 jours)
>
> **Sens clinique** : Charge quasi exclusive combine avec l'absence de filet de scurit. Double signal d'isolement  intervention ncessaire.

####  Critique  \`V1_R2_CRIT_01\` _(legacy)_

> **SI** l'aidant a rpondu :
>  En cas de coup dur, personnes sur qui compter ? 
>  ** Personne **
>
> **ALORS** : Recommander la mobilisation du rseau  niveau Critique ( 7 jours)
>
> **Sens clinique** : Isolement relationnel svre. L'aidant n'a AUCUNE personne ressource en cas de crise. C'est le signal d'urgence maximale de R2 : si la situation se dgrade, il n'y a personne pour amortir.

####  Critique  \`V1_R2_CRIT_02\` _(NOUVEAU )_

> **SI** l'aidant a rpondu :
> 1.  Rpartition de l'aide ?   ** Je suis totalement seule **
> 2. **ET**  En cas de coup dur, personnes sur qui compter ?   ** Personne **
> 3. **ET**  Au sein de votre famille, tes-vous seul(e) ?   ** Oui **
>
> **ALORS** : Activer les **3 catgories** en Critique ( 7 jours)  CAT_01 + CAT_02 + CAT_03
>
> **Sens clinique** : Triple isolement  totalement seul dans l'aide + aucun filet de scurit + seul dans la famille. L'aidant est en situation de vulnrabilit extrme. Mobilisation immdiate de tous les leviers.

---

### Catgorie 2  Accs au rpit et relais professionnels

####  Standard  \`V1_R2_STD_03\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  Rpartition de l'aide ?   ** Je fais presque tout tensions/injustice **
>
> **ALORS** : Orienter vers les solutions de rpit
>
> **Sens clinique** : La charge est dsquilibre au point de crer des tensions. L'entourage seul ne suffit pas  il faut des relais professionnels.

####  CCC  \`V1_R2_CCC_02\` _(legacy  mme rgle que CAT_01)_

> **SI** l'aidant a rpondu :
> 1.  Rpartition de l'aide ?   ** Je fais presque tout ** ou ** Totalement seule **
> 2. **ET**  En cas de coup dur ?   ** Trs peu ** ou ** Personne **
>
> **ALORS** : Orienter vers le rpit  niveau CCC ( 30 jours)
>
> **Sens clinique** : Charge dsquilibre + absence de filet. Le soutien professionnel devient indispensable.

####  Critique  \`V1_R2_CRIT_01\` _(legacy)_

> **SI** l'aidant a rpondu :  En cas de coup dur ?   ** Personne **
>
> **ALORS** : Orienter vers le rpit  niveau Critique ( 7 jours)
>
> **Sens clinique** : L'isolement total ncessite une mise en place immdiate de relais professionnels.

---

### Catgorie 3  Prvention de l'isolement et du surmenage

####  Standard  \`V1_R2_STD_04\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  Quelles sont les autres personnes  charge ?   ** Enfant(s) mineurs ** ou ** Autre(s) proche(s) dpendant(s) **
>
> **ALORS** : Recommander la prvention surmenage
>
> **Sens clinique** : L'aidant cumule les charges (multi-aidance ou parentalit). Ce contexte augmente le risque d'puisement mme si la rpartition est acceptable  surveillance prventive.

####  CCC  \`V1_R2_CCC_03\` _(NOUVEAU )_

> **SI** l'aidant a rpondu :
> 1.  Autres personnes  charge ?   ** Enfant(s) mineurs ** ou ** Autre(s) proche(s) dpendant(s) **
> 2. **ET**  Au sein de votre famille, seul(e) ?   ** Oui **
>
> **ALORS** : Recommander la prvention surmenage  niveau CCC ( 30 jours)
>
> **Sens clinique** : Multi-aidance ou parentalit combine avec le fait d'tre seul dans la famille  aider. Facteur aggravant majeur  surveillance renforce et anticipation.

---

###  Dcisions Action 2

| # | Proposition | Dcision | Rgle cre |
|---|---|---|---|
| 1 |  Standard CAT_01 (E1 = "plus grande partie mais acceptable") |  Valid | \`V1_R2_STD_02\` |
| 2 |  Standard CAT_02 (E1 = "presque tout + tensions") |  Valid | \`V1_R2_STD_03\` |
| 3 |  Standard CAT_03 (E3  "Aucun") |  Valid | \`V1_R2_STD_04\` |
| 4 |  CCC CAT_03 (E3  "Aucun" + N4 = "Oui") |  Valid | \`V1_R2_CCC_03\` |
| 5 |  Critique triple (E1 + E2 + N4) |  Valid | \`V1_R2_CRIT_02\`  3 CAT |

>  **Contrle K3** : Chaque catgorie a maintenant  2 niveaux. Couverture complte.
> 
> **Vrification couverture questions** :
> - E1  STD_02, STD_03, CCC_02, CRIT_02 
> - E2  CCC_01, CCC_02, CRIT_01, CRIT_02 
> - E3  STD_04, CCC_03 
> - N4  STD_01, CCC_01, CCC_03, CRIT_02 
>  Toutes les questions sont utilises dans  1 rgle 

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** : Les 14 MT taient rparties entre R2_RECO_01 (11 MT) et R2_RECO_02 (3 MT). L'architecture legacy regroupait tout sous 2 recos. On redistribue maintenant les 14 MT vers les 3 catgories selon leur action clinique relle.

### CAT_01  Mobilisation du rseau d'aide

> Legacy : 6 MT de R2_RECO_01 thmatiquement lies au rseau. Aprs redistribution : **6 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V1_001 | Lister les personnes de l'entourage mobilisables | ORGA | IDEC |  | Legacy |
| MT_V1_002 | Explorer les freins  une meilleure rpartition | ORGA | IDEC |  | Legacy |
| MT_V1_006 | Identifier d'autres personnes potentiellement mobilisables | ORGA | IDEC |  | Legacy |
| MT_V1_005 | Orienter vers des groupes d'entraide | INFO | IDEC |  | Legacy |
| MT_V1_004 | Proposer un accompagnement pour solliciter de l'aide | SEC | IDEC |  | Legacy |
| MT_V1_042 | Faciliter une runion familiale de rpartition | STRUC | IDEC |  | NOUVEAU  |

####  Pourquoi 6 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_001 (lister l'entourage)  l'IDEC agit sans connatre le rseau existant. C'est le point de dpart indispensable.
- Sans MT_V1_002 (freins)  on identifie les personnes mais on ne comprend pas pourquoi elles ne sont pas mobilises. Risque de recommandations hors sol.
- Sans MT_V1_006 (identifier d'autres personnes)  on se limite au rseau connu. L'aidant peut avoir des ressources qu'il n'a pas identifies.
- Sans MT_V1_005 (groupes d'entraide)  on reste dans le cercle priv. Les pairs aidants sont une ressource valide cliniquement.
- Sans MT_V1_004 (accompagnement pour solliciter)  on demande  l'aidant de mobiliser seul, ce qui est souvent le frein principal.
- Sans MT_V1_042 (runion familiale)  on identifie et on accompagne mais on ne structure pas l'action collective. La runion familiale est le moment o la rpartition se concrtise.

**Pourquoi pas 1 de plus ?**
-  Contacter les membres de la famille   c'est le rle de l'aidant accompagn (MT_V1_004), pas une MT autonome.
-  valuer la qualit du soutien   c'est le suivi N3, pas une MT d'activation.
- La chane est complte : ORGA (cartographier)  ORGA (comprendre les freins)  INFO (largir les ressources)  SEC (accompagner)  STRUC (structurer).

### CAT_02  Accs au rpit et relais professionnels

> Legacy : 5 MT de R2_RECO_01 + R2_RECO_02 thmatiquement lies au rpit. Aprs redistribution : **5 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V1_003 | valuer les aides disponibles (services, associations) | INFO | IDEC |  | Legacy |
| MT_V1_007 | Informer sur les solutions de rpit | INFO | IDEC |  | Legacy |
| MT_V1_010 | Orienter vers des dispositifs d'aide aux aidants | INFO | IDEC |  | Legacy |
| MT_V1_011 | Envisager un accueil temporaire pour le proche | STRUC | IDEC |  | Legacy |
| MT_V1_025 | Proposer des solutions de rpit | STRUC | IDEC |  | Legacy |

####  Pourquoi 5 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_003 (aides disponibles)  l'IDEC propose du rpit sans avoir fait l'inventaire des ressources du territoire.
- Sans MT_V1_007 (informer rpit)  l'aidant ne sait pas que le rpit existe ou comment y accder.
- Sans MT_V1_010 (dispositifs)  on limite l'info aux seules plateformes de rpit. Les dispositifs sont plus larges (baluchonnage, relais famille).
- Sans MT_V1_011 (accueil temporaire)  on occulte une solution structurante majeure. L'accueil temporaire est souvent le levier qui dbloque la situation.
- Sans MT_V1_025 (solutions de rpit)  on informe et on structure mais on ne propose pas d'action concrte de soulagement.

**Pourquoi pas 1 de plus ?**
-  Organiser un premier contact avec la plateforme de rpit   cette action (SEC) serait pertinente. On la garde en rserve pour la validation Dr. Monka. ** Proposition d'ajout.**
-  Suivi post-rpit   c'est du suivi N3, pas une MT d'activation.

### CAT_03  Prvention de l'isolement et du surmenage

> Legacy : 2 MT. Aprs redistribution + nouvelles : **3 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V1_008 | valuer l'urgence de la situation d'isolement | ORGA | IDEC |  | Legacy |
| MT_V1_024 | valuer les possibilits de mobilisation | ORGA | IDEC |  | Legacy |
| MT_V1_009 | Proposer un contact rgulier avec un professionnel | SEC | IDEC |  | Legacy |

####  Pourquoi 3 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_008 (valuer urgence)  on ne sait pas o en est l'aidant. L'valuation est le socle de la prvention.
- Sans MT_V1_024 (possibilits mobilisation)  on identifie l'urgence mais on ne cherche pas de solutions.
- Sans MT_V1_009 (contact rgulier)  c'est la seule MT contributive (SEC). Sans elle, pas de scurisation du lien  l'ASR est impossible.

**Pourquoi pas 1 de plus ?**
-  Crer un planning de suivi   c'est une sous-action de MT_V1_009, pas une MT autonome.
-  Orienter vers un psychologue   c'est couvert par V3 (Sant aidant), pas R2. viter le doublon inter-V.

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | STRUC pour CAT_01 (runion familiale) |  Valid | \`MT_V1_042\` |
| 2 | SEC pour CAT_02 (contact plateforme) |  Propos | _(en attente Dr. Monka)_ |

> **Condition ASR par catgorie** :
> - CAT_01 :  2 (SEC + STRUC)   ASR complte
> - CAT_02 :  2 (STRUC  2)   ASR complte
> - CAT_03 :  1 (SEC)  ASR partielle (pas de STRUC)
>
>  **Total R2 : 14 MT legacy + 1 nouvelle = 15 MT** (6 CAT_01 + 5 CAT_02 + 3 CAT_03 + 1 rserve)

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs existants dans la DB** : \`IDEC\`, \`MT\` (mdecin traitant), \`Aidant (autonome)\`, \`AS\` (assistante sociale)
> **Domaines** :  Mdical /  Mdico-social

### Tableau consolid des MT de R2 (final)

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Source |
|---|---|---|---|---|---|---|---|
| MT_V1_001 | Lister les personnes de l'entourage mobilisables | ORGA | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_002 | Explorer les freins  une meilleure rpartition | ORGA | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_006 | Identifier d'autres personnes potentiellement mobilisables | ORGA | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_005 | Orienter vers des groupes d'entraide | INFO | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_004 | Proposer un accompagnement pour solliciter de l'aide | SEC | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_042 | Faciliter une runion familiale de rpartition | STRUC | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V1_003 | valuer les aides disponibles | INFO | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_007 | Informer sur les solutions de rpit | INFO | Aidant (autonome) |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_010 | Orienter vers des dispositifs d'aide aux aidants | INFO | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_011 | Envisager un accueil temporaire pour le proche | STRUC | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_025 | Proposer des solutions de rpit | STRUC | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_008 | valuer l'urgence de la situation d'isolement | ORGA | IDEC |  Mdico-social |  | CAT_03 | Legacy |
| MT_V1_024 | valuer les possibilits de mobilisation | ORGA | IDEC |  Mdico-social |  | CAT_03 | Legacy |
| MT_V1_009 | Proposer un contact rgulier avec un professionnel | SEC | IDEC |  Mdico-social |  | CAT_03 | Legacy |

> **Rsum** :
> - Total MT : **14** (13 legacy redistribues + 1 nouvelle)
> - Domaine  Mdico-social : **14 MT** / Domaine  Mdical : **0 MT**
> - CAT_01 : 6 MT (2 contributives : SEC + STRUC)   ASR complte
> - CAT_02 : 5 MT (2 contributives : STRUC  2)   ASR complte
> - CAT_03 : 3 MT (1 contributive : SEC)  ASR partielle

###  Propositions d'amlioration  Types, acteurs et domaine

| # | Proposition | Justification |
|---|---|---|
| 1 | **MT_V1_007  acteur Aidant (autonome)** | L'aidant peut se renseigner seul sur le rpit (brochures, Internet). L'IDEC facilite mais l'aidant peut agir en autonomie. Acteur \`Aidant (autonome)\` existe en DB. |
| 2 | **MT_V1_001  acteur Aidant (autonome)** | L'aidant est le mieux plac pour lister son entourage. L'IDEC guide mais c'est l'aidant qui connat ses proches. |
| 3 | **MT_V1_042  ajouter attribut  format : runion ** | Met en vidence que cette MT ncessite l'organisation d'un moment collectif, pas un acte individuel. |
| 4 | **Absence de MED** : aucune MT mdicale dans R2 | Justifi : R2 est entirement mdico-social. Le soutien psychologique (MED) est couvert par R1 (CAT_03) et V3. Pas de doublon. |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

#### Wording des 14 MT (IDEC + Utilisateur)

| MT_ID | CAT | Libell | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|---|
| MT_V1_001 | CAT_01 | Lister les personnes mobilisables | Faire le point avec l'aidant sur les personnes de son entourage susceptibles de l'aider | Listez les personnes autour de vous qui pourraient vous aider, mme ponctuellement |  |
| MT_V1_002 | CAT_01 | Explorer les freins  la rpartition | Identifier avec l'aidant les raisons pour lesquelles l'aide n'est pas mieux rpartie | Rflchissez  ce qui empche votre entourage de vous aider davantage |  |
| MT_V1_006 | CAT_01 | Identifier d'autres personnes mobilisables | Explorer avec l'aidant les ressources qu'il n'a peut-tre pas identifies (voisins, amis, anciens collgues) | Pensez  des personnes auxquelles vous n'avez peut-tre pas pens : voisins, amis proches, anciens collgues |  |
| MT_V1_005 | CAT_01 | Orienter vers des groupes d'entraide | Informer sur les groupes d'entraide ou cafs aidants du territoire | Renseignez-vous sur les groupes de parole ou cafs aidants prs de chez vous |  |
| MT_V1_004 | CAT_01 | Proposer un accompagnement pour solliciter de l'aide | Proposer d'accompagner l'aidant dans la dmarche de sollicitation de son entourage | Acceptez-vous d'tre accompagn pour demander de l'aide  vos proches ? |  |
| MT_V1_042 | CAT_01 | Faciliter une runion familiale | Proposer et organiser un temps d'change familial pour discuter de la rpartition de l'aide | Organisez un moment d'change avec votre famille pour parler de la rpartition de l'aide |  |
| MT_V1_003 | CAT_02 | valuer les aides disponibles | Faire l'inventaire des services d'aide disponibles sur le territoire de l'aidant | Renseignez-vous sur les services d'aide proposs dans votre secteur |  |
| MT_V1_007 | CAT_02 | Informer sur les solutions de rpit | Informer l'aidant sur les diffrents types de rpit existants (accueil de jour, hbergement temporaire, baluchonnage) | Informez-vous sur les solutions de rpit : accueil de jour, hbergement temporaire, relais  domicile |  |
| MT_V1_010 | CAT_02 | Orienter vers dispositifs d'aide aux aidants | Orienter vers les plateformes et dispositifs spcialiss pour les aidants | Contactez les dispositifs d'aide aux aidants de votre territoire |  |
| MT_V1_011 | CAT_02 | Envisager un accueil temporaire | valuer l'intrt et la faisabilit d'un accueil temporaire pour le proche aid | Envisagez un accueil temporaire pour votre proche afin de vous accorder du rpit |  |
| MT_V1_025 | CAT_02 | Proposer des solutions de rpit | Identifier et proposer les solutions de rpit les plus adaptes  la situation | Explorez les solutions de rpit adaptes  votre situation |  |
| MT_V1_008 | CAT_03 | valuer l'urgence de l'isolement | valuer le degr d'isolement de l'aidant et identifier les risques  court terme | Faites le point sur votre sentiment d'isolement dans votre rle d'aidant |  |
| MT_V1_024 | CAT_03 | valuer les possibilits de mobilisation | Identifier avec l'aidant les leviers restants pour renforcer le soutien | Identifiez les pistes encore inexploites pour trouver du soutien |  |
| MT_V1_009 | CAT_03 | Proposer un contact rgulier avec un professionnel | Mettre en place un suivi rgulier avec un professionnel rfrent pour prvenir l'isolement | Acceptez-vous un suivi rgulier avec un professionnel pour ne pas rester seul face  votre rle ? |  |

#### Wording des 3 Recos de base

| CAT | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | / |
|---|---|---|---|
| CAT_01 | Mobilisation de votre entourage | Organiser la mobilisation du rseau familial et amical |  |
| CAT_02 | Accs  des solutions de rpit | Orienter vers les services de rpit du territoire |  |
| CAT_03 | Prvention de l'isolement | Mettre en place un suivi prventif anti-isolement |  |

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit (Reco + MT)

#### CAT_01  Mobilisation du rseau d'aide

> Niveaux existants :  STD_01 + STD_02 /  CCC_01 + CCC_02 /  CRIT_01 + CRIT_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Votre entourage peut tre davantage mobilis | valuer les possibilits de mobilisation du rseau |
|  CCC ( 30j) | Mobiliser votre entourage devient prioritaire | Organiser la mobilisation du rseau sous 30 jours |
|  Critique ( 7j) | Mobilisation urgente de tous les soutiens | Mobiliser les ressources en urgence sous 7 jours |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_001 | Listez les personnes qui pourraient vous aider | Listez rapidement les personnes mobilisables | Identifiez immdiatement qui peut vous aider |
| MT_V1_004 | Acceptez l'accompagnement pour solliciter de l'aide | Faites-vous accompagner pour demander de l'aide rapidement | Faites-vous aider cette semaine pour mobiliser votre entourage |
| MT_V1_042 | Envisagez un change en famille sur la rpartition | Organisez un change familial dans le mois | Organisez un temps familial cette semaine |

#### CAT_02  Accs au rpit et relais professionnels

> Niveaux existants :  STD_03 /  CCC_02 /  CRIT_01 + CRIT_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Solutions de rpit disponibles | Informer sur le rpit territorial |
|  CCC ( 30j) | Rpit fortement recommand | Organiser l'accs au rpit sous 30 jours |
|  Critique ( 7j) | Rpit urgent | Organiser l'accs au rpit sous 7 jours |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_007 | Informez-vous sur les solutions de rpit | Renseignez-vous rapidement sur le rpit | Renseignez-vous ds maintenant sur le rpit |
| MT_V1_011 | Envisagez un accueil temporaire | Envisagez srieusement un accueil temporaire | Organisez un accueil temporaire sans attendre |
| MT_V1_025 | Explorez les solutions de rpit adaptes | Explorez les solutions de rpit dans le mois | Explorez les solutions de rpit cette semaine |

#### CAT_03  Prvention de l'isolement et du surmenage

> Niveaux existants :  STD_04 /  CCC_03 /  CRIT_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Surveillance prventive de votre charge | Mettre en place un suivi prventif |
|  CCC ( 30j) | Prvention renforce de l'puisement | Renforcer la surveillance sous 30 jours |
|  Critique ( 7j) | Prvention urgente de l'puisement | Intervenir en prvention sous 7 jours |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_008 | Faites le point sur votre isolement | valuez rapidement votre niveau d'isolement | valuez ds maintenant votre niveau d'isolement |
| MT_V1_009 | Un suivi rgulier peut vous aider | Acceptez un suivi rgulier rapidement | Acceptez un suivi rgulier cette semaine |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP R2 n'est PAS activ (aucune rgle critique, CCC ou standard ne s'est dclenche = l'aidant a un bon rseau de soutien)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  Votre entourage semble vous soutenir. Continuez  communiquer avec vos proches et n'hsitez pas  solliciter de l'aide en cas de besoin.  |  La situation de soutien est actuellement favorable. Surveiller l'volution du rseau d'aide et la charge globale au prochain suivi.  |

**MT de prvention proposes :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| _(NOUVELLE)_ | Maintenir le lien avec l'entourage aidant | INFO | Profiter du prochain contact pour valider la prennit du soutien en place | Continuez  changer rgulirement avec vos proches sur votre rle d'aidant |
| _(NOUVELLE)_ | Anticiper les changements d'organisation | ORGA | Renseigner les observations sur l'volution du rseau d'aide | Prparez-vous aux changements possibles (dmnagement d'un aidant, nouvelle charge) |

> **Dcision Dr. Monka** :  Reco prvention valide |   reformuler

### 6.2  Checklist de cohrence (post-dcisions)

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  E3 orpheline |  | E3  STD_04 + CCC_03 |
| 2 | Chaque rgle d'activation  1 version de reco |  |  | 10 rgles  toutes lies  1 catgorie |
| 3 | Chaque catgorie de reco  ses MT assignes |  |  | CAT_01: 6, CAT_02: 5, CAT_03: 3 |
| 4 | K3 respect (2 niveaux par catgorie) |  |  | Chaque CAT a  Standard + CCC |
| 5 | Aucune MT orpheline |  |  | 14 MT toutes rattaches |
| 6 | Reco prvention prsente |  |  | Propose, en attente validation |
| 7 | Wording reco = conseil, MT = verbe d'action |  |  | Phase 1 + Phase 2 proposes |
| 8 | Sens clinique renseign pour chaque rgle |  |  | 10 rgles documentes |

> **Score** : **5/8 valids**, 2 en attente validation (prvention + wording), 1 OK
>
> Quand prvention et wording seront valids  **8/8** 

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 2 (implicites) | **3** (rseau, rpit, prvention) |
| Rgles d'activation | 4 (:1 :2 :1) | **10** (:4, :3, :3 dont 1 triple) |
| MT totales | 14 (sous 2 recos) | **14** (redistribues + 1 nouvelle) |
| MT contributives | 4 (SEC:2, STRUC:2) | **5** (SEC:3, STRUC:2) |
| Domaine  /  | 0 / 14 | 0 / 14 (100% mdico-social) |
| ASR | 2 CAT  + 1 partielle |  Maintenue |
| Reco prvention |  |  Propose |
| Checks OK | 3/8 | 5/8 ( 8/8 aprs validation) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories identifies (rseau, rpit, prvention) |  Valid |
| 2 |  STD_02 : E1 = "plus grande partie"  CAT_01 |  Valid |
| 3 |  STD_03 : E1 = "presque tout + tensions"  CAT_02 |  Valid |
| 4 |  STD_04 : E3  Aucun  CAT_03 |  Valid |
| 5 |  CCC_03 : E3  Aucun + N4 = Oui  CAT_03 |  Valid |
| 6 |  CRIT_02 : Triple (E1 + E2 + N4)  3 CAT |  Valid |
| 7 | MT_V1_042 (STRUC CAT_01  runion familiale) cre |  Valid |
| 8 | Redistribution des 14 MT legacy vers 3 CAT |  Valid |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider wording Phase 1 (base MT + reco) |  Haute |
| 2 | Valider wording Phase 2 (versioning criticit) |  Haute |
| 3 | Valider reco prvention |  Haute |
| 4 | Valider propositions types/acteurs (Action 4) |  Moyenne |
| 5 | MT SEC pour CAT_02 (contact plateforme rpit) |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Ub=`#  Fiche de Validation MP  R3  Isolement social de la personne aide

> **Vulnrabilit** : V1  Social & Relationnel  
> **ASR** :  Limiter l'isolement du proche et maintenir un lien social adapt   
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## CONTEXTE  Big Picture V1

### Rpartition des 15 questions V1 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **R1** | Impact vie perso/pro | 3 | O27, O28, N7 | Retentissement de l'aidance sur la vie de l'aidant |
| **R2** | Soutien entourage | 4 | E1, E2, E3, N4 | Rseau de soutien, isolement aidant |
| **R3** | Isolement du proche | 3 | N20, O47, O48 | Vie sociale du proche aid |
| **R4** | Relation aidant/proche | 5 | E4, E5, E6, O30, O31 | Qualit de la relation, acceptation aide |

> **R3 se concentre sur l'ISOLEMENT DU PROCHE AID** (pas de l'aidant). Le sujet est la vie sociale de la personne aide : maintient-elle des liens ? L'aidant est-il prsent physiquement ? La distance gographique cre-t-elle un isolement subi ? R3 = "mon proche est-il isol socialement", R2 = "qui m'aide moi", R1 = "quel impact sur ma vie", R4 = "comment va notre relation".

---

## 0. DONNES FIGES  Questions rattaches  R3

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | N20 | A-t-elle des difficults  maintenir des relations sociales stables ? | facteur | Non / Parfois / Oui |
| 2 | O47 |  combien de temps habitez-vous du domicile de la personne aide ? | facteur | Moins de 30 min / Entre 30 min et 1h30 / Plus de 1h30 |
| 3 | O48 | Quelle est la frquence de vos visites ? | facteur | Tous les jours / Au moins 1 fois par semaine / Au moins 1 fois par mois / Au moins 1 fois tous les 3 mois / Au moins 1 fois tous les 6 mois / Au moins 1 fois par an / Autre |

> Total : 3 questions rattaches  R3

###  Pourquoi ces 3 questions ?

**N20** est la question cl de R3 : elle mesure directement les **difficults relationnelles du proche aid**. C'est un marqueur d'isolement social objectif (difficults  maintenir des liens stables = soit cognitif, soit contextuel, soit les deux).

**O47** (distance domicile) est un **facteur gographique fixe** qui conditionne l'accs de l'aidant au proche. Plus la distance est grande, plus le risque d'isolement du proche augmente (moins de visites spontanes, plus de logistique).

**O48** (frquence des visites) est un **marqueur comportemental** : elle traduit la ralit de la prsence de l'aidant auprs du proche. Une visite mensuelle ou moins = signal de distance relationnelle ou de contraintes fortes.

 **Combinaison clinique** : N20 mesure la capacit du PROCHE, O47-O48 mesurent la capacit de l'AIDANT  compenser. Les 3 questions ensemble dessinent le tableau de l'isolement social du proche.

###  Analyse des 12 autres questions V1  Pourraient-elles appartenir  R3 ?

> Les questions et leurs options sont **figes**. L'objectif ici est uniquement de vrifier l'affiliation.

#### Questions R1 (Impact vie perso/pro)

| Question | Libell | Pertinence R3 ? | Raisonnement |
|---|---|---|---|
| **O27** | Difficults vie familiale ? |  Non | Concerne l'AIDANT, pas le proche. R1. |
| **O28** | Difficults amis/loisirs/travail ? |  Non | Concerne l'AIDANT. R1. |
| **N7** | Amnagement professionnel ? |  Non | Concerne l'AIDANT. Impact professionnel  R1. |

>  **Verdict R1** : Aucune question R1 ne devrait tre dans R3. R1 concerne l'aidant, R3 le proche.

#### Questions R2 (Soutien entourage)

| Question | Libell | Pertinence R3 ? | Raisonnement |
|---|---|---|---|
| **E1** | Rpartition de l'aide ? |  Non | Mesure le rseau d'aide autour de l'AIDANT. R2. |
| **E2** | Personnes en cas de coup dur ? |  Non | Filet de scurit de l'AIDANT. R2. |
| **E3** | Autres personnes  charge ? |  Non | Charge de l'AIDANT. R2. |
| **N4** | Seule dans la famille ? |  **Dbattable** | Si l'aidant est seul dans la famille  il est potentiellement le SEUL lien du proche avec la famille. Cela pourrait tre un facteur d'isolement du proche. **Mais** : N4 mesure la situation de l'AIDANT (sa solitude dans le rle), pas celle du PROCHE (son isolement social). Le mme rsultat (N4 = Oui) peut exister avec un proche ayant des amis, des voisins, des activits.  R2 reste juste. |

>  **Verdict R2** : Aucune question R2 ne devrait tre dans R3. N4 a un lien indirect mais son sujet principal est le rseau de l'aidant.

#### Questions R4 (Relation aidant/proche)

| Question | Libell | Pertinence R3 ? | Raisonnement |
|---|---|---|---|
| **E4** | volution de la relation ? |  Non | Relation interpersonnelle  R4. |
| **E5** | Tensions familiales ? |  Non | Dynamique familiale  R4. |
| **E6** | Acceptation aide extrieure ? |  **Dbattable** | Un proche qui refuse l'aide extrieure se prive d'interactions sociales supplmentaires  facteur d'isolement. **Mais** : E6 mesure le comportement du proche vis--vis DE L'AIDE (et non des relations sociales). Le refus d'aide n'est pas synonyme d'isolement social  un proche peut refuser l'aide pro tout en ayant des amis.  R4 reste plus juste. |
| **O30** | Ne plus reconnatre la personne ? |  Non | Perception de l'aidant  R4. |
| **O31** | Peur pour l'avenir ? |  Non | Inquitude de l'aidant  R4. |

>  **Verdict R4** : E6 (refus d'aide) a un lien indirect avec l'isolement. Mais son thme principal est l'acceptation de l'aide  R4.

###  Synthse affiliation

| Question | MP actuel | Pertinence R3 ? | Confiance |
|---|---|---|---|
| O27, O28, N7 | R1 |  Non |  Haute |
| E1, E2, E3 | R2 |  Non |  Haute |
| N4 | R2 |  Lien indirect (mais R2 reste juste) |  Moyenne |
| E4, E5, O30, O31 | R4 |  Non |  Haute |
| E6 | R4 |  Lien indirect (mais R4 reste juste) |  Moyenne |

> **Conclusion** : Les 3 questions de R3 (N20, O47, O48) sont les bonnes. Aucune question V1 ne devrait tre ajoute  R3. Les liens indirects (N4, E6) ne justifient pas un double rattachement.
>
> ** Point d'attention inter-MP** : Si N4 = "Oui" (aidant seul, R2) ET O48 = "1x/mois ou moins" (visites rares, R3), le risque combin (aidant seul + prsence rare) est lev. Ce signal crois est capt par la superposition des activations R2 et R3.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse de la reco legacy unique (R3_RECO_01) montre 1 action principale : surveillance mdicale + activits adaptes. Cliniquement, R3 couvre 2 dimensions distinctes :
1. **Surveillance du lien social**  Identifier et prvenir l'isolement social du proche (monitoring, contact MT)
2. **Maintien des activits sociales**  Proposer des solutions concrtes pour prserver ou restaurer le lien social (accueil de jour, activits adaptes)

La reco legacy fusionne les deux (MT + activits). On les spare pour plus de clart clinique : surveiller  agir.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | R3_CAT_01 | Surveillance du lien social | Surveiller l'humeur, l'isolement et l'tat du proche en lien avec le MT | Legacy  |
| 2 | R3_CAT_02 | Maintien des activits sociales | Proposer des activits et structures adaptes pour prserver le lien social du proche | Legacy  +  IA |

###  Raisonnement

- **CAT_01** (Surveillance) : Correspond  la partie "surveillance" de R3_RECO_01. L'ide : le MT surveille l'humeur et la prise de traitement, l'IDEC surveille l'volution du lien social  dtection prcoce.
- **CAT_02** (Activits) : Correspond  la partie "activits adaptes" (MT_V1_040). L'ide : accueil de jour, activits collectives, sorties accompagnes  action concrte pour rompre l'isolement.

**Pourquoi pas 1 catgorie (fusionner) ?**  Parce que surveiller et agir sont deux dmarches diffrentes avec des temporalits diffrentes. La surveillance est continue, les activits sont ponctuelles mais structurantes.

**Pourquoi pas 3 ?**  On a envisag une CAT_03 "distance gographique" (O47) mais la distance est un FACTEUR, pas une action clinique. Elle aggrave la situation mais ne gnre pas une action diffrente (on adapte la frquence des visites dans CAT_01/CAT_02).

>  **Valid : 2 catgories** (CAT_01 Surveillance, CAT_02 Activits)

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

R3 est un MP  3 questions dont 2 sont des facteurs contextuels (O47, O48). La question cl est N20 (difficults relationnelles du proche). Les combos avec O47/O48 dterminent la gravit.

### Rappel des questions R3 et de leurs options

> **N20**   A-t-elle des difficults  maintenir des relations sociales stables ? 
> - Non (score 0) / Parfois (score +1) / **Oui** (score +2)

> **O47**    combien de temps habitez-vous du domicile de la personne aide ? 
> - Moins de 30 min / Entre 30 min et 1h30 / **Plus de 1h30** _(non scorante)_

> **O48**   Quelle est la frquence de vos visites ? 
> - Tous les jours / 1x/semaine / **1x/mois** / **1x/3 mois** / **1x/6 mois** / **1x/an** / Autre _(non scorante)_

---

### Catgorie 1  Surveillance du lien social

####  Standard  \`V1_R3_STD_01\` _(legacy)_

> **SI** l'aidant a rpondu  la question :
>  Quelle est la frquence de vos visites ? 
>  ** Au moins 1 fois par mois ** ou moins frquent
>
> **ALORS** : Recommander la surveillance du lien social
>
> **Sens clinique** : Des visites mensuelles ou moins frquentes signalent une prsence limite auprs du proche. Mme sans difficult relationnelle identifie (N20), la faible prsence justifie une surveillance  le proche peut s'isoler sans que l'aidant ne le dtecte.

####  Standard  \`V1_R3_STD_02\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  A-t-elle des difficults  maintenir des relations sociales stables ? 
>  ** Parfois **
>
> **ALORS** : Recommander la surveillance du lien social
>
> **Sens clinique** : Des difficults intermittentes sont un signal prcoce. Le proche n'est pas encore en isolement complet mais la fragilisation est en cours  surveillance proactive.

####  CCC  \`V1_R3_CCC_01\` _(legacy)_

> **SI** l'aidant a rpondu :
> 1.  A-t-elle des difficults  maintenir des relations sociales stables ?   ** Oui **
> 2. **ET**  Quelle est la frquence de vos visites ?   ** Au moins 1 fois par mois ** ou moins frquent
>
> **ALORS** : Recommander la surveillance du lien social  niveau CCC ( 30 jours)
>
> **Sens clinique** : Le proche a des difficults relationnelles confirmes ET l'aidant le voit rarement. Double signal : le proche est en train de s'isoler et personne n'est l pour le compenser.

####  Critique  \`V1_R3_CRIT_01\` _(NOUVEAU )_

> **SI** l'aidant a rpondu :
> 1.  A-t-elle des difficults  maintenir des relations sociales stables ?   ** Oui **
> 2. **ET**  Quelle est la frquence de vos visites ?   ** Au moins 1 fois tous les 3 mois ** ou moins frquent
> 3. **ET**   combien de temps habitez-vous du domicile ?   ** Plus de 1h30 **
>
> **ALORS** : Recommander la surveillance  niveau Critique ( 7 jours)
>
> **Sens clinique** : Triple signal d'isolement : difficults relationnelles confirmes + prsence de l'aidant trs rare + distance gographique importante. Le proche est probablement en isolement svre  intervention urgente ncessaire.

---

### Catgorie 2  Maintien des activits sociales

####  Standard  \`V1_R3_STD_03\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  A-t-elle des difficults  maintenir des relations sociales stables ? 
>  ** Oui **
>
> **ALORS** : Recommander le maintien des activits sociales
>
> **Sens clinique** : Le proche a des difficults relationnelles  proposer des activits adaptes pour compenser et prvenir l'aggravation.

####  CCC  \`V1_R3_CCC_01\` _(mme rgle que CAT_01, legacy)_

> **SI** l'aidant a rpondu :
> 1.  A-t-elle des difficults relationnelles ?   ** Oui **
> 2. **ET**  Frquence des visites ?   ** 1x/mois ** ou moins
>
> **ALORS** : Recommander le maintien des activits sociales  niveau CCC ( 30 jours)
>
> **Sens clinique** : Le proche est en difficult et insuffisamment visit  les activits sociales deviennent un relais indispensable en l'absence de l'aidant.

>  **Observation** : CAT_01 et CAT_02 se dclenchent sur la mme rgle CCC (CCC_01). C'est normal  le mme signal clinique (isolement + faible prsence) justifie deux actions complmentaires : surveiller (CAT_01) ET proposer des activits (CAT_02).

---

###  Dcisions Action 2

| # | Proposition | Dcision | Rgle cre |
|---|---|---|---|
| 1 |  Standard CAT_01 (N20 = Parfois) |  Valid | \`V1_R3_STD_02\` |
| 2 |  Standard CAT_02 (N20 = Oui) |  Valid | \`V1_R3_STD_03\` |
| 3 |  Critique triple (N20 + O48 + O47) |  Valid | \`V1_R3_CRIT_01\` |

>  **Contrle K3** : Chaque catgorie a maintenant  2 niveaux.
>
> **Vrification couverture questions** :
> - N20  STD_02, STD_03, CCC_01, CRIT_01 
> - O47  CRIT_01 
> - O48  STD_01, CCC_01, CRIT_01 
>  Toutes les questions sont utilises dans  1 rgle 

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** : Seulement 3 MT pour R3 (1 contributive, 2 non-contributives), toutes sous R3_RECO_01. R3 est le MP le plus "lger" de V1 en termes de MT. On redistribue et on propose des ajouts.

### CAT_01  Surveillance du lien social

> Legacy : 1 MT (MT_V1_039). Aprs redistribution + nouvelles : **3 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V1_039 | Identifier les situations problmatiques | ORGA | IDEC |  | Legacy |
| MT_V1_043 | Contacter le MT pour surveillance humeur et traitement | SEC | IDEC |  | NOUVEAU  (extrait de R3_RECO_01) |
| MT_V1_044 | valuer la frquence de contact et la qualit du lien | ORGA | IDEC |  | NOUVEAU  |

####  Pourquoi 3 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_039 (situations problmatiques)  on surveille sans avoir identifi les facteurs de risque spcifiques.
- Sans MT_V1_043 (contact MT)  c'est l'action cl de la reco legacy. Le MT doit prescrire le passage d'un IDEL pour surveillance. Sans cette MT, la chane clinique est rompue.
- Sans MT_V1_044 (valuer frquence)  on ne mesure pas l'volution du lien social. L'valuation initiale (O48) est un snapshot  besoin d'un suivi dynamique.

**Pourquoi pas 1 de plus ?**
-  Contacter la famille largie du proche   hors scope IDEC direct, c'est un levier de R2 (rseau de l'aidant).
-  valuer l'tat cognitif du proche   c'est du V4 (fragilit du proche), pas du R3.

### CAT_02  Maintien des activits sociales

> Legacy : 2 MT (MT_V1_040, MT_V1_041). Aprs enrichissement : **3 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V1_040 | Proposer des activits adaptes | STRUC | IDEC |  | Legacy |
| MT_V1_041 | valuer l'intrt d'un accueil de jour | ORGA | IDEC |  | Legacy |
| MT_V1_045 | Identifier les activits sociales disponibles sur le territoire | INFO | IDEC |  | NOUVEAU  |

####  Pourquoi 3 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_040 (activits adaptes)  c'est la seule MT contributive STRUC. Sans elle, pas de proposition concrte.
- Sans MT_V1_041 (accueil de jour)  on occulte la solution la plus structurante contre l'isolement du proche. L'accueil de jour est souvent le premier pas vers la resocialisation.
- Sans MT_V1_045 (identifier activits)  on propose (MT_V1_040) sans avoir fait l'inventaire. L'IDEC doit d'abord cartographier l'offre avant de proposer.

**Pourquoi pas 1 de plus ?**
-  Organiser un transport accompagn   sous-action de MT_V1_040, pas une MT autonome.
-  valuer les capacits cognitives pour les activits   c'est le rle du MT via CAT_01 (surveillance), pas une MT de CAT_02.

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | SEC pour CAT_01 (contact MT surveillance) |  Valid | \`MT_V1_043\` |
| 2 | ORGA pour CAT_01 (valuer frquence/qualit) |  Valid | \`MT_V1_044\` |
| 3 | INFO pour CAT_02 (cartographier activits) |  Valid | \`MT_V1_045\` |

> **Condition ASR par catgorie** :
> - CAT_01 :  1 (SEC)  ASR partielle (pas de STRUC)
> - CAT_02 :  1 (STRUC)  ASR partielle (pas de SEC)
>
>  **Point d'attention** : Ni CAT_01 ni CAT_02 n'a une chane complte (SEC + STRUC). C'est cohrent avec la nature de R3 : c'est un MP de surveillance et d'orientation, pas d'intervention directe. L'intervention est porte par le MT et les structures d'accueil.
>
>  **Total R3 : 3 MT legacy + 3 nouvelles = 6 MT** (3 CAT_01 + 3 CAT_02)

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs existants dans la DB** : \`IDEC\`, \`MT\` (mdecin traitant), \`Aidant (autonome)\`, \`AS\` (assistante sociale)
> **Domaines** :  Mdical /  Mdico-social

### Tableau consolid des MT de R3 (final)

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Source |
|---|---|---|---|---|---|---|---|
| MT_V1_039 | Identifier les situations problmatiques | ORGA | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_043 | Contacter le MT pour surveillance humeur et traitement | SEC | IDEC |  Mdical |  | CAT_01 | NOUVEAU  |
| MT_V1_044 | valuer la frquence de contact et la qualit du lien | ORGA | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V1_040 | Proposer des activits adaptes | STRUC | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_041 | valuer l'intrt d'un accueil de jour | ORGA | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_045 | Identifier les activits sociales sur le territoire | INFO | IDEC |  Mdico-social |  | CAT_02 | NOUVEAU  |

> **Rsum** :
> - Total MT : **6** (3 legacy + 3 nouvelles)
> - Domaine  Mdico-social : **5 MT** / Domaine  Mdical : **1 MT** (MT_V1_043)
> - CAT_01 : 3 MT (1 contributive : SEC)  ASR partielle
> - CAT_02 : 3 MT (1 contributive : STRUC)  ASR partielle
> - Contributives () : 2  SEC: 1, STRUC: 1
> - Non-contributives () : 4  ORGA: 3, INFO: 1

###  Propositions d'amlioration  Types, acteurs et domaine

| # | Proposition | Justification |
|---|---|---|
| 1 | **MT_V1_043  acteur double : IDEC + MT** | L'IDEC initie le contact, le MT excute la prescription. L'acteur visible en DB devrait rester IDEC (elle dclenche) mais le MT est acteur secondaire. |
| 2 | **MT_V1_041  acteur Aidant (autonome) en complment** | L'aidant peut visiter un accueil de jour de sa propre initiative. L'IDEC l'oriente mais l'aidant peut agir en autonomie. |
| 3 | **SEC pour CAT_02** : ajouter une MT pour scuriser l'accs  l'accueil de jour | Si MT_V1_041 value l'intrt, il manque une MT qui concrtise l'inscription.   Proposition en attente. |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

#### Wording des 6 MT (IDEC + Utilisateur)

| MT_ID | CAT | Libell | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|---|
| MT_V1_039 | CAT_01 | Identifier les situations problmatiques | Reprer les indicateurs d'isolement social du proche (absence de contacts, refus de sortir, humeur dgrade) | Observez si votre proche a tendance  s'isoler ou  refuser les contacts |  |
| MT_V1_043 | CAT_01 | Contacter le MT pour surveillance | Contacter le mdecin traitant pour demander la prescription d'un passage IDEL pour surveillance de l'humeur et du traitement | Parlez au mdecin traitant de votre proche pour une surveillance rgulire de son humeur |  |
| MT_V1_044 | CAT_01 | valuer frquence/qualit du lien | valuer la frquence et la qualit des contacts sociaux du proche (visites, appels, sorties) | Rflchissez  la frquence de vos changes avec votre proche et  la qualit de ces moments |  |
| MT_V1_040 | CAT_02 | Proposer des activits adaptes | Identifier et proposer des activits sociales adaptes aux capacits et centres d'intrt du proche | Proposez  votre proche des activits adaptes  ses envies et ses capacits |  |
| MT_V1_041 | CAT_02 | valuer l'intrt d'un accueil de jour | Prsenter les solutions d'accueil de jour au proche et  l'aidant. valuer la faisabilit. | Renseignez-vous sur les accueils de jour : votre proche pourrait y trouver du lien social et des activits stimulantes |  |
| MT_V1_045 | CAT_02 | Cartographier les activits sociales | Faire l'inventaire des activits sociales et structures adaptes sur le territoire (accueil de jour, clubs, associations) | Recherchez les activits et structures adaptes prs de chez votre proche |  |

#### Wording des 2 Recos de base

| CAT | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | / |
|---|---|---|---|
| CAT_01 | Surveillance du lien social de votre proche | Organiser la surveillance du lien social via MT |  |
| CAT_02 | Activits sociales adaptes pour votre proche | Identifier et proposer des activits adaptes au proche |  |

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit (Reco + MT)

#### CAT_01  Surveillance du lien social

> Niveaux existants :  STD_01 + STD_02 /  CCC_01 /  CRIT_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Surveillance du lien social recommande | Mettre en place un suivi du lien social |
|  CCC ( 30j) | Surveillance du lien social prioritaire | Organiser la surveillance sous 30 jours |
|  Critique ( 7j) | Surveillance urgente de l'isolement | Organiser la surveillance en urgence sous 7 jours |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_039 | Observez si votre proche s'isole | Surveillez attentivement tout signe d'isolement | Surveillez ds maintenant tout signe d'isolement |
| MT_V1_043 | Parlez-en au mdecin traitant quand possible | Contactez le mdecin traitant dans le mois | Contactez le mdecin traitant cette semaine |

#### CAT_02  Maintien des activits sociales

> Niveaux existants :  STD_03 /  CCC_01 /  CRIT_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Activits sociales  envisager | valuer les activits adaptes |
|  CCC ( 30j) | Activits sociales recommandes | Proposer des activits sociales sous 30 jours |
|  Critique ( 7j) | Activits sociales urgentes | Mettre en place des activits sociales sous 7 jours |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_040 | Proposez des activits adaptes  votre proche | Proposez rapidement des activits adaptes | Proposez ds cette semaine des activits adaptes |
| MT_V1_041 | Renseignez-vous sur l'accueil de jour | Explorez srieusement l'accueil de jour | Visitez un accueil de jour cette semaine |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP R3 n'est PAS activ (aucune rgle ne s'est dclenche = le proche maintient un lien social satisfaisant)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  Le lien social de votre proche semble prserv. Restez attentif  tout changement : diminution des sorties, perte d'intrt pour les activits, isolement progressif.  |  Le lien social du proche est actuellement maintenu. Surveiller l'volution au prochain suivi. Rester vigilant en cas de changement de situation (dmnagement, hospitalisation, deuil).  |

**MT de prvention proposes :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| _(NOUVELLE)_ | Sensibiliser  l'isolement progressif | INFO | Lors du prochain contact, vrifier que le proche maintient des interactions sociales rgulires | Veillez  ce que votre proche continue  voir du monde et  sortir rgulirement |
| _(NOUVELLE)_ | Observer les signaux de repli | ORGA | Surveiller les indicateurs de repli social (refus de sortir, baisse d'humeur, perte d'intrt) | Soyez attentif si votre proche refuse de sortir ou semble plus renferm qu'avant |

> **Dcision Dr. Monka** :  Reco prvention valide |   reformuler

### 6.2  Checklist de cohrence (post-dcisions)

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  O47 orpheline |  | O47  CRIT_01 |
| 2 | Chaque rgle d'activation  1 version de reco |  |  | 6 rgles  toutes lies  1 catgorie |
| 3 | Chaque catgorie de reco  ses MT assignes |  |  | CAT_01: 3 MT, CAT_02: 3 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  |  | Chaque CAT a  Standard + CCC |
| 5 | Aucune MT orpheline |  |  | 6 MT toutes rattaches |
| 6 | Reco prvention prsente |  |  | Propose, en attente validation |
| 7 | Wording reco = conseil, MT = verbe d'action |  |  | Phase 1 + Phase 2 proposes |
| 8 | Sens clinique renseign pour chaque rgle |  |  | 6 rgles documentes |

> **Score** : **5/8 valids**, 2 en attente validation (prvention + wording)
>
> Quand prvention et wording seront valids  **8/8** 

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 1 | **2** (surveillance, activits) |
| Rgles d'activation | 2 (:1 :1) | **6** (:3, :1, :2 dont 1 triple) |
| MT totales | 3 | **6** (3 legacy + 3 nouvelles) |
| MT contributives | 1 (STRUC) | **2** (STRUC:1, SEC:1) |
| Domaine  /  | 0 / 3 | 1 / 5 |
| ASR | 1 CAT partielle | CAT_01 partielle (SEC) + CAT_02 partielle (STRUC) |
| Reco prvention |  |  Propose |
| Checks OK | 2/8 | 5/8 ( 8/8 aprs validation) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 2 catgories identifies (surveillance, activits) |  Valid |
| 2 |  STD_02 : N20 = Parfois  CAT_01 |  Valid |
| 3 |  STD_03 : N20 = Oui  CAT_02 |  Valid |
| 4 |  CRIT_01 : Triple (N20 + O48 rare + O47 loin)  2 CAT |  Valid |
| 5 | MT_V1_043 (SEC CAT_01  contact MT) cre |  Valid |
| 6 | MT_V1_044 (ORGA CAT_01  valuer frquence) cre |  Valid |
| 7 | MT_V1_045 (INFO CAT_02  cartographier activits) cre |  Valid |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider wording Phase 1 (base MT + reco) |  Haute |
| 2 | Valider wording Phase 2 (versioning criticit) |  Haute |
| 3 | Valider reco prvention |  Haute |
| 4 | SEC pour CAT_02 (scuriser inscription accueil de jour) |  Moyenne |
| 5 | Valider propositions acteurs (Action 4) |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,zb=`#  Fiche de Validation MP  R4  Relation aidant / proche et acceptation de l'aide

> **Vulnrabilit** : V1  Social & Relationnel  
> **ASR** :  Amliorer la relation et faciliter l'acceptation de l'aide   
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## CONTEXTE  Big Picture V1

### Rpartition des 15 questions V1 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **R1** | Impact vie perso/pro | 3 | O27, O28, N7 | Retentissement de l'aidance sur la vie de l'aidant |
| **R2** | Soutien entourage | 4 | E1, E2, E3, N4 | Rseau de soutien, isolement aidant |
| **R3** | Isolement du proche | 3 | N20, O47, O48 | Vie sociale du proche aid |
| **R4** | Relation aidant/proche | 5 | E4, E5, E6, O30, O31 | Qualit de la relation, acceptation aide |

> **R4 est le MP le plus riche de V1** (5 questions, 16 MT). Il couvre la dimension RELATIONNELLE : la qualit du lien entre l'aidant et le proche aid, les tensions familiales, l'acceptation de l'aide extrieure, et la dtresse psychologique de l'aidant face aux changements de personnalit du proche. R4 = "comment va notre relation, accepte-t-il l'aide, et comment je vis ses changements".

---

## 0. DONNES FIGES  Questions rattaches  R4

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E4 | Depuis que vous aidez votre proche, comment a volu votre relation avec lui/elle ? | etat | Plutt renforce / plus proche / Globalement similaire / Plus tendue / plus complique / Difficile  dire |
| 2 | E5 | Existe-t-il des tensions ou des dsaccords au sein de la famille concernant la prise en charge de votre proche ? | etat | Non / Parfois / Oui |
| 3 | E6 | Votre proche accepte-t-il l'aide de personnes extrieures (aide  domicile, infirmier, structure, etc.) ? | facteur | Oui, facilement / Oui, mais avec des rticences / Non, il/elle refuse la plupart du temps / Je ne sais pas / nous n'avons pas encore essay |
| 4 | O30 | Avez-vous le sentiment de ne plus reconnatre la personne aide ? | facteur et etat | Pas du tout / Un peu / Oui |
| 5 | O31 | Avez-vous peur pour l'avenir de la personne aide ? | facteur et etat | Pas du tout / Un peu / Oui |

> Total : 5 questions rattaches  R4  le MP le plus riche de V1

###  Pourquoi ces 5 questions ?

**E4** mesure directement l'**volution de la relation**  c'est le marqueur central de R4. "Plus tendue / plus complique" = signal d'alarme relationnel. "Difficile  dire" est aussi proccupant : l'aidant ne sait plus o il en est dans la relation. La distinction avec "Globalement similaire" est cliniquement importante : similaire = stable, difficile  dire = confusion.

**E5** identifie les **tensions familiales** lies  la prise en charge. Attention : E5 ne parle pas de la relation AVEC le proche (c'est E4) mais des tensions AU SEIN de la famille. Les dsaccords entre frres et surs sur la prise en charge sont un facteur de stress supplmentaire pour l'aidant ET fragilisent le systme d'aide.

**E6** mesure l'**acceptation de l'aide extrieure** par le proche. C'est une question cl pour R4 car le refus d'aide impacte directement la relation : l'aidant doit tout faire seul, la charge augmente, les tensions montent. "Je ne sais pas" est un signal de non-exploration  l'aidant n'a pas encore tent de mettre en place de l'aide externe.

**O30** est un marqueur de **perte de reconnaissance identitaire**  c'est un des signaux psychologiques les plus forts du questionnaire. L'aidant ne reconnat plus la personne aide  rupture identitaire qui impacte profondment la relation. Ce n'est pas un symptme du proche (c'est V4/V5) mais un VCU de l'aidant face  la maladie.

**O31** mesure l'**anxit projete** vers le proche. La peur pour l'avenir n'est pas centre sur l'aidant lui-mme (ce serait R1/V3) mais sur LE PROCHE. C'est une inquitude relationnelle : "qu'est-ce qui va lui arriver et comment vais-je le vivre avec lui".

###  Analyse des 10 autres questions V1  Pourraient-elles appartenir  R4 ?

> Les questions et leurs options sont **figes**. L'objectif ici est uniquement de vrifier si l'affiliation actuelle est correcte.

#### Questions R1 (Impact vie perso/pro)

| Question | Libell | Pertinence R4 ? | Raisonnement |
|---|---|---|---|
| **O27** | Difficults dans la vie familiale ? |  **Dbattable** | Les difficults familiales POURRAIENT tre lies aux tensions relationnelles (E5). **Mais** : O27 mesure l'**impact** de l'aidance sur la vie familiale (consquence = R1), pas les **tensions** dans la famille autour de la prise en charge (dynamique = R4). Un aidant peut avoir des difficults familiales (O27) sans que ce soit li  des dsaccords sur la prise en charge (E5).  R1 reste juste. |
| **O28** | Difficults relations amis/loisirs/travail ? |  Non | Impact social/professionnel  R1 pur. Aucun lien avec la relation aidant/proche. |
| **N7** | Amnagement activit professionnelle ? |  Non | Impact professionnel  R1 pur. |

>  **Verdict R1** : O27 a un lien indirect (difficults familiales  tensions possibles) mais son sujet principal est l'impact, pas la relation. Aucune question R1 ne devrait tre dans R4.

#### Questions R2 (Soutien entourage)

| Question | Libell | Pertinence R4 ? | Raisonnement |
|---|---|---|---|
| **E1** | Rpartition de l'aide ? |  **Dbattable** | Une rpartition dsquilibre (E1 = "Je fais presque tout") peut ALIMENTER les tensions (E5). En effet, si l'aidant porte tout seul, les tensions familiales sont plus probables. **Mais** : E1 mesure la CHARGE (qui fait quoi = R2), pas le CONFLIT (tensions sur les dcisions = R4). Un aidant peut tout faire sans tensions (choix accept) ou ne rien faire et avoir des tensions (dsaccords de principe).  R2 reste juste. **En revanche** : E1 est utilise comme condition dans la rgle CCC_02 de R4 (cross-MP), ce qui capte ce signal crois sans rattacher E1  R4. |
| **E2** | Personnes en cas de coup dur ? |  Non | Filet de scurit de l'aidant  R2 pur. |
| **E3** | Autres personnes  charge ? |  Non | Multi-aidance / charge  R2 pur. |
| **N4** | Seule dans la famille ? |  Non | Structure du rseau d'aide  R2 pur. |

>  **Verdict R2** : E1 a un lien clinique avec E5 (charge  tensions) mais il est capt par la rgle CCC cross-MP, pas par un rattachement. Aucune question R2 ne devrait tre dans R4.

#### Questions R3 (Isolement du proche)

| Question | Libell | Pertinence R4 ? | Raisonnement |
|---|---|---|---|
| **N20** | Difficults du proche  maintenir des relations sociales ? |  **Dbattable** | Les difficults relationnelles du proche SE MANIFESTENT aussi dans la relation avec l'aidant. Si le proche ne maintient pas de relations stables (N20 = Oui), c'est peut-tre aussi compliqu avec l'aidant. **Mais** : N20 parle de relations SOCIALES (amis, voisins = R3), pas de la relation AVEC L'AIDANT (qui est un lien intime, pas social au sens large). Un proche peut tre isol socialement (N20 = Oui) tout en ayant une bonne relation avec l'aidant (E4 = Renforce).  R3 reste juste. |
| **O47** | Distance domicile |  Non | Facteur gographique fixe  R3 pur. |
| **O48** | Frquence des visites |  Non | Frquence de prsence  R3 pur. |

>  **Verdict R3** : N20 a un lien clinique indirect mais les relations sociales  la relation intime aidant/proche. Aucune question R3 ne devrait tre dans R4.

###  Synthse affiliation

| Question | MP actuel | Pertinence R4 ? | Confiance |
|---|---|---|---|
| O27 | R1 |  Lien indirect (difficults familiales)  R1 juste |  Moyenne |
| O28, N7 | R1 |  Non |  Haute |
| E1 | R2 |  Lien indirect (charge  tensions)  capt par CCC cross-MP |  Moyenne |
| E2, E3, N4 | R2 |  Non |  Haute |
| N20 | R3 |  Lien indirect (relations sociales  relation intime) |  Moyenne |
| O47, O48 | R3 |  Non |  Haute |

> **Conclusion** : Les 5 questions de R4 (E4, E5, E6, O30, O31) sont les bonnes. Aucune question V1 ne devrait tre ajoute  R4. Les liens indirects (O27, E1, N20) sont capts par les signaux croiss inter-MP, pas par un double rattachement.
>
> ** Point clinique R4** : R4 est le seul MP o les 5 questions sont complmentaires dans un "triangle relationnel" :
> - **E4 + E5** = dynamique de la relation (tat + tensions)
> - **E6** = comportement du proche face  l'aide (facteur aggravant)
> - **O30 + O31** = vcu psychologique de l'aidant (perception du changement + anxit)
>  Les 5 questions convergent vers le mme sujet (la relation) mais depuis des angles diffrents.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse des recos legacy (R4_RECO_01 + R4_RECO_02) montre 3 axes cliniques distincts :
1. **Tensions relationnelles aidant/famille** (E4, E5)  mdiation, coute, communication
2. **Refus d'aide du proche** (E6)  comprhension des freins, approche progressive, mise en relation
3. **Dtresse psychologique de l'aidant** (O30, O31)  soutien psy, information sur la maladie

Ces 3 axes impliquent des acteurs diffrents (IDEC mdiateur vs psychologue), des temporalits diffrentes (mdiation = ponctuel vs soutien psy = continu), et des modes d'action diffrents (ngocier avec la famille vs accompagner l'aidant individuellement).

**Pourquoi pas 2 catgories ?**  Fusionner CAT_01 (tensions) et CAT_03 (dtresse psy) confondrait deux situations : les tensions relationnelles sont un problme INTERACTIONNEL (entre personnes) alors que la dtresse psychologique est un problme INDIVIDUEL (vcu personnel de l'aidant). Un aidant peut tre en dtresse (O30 = Oui) sans avoir de tensions (E5 = Non)  il souffre seul de la perte de reconnaissance.

**Pourquoi pas 4 catgories ?**  Sparer CAT_01 en "tensions avec le proche" (E4) et "tensions familiales" (E5) serait trop granulaire. E4 et E5 sont souvent lis : quand la relation aidant/proche se tend, c'est souvent parce que la famille est en conflit sur la prise en charge. La mdiation adresse les deux.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | R4_CAT_01 | Mdiation et apaisement des tensions | Accompagner la gestion des tensions familiales et relationnelles autour de la prise en charge | Legacy  |
| 2 | R4_CAT_02 | Facilitation de l'acceptation de l'aide | Comprendre les freins du proche au recours  l'aide extrieure et proposer une approche progressive | Legacy  |
| 3 | R4_CAT_03 | Soutien psychologique face au changement | Accompagner l'aidant dans la gestion de la perte de reconnaissance et de l'anxit pour l'avenir |  IA |

>  **Valid : 3 catgories** (mdiation, acceptation aide, soutien psychologique)

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

R4 est le MP avec le plus de combinaisons possibles (5 questions  options multiples). Les rgles legacy combinent principalement E6 (refus d'aide) avec O30/O31 (dtresse). On enrichit en couvrant les signaux prcoces (E4 = "Difficile  dire", E5 = "Parfois") et les combinaisons critiques multi-questions.

### Rappel des questions R4 et de leurs options

> **E4**   Comment a volu votre relation ? 
> - Plutt renforce / plus proche (score 0) / Globalement similaire (score 0) / **Plus tendue / plus complique** (score +1) / **Difficile  dire** (score +1)

> **E5**   Tensions ou dsaccords familiaux pour la prise en charge ? 
> - Non (score 0) / **Parfois** (score +1) / **Oui** (score +2)

> **E6**   Acceptation aide extrieure ? 
> - Oui, facilement (score 0) / Oui, mais avec rticences (score 0) / **Non, refuse la plupart du temps** (score +2) / Je ne sais pas (score 0)

> **O30**   Sentiment de ne plus reconnatre la personne aide ? 
> - Pas du tout (score 0) / **Un peu** (score +1) / **Oui** (score +2)

> **O31**   Peur pour l'avenir ? 
> - Pas du tout (score 0) / **Un peu** (score +1) / **Oui** (score +2)

---

### Catgorie 1  Mdiation et apaisement des tensions

####  Standard  \`V1_R4_STD_01\` _(legacy, rattribu)_

> **SI** l'aidant a rpondu  la question :
>  Votre proche accepte-t-il l'aide de personnes extrieures ? 
>  ** Non, il/elle refuse la plupart du temps **
>
> **ALORS** : Recommander la mdiation
>
> **Sens clinique** : Le refus systmatique d'aide extrieure est gnrateur de tensions dans la relation. L'aidant doit tout assumer  frustration  tensions. Mme sans tensions dclares (E5 = Non), le refus d'aide est un terrain propice.

####  Standard  \`V1_R4_STD_02\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  Tensions ou dsaccords familiaux ? 
>  ** Parfois **
>
> **ALORS** : Recommander la mdiation
>
> **Sens clinique** : Des tensions intermittentes sont un signal prcoce. Agir tt (coute, communication) peut viter l'installation du conflit chronique. La fentre d'intervention est ouverte.

####  CCC  \`V1_R4_CCC_01\` _(legacy)_

> **SI** l'aidant a rpondu :
> 1.  Sentiment de ne plus reconnatre ?   ** Oui **
> 2. **ET**  Comment a volu votre relation ?   ** Plus tendue / plus complique **
>
> **ALORS** : Recommander la mdiation  niveau CCC ( 30 jours)
>
> **Sens clinique** : La perte de reconnaissance COMBINE avec une relation dgrade est un signal de rupture du lien en cours. Le mcanisme : l'aidant ne reconnat plus la personne  il ne comprend plus ses ractions  les interactions deviennent tendues  cercle vicieux. La mdiation doit interrompre cette spirale.

####  CCC  \`V1_R4_CCC_02\` _(legacy)_

> **SI** l'aidant a rpondu :
> 1.  Tensions familiales ?   ** Oui **
> 2. **ET** (question R2)  Rpartition de l'aide ?   ** Je fais presque tout tensions/injustice ** ou ** Je suis totalement seule **
>
> **ALORS** : Recommander la mdiation  niveau CCC ( 30 jours)
>
> **Sens clinique** : Rgle cross-MP (R2  R4). Les tensions familiales SONT NOURRIES par la charge dsquilibre. L'aidant est en conflit avec sa famille PARCE QU'il fait tout seul. La mdiation doit adresser les deux dimensions : le conflit (R4) et la rpartition (R2).

####  Critique  \`V1_R4_CRIT_01\` _(legacy)_

> **SI** l'aidant a rpondu :
>  Votre proche accepte-t-il l'aide extrieure ? 
>  ** Non, il/elle refuse la plupart du temps **
>
> **ALORS** : Recommander la mdiation  niveau Critique ( 7 jours)
>
> **Sens clinique** : Le refus total compromet la scurit du proche ET l'quilibre de l'aidant. L'aidant est coinc : il ne peut ni dlguer ni souffler. Intervention urgente ncessaire  la mdiation doit impliquer le MT pour valuer si le refus est li  la pathologie.

---

### Catgorie 2  Facilitation de l'acceptation de l'aide

####  Standard  \`V1_R4_STD_03\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  Votre proche accepte-t-il l'aide extrieure ? 
>  ** Oui, mais avec des rticences **
>
> **ALORS** : Recommander la facilitation de l'acceptation
>
> **Sens clinique** : Le proche accepte mais freine. C'est le moment idal pour comprendre les freins et travailler en douceur. La fentre est ouverte  le proche n'est pas en refus total, il est ambivalent. Une approche progressive a de bonnes chances de succs.

####  Standard  \`V1_R4_STD_05\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  Votre proche accepte-t-il l'aide extrieure ? 
>  ** Je ne sais pas / nous n'avons pas encore essay **
>
> **ALORS** : Recommander la facilitation de l'acceptation
>
> **Sens clinique** : L'aidant n'a pas encore explor l'aide extrieure. C'est un signal de non-exploration  soit par mconnaissance, soit par peur du refus. L'IDEC doit ouvrir le sujet et accompagner la premire dmarche.

####  CCC  \`V1_R4_CCC_03\` _(legacy)_

> **SI** l'aidant a rpondu :
> 1.  Acceptation aide extrieure ?   ** Non, refuse la plupart du temps **
> 2. **ET**  Peur pour l'avenir ?   ** Oui **
>
> **ALORS** : Recommander la facilitation  niveau CCC ( 30 jours)
>
> **Sens clinique** : Le proche refuse l'aide ET l'aidant est angoiss pour l'avenir. La situation est bloque : l'aidant voit le proche se dgrader (O31 = Oui) mais ne peut pas mettre en place de l'aide (E6 = refuse). La frustration et l'impuissance amplifient l'anxit. Travailler sur l'acceptation peut dnouer les deux.

####  Critique  \`V1_R4_CRIT_01\` _(mme rgle que CAT_01)_

> **SI** E6 = ** Non, refuse la plupart du temps **
>
> **ALORS** : Recommander la facilitation  niveau Critique ( 7 jours)
>
> **Sens clinique** : Le refus total est le signal le plus fort de R4. Il active CAT_01 (mdiation) ET CAT_02 (facilitation) simultanment car les deux dmarches sont complmentaires : mdier pour apaiser + faciliter pour dbloquer.

---

### Catgorie 3  Soutien psychologique face au changement

####  Standard  \`V1_R4_STD_04\` _(NOUVEAU )_

> **SI** l'aidant a rpondu :
>  Sentiment de ne plus reconnatre ?   ** Un peu **
> **OU**  Peur pour l'avenir ?   ** Un peu **
>
> **ALORS** : Recommander le soutien psychologique
>
> **Sens clinique** : Premiers signaux de dtresse psychologique. "Un peu" = l'aidant commence  percevoir les changements chez le proche et/ou  s'inquiter. Intervenir  ce stade permet de normaliser le vcu (c'est attendu avec la maladie), informer (ce qui va venir), et proposer un espace de parole AVANT que la dtresse ne s'installe.

####  CCC  \`V1_R4_CCC_01\` _(mme rgle que CAT_01)_

> **SI** l'aidant a rpondu :
> 1.  Ne plus reconnatre ?   ** Oui **
> 2. **ET**  Relation ?   ** Plus tendue / plus complique **
>
> **ALORS** : Recommander le soutien psychologique  CCC ( 30 jours)
>
> **Sens clinique** : Perte de reconnaissance confirme + relation dgrade = l'aidant souffre de la transformation de la personne aide ET la relation en ptit. Le soutien psy doit aider l'aidant  faire le deuil de la "personne d'avant" tout en maintenant le lien.

####  Critique  \`V1_R4_CRIT_02\` _(NOUVEAU )_

> **SI** l'aidant a rpondu :
> 1.  Ne plus reconnatre ?   ** Oui **
> 2. **ET**  Peur pour l'avenir ?   ** Oui **
> 3. **ET**  Relation ?   ** Plus tendue / plus complique **
>
> **ALORS** : Activer les **3 catgories** en Critique ( 7 jours)  CAT_01 + CAT_02 + CAT_03
>
> **Sens clinique** : Triple signal de rupture  perte de reconnaissance + anxit maximale + relation dgrade. L'aidant est en grande dtresse, la relation est en crise, et le systme d'aide est probablement dfaillant. Mobilisation immdiate de tous les leviers : mdiation, facilitation de l'aide, soutien psy.

---

###  Dcisions Action 2

| # | Proposition | Dcision | Rgle cre |
|---|---|---|---|
| 1 |  STD_02 : E5 = Parfois  CAT_01 |  Valid | \`V1_R4_STD_02\` |
| 2 |  STD_03 : E6 = Rticences  CAT_02 |  Valid | \`V1_R4_STD_03\` |
| 3 |  STD_04 : O30/O31 = Un peu  CAT_03 |  Valid | \`V1_R4_STD_04\` |
| 4 |  STD_05 : E6 = Je ne sais pas  CAT_02 |  Valid | \`V1_R4_STD_05\` |
| 5 |  CRIT_02 : Triple (O30 + O31 + E4)  3 CAT |  Valid | \`V1_R4_CRIT_02\` |

>  **Contrle K3** : Chaque catgorie a  2 niveaux. Couverture complte.
>
> **Vrification couverture questions** :
> - E4  CCC_01, CRIT_02 
> - E5  STD_02, CCC_02 
> - E6  STD_01, STD_03, STD_05, CCC_03, CRIT_01 
> - O30  STD_04, CCC_01, CRIT_02 
> - O31  STD_04, CCC_03, CRIT_02 
>  Toutes les questions sont utilises dans  1 rgle 

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** : Les 16 MT taient rparties entre R4_RECO_01 (10 MT) et R4_RECO_02 (6 MT). L'architecture legacy regroupait tout sous 2 recos. On redistribue maintenant les 16 MT vers les 3 catgories selon leur action clinique relle. R4 est le MP avec le plus de MT de V1.

### CAT_01  Mdiation et apaisement des tensions

> Legacy : 5 MT issues de R4_RECO_01 thmatiquement lies aux tensions et  la mdiation. Aprs redistribution : **5 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V1_012 | changer sur les sources de tension identifies | ORGA | IDEC |  | Legacy |
| MT_V1_015 | Identifier les points de tension rcurrents | ORGA | IDEC |  | Legacy |
| MT_V1_014 | Informer sur les groupes de parole / soutien familial | INFO | IDEC |  | Legacy |
| MT_V1_016 | Proposer un entretien de mdiation familiale | STRUC | IDEC |  | Legacy |
| MT_V1_019 | Proposer un temps d'change avec le proche et l'aidant | SEC | IDEC |  | Legacy |

####  Pourquoi 5 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_012 (changer sur les tensions)  l'IDEC n'entend pas le vcu de l'aidant. C'est le point d'entre indispensable : l'aidant doit pouvoir nommer ce qui ne va pas.
- Sans MT_V1_015 (identifier les tensions rcurrentes)  on reste  la surface. Les tensions ponctuelles  les patterns installs. L'IDEC doit caractriser le conflit (est-ce toujours le mme sujet ? les mmes personnes ?).
- Sans MT_V1_014 (groupes de parole)  on reste dans le cercle priv. Les pairs aidants qui vivent les mmes tensions normalisent le vcu et ouvrent des perspectives.
- Sans MT_V1_016 (mdiation)  c'est l'action structurante cl. Sans mdiation formelle, les tensions restent dans l'informel et se chronicisent. C'est le seul STRUC de CAT_01.
- Sans MT_V1_019 (change aidant/proche)  on mdiatise la famille mais pas la relation directe. L'change aidant/proche est un moment SEC crucial pour restaurer le dialogue.

**Pourquoi pas 1 de plus ?**
-  valuer l'impact des tensions sur la sant de l'aidant   c'est du V3 (Sant aidant), pas R4. viter le doublon inter-V.
-  Organiser une thrapie familiale   c'est une option avance qui dpasse le scope IDEC. La mdiation (MT_V1_016) est le levier IDEC adapt.
- La chane est complte : ORGA (diagnostiquer  2)  INFO (orienter)  STRUC (structurer)  SEC (scuriser) 

### CAT_02  Facilitation de l'acceptation de l'aide

> Legacy : 5 MT issues de R4_RECO_01 thmatiquement lies au refus/acceptation de l'aide extrieure. Aprs redistribution : **5 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V1_018 | Comprendre les freins  l'acceptation de l'aide | ORGA | IDEC |  | Legacy |
| MT_V1_020 | Explorer les causes profondes du refus | ORGA | IDEC |  | Legacy |
| MT_V1_022 | Informer sur les types d'aides existantes et leurs modalits | INFO | IDEC |  | Legacy |
| MT_V1_021 | Proposer une approche progressive de l'aide | SEC | IDEC |  | Legacy |
| MT_V1_023 | Proposer une premire mise en relation avec un intervenant | SEC | IDEC |  | Legacy |

####  Pourquoi 5 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_018 (comprendre les freins)  on agit  l'aveugle. Le refus peut avoir 10 raisons diffrentes (peur de l'tranger, sentiment de dpossession, dni, honte). Chaque frein appelle une stratgie diffrente.
- Sans MT_V1_020 (causes profondes)  on reste aux freins de surface. L'IDEC doit creuser : est-ce un refus cognitif (le proche ne comprend pas), motionnel (il a peur), ou identitaire (accepter = admettre la dpendance) ?
- Sans MT_V1_022 (informer les types d'aide)  le proche (et l'aidant) ne connaissent peut-tre qu'un seul type d'aide (l'aide-mnagre). L'offre est bien plus large : aide  la personne, tlassistance, auxiliaire de vie, portage de repas a change la perception.
- Sans MT_V1_021 (approche progressive)  on propose tout d'un coup. Le refus est souvent li  l'irruption brutale. L'approche progressive (commencer par 1h/semaine, une tche spcifique) est la stratgie clinique valide.
- Sans MT_V1_023 (mise en relation)  on informe et on accompagne mais on ne concrtise pas. Le premier contact avec un intervenant est le moment cl : c'est l que le refus se confirme ou se lve.

**Pourquoi pas 1 de plus ?**
-  valuer la satisfaction aprs le premier contact   c'est du suivi N3, pas une MT d'activation.
-  Former le proche aux bnfices de l'aide   c'est un sous-aspect de MT_V1_022 (informer), pas une MT autonome.
- La chane est complte : ORGA (comprendre  2)  INFO (informer)  SEC (accompagner  2) 

### CAT_03  Soutien psychologique face au changement

> Legacy : 6 MT issues de R4_RECO_01 + R4_RECO_02 thmatiquement lies au vcu psychologique de l'aidant (O30, O31). Aprs redistribution : **6 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V1_035 | changer sur les changements observs chez le proche | ORGA | IDEC |  | Legacy |
| MT_V1_037 | Informer sur la maladie et son volution prvisible | INFO | IDEC |  | Legacy |
| MT_V1_038 | Orienter vers des groupes de parole pour aidants | INFO | IDEC |  | Legacy |
| MT_V1_017 | Orienter vers des dispositifs de soutien et de mdiation | INFO | IDEC |  | Legacy |
| MT_V1_013 | Proposer un accompagnement psychologique si besoin | SEC | Psychologue |  | Legacy |
| MT_V1_036 | Proposer un soutien psychologique adapt | SEC | Psychologue |  | Legacy |

####  Pourquoi 6 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V1_035 (changer sur les changements)  le point d'entre n'existe pas. L'aidant doit pouvoir nommer ce qu'il observe ("il ne me reconnat plus", "elle est agressive", "je ne le retrouve plus"). L'IDEC coute et normalise.
- Sans MT_V1_037 (informer sur la maladie)  l'aidant souffre de l'INCOMPRHENSION. "Pourquoi est-il comme a ?" est souvent plus douloureux que le changement lui-mme. Comprendre la maladie aide  accepter les changements.
- Sans MT_V1_038 (groupes de parole)  l'aidant reste seul avec son vcu. Les pairs aidants qui vivent la mme perte de reconnaissance sont une ressource therapeutique cliniquement valide.
- Sans MT_V1_017 (dispositifs)  on reste dans l'info gnrale. Les dispositifs spcialiss (France Alzheimer, France Parkinson, associations locales) offrent un soutien cibl.
- Sans MT_V1_013 (accompagnement psy)  pas de scurisation professionnelle. Le psychologue est indispensable quand la dtresse dpasse l'coute IDEC.
- Sans MT_V1_036 (soutien psy adapt)  redondance avec MT_V1_013 ? Non  MT_V1_013 = "proposer" (valuer le besoin), MT_V1_036 = "mettre en place" (concrtiser). Les deux sont ncessaires.

**Pourquoi pas 1 de plus ?**
-  valuer le risque dpressif   c'est du V3 (Sant aidant), pas R4. La dtresse relationnelle (R4) peut mener  la dpression (V3) mais l'valuation dpressive est un acte V3.
-  Proposer une thrapie de couple aidant/proche   trop spcialis et hors scope IDEC. La SEC via le psychologue (MT_V1_013/036) couvre ce besoin.
- La chane est complte : ORGA (couter)  INFO (informer  3)  SEC (scuriser  2) 

###  Dcisions Action 3

| # | Proposition | Dcision |
|---|---|---|
| 1 | Redistribution des 16 MT legacy vers 3 CAT |  Valid |
| 2 | Aucun ajout ncessaire (16 MT suffisent) |  Valid |

> **Condition ASR par catgorie** :
> - CAT_01 :  2 (STRUC + SEC)   ASR complte
> - CAT_02 :  2 (SEC  2)   ASR complte
> - CAT_03 :  2 (SEC  2)   ASR complte
>
>  **Total R4 : 16 MT** (toutes legacy, redistribues entre 3 CAT). R4 est le seul MP de V1 o TOUTES les catgories ont une chane ASR complte sans ajout. 
> 
> **Comparaison avec les autres MPs** :
> - R1 : 10 MT (7 legacy + 3 nouvelles)
> - R2 : 15 MT (14 legacy + 1 nouvelle)
> - R3 : 6 MT (3 legacy + 3 nouvelles)
> - **R4 : 16 MT (16 legacy, 0 nouvelles)**  le plus riche, 100% legacy

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs existants dans la DB** : \`IDEC\`, \`MT\` (mdecin traitant), \`Aidant (autonome)\`, \`AS\` (assistante sociale), \`Psychologue\`
> **Domaines** :  Mdical /  Mdico-social

### Tableau consolid des MT de R4 (final)

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Source |
|---|---|---|---|---|---|---|---|
| MT_V1_012 | changer sur les sources de tension | ORGA | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_015 | Identifier les tensions rcurrentes | ORGA | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_014 | Informer groupes de parole / soutien familial | INFO | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_016 | Proposer un entretien de mdiation | STRUC | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_019 | Temps d'change aidant/proche | SEC | IDEC |  Mdico-social |  | CAT_01 | Legacy |
| MT_V1_018 | Comprendre freins acceptation aide | ORGA | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_020 | Explorer causes profondes du refus | ORGA | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_022 | Informer types d'aides et modalits | INFO | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_021 | Approche progressive aide | SEC | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_023 | Mise en relation avec un intervenant | SEC | IDEC |  Mdico-social |  | CAT_02 | Legacy |
| MT_V1_035 | changes sur changements observs | ORGA | IDEC |  Mdico-social |  | CAT_03 | Legacy |
| MT_V1_037 | Informer maladie et volution | INFO | IDEC |  Mdical |  | CAT_03 | Legacy |
| MT_V1_038 | Orienter groupes de parole aidants | INFO | IDEC |  Mdico-social |  | CAT_03 | Legacy |
| MT_V1_017 | Dispositifs soutien/mdiation | INFO | IDEC |  Mdico-social |  | CAT_03 | Legacy |
| MT_V1_013 | Accompagnement psychologique | SEC | Psychologue |  Mdical |  | CAT_03 | Legacy |
| MT_V1_036 | Soutien psychologique adapt | SEC | Psychologue |  Mdical |  | CAT_03 | Legacy |

> **Rsum** :
> - Total MT : **16** (100% legacy redistribues)
> - Domaine  Mdico-social : **13 MT** / Domaine  Mdical : **3 MT** (MT_V1_037 + MT_V1_013 + MT_V1_036)
> - CAT_01 : 5 MT (2 contributives : STRUC + SEC)   ASR complte
> - CAT_02 : 5 MT (2 contributives : SEC  2)   ASR complte
> - CAT_03 : 6 MT (2 contributives : SEC  2)   ASR complte
> - Contributives () : 6  STRUC: 1, SEC: 5
> - Non-contributives () : 10  ORGA: 4, INFO: 6

###  Propositions d'amlioration  Types, acteurs et domaine

| # | Proposition | Justification |
|---|---|---|
| 1 | **MT_V1_013 vs MT_V1_036** : distinguer clairement | MT_V1_013 =  valuer le besoin et proposer  (acte exploratoire). MT_V1_036 =  mettre en place le soutien  (acte de concrtisation). Les deux sont ncessaires mais le wording doit le clarifier. |
| 2 | **MT_V1_037  acteur double : IDEC + MT** | L'IDEC peut informer sur la maladie de faon gnrale mais les prcisions mdicales (volution, pronostic) requirent le MT. L'IDEC initie, le MT complte. |
| 3 | **Absence de STRUC en CAT_02 et CAT_03** | CAT_02 n'a que des SEC. Une MT STRUC (ex :  planifier un calendrier de mise en place progressive ) renforcerait la structuration.   en rserve. |
| 4 | **R4 a 2 Psychologue comme acteur** | R4 est le seul MP de V1 avec un acteur non-IDEC contributif. Cela reflte la dimension psychologique spcifique de R4 (O30, O31). |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

#### Wording des 16 MT (IDEC + Utilisateur)

| MT_ID | CAT | Libell | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|---|
| MT_V1_012 | CAT_01 | changer sur les tensions | Ouvrir un espace d'coute pour que l'aidant exprime les tensions ressenties dans la relation | Parlez de ce qui vous pse dans votre relation avec votre proche ou votre famille |  |
| MT_V1_015 | CAT_01 | Identifier tensions rcurrentes | Identifier avec l'aidant les sources de conflit rcurrentes et leur contexte d'apparition | Rflchissez aux situations qui dclenchent rgulirement des tensions |  |
| MT_V1_014 | CAT_01 | Groupes de parole | Informer l'aidant sur les groupes de parole ou cafs aidants du territoire | Renseignez-vous sur les groupes de parole ou cafs aidants prs de chez vous |  |
| MT_V1_016 | CAT_01 | Mdiation familiale | Proposer et organiser un entretien de mdiation avec les membres de la famille impliqus | Accepteriez-vous un moment d'change organis avec votre famille pour apaiser les tensions ? |  |
| MT_V1_019 | CAT_01 | change aidant/proche | Proposer un temps de dialogue entre l'aidant et le proche, encadr par un professionnel | Acceptez-vous un change avec votre proche, accompagn par un professionnel ? |  |
| MT_V1_018 | CAT_02 | Comprendre les freins | Identifier avec l'aidant les raisons pour lesquelles le proche refuse l'aide extrieure | Essayez de comprendre pourquoi votre proche refuse l'aide extrieure |  |
| MT_V1_020 | CAT_02 | Causes profondes du refus | Explorer les causes sous-jacentes du refus (peur de l'tranger, dpossession, dni, honte) | Demandez-vous ce qui motive vraiment ce refus : peur, habitude, ou autre chose ? |  |
| MT_V1_022 | CAT_02 | Types d'aides existantes | Prsenter les diffrentes formes d'aide (aide  la personne, tlassistance, portage de repas, accueil de jour) | Dcouvrez les diffrentes formes d'aide possibles : il n'y a pas que l'aide  domicile |  |
| MT_V1_021 | CAT_02 | Approche progressive | Proposer une mise en place progressive de l'aide (1h/semaine, une tche spcifique) | Commencez par une aide ponctuelle et lgre pour que votre proche s'y habitue |  |
| MT_V1_023 | CAT_02 | Mise en relation intervenant | Organiser une premire rencontre entre le proche et un intervenant potentiel | Acceptez-vous de rencontrer un professionnel d'aide avec votre proche, sans engagement ? |  |
| MT_V1_035 | CAT_03 | Changements observs | Ouvrir un espace d'coute pour que l'aidant dcrive les changements observs chez le proche | Dcrivez les changements que vous observez chez votre proche : comportement, humeur, personnalit |  |
| MT_V1_037 | CAT_03 | Informer maladie/volution | Expliquer les changements lis  la maladie du proche et ce que l'aidant peut anticiper | Informez-vous sur la maladie de votre proche : comprendre les changements aide  les accepter |  |
| MT_V1_038 | CAT_03 | Groupes de parole aidants | Orienter vers des groupes de parole spcialiss (France Alzheimer, associations locales) | Rejoignez un groupe de parole o d'autres aidants vivent les mmes changements |  |
| MT_V1_017 | CAT_03 | Dispositifs soutien | Orienter vers les plateformes et dispositifs de soutien spcialiss | Renseignez-vous sur les plateformes de soutien aux aidants (ligne d'coute, associations) |  |
| MT_V1_013 | CAT_03 | Accompagnement psy | valuer le besoin d'un accompagnement psychologique et orienter vers un psychologue | Si le poids motionnel devient trop lourd, un psychologue peut vous aider  traverser cette priode |  |
| MT_V1_036 | CAT_03 | Soutien psy adapt | Mettre en place un suivi psychologique rgulier adapt au vcu de l'aidant | Acceptez-vous un suivi psychologique rgulier pour ne pas porter seul ce que vous vivez ? |  |

#### Wording des 3 Recos de base

| CAT | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | / |
|---|---|---|---|
| CAT_01 | Apaisement des tensions familiales et relationnelles | Organiser un espace de mdiation et de dialogue familial |  |
| CAT_02 | Acceptation progressive de l'aide extrieure | Comprendre les freins du proche et accompagner la mise en place progressive de l'aide |  |
| CAT_03 | Soutien face aux changements de personnalit du proche | Orienter vers un soutien psychologique adapt au vcu de la perte de reconnaissance |  |

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit (Reco + MT)

#### CAT_01  Mdiation et apaisement des tensions

> Niveaux existants :  STD_01 + STD_02 /  CCC_01 + CCC_02 /  CRIT_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Communication familiale  renforcer | valuer les tensions et proposer un espace d'coute |
|  CCC ( 30j) | Mdiation familiale recommande | Organiser une mdiation familiale sous 30 jours |
|  Critique ( 7j) | Mdiation familiale urgente | Organiser une mdiation sous 7 jours et impliquer le MT |

**MT versionnes (contributives) :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_016 | Envisagez un change familial encadr | Organisez un change familial dans le mois | Organisez un change familial cette semaine |
| MT_V1_019 | Acceptez un moment de dialogue avec votre proche | Prvoyez un dialogue avec votre proche dans le mois | Organisez un dialogue avec votre proche cette semaine |

#### CAT_02  Facilitation de l'acceptation de l'aide

> Niveaux existants :  STD_03 + STD_05 /  CCC_03 /  CRIT_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Aide extrieure  envisager en douceur | Explorer les freins et informer sur l'offre d'aide |
|  CCC ( 30j) | Accompagnement progressif fortement recommand | Mettre en place une approche progressive sous 30 jours |
|  Critique ( 7j) | Acceptation de l'aide urgente | Intervenir en urgence pour dbloquer l'aide  impliquer le MT |

**MT versionnes (contributives) :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_021 | Commencez par une aide lgre et ponctuelle | Mettez en place une aide progressive dans le mois | Organisez une aide immdiate, mme minimale |
| MT_V1_023 | Rencontrez un professionnel d'aide sans engagement | Organisez une rencontre dans le mois | Organisez une rencontre cette semaine |

#### CAT_03  Soutien psychologique face au changement

> Niveaux existants :  STD_04 /  CCC_01 /  CRIT_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Soutien psychologique si besoin | Sensibiliser au soutien psy et informer sur la maladie |
|  CCC ( 30j) | Soutien psychologique recommand | Orienter vers un psychologue sous 30 jours |
|  Critique ( 7j) | Soutien psychologique urgent | Orienter vers un psychologue sous 7 jours |

**MT versionnes (contributives) :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V1_013 | Un psychologue peut vous aider si ncessaire | Prenez contact avec un psychologue dans le mois | Prenez contact avec un psychologue cette semaine |
| MT_V1_036 | Un suivi rgulier peut vous aider | Acceptez un suivi psychologique rgulier | Acceptez un suivi psychologique ds cette semaine |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP R4 n'est PAS activ (aucune rgle ne s'est dclenche = relation stable, aide accepte, pas de dtresse)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  Votre relation avec votre proche semble prserve et l'aide est accepte. Restez attentif aux volutions : des tensions peuvent apparatre avec le temps ou l'volution de la maladie. N'hsitez pas  en parler si les choses changent.  |  La relation aidant-proche est actuellement stable. Aide extrieure accepte. Surveiller l'volution relationnelle au prochain suivi. Rester vigilant en cas de changement de situation (aggravation maladie, nouveau conflit familial, deuil).  |

**MT de prvention proposes :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| _(NOUVELLE)_ | Maintenir la communication avec le proche | INFO | Profiter du prochain contact pour valider la qualit de la communication aidant/proche | Continuez  changer rgulirement avec votre proche sur ses envies et ses besoins |
| _(NOUVELLE)_ | Anticiper les changements relationnels | ORGA | Renseigner les observations sur l'volution de la relation et de l'acceptation de l'aide | Prparez-vous aux changements possibles dans votre relation lis  l'volution de la maladie |
| _(NOUVELLE)_ | Prvenir l'usure relationnelle | ORGA | valuer les signes prcoces d'usure dans la relation (fatigue, irritabilit, distanciation) | Soyez attentif aux signes d'usure dans votre relation : irritabilit, envie de prendre de la distance |

> **Dcision Dr. Monka** :  Reco prvention valide |   reformuler

### 6.2  Checklist de cohrence (post-dcisions)

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  E4 faiblement couvert |  | E4  CCC_01, CRIT_02 |
| 2 | Chaque rgle d'activation  1 version de reco |  |  | 11 rgles  toutes lies  1 catgorie |
| 3 | Chaque catgorie de reco  ses MT assignes |  |  | CAT_01: 5 MT, CAT_02: 5 MT, CAT_03: 6 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  |  | Chaque CAT a  Standard + CCC + Critique |
| 5 | Aucune MT orpheline |  |  | 16 MT toutes rattaches |
| 6 | Reco prvention prsente |  |  | Propose, en attente validation |
| 7 | Wording reco = conseil, MT = verbe d'action |  |  | Phase 1 + Phase 2 proposes |
| 8 | Sens clinique renseign pour chaque rgle |  |  | 11 rgles documentes |

> **Score** : **5/8 valids**, 2 en attente validation (prvention + wording), 1 OK
>
> Quand prvention et wording seront valids  **8/8** 

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 2 (sous 2 recos) | **3** (mdiation, acceptation, soutien psy) |
| Rgles d'activation | 4 (:1 :2 :1) | **11** (:5, :3, :3 dont 1 triple) |
| MT totales | 16 (sous 2 recos) | **16** (redistribues 3 CAT  100% legacy) |
| MT contributives | 6 (SEC:5, STRUC:1) | **6** (SEC:5, STRUC:1)  inchang |
| Domaine  /  | - | 3 / 13 |
| ASR | 2 CAT  | 3 CAT  (toutes compltes) |
| Reco prvention |  |  Propose (3 MT) |
| Checks OK | 3/8 | 5/8 ( 8/8 aprs validation) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories identifies (mdiation, acceptation, soutien psy) |  Valid |
| 2 |  STD_02 : E5 = Parfois  CAT_01 |  Valid |
| 3 |  STD_03 : E6 = Rticences  CAT_02 |  Valid |
| 4 |  STD_04 : O30/O31 = Un peu  CAT_03 |  Valid |
| 5 |  STD_05 : E6 = Je ne sais pas  CAT_02 |  Valid |
| 6 |  CCC_02 : E5 + E1 (cross-MP R2)  CAT_01 |  Valid |
| 7 |  CRIT_02 : Triple (O30 + O31 + E4)  3 CAT |  Valid |
| 8 | Redistribution des 16 MT legacy vers 3 CAT (0 ajouts) |  Valid |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider wording Phase 1 (base 16 MT + 3 recos) |  Haute |
| 2 | Valider wording Phase 2 (versioning criticit) |  Haute |
| 3 | Valider reco prvention (3 MT proposes) |  Haute |
| 4 | Clarifier distinction MT_V1_013 vs MT_V1_036 |  Moyenne |
| 5 | Valider propositions acteurs (Action 4) |  Moyenne |
| 6 | MT STRUC pour CAT_02 (planning d'aide progressive) |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Fb=`#  Fiche de Validation MP  A1  Couverture sant et protections juridiques

> **Vulnrabilit** : V2  Administrative  
> **ASR** :  Scuriser couverture sant et protections juridiques   
> **Signature** : A1-A : Couverture sant active  
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## CONTEXTE  Big Picture V2

### Rpartition des 18 questions V2 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **A1** | Couverture sant et protections juridiques | 4 | E21, E68, O23, O45 | Couverture sant aidant/proche + anticipation projet de vie |
| **A2** | Droits, aides et valuation dpendance | 5 | E62, N29, N42, O53, O54 | Droits ouverts, aides en cours, valuation AGGIR |
| **A3** | Charge et complexit des dmarches | 5 | E61, E66, E69, E70, N6 | Charge administrative, complexit perue, urgences |
| **A4** | Situation scolaire/professionnelle et budget | 7 | E63, E64, E65, E67, N43, N5, O61 | Inclusion scolaire/pro, accompagnement, budget |

> **A1 se concentre sur la PROTECTION** (couverture sant + capacit  maintenir la situation de vie) alors que A2 parle des DROITS CONCRETS (aides demandes/obtenues + valuation dpendance), A3 de la CHARGE ADMINISTRATIVE (complexit perue des dmarches, gestion de l'urgence), et A4 de l'INCLUSION ET DU BUDGET (scolarit, activit professionnelle du proche, moyens financiers). La frontire est fonctionnelle : A1 = "est-ce que la couverture de base est l ?", A2 = "quels droits sont activs ?", A3 = "est-ce que les dmarches m'accablent ?", A4 = "inclusion et viabilit financire".

---

## 0. DONNES FIGES  Questions rattaches  A1

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | O23 | Quelle couverture de sant protge la personne aide ? | facteur | Rgime gnral (ou spcial) et Mutuelle / Rgime gnral (ou spcial) / CMU |
| 2 | O45 | Quelle couverture de sant avez-vous ? | facteur | Rgime gnral (ou spcial) et Mutuelle / Rgime gnral (ou spcial) / CMU |
| 3 | E68 | Combien de temps consacrez-vous chaque mois aux dmarches administratives pour votre proche ? | facteur | Moins de 1h / Entre 1h et 5h / Plus de 5h |
| 4 | E21 | Pensez-vous qu'il sera possible de maintenir cette situation de vie sans changement majeur dans les prochains mois ? | facteur | Oui, probablement / Oui, mais cela risque d'tre difficile / Non, un changement sera ncessaire / Je ne sais pas |

> Total : 4 questions rattaches  A1

###  Pourquoi ces 4 questions ?

**O23** et **O45** forment un duo symtrique qui cartographie la couverture sant des deux cts de la relation d'aide :
- O23 = couverture sant du **proche aid** (est-il protg ?)
- O45 = couverture sant de l'**aidant** (se protge-t-il aussi ?)

 Elles sont dans A1 car elles mesurent un SOCLE DE PROTECTION, pas un droit spcifique (A2) ni une dmarche administrative (A3).

**E68** mesure le temps administratif mensuel. C'est un indicateur de la CHARGE GLOBALE. Il est dans A1 et pas A3 car il sert de dclencheur pour l'valuation de la viabilit de la situation (lien avec E21). A3 se concentre sur la complexit perue (E66) et les urgences (E70), pas sur le volume horaire.

>  **Point de dbat E68** : Cette question pourrait argumentablement tre dans A3 (Charge des dmarches). Le choix de la placer dans A1 se justifie par son rle de **dclencheur principal** des rgles CCC/Critique de A1 (combo E68 + E21). Si E68 tait dans A3, A1 perdrait son signal de gravit le plus fort.

**E21** mesure la capacit  maintenir la situation de vie sans changement majeur. C'est un marqueur d'ANTICIPATION et de VIABILIT  fondamental pour la scurisation (A1), pas pour les droits (A2) ni les dmarches (A3).

###  Analyse des 14 autres questions V2  Pourraient-elles appartenir  A1 ?

> Les questions et leurs options sont **figes**. L'objectif est uniquement de vrifier si l'affiliation actuelle est correcte.

#### Questions A2 (Droits, aides, valuation dpendance)

| Question | Libell | Pertinence A1 ? | Raisonnement |
|---|---|---|---|
| **E62** | Pour quels droits/aides avez-vous effectu une demande ? |  Non | Inventaire des droits demands = A2 pur. A1 couvre la couverture de base, pas la liste des droits activs. |
| **N29** | De quels droits/aides bnficiez-vous actuellement ? |  Non | Inventaire des droits obtenus = A2 pur. Mme logique que E62 mais ct acquis. |
| **N42** | Bnficie-t-elle d'une aide pour prestations sociales lies  une ALD ? |  Non | Droit spcifique (ALD + aide sociale)  A2 pur. |
| **O53** | La dpendance a-t-elle t value par les services sociaux (AGGIR) ? |  Non | valuation de dpendance = processus d'accs aux droits  A2 pur. |
| **O54** | Quel est le niveau de dpendance AGGIR ? |  Non | Score GIR = rsultat d'valuation  A2 pur. |

>  **Verdict A2** : Aucune question A2 ne devrait tre dans A1. A2 couvre les **droits concrets** (demands/obtenus). A1 couvre la **couverture de base** (sant + viabilit).

#### Questions A3 (Charge et complexit des dmarches)

| Question | Libell | Pertinence A1 ? | Raisonnement |
|---|---|---|---|
| **E61** | Le proche a-t-il rdig des directives anticipes ? |  **Dbattable** | Les directives anticipes touchent  la PROTECTION JURIDIQUE, thme central d'A1. **Mais** : cette question a t rattache  A3 car elle fait partie d'un ensemble de questions sur les dmarches (prparation, complexit). Le choix de la mettre dans A3 se justifie par le fait qu'elle mesure une DMARCHE ralise ou non, pas une couverture active. |
| **E66** | Les dmarches administratives vous paraissent-elles complexes ? |  Non | Perception de complexit = A3 pur. Pas de lien avec la couverture sant. |
| **E69** |  l'aise avec les dmarches administratives en ligne ? |  Non | Comptence numrique = A3 pur (capacit  faire les dmarches). |
| **E70** | Grer des dmarches dans l'urgence ? |  Non | Gestion d'urgence administrative = A3 pur (stress, dates limites). |
| **N6** | Une mesure de protection a-t-elle t mise en place ? |  **Dbattable** | Les mesures de protection (tutelle, curatelle, habilitation familiale) sont de la PROTECTION JURIDIQUE  thme A1. **Mais** : actuellement dans A3, ce qui se justifie moins bien. Candidat srieux pour un double rattachement ou un transfert vers A1. |

>  **Verdict A3** : Deux questions sont cliniquement dbattables :
> - **E61** (directives anticipes) : la dmarche est administrative ( A3) mais le sujet est la protection juridique ( A1). On conserve A3 mais on signale le lien.
> - **N6** (mesure de protection) : **fort candidat A1**  tutelle/curatelle/habilitation sont des protections juridiques pures.  Anomalie potentielle  discuter avec Dr. Monka.

#### Questions A4 (Situation scolaire/professionnelle et budget)

| Question | Libell | Pertinence A1 ? | Raisonnement |
|---|---|---|---|
| **E63** | Quelles dmarches vous proccupent le plus ? |  Non | Proccupation subjective sur les dmarches  A4 (proximit avec charge mentale, pas couverture sant). |
| **E64** | L'enfant peut-il frquenter une cole/structure adapte ? |  Non | Inclusion scolaire = A4 pur. |
| **E65** | Besoin d'un accompagnant spcialis (AESH, AVS) ? |  Non | Accompagnement scolaire/soins = A4 pur. |
| **E67** | Le proche a-t-il une activit adapte ? |  Non | Inclusion professionnelle du proche = A4 pur. |
| **N43** | Services d'accompagnement administratif dj utiliss ? |  Non | Historique de recours aux services sociaux  A4. |
| **N5** | Recours aux aides (rpit, formations, psy) ? |  Non | Recours aux services d'aide  A4. |
| **O61** | Moyens financiers suffisants ? |  Non | Viabilit financire = A4 pur. |

>  **Verdict A4** : Aucune question A4 ne devrait tre dans A1. A4 couvre l'**inclusion** et le **budget**, pas la couverture sant.

###  Synthse affiliation

| Question | MP actuel | Pertinence A1 ? | Confiance |
|---|---|---|---|
| E62, N29, N42, O53, O54 | A2 |  Non |  Haute |
| E66, E69, E70 | A3 |  Non |  Haute |
| E61 | A3 |  Dbattable (A3 justifi) |  Moyenne |
| **N6** | A3 |  **Fort candidat A1** |  Anomalie potentielle |
| E63, E64, E65, E67, N43, N5, O61 | A4 |  Non |  Haute |

> **Conclusion** : Les 4 questions de A1 (O23, O45, E68, E21) sont les bonnes. **N6 (mesure de protection)** est un candidat srieux pour A1 ou un double rattachement A1+A3. La question mrite une dcision Dr. Monka.
>
>  **Proposition** : Ajouter N6 comme question secondaire de A1 (double rattachement) sans la retirer de A3. La protection juridique (tutelle, curatelle) est le cur du thme "protections juridiques" de A1.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse des questions et de la recommandation legacy (A1_RECO_01) montre 3 axes cliniques distincts :

1. **Vrification couverture sant**  O23 et O45 vrifient si aidant et proche sont couverts. L'action = identifier les lacunes de couverture et orienter vers une complmentaire ou la CMU si besoin.
2. **Anticipation du projet de vie**  E21 dtecte si la situation est viable. L'action = structurer la rflexion sur l'avenir (maintien  domicile, alternatives, dmarches prventives).
3. **Allgement de la charge administrative**  E68 mesure le temps admin. L'action = orienter vers un accompagnement pour rduire la charge.

>  **Observation** : La reco legacy A1_RECO_01 ("Favoriser la rflexion et l'anticipation du projet de vie") se concentre uniquement sur l'axe 2. Les axes 1 et 3 n'ont pas de reco legacy   crer.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | A1_CAT_01 | Scurisation de la couverture sant | Vrifier et complter la couverture sant de l'aidant et du proche |  Propos (bas sur O23, O45) |
| 2 | A1_CAT_02 | Anticipation du projet de vie | Structurer la rflexion sur le maintien de la situation et les alternatives | Legacy  (A1_RECO_01) |
| 3 | A1_CAT_03 | Accompagnement administratif | Orienter vers un accompagnement pour rduire la charge administrative |  Propos (bas sur E68) |

###  Pourquoi 3 catgories et pas 2 ou 4 ?

**Pas 2** : La couverture sant (CAT_01) et l'anticipation du projet de vie (CAT_02) sont cliniquement distincts. Un aidant peut avoir une bonne couverture mais une situation de vie non viable (E21 = "Non")  les deux actions sont indpendantes.

**Pas 4** : Ajouter une catgorie "Protection juridique" ddie  N6 serait prmatur tant que le rattachement de N6  A1 n'est pas valid. Et mme si N6 est ajout, la protection juridique peut tre une MT de CAT_02 (anticipation = inclut la mise en place de protections).

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

Les rgles legacy (V5_A1_*) utilisent E68 et E21 comme dclencheurs principaux. O23 et O45 ne dclenchent aucune rgle actuellement  **observation importante** (ces questions de couverture sant n'ont aucun impact sur les recommandations, elles servent uniquement  cartographier l'tat).

>  **Anomalie legacy** : Les IDs de rgles commencent par \`V5_A1_\` au lieu de \`V2_A1_\`. C'est un artefact de la migration. Les IDs corrects devraient tre \`V2_A1_\`.

### Rappel des questions A1 et de leurs options

> **O23**   Quelle couverture de sant protge la personne aide ? 
> -  Rgime gnral (ou spcial) et Mutuelle /  Rgime gnral (ou spcial) /  CMU

> **O45**   Quelle couverture de sant avez-vous ? 
> -  Rgime gnral (ou spcial) et Mutuelle /  Rgime gnral (ou spcial) /  CMU

> **E68**   Combien de temps consacrez-vous chaque mois aux dmarches administratives pour votre proche ? 
> -  Moins de 1h /  Entre 1h et 5h /  **Plus de 5h** (dclenchante)

> **E21**   Pensez-vous qu'il sera possible de maintenir cette situation de vie sans changement majeur dans les prochains mois ? 
> -  Oui, probablement /  Oui, mais cela risque d'tre difficile /  **Non, un changement sera ncessaire** /  **Je ne sais pas** (dclenchantes)

---

### Catgorie 1  Scurisation de la couverture sant

>  **Aucune rgle legacy pour cette catgorie.** O23 et O45 ne dclenchent actuellement aucune recommandation dans la DB  elles servent uniquement de cartographie.

####  Proposition de rgles  CAT_01

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V2_A1_STD_03 _(NOUVEAU)_ | O23 =  Rgime gnral (ou spcial)  **OU** O45 =  Rgime gnral (ou spcial)  | Recommander vrification couverture sant | Aidant ou proche sans mutuelle  accs aux soins potentiellement limit |  Propos |
|  CCC | V2_A1_CCC_02 _(NOUVEAU)_ | O23 =  CMU  **OU** O45 =  CMU  | Recommander scurisation couverture sant | CMU = prcarit. L'accs aux soins peut tre fragile  orientation AS |  Propos |
|  Critique | - | _(Aucune rgle critique propose)_ | - | La couverture sant seule ne justifie pas un niveau Critique si les soins de base sont assurs | - |

>  **Observation importante** : Ces rgles sont entirement nouvelles (aucun legacy). Elles exploitent des questions qui n'avaient AUCUNE action lie en DB.  valider cliniquement.

---

### Catgorie 2  Anticipation du projet de vie

####  Standard  \`V2_A1_STD_02\` _(legacy : V5_A1_STD_02)_

> **SI** l'aidant a rpondu  la question :
>  Pensez-vous qu'il sera possible de maintenir cette situation de vie sans changement majeur ? 
>  ** Non ** ou ** Je ne sais pas **
>
> **ALORS** : Recommander l'anticipation du projet de vie
>
> **Sens clinique** : L'aidant exprime une incertitude ou une impossibilit de maintien  besoin d'anticiper les changements  venir (hbergement, organisation, aides).

####  CCC  \`V2_A1_CCC_01\` _(legacy : V5_A1_CCC_01)_

> **SI** l'aidant a rpondu :
> 1.  Combien de temps consacrez-vous chaque mois aux dmarches administratives ?   ** Plus de 5h **
> 2. **ET**  Pensez-vous qu'il sera possible de maintenir cette situation ?   ** Non, un changement sera ncessaire ** ou ** Je ne sais pas **
>
> **ALORS** : Recommander l'anticipation du projet de vie  niveau CCC ( 30 jours)
>
> **Sens clinique** : Charge administrative excessive (>5h/mois) + incapacit  maintenir la situation = double signal de fragilit. Le projet de vie doit tre structur rapidement.

####  Critique  _aucune rgle legacy_

>  **Proposition CRIT pour CAT_02** : Pas de rgle Critique propose. La non-viabilit de la situation est grave mais ne constitue pas une urgence mdicale  7 jours. Le CCC (30 jours) est le niveau adapt.

---

### Catgorie 3  Accompagnement administratif

####  Standard  \`V2_A1_STD_01\` _(legacy : V5_A1_STD_01)_

> **SI** l'aidant a rpondu  la question :
>  Combien de temps consacrez-vous chaque mois aux dmarches administratives ? 
>  ** Entre 1h et 5h ** (GTE 1h)
>
> **ALORS** : Recommander un accompagnement administratif
>
> **Sens clinique** : Temps administratif mensuel  1h = signal de charge. Orienter vers un accompagnement pour optimiser les dmarches.

####  Critique  \`V2_A1_CRIT_01\` _(legacy : V5_A1_CRIT_01)_

> **SI** l'aidant a rpondu  la question :
>  Combien de temps consacrez-vous chaque mois aux dmarches administratives ? 
>  ** Plus de 5h **
>
> **ALORS** : Recommander un accompagnement administratif  niveau Critique ( 7 jours)
>
> **Sens clinique** : Plus de 5h/mois de dmarches administratives = charge incompatible avec le bien-tre de l'aidant. Urgence  dlguer.

>  **Observation K3** : CAT_03 n'a que 2 niveaux (Standard + Critique). Il manque un CCC. Le gap entre Standard (1h) et Critique (>5h) est important.

####  Proposition CCC  CAT_03

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC | V2_A1_CCC_03 _(NOUVEAU)_ | E68 =  Plus de 5h  **ET** E21 =  Oui, mais cela risque d'tre difficile  | Accompagnement administratif recommand ( 30j) | Charge >5h + risque de difficult  maintenir  le poids administratif fragilise une situation dj tendue |  Propos |

---

###  Dcisions Action 2

| # | Proposition | Dcision | Rgle concerne |
|---|---|---|---|
| 1 |  Standard CAT_01 (O23 ou O45 = Rgime gnral seul) |  Propos | \`V2_A1_STD_03\` |
| 2 |  CCC CAT_01 (O23 ou O45 = CMU) |  Propos | \`V2_A1_CCC_02\` |
| 3 |  CCC CAT_03 (E68 >5h + E21 difficile) |  Propos | \`V2_A1_CCC_03\` |

> **Contrle K3** :
> - CAT_01 :  Propos (STD + CCC = 2 niveaux)    valider
> - CAT_02 :  OK (STD + CCC = 2 niveaux)
> - CAT_03 :  legacy 2 niveaux (STD + CRIT), CCC propos  3 niveaux si valid
>
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** :  Aucune micro-tche n'existe en DB pour A1. La table \`micro_taches\` ne contient aucune MT lie aux questions E21, E68, O23, O45. Toutes les MT ci-dessous sont des **propositions nouvelles**.

### CAT_01  Scurisation de la couverture sant

> Legacy :  aucune MT. Propositions : **3 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A1_01 | Vrifier la couverture sant de l'aidant et du proche | ORGA | IDEC |  | NOUVEAU  |
| MT_V2_A1_02 | Informer sur les options de complmentaire sant (mutuelle, CSS) | INFO | IDEC |  | NOUVEAU  |
| MT_V2_A1_03 | Orienter vers la CPAM ou l'AS pour rgularisation si lacune identifie | SEC | IDEC |  | NOUVEAU  |

####  Pourquoi 3 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V2_A1_01 (vrifier)  on ne sait pas si la couverture est suffisante. L'IDEC recommande en aveugle.
- Sans MT_V2_A1_02 (informer)  l'aidant sait qu'il y a un problme mais ignore ses options. L'INFO est le pont entre le diagnostic et l'action.
- Sans MT_V2_A1_03 (orienter)  on diagnostique et on informe mais on ne scurise pas l'accs effectif. Le patient est laiss seul.

**Pourquoi pas 1 de plus ?**
- "Vrifier les droits AME"  trop spcifique, couvert par l'orientation CPAM (MT_V2_A1_03).
- "Contacter la mutuelle"  hors scope IDEC, c'est le rle de l'aidant aprs orientation.
- La chane est complte : ORGA (diagnostiquer)  INFO (informer)  SEC (scuriser).

### CAT_02  Anticipation du projet de vie

> Legacy : li  A1_RECO_01. Propositions : **4 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A1_04 | valuer la viabilit de la situation actuelle avec l'aidant | ORGA | IDEC |  | NOUVEAU  |
| MT_V2_A1_05 | Informer sur les options d'volution (maintien  domicile renforc, hbergement temporaire, EHPAD) | INFO | IDEC |  | NOUVEAU  |
| MT_V2_A1_06 | Structurer un plan d'anticipation avec l'aidant et les proches | STRUC | IDEC |  | NOUVEAU  |
| MT_V2_A1_07 | Orienter vers le service social ou le CLIC pour accompagnement projet de vie | SEC | IDEC/AS |  | Bas sur A1_RECO_01 Legacy |

####  Pourquoi 4 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V2_A1_04 (valuer viabilit)  comment anticiper si on n'a pas mesur la situation ? L'ORGA est le socle.
- Sans MT_V2_A1_05 (informer options)  l'aidant sait que a va mal mais ignore les alternatives. Blocage.
- Sans MT_V2_A1_06 (structurer plan)  on diagnostique et on informe mais pas de plan concret. L'aidant repart sans feuille de route.
- Sans MT_V2_A1_07 (orienter)  on a un plan mais pas de relais professionnel pour le mettre en uvre.

**Pourquoi pas 1 de plus ?**
- "Contacter l'EHPAD"  trop spcifique et prmatur au stade A1. L'orientation vers le service social (MT_V2_A1_07) couvre cette tape.
- "valuer les ressources financires"  couvert par A4 (O61). Pas de doublon inter-MP.

### CAT_03  Accompagnement administratif

> Legacy :  aucune MT. Propositions : **3 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A1_08 | Identifier les dmarches administratives en cours et  venir | ORGA | IDEC |  | NOUVEAU  |
| MT_V2_A1_09 | Informer sur les dispositifs d'aide aux dmarches (CCAS, MDPH, plateformes numriques) | INFO | IDEC |  | NOUVEAU  |
| MT_V2_A1_10 | Orienter vers un service d'accompagnement administratif (AS, CCAS, EAS) | SEC | IDEC |  | NOUVEAU  |

####  Pourquoi 3 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V2_A1_08 (identifier dmarches)  l'IDEC ne sait pas quelles dmarches psent sur l'aidant. Pas de ciblage.
- Sans MT_V2_A1_09 (informer dispositifs)  l'aidant ne connat pas les relais disponibles.
- Sans MT_V2_A1_10 (orienter)  on diagnostique et on informe mais on ne connecte pas  un service concret.

**Pourquoi pas 1 de plus ?**
- "Aide au remplissage de formulaires"  hors scope IDEC, c'est le rle de l'AS ou du CCAS une fois orient.
- "Crer un calendrier administratif"  trop spcifique, peut tre une sous-action de l'accompagnement (MT_V2_A1_10).

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | 3 MT pour CAT_01 (couverture sant) |  Propos | \`MT_V2_A1_01\`  \`MT_V2_A1_03\` |
| 2 | 4 MT pour CAT_02 (projet de vie) |  Propos | \`MT_V2_A1_04\`  \`MT_V2_A1_07\` |
| 3 | 3 MT pour CAT_03 (accompagnement admin) |  Propos | \`MT_V2_A1_08\`  \`MT_V2_A1_10\` |

> **Condition ASR par catgorie** :
> - CAT_01 :  1 (SEC)  ASR partielle
> - CAT_02 :  2 (STRUC + SEC)   ASR complte
> - CAT_03 :  1 (SEC)  ASR partielle
>
> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs existants dans la DB** : \`IDEC\`, \`MT\` (mdecin traitant), \`Aidant (autonome)\`, \`AS\` (assistante sociale)
> **Domaines** :  Mdical /  Mdico-social

### Tableau consolid des MT de A1 (final)

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Source |
|---|---|---|---|---|---|---|---|
| MT_V2_A1_01 | Vrifier couverture sant aidant et proche | ORGA | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V2_A1_02 | Informer sur complmentaire sant / CSS | INFO | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V2_A1_03 | Orienter vers CPAM/AS si lacune identifie | SEC | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V2_A1_04 | valuer viabilit de la situation actuelle | ORGA | IDEC |  Mdico-social |  | CAT_02 | NOUVEAU  |
| MT_V2_A1_05 | Informer sur options d'volution | INFO | IDEC |  Mdico-social |  | CAT_02 | NOUVEAU  |
| MT_V2_A1_06 | Structurer plan d'anticipation | STRUC | IDEC |  Mdico-social |  | CAT_02 | NOUVEAU  |
| MT_V2_A1_07 | Orienter vers service social/CLIC | SEC | IDEC/AS |  Mdico-social |  | CAT_02 | Legacy  |
| MT_V2_A1_08 | Identifier dmarches en cours/ venir | ORGA | IDEC |  Mdico-social |  | CAT_03 | NOUVEAU  |
| MT_V2_A1_09 | Informer sur dispositifs d'aide aux dmarches | INFO | IDEC |  Mdico-social |  | CAT_03 | NOUVEAU  |
| MT_V2_A1_10 | Orienter vers accompagnement admin (AS/CCAS/EAS) | SEC | IDEC |  Mdico-social |  | CAT_03 | NOUVEAU  |

> **Rsum** :  
> - Total MT : **10** (1 legacy adapte + 9 nouvelles)  
> - Domaine  Mdical : **0 MT** / Domaine  Mdico-social : **10 MT**
> - Contributives () : **4**  SEC: 3, STRUC: 1  
> - Non-contributives () : **6**  INFO: 3, ORGA: 3

###  Observations

>  **Pas de MT mdicale (MED)** : A1 est un MP purement mdico-social. La couverture sant et les protections juridiques ne ncessitent pas d'acte mdical direct. C'est cohrent avec le primtre.

###  Propositions d'amlioration  Types, acteurs et domaine

| # | Proposition | Justification |
|---|---|---|
| 1 | **MT_V2_A1_02  acteur Aidant (autonome)** | L'aidant peut se renseigner seul sur les complmentaires sant (comparateurs, CPAM en ligne). L'IDEC facilite mais l'aidant peut agir. |
| 2 | **MT_V2_A1_07  acteur AS** (au lieu de IDEC/AS) | L'AS est le professionnel lgitime pour l'accompagnement projet de vie. L'IDEC initie mais l'AS mne. |
| 3 | **Ajouter STRUC  CAT_01** | CAT_01 n'a pas de MT structurante. Proposition : ajouter une MT "tablir un bilan couverture sant" (STRUC) pour complter l'ASR. |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

> **Rgle de wording** :
> - **Reco** = conseil succinct. Pas une phrase, pas un verbe d'action. Un label court qui dit "quoi" sans dtailler "comment".
> - **MT** = action concrte. Verbe d'action des deux cts. L'aidant doit aussi tre pouss  agir.

#### Wording des 10 MT (IDEC + Utilisateur)

| MT_ID | CAT | Libell | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|---|
| MT_V2_A1_01 | CAT_01 | Vrifier couverture sant | Vrifier avec l'aidant la couverture sant (mutuelle, droit  la CSS) pour lui et son proche | Faites le point sur votre couverture sant et celle de votre proche |  |
| MT_V2_A1_02 | CAT_01 | Informer complmentaire | Informer sur les options de complmentaire sant (mutuelle, complmentaire sant solidaire) | Renseignez-vous sur les complmentaires sant adaptes  votre situation |  |
| MT_V2_A1_03 | CAT_01 | Orienter CPAM/AS | Orienter vers la CPAM ou l'assistante sociale si la couverture est insuffisante | Prenez contact avec la CPAM ou une assistante sociale pour rgulariser votre couverture |  |
| MT_V2_A1_04 | CAT_02 | valuer viabilit | valuer avec l'aidant la viabilit de sa situation de vie  moyen terme | Rflchissez  la prennit de votre organisation actuelle |  |
| MT_V2_A1_05 | CAT_02 | Informer options | Prsenter les alternatives d'organisation (maintien renforc, hbergement temporaire, accueil de jour) | Explorez les diffrentes options possibles pour l'avenir |  |
| MT_V2_A1_06 | CAT_02 | Structurer plan | Formaliser un plan d'anticipation avec l'aidant et les proches impliqus | laborez un plan d'anticipation avec vos proches |  |
| MT_V2_A1_07 | CAT_02 | Orienter service social | Organiser le contact avec le service social ou le CLIC pour accompagnement projet de vie | Prenez contact avec un service social pour tre accompagn dans votre projet de vie |  |
| MT_V2_A1_08 | CAT_03 | Identifier dmarches | Faire l'inventaire des dmarches administratives en cours et  planifier | Listez les dmarches administratives en cours et celles  prvoir |  |
| MT_V2_A1_09 | CAT_03 | Informer dispositifs | Informer sur les structures d'aide aux dmarches (CCAS, EAS, plateformes numriques) | Renseignez-vous sur les aides aux dmarches administratives prs de chez vous |  |
| MT_V2_A1_10 | CAT_03 | Orienter accompagnement | Orienter vers l'AS ou le CCAS pour accompagnement dans les dmarches | Prenez rendez-vous avec une assistante sociale ou le CCAS de votre commune |  |

#### Wording des 3 Recos de base

| CAT | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | / |
|---|---|---|---|
| CAT_01 | Vrification de votre couverture sant | Vrifier couverture sant aidant et proche |  |
| CAT_02 | Anticipation de votre projet de vie | Accompagner l'anticipation du projet de vie |  |
| CAT_03 | Accompagnement pour vos dmarches administratives | Orienter vers un accompagnement administratif |  |

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit (Reco + MT)

#### CAT_01  Scurisation couverture sant

> Niveaux existants :  STD_03 /  CCC_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Vrification couverture sant conseille | Vrifier la couverture sant |
|  CCC ( 30j) | Couverture sant  scuriser | Scuriser la couverture sant sous 30 jours |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |
|---|---|---|
| MT_V2_A1_01 | Faites le point sur votre couverture sant | Vrifiez rapidement votre couverture sant |
| MT_V2_A1_03 | Contactez la CPAM si besoin | Contactez la CPAM ou l'AS dans le mois |

#### CAT_02  Anticipation du projet de vie

> Niveaux existants :  STD_02 /  CCC_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Anticipation du projet de vie | Amorcer la rflexion sur le projet de vie |
|  CCC ( 30j) | Projet de vie  structurer rapidement | Structurer le projet de vie sous 30 jours |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |
|---|---|---|
| MT_V2_A1_04 | Rflchissez  la prennit de votre organisation | valuez rapidement la viabilit de votre situation |
| MT_V2_A1_06 | laborez un plan avec vos proches | Formalisez un plan d'anticipation dans le mois |
| MT_V2_A1_07 | Prenez contact avec un service social si besoin | Contactez un service social rapidement |

#### CAT_03  Accompagnement administratif

> Niveaux existants :  STD_01 / ( CCC_03 propos) /  CRIT_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Aide aux dmarches disponible | Informer sur l'accompagnement administratif |
|  CCC ( 30j) | Accompagnement administratif recommand | Orienter vers un accompagnement admin sous 30 jours |
|  Critique ( 7j) | Accompagnement administratif urgent | Orienter en urgence vers un accompagnement admin |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V2_A1_08 | Listez vos dmarches en cours | Faites le point sur vos dmarches rapidement | Identifiez immdiatement les dmarches prioritaires |
| MT_V2_A1_10 | Prenez rendez-vous avec l'AS si besoin | Contactez l'AS ou le CCAS dans le mois | Contactez l'AS ou le CCAS cette semaine |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP A1 n'est PAS activ (aucune rgle ne s'est dclenche = couverture sant OK, situation viable, charge admin faible)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  Votre couverture sant et votre situation semblent stables. Pensez  vrifier rgulirement vos droits et  anticiper les ventuels changements  venir.  |  Surveiller l'volution de la couverture sant et de la viabilit de la situation. Rvaluer au prochain suivi.  |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| _(NOUVELLE)_ | Rappeler l'importance de la couverture sant | INFO | Sensibiliser l'aidant  l'importance de maintenir une couverture sant complte | Vrifiez que votre mutuelle et celle de votre proche sont bien  jour |
| _(NOUVELLE)_ | Anticiper les changements de situation | ORGA | Aborder les perspectives d'volution lors du prochain suivi | Pensez aux changements qui pourraient survenir dans les prochains mois |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  |  | O23 et O45 : propositions nouvelles (). E21 et E68 :  legacy |
| 2 | Chaque rgle d'activation  1 version de reco |  |  | 7 rgles (4 legacy + 3 proposes)  toutes lies |
| 3 | Chaque catgorie de reco  ses MT assignes |  |  | CAT_01: 3 MT, CAT_02: 4 MT, CAT_03: 3 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  |  | Chaque CAT a 2 niveaux (aprs propositions) |
| 5 | Aucune MT orpheline |  |  | 10 MT toutes rattaches |
| 6 | Reco prvention prsente |  |  | Propose, en attente validation |
| 7 | Wording reco = conseil, MT = verbe d'action |  |  | Phase 1 + Phase 2 proposes |
| 8 | Sens clinique renseign pour chaque rgle |  |  | 7 rgles documentes |

> **Score** : **4/8 valids**, 3 en attente validation, 1 partiel (O23/O45)

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 1 (projet de vie) | **3** (couverture sant, projet de vie, accompagnement admin) |
| Rgles d'activation | 4 (:2 :1 :1) | **7** (:3, :3, :1)  dont 3 proposes |
| MT totales | 0 | **10** (9 nouvelles + 1 legacy adapte) |
| MT contributives | 0 | **4** (STRUC:1, SEC:3) |
| Domaine  /  | - | 0  / 10  |
| ASR |  Vide | CAT_01 partielle + CAT_02  + CAT_03 partielle |
| Reco prvention |  |  Propose |
| Checks OK | 2/8 | 4/8 ( 8/8 aprs validations) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories identifies (couverture sant, projet de vie, accompagnement admin) |  Propos |
| 2 | N6 candidat pour double rattachement A1+A3 |  Propos   discuter |
| 3 | Nouvelles rgles CAT_01 (O23/O45) |  Propos |
| 4 | CCC CAT_03 (E68 >5h + E21 difficile) |  Propos |
| 5 | 10 MT cres avec chane ORGA  INFO  STRUC  SEC |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider les 3 catgories |  Haute |
| 2 | Valider le rattachement N6  A1 |  Haute |
| 3 | Valider les nouvelles rgles CAT_01 (couverture sant) |  Haute |
| 4 | Valider wording Phase 1 + Phase 2 |  Haute |
| 5 | Valider reco prvention |  Moyenne |
| 6 | Valider propositions types/acteurs |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Gb=`#  Fiche de Validation MP  A2  Droits, aides et valuation dpendance

> **Vulnrabilit** : V2  Administrative  
> **ASR** :  Identifier et activer les droits mobilisables   
> **Signature** : A2-A : Aide financire active  
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## CONTEXTE  Big Picture V2

### Rpartition des 18 questions V2 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **A1** | Couverture sant et protections juridiques | 4 | E21, E68, O23, O45 | Couverture sant aidant/proche + anticipation projet de vie |
| **A2** | Droits, aides et valuation dpendance | 5 | E62, N29, N42, O53, O54 | Droits ouverts, aides en cours, valuation AGGIR |
| **A3** | Charge et complexit des dmarches | 5 | E61, E66, E69, E70, N6 | Charge administrative, complexit perue, urgences |
| **A4** | Situation scolaire/professionnelle et budget | 7 | E63, E64, E65, E67, N43, N5, O61 | Inclusion scolaire/pro, accompagnement, budget |

> **A2 se concentre sur les DROITS CONCRETS** : quelles aides ont t demandes (E62), lesquelles sont obtenues (N29), est-ce que l'ALD ouvre des prestations sociales (N42), et le niveau de dpendance est-il officiellement valu (O53, O54). Contrairement  A1 (couverture de BASE), A2 s'intresse au CATALOGUE DE DROITS mobiliss ou mobilisables. Contrairement  A3 (CHARGE des dmarches), A2 ne mesure pas la difficult mais l'TAT des droits. Et contrairement  A4 (INCLUSION + BUDGET), A2 ne couvre pas la viabilit financire globale mais les aides spcifiques.

---

## 0. DONNES FIGES  Questions rattaches  A2

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E62 | Pour quels droits/aides avez-vous effectu une demande qui est actuellement en cours ? | facteur | 23 options (APA, APL, MaPrimeAdapt', AAH, PCH, RQTH, etc.) + Aucun + Je ne sais pas |
| 2 | N29 | De quels droits/aides bnficiez-vous actuellement ? | facteur | 23 options (mme liste que E62) + Aucun + Je ne sais pas |
| 3 | N42 | Bnficie-t-elle dj d'une aide pour obtenir des prestations sociales en lien avec une ALD ? | facteur | Oui / Non / Je ne sais pas |
| 4 | O53 | La dpendance de la personne aide a-t-elle t value par les services sociaux ? (grille AGGIR) | facteur | Oui / Non / Je ne sais pas |
| 5 | O54 | Quel est son niveau de dpendance selon cette grille AGGIR ? | facteur | 1 / 2 / 3 / 4 / 5 / 6 / Je ne sais pas |

> Total : 5 questions rattaches  A2

###  Pourquoi ces 5 questions ?

**E62** et **N29** forment un duo symtrique qui cartographie l'tat des droits de l'aidant/proche :
- E62 = droits **en cours de demande** (processus actif)
- N29 = droits **dj obtenus** (acquis actif)

 Le croisement E62  N29 permet de calculer le **delta de droits** : ce qui est demand mais pas encore obtenu, et ce qui n'a mme pas t demand. C'est le cur du diagnostic A2.

**N42** ajoute une dimension spcifique : le lien entre ALD (Affection Longue Dure = maladie chronique) et prestations sociales. Un patient en ALD a potentiellement droit  l'AAH, la PCH, l'invalidit  N42 vrifie si ce lien a t exploit.

**O53** et **O54** forment un duo sur l'valuation officielle de la dpendance (grille AGGIR) :
- O53 = l'valuation a-t-elle t faite ? (oui/non)
- O54 = quel est le rsultat (GIR 1-6) ?

 L'valuation AGGIR est le ssame pour l'APA (Allocation Personnalise d'Autonomie). Sans elle, pas de financement de la dpendance.

###  Analyse des 13 autres questions V2  Pourraient-elles appartenir  A2 ?

#### Questions A1 (Couverture sant et protections juridiques)

| Question | Libell | Pertinence A2 ? | Raisonnement |
|---|---|---|---|
| **O23** | Couverture sant du proche |  Non | Couverture de base (Scu/mutuelle) = A1. Ce n'est pas un droit spcifique  mobiliser mais un socle de protection. |
| **O45** | Couverture sant de l'aidant |  Non | Mme logique. Couverture  droits spcifiques. |
| **E68** | Temps admin mensuel |  Non | Mesure la charge  A1/A3. A2 mesure l'tat des droits, pas le temps pass. |
| **E21** | Viabilit situation de vie |  Non | Projection  moyen terme  A1. A2 est factuel (droits oui/non), pas prospectif. |

>  **Verdict A1** : Aucune question A1 ne devrait tre dans A2.

#### Questions A3 (Charge et complexit des dmarches)

| Question | Libell | Pertinence A2 ? | Raisonnement |
|---|---|---|---|
| **E61** | Directives anticipes rdiges ? |  Non | Dmarche de protection juridique  A3/A1. Pas un droit financier. |
| **E66** | Complexit perue des dmarches |  Non | Ressenti  A3. A2 mesure des faits (droits obtenus), pas la perception. |
| **E69** | Aisance numrique |  Non | Comptence  A3. Pas li aux droits eux-mmes. |
| **E70** | Urgences administratives |  Non | Gestion de crise  A3. A2 = tat stable des droits. |
| **N6** | Mesure de protection en place ? |  **Dbattable** | Les mesures de protection (tutelle, curatelle) ouvrent des droits supplmentaires et impactent la gestion des aides. **Mais** : ces mesures sont des PROTECTIONS JURIDIQUES (A1 thmatiquement) et des DMARCHES (A3 par classement actuel), pas des aides financires (A2). On conserve A3. |

>  **Verdict A3** : Aucune question A3 ne devrait tre dans A2. N6 est dbattable mais reste mieux dans A3/A1.

#### Questions A4 (Situation scolaire/professionnelle et budget)

| Question | Libell | Pertinence A2 ? | Raisonnement |
|---|---|---|---|
| **E63** | Dmarches proccupantes |  Non | Proccupation subjective  A4. A2 = inventaire objectif des droits. |
| **E64** | Accs cole/structure adapte |  Non | Inclusion scolaire  A4. Pas un droit  mobiliser directement (mme si MDPH intervient, c'est A4 qui couvre l'inclusion). |
| **E65** | Besoin AESH/AVS ? |  Non | Accompagnement scolaire  A4. Le financement AESH passe par la MDPH mais la question porte sur le besoin, pas le droit. |
| **E67** | Activit adapte du proche |  Non | Inclusion professionnelle  A4. |
| **N43** | Services d'accompagnement admin utiliss ? |  **Dbattable** | Liste des services dj utiliss (MDPH, CCAS, AS). Proche de A2 (inventaire des ressources mobilises). **Mais** : N43 mesure l'HISTORIQUE DE RECOURS aux services, pas les droits obtenus. Ce sont les intermdiaires (qui aide), pas les rsultats (quels droits).  A4 reste cohrent. |
| **N5** | Aides utilises (rpit, formation, psy) |  Non | Utilisation de services  A4. Pas des droits au sens administratif. |
| **O61** | Moyens financiers suffisants ? |  Non | Budget global  A4. A2 = droits spcifiques, pas viabilit financire globale. |

>  **Verdict A4** : Aucune question A4 ne devrait tre dans A2. N43 est dbattable mais A4 reste plus cohrent (recours aux services  droits obtenus).

###  Synthse affiliation

| Questions | MP actuel | Pertinence A2 ? | Confiance |
|---|---|---|---|
| O23, O45, E68, E21 | A1 |  Non |  Haute |
| E61, E66, E69, E70 | A3 |  Non |  Haute |
| N6 | A3 |  Non (mais lien indirect via droits) |  Moyenne |
| E63, E64, E65, E67, N5, O61 | A4 |  Non |  Haute |
| N43 | A4 |  Dbattable (A4 justifi) |  Moyenne |

> **Conclusion** : Les 5 questions de A2 (E62, N29, N42, O53, O54) sont les bonnes. Aucune question V2 ne devrait tre ajoute  A2.
>
>  **Observation inter-MP** : Le croisement E62  N29 (A2) avec N43 (A4) et E66 (A3) permettrait une vue complte : quels droits sont ouverts (A2), par qui (A4), et est-ce que a pse (A3). Ce croisement est assur au niveau V2 global, pas au niveau MP individuel.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse de la recommandation legacy (A2_RECO_01) et des 5 questions montre 3 axes cliniques distincts :

1. **Activation des droits sociaux**  E62 et N29 permettent de dtecter les droits non demands ou non obtenus. L'action = identifier les lacunes et initier les dmarches manquantes. A2_RECO_01 legacy ("Demandez le financement de la perte d'autonomie via l'APA") s'inscrit dans cet axe.
2. **valuation de la dpendance (AGGIR)**  O53 et O54 dtectent si la dpendance a t officiellement value. L'valuation AGGIR est le prrequis pour l'APA et d'autres aides  c'est un axe distinct car sans elle, les droits du premier axe ne peuvent pas tre activs.
3. **Lien ALD et prestations sociales**  N42 dtecte si le lien entre la maladie chronique et les droits sociaux a t exploit. C'est un axe spcialis qui complte les deux premiers.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | A2_CAT_01 | Activation des droits et aides | Identifier les droits non mobiliss et initier les dmarches | Legacy  (A2_RECO_01) + E62/N29 |
| 2 | A2_CAT_02 | valuation de la dpendance (AGGIR) | Initier ou vrifier l'valuation officielle de la dpendance |  Propos (bas sur O53, O54) |
| 3 | A2_CAT_03 | Lien ALD et prestations sociales | Vrifier et activer le lien entre ALD et droits sociaux associs |  Propos (bas sur N42) |

###  Pourquoi 3 catgories et pas 2 ou 4 ?

**Pas 2 (fusionner CAT_02 et CAT_03 dans CAT_01)** : L'valuation AGGIR est un processus spcifique (intervention des services sociaux du dpartement, grille standardise, rsultat GIR 1-6). Elle mrite sa propre catgorie car les MT associes sont distinctes (demander l'valuation vs. demander une aide). De mme, le lien ALD-droits sociaux est un axe technique spcifique (AAH, invalidit, PCH lis  l'ALD) qui a ses propres MT.

**Pas 4 (sparer E62 et N29)** : Les droits "en cours" (E62) et "obtenus" (N29) sont grs par la mme catgorie CAT_01. Le delta (demand mais pas obtenu, ou pas encore demand) est calcul au sein de CAT_01. Pas besoin de deux catgories distinctes pour la mme action (activer les droits).

>  **T1  Cohrence inter-MP** : CAT_01 (activation droits) pourrait doublonner avec A1_CAT_03 (accompagnement administratif). La distinction est : A1_CAT_03 = orienter vers un accompagnement GLOBAL des dmarches. A2_CAT_01 = identifier et activer des DROITS SPCIFIQUES (APA, PCH, AAH). A1 oriente, A2 agit sur les droits.

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

Les rgles legacy (V5_A2_*) utilisent principalement E62 et O53 comme dclencheurs. N29 n'a aucune rgle legacy directe (elle sert  calculer le delta avec E62, pas  dclencher seule).

>  **Mme anomalie d'ID que A1** : Les IDs legacy sont \`V5_A2_*\` au lieu de \`V2_A2_*\`.

### Rappel des questions A2 et de leurs options

> **E62**   Pour quels droits/aides avez-vous effectu une demande actuellement en cours ?   
> - 23 options spcifiques (APA, APL, AAH, PCH, RQTH) / **Aucun** / **Je ne sais pas** (dclenchantes)

> **N29**   De quels droits/aides bnficiez-vous actuellement ?   
> - 23 options spcifiques (mme liste) / Aucun / Je ne sais pas

> **N42**   Bnficie-t-elle dj d'une aide pour obtenir des prestations sociales en lien avec une ALD ?   
> - Oui / **Non** / **Je ne sais pas** (dclenchantes)

> **O53**   La dpendance de la personne aide a-t-elle t value par les services sociaux ? (grille AGGIR)   
> - Oui / **Non** / **Je ne sais pas** (dclenchantes)

> **O54**   Quel est son niveau de dpendance selon cette grille AGGIR ?   
> - 1 / 2 / 3 / 4 / 5 / 6 / Je ne sais pas

---

### Catgorie 1  Activation des droits et aides

####  Standard  \`V2_A2_STD_01\` _(legacy : V5_A2_STD_01)_

> **SI** l'aidant a rpondu  la question :
>  Pour quels droits/aides avez-vous effectu une demande ? 
>  ** Aucun ** ou ** Je ne sais pas **
>
> **ALORS** : Recommander l'exploration des droits mobilisables
>
> **Sens clinique** : Aucun droit demand ou aidant ignorant de ses droits  besoin d'information et d'orientation pour activer les droits potentiels.

####  Critique  \`V2_A2_CRIT_01\` _(legacy : V5_A2_CRIT_01)_

> **SI** l'aidant a rpondu  la question :
>  Pour quels droits/aides avez-vous effectu une demande ? 
>  ** Aucun ** (pas "Je ne sais pas", mais explicitement "Aucun")
>
> **ALORS** : Recommander l'activation des droits  niveau Critique ( 7 jours)
>
> **Sens clinique** : Aucun droit engag malgr un besoin (le patient est valu dans V2)  risque de rupture financire et sociale. L'absence de toute dmarche est plus grave que l'ignorance ("Je ne sais pas").

####  CCC  \`V2_A2_CCC_01\` _(legacy : V5_A2_CCC_01)_

> **SI** l'aidant a rpondu :
> 1.  Pour quels droits/aides avez-vous effectu une demande ?   ** Aucun ** ou ** Je ne sais pas **
> 2. **ET**  La dpendance a-t-elle t value ? (AGGIR)   ** Non ** ou ** Je ne sais pas **
>
> **ALORS** : Recommander l'activation des droits  niveau CCC ( 30 jours)
>
> **Sens clinique** : Absence de droits ouverts + dpendance non value = double carence. Le patient est potentiellement en perte d'autonomie non reconnue officiellement  urgence  initier le processus complet (valuation + droits).

>  **Observation** : La rgle CCC est plus svre que la rgle Standard (2 conditions vs. 1) mais MOINS svre que la Critique (qui ne ncessite que "Aucun" explicite). La logique est :
> - Standard = aucun droit ou ignorance  informer
> - CCC = aucun droit + pas d'valuation  agir sous 30j (double carence)
> - Critique = aucun droit explicitement  agir sous 7j (refus ou mconnaissance totale)

####  Proposition  \`V2_A2_STD_04\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> E62 contient au moins 1 droit **ET** N29 =  Aucun  ou  Je ne sais pas 
>
> **ALORS** : Recommander le suivi des droits en cours
>
> **Sens clinique** : Des droits sont en cours de demande mais aucun n'est encore obtenu. L'aidant est dans une phase d'attente qui peut tre longue  besoin de suivi et de relance ventuelle.

---

### Catgorie 2  valuation de la dpendance (AGGIR)

####  Standard  \`V2_A2_STD_02\` _(legacy : V5_A2_STD_02)_

> **SI** l'aidant a rpondu  la question :
>  La dpendance a-t-elle t value par les services sociaux (AGGIR) ? 
>  ** Non ** ou ** Je ne sais pas **
>
> **ALORS** : Recommander l'valuation de la dpendance
>
> **Sens clinique** : valuation AGGIR non ralise  le niveau de dpendance du proche n'est pas officiellement reconnu. Sans cette valuation, pas d'APA possible (l'APA est conditionne au GIR 1-4).

####  Proposition CCC  \`V2_A2_CCC_02\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> 1.  La dpendance a-t-elle t value (AGGIR) ?   ** Non ** ou ** Je ne sais pas **
> 2. **ET** E62 contient  Allocation personnalise d'autonomie (APA) 
>
> **ALORS** : Recommander l'valuation AGGIR  niveau CCC ( 30 jours)
>
> **Sens clinique** : L'aidant a demand l'APA mais la dpendance n'a pas t value. L'APA ne peut pas tre accorde sans valuation AGGIR  incohrence administrative  rsoudre rapidement.

####  Proposition Critique  \`V2_A2_CRIT_02\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> 1. O53 = ** Non ** **ET** O54 = **non applicable** (pas de rponse GIR)
> 2. **ET** E62 = ** Aucun **
>
> **ALORS** : Recommander l'valuation AGGIR  niveau Critique ( 7 jours)
>
> **Sens clinique** : Aucune valuation ET aucun droit demand = situation de carence totale. Le proche est potentiellement dpendant sans aucune prise en charge administrative.

---

### Catgorie 3  Lien ALD et prestations sociales

####  Standard  \`V2_A2_STD_03\` _(NOUVEAU)_

> **SI** l'aidant a rpondu  la question :
>  Bnficie-t-elle dj d'une aide pour prestations sociales lies  une ALD ? 
>  ** Non ** ou ** Je ne sais pas **
>
> **ALORS** : Recommander l'exploration du lien ALD-prestations
>
> **Sens clinique** : Le proche a une ALD mais le lien avec les prestations sociales (AAH, invalidit, PCH) n'a pas t exploit ou est inconnu  besoin d'information.

>  **Observation** : N42 est une question conditionnelle (elle n'apparat que si N41 = rponse 1, c'est--dire si le proche a bien une ALD). Donc si N42 est  Non  ou  Je ne sais pas , c'est que l'ALD est confirme mais les droits associs ne sont pas activs.

####  Proposition CCC  \`V2_A2_CCC_03\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> 1. N42 = ** Non ** ou ** Je ne sais pas **
> 2. **ET** E62 = ** Aucun ** (aucune demande en cours)
>
> **ALORS** : Recommander l'activation du lien ALD-prestations  niveau CCC ( 30 jours)
>
> **Sens clinique** : ALD confirme + aucun droit demand = le patient passe  ct de prestations auxquelles il a potentiellement droit (AAH, PCH). Urgence modre  orienter vers la MDPH ou l'AS.

---

###  Dcisions Action 2

| # | Proposition | Dcision | Rgle concerne |
|---|---|---|---|
| 1 |  Standard Delta droits (E62 en cours + N29 = Aucun) |  Propos | \`V2_A2_STD_04\` |
| 2 |  CCC CAT_02 (O53 Non + APA demande) |  Propos | \`V2_A2_CCC_02\` |
| 3 |  Critique CAT_02 (O53 Non + E62 Aucun) |  Propos | \`V2_A2_CRIT_02\` |
| 4 |  Standard CAT_03 (N42 Non/NSP) |  Propos | \`V2_A2_STD_03\` |
| 5 |  CCC CAT_03 (N42 Non/NSP + E62 Aucun) |  Propos | \`V2_A2_CCC_03\` |

> **Contrle K3** :
> - CAT_01 :  OK (STD + CCC + CRIT = 3 niveaux legacy + 1 propos)
> - CAT_02 :  OK si propositions valides (STD legacy + CCC + CRIT proposs = 3 niveaux)
> - CAT_03 :  OK si propositions valides (STD + CCC proposs = 2 niveaux)
>
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** :  Aucune micro-tche n'existe en DB pour les questions de A2 (E62, N29, N42, O53, O54). Toutes les MT ci-dessous sont des **propositions nouvelles**.

### CAT_01  Activation des droits et aides

> Legacy :  aucune MT. Propositions : **4 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A2_01 | Raliser un bilan des droits ouverts et manquants | ORGA | IDEC |  | NOUVEAU  |
| MT_V2_A2_02 | Informer sur les droits mobilisables selon la situation | INFO | IDEC |  | NOUVEAU  |
| MT_V2_A2_03 | Prparer un dossier de demande pour les droits prioritaires | STRUC | IDEC/AS |  | NOUVEAU  |
| MT_V2_A2_04 | Orienter vers l'AS ou la MDPH pour le montage du dossier | SEC | IDEC |  | Bas sur A2_RECO_01 Legacy |

####  Pourquoi 4 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V2_A2_01 (bilan droits)  on ne sait pas quels droits manquent. L'IDEC agit en aveugle.
- Sans MT_V2_A2_02 (informer)  l'aidant sait qu'il manque des droits mais ignore lesquels. L'INFO est indispensable.
- Sans MT_V2_A2_03 (prparer dossier)  on identifie et on informe mais rien n'est structur. L'aidant repart sans document concret.
- Sans MT_V2_A2_04 (orienter)  le dossier est prt mais personne ne scurise le dpt. Risque d'abandon.

**Pourquoi pas 1 de plus ?**
- "Suivre l'avancement des demandes"  c'est du suivi post-action, pas une MT d'activation. Couvert par la question de suivi (D_suivi).
- "Informer sur les recours en cas de refus"  trop spcifique et prmatur au stade de la demande initiale.
- La chane est complte : ORGA (diagnostiquer)  INFO (informer)  STRUC (prparer)  SEC (orienter).

### CAT_02  valuation de la dpendance (AGGIR)

> Legacy :  aucune MT. Propositions : **3 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A2_05 | Vrifier si l'valuation AGGIR a t ralise | ORGA | IDEC |  | NOUVEAU  |
| MT_V2_A2_06 | Informer sur le processus d'valuation AGGIR et ses implications (APA) | INFO | IDEC |  | NOUVEAU  |
| MT_V2_A2_07 | Initier la demande d'valuation auprs du Conseil Dpartemental | SEC | IDEC/AS |  | NOUVEAU  (bas sur A2_RECO_01 : "Variable selon les dpartements") |

####  Pourquoi 3 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V2_A2_05 (vrifier)  la rponse O53 peut tre imprcise. L'IDEC doit confirmer.
- Sans MT_V2_A2_06 (informer AGGIR)  l'aidant ne comprend pas l'enjeu de l'valuation. L'INFO motive la dmarche.
- Sans MT_V2_A2_07 (initier demande)  on sait que c'est  faire mais personne ne scurise la demande.

**Pourquoi pas 1 de plus ?**
- "Prparer le domicile pour la visite AGGIR"  trop spcifique, peut tre une sous-action de MT_V2_A2_07.
- "Contester le rsultat GIR"  action de recours, hors scope de l'activation initiale.
- La chane est complte : ORGA (vrifier)  INFO (informer)  SEC (scuriser).

>  **Observation** : Pas de MT STRUC dans CAT_02. L'valuation AGGIR est un processus externe (le Conseil Dpartemental envoie un valuateur). L'IDEC n'a pas de document  "structurer" mais un processus  "scuriser" (initier la demande).

### CAT_03  Lien ALD et prestations sociales

> Legacy :  aucune MT. Propositions : **3 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A2_08 | Vrifier l'existence d'une ALD et les prestations sociales lies | ORGA | IDEC |  | NOUVEAU  |
| MT_V2_A2_09 | Informer sur les droits ouverts par l'ALD (AAH, invalidit, PCH) | INFO | IDEC |  | NOUVEAU  |
| MT_V2_A2_10 | Orienter vers la MDPH ou l'AS pour activation des prestations ALD | SEC | IDEC |  | NOUVEAU  |

####  Pourquoi 3 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V2_A2_08 (vrifier ALD)  on ne sait pas si l'ALD est confirme. N42 est conditionnelle  N41.
- Sans MT_V2_A2_09 (informer droits ALD)  l'aidant ignore les droits spcifiques ouverts par l'ALD. Le lien ALD  AAH/PCH n'est pas vident.
- Sans MT_V2_A2_10 (orienter MDPH)  on identifie les droits mais personne ne scurise l'accs.

**Pourquoi pas 1 de plus ?**
- "Prparer le dossier MDPH"  couvert par CAT_01 (MT_V2_A2_03 = prparer dossier). T1 : pas de doublon inter-CAT.
- La chane est complte : ORGA (vrifier)  INFO (informer)  SEC (orienter).

###  Dcisions Action 3

| # | Proposition | Dcision | MT cres |
|---|---|---|---|
| 1 | 4 MT pour CAT_01 (activation droits) |  Propos | \`MT_V2_A2_01\`  \`MT_V2_A2_04\` |
| 2 | 3 MT pour CAT_02 (valuation AGGIR) |  Propos | \`MT_V2_A2_05\`  \`MT_V2_A2_07\` |
| 3 | 3 MT pour CAT_03 (lien ALD) |  Propos | \`MT_V2_A2_08\`  \`MT_V2_A2_10\` |

> **Condition ASR par catgorie** :
> - CAT_01 :  2 (STRUC + SEC)   ASR complte
> - CAT_02 :  1 (SEC)  ASR partielle (pas de STRUC)
> - CAT_03 :  1 (SEC)  ASR partielle (pas de STRUC)
>
> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs existants dans la DB** : \`IDEC\`, \`MT\` (mdecin traitant), \`Aidant (autonome)\`, \`AS\` (assistante sociale)
> **Nouveaux acteurs potentiels** : \`Conseil Dpartemental\`, \`MDPH\`
> **Domaines** :  Mdical /  Mdico-social

### Tableau consolid des MT de A2 (final)

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Source |
|---|---|---|---|---|---|---|---|
| MT_V2_A2_01 | Bilan des droits ouverts et manquants | ORGA | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V2_A2_02 | Informer sur les droits mobilisables | INFO | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V2_A2_03 | Prparer dossier de demande droits prioritaires | STRUC | IDEC/AS |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V2_A2_04 | Orienter vers AS/MDPH pour montage dossier | SEC | IDEC |  Mdico-social |  | CAT_01 | Legacy  |
| MT_V2_A2_05 | Vrifier si valuation AGGIR ralise | ORGA | IDEC |  Mdico-social |  | CAT_02 | NOUVEAU  |
| MT_V2_A2_06 | Informer sur processus AGGIR et implications APA | INFO | IDEC |  Mdico-social |  | CAT_02 | NOUVEAU  |
| MT_V2_A2_07 | Initier demande d'valuation auprs Conseil Dpartemental | SEC | IDEC/AS |  Mdico-social |  | CAT_02 | NOUVEAU  |
| MT_V2_A2_08 | Vrifier existence ALD et prestations lies | ORGA | IDEC |  Mdico-social |  | CAT_03 | NOUVEAU  |
| MT_V2_A2_09 | Informer sur droits ouverts par l'ALD | INFO | IDEC |  Mdico-social |  | CAT_03 | NOUVEAU  |
| MT_V2_A2_10 | Orienter vers MDPH/AS pour activation prestations ALD | SEC | IDEC |  Mdico-social |  | CAT_03 | NOUVEAU  |

> **Rsum** :  
> - Total MT : **10** (1 legacy adapte + 9 nouvelles)  
> - Domaine  Mdical : **0 MT** / Domaine  Mdico-social : **10 MT**
> - Contributives () : **4**  SEC: 3, STRUC: 1  
> - Non-contributives () : **6**  INFO: 3, ORGA: 3

###  Observations

>  **100% Mdico-social** : Comme A1, A2 est un MP purement administratif/mdico-social. Aucun acte mdical n'est requis. La seule MT qui touche au mdical est indirecte : MT_V2_A2_08 (vrifier ALD) qui ncessite une information mdicale mais qui est ralise par l'IDEC, pas le MT.

###  Propositions d'amlioration

| # | Proposition | Justification |
|---|---|---|
| 1 | **MT_V2_A2_03  acteur AS** (principal) | La prparation d'un dossier MDPH est une comptence AS. L'IDEC initie mais l'AS mne techniquement. |
| 2 | **MT_V2_A2_07  acteur Conseil Dpartemental** _(nouvel acteur)_ | La demande d'valuation AGGIR est une comptence du Conseil Dpartemental. L'IDEC facilite mais le CD value. |
| 3 | **Ajouter STRUC  CAT_02** | CAT_02 n'a pas de MT structurante. Proposition : "Prparer les documents ncessaires  l'valuation AGGIR" (STRUC). |
| 4 | **Ajouter STRUC  CAT_03** | CAT_03 n'a pas de MT structurante. Proposition : "Compiler les justificatifs ALD pour le dossier MDPH" (STRUC). |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

#### Wording des 10 MT (IDEC + Utilisateur)

| MT_ID | CAT | Libell | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|---|
| MT_V2_A2_01 | CAT_01 | Bilan des droits | Raliser un bilan des droits ouverts et des droits potentiellement mobilisables pour l'aidant et le proche | Faites le point sur les aides et droits dont vous bnficiez et ceux que vous pourriez demander |  |
| MT_V2_A2_02 | CAT_01 | Informer droits | Informer l'aidant sur les droits mobilisables selon sa situation (APA, PCH, AAH, RQTH, CMI) | Renseignez-vous sur les aides auxquelles vous pourriez avoir droit |  |
| MT_V2_A2_03 | CAT_01 | Prparer dossier | Prparer le dossier de demande pour le ou les droits prioritaires identifis lors du bilan | Commencez  rassembler les documents ncessaires pour votre demande d'aide |  |
| MT_V2_A2_04 | CAT_01 | Orienter AS/MDPH | Organiser le contact avec l'assistante sociale ou la MDPH pour le montage du dossier | Prenez contact avec une assistante sociale ou la MDPH pour tre accompagn |  |
| MT_V2_A2_05 | CAT_02 | Vrifier AGGIR | Confirmer avec l'aidant si une valuation officielle de la dpendance (grille AGGIR) a bien t ralise | Vrifiez si le niveau de dpendance de votre proche a t officiellement valu |  |
| MT_V2_A2_06 | CAT_02 | Informer AGGIR | Expliquer l'importance de l'valuation AGGIR : c'est le prrequis pour l'APA et d'autres aides | Comprenez pourquoi l'valuation de dpendance est importante pour accder aux aides |  |
| MT_V2_A2_07 | CAT_02 | Initier valuation | Contacter le Conseil Dpartemental pour initier une demande d'valuation AGGIR. Procdures variables selon les dpartements. | Demandez au Conseil Dpartemental d'valuer le niveau de dpendance de votre proche |  |
| MT_V2_A2_08 | CAT_03 | Vrifier ALD | Vrifier si le proche est reconnu en ALD et si les prestations sociales associes ont t actives | Vrifiez si la maladie chronique de votre proche ouvre des droits sociaux supplmentaires |  |
| MT_V2_A2_09 | CAT_03 | Informer ALD-droits | Informer sur les droits spcifiques ouverts par une ALD (AAH, invalidit, PCH, exonration ticket modrateur) | Renseignez-vous sur les aides spcifiques lies  la maladie chronique de votre proche |  |
| MT_V2_A2_10 | CAT_03 | Orienter MDPH/AS | Orienter vers la MDPH ou l'AS pour activer les prestations sociales lies  l'ALD | Contactez la MDPH ou une assistante sociale pour faire valoir les droits lis  l'ALD |  |

#### Wording des 3 Recos de base

| CAT | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | / |
|---|---|---|---|
| CAT_01 | Activation de vos droits et aides | Raliser un bilan des droits et orienter |  |
| CAT_02 | valuation de la dpendance de votre proche | Initier l'valuation AGGIR |  |
| CAT_03 | Droits lis  la maladie chronique | Activer le lien ALD-prestations sociales |  |

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit

#### CAT_01  Activation des droits et aides

> Niveaux existants :  STD_01 (+STD_04 propos) /  CCC_01 /  CRIT_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Droits et aides  explorer | Informer sur les droits mobilisables |
|  CCC ( 30j) | Activation des droits recommande | Orienter vers activation des droits sous 30 jours |
|  Critique ( 7j) | Activation des droits urgente | Activer les droits en urgence sous 7 jours |

**MT versionnes (exemples cls) :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V2_A2_01 | Faites le point sur vos droits | valuez rapidement vos droits | Identifiez ds maintenant les droits  activer |
| MT_V2_A2_03 | Rassemblez les documents ncessaires | Prparez votre dossier rapidement | Constituez votre dossier cette semaine |
| MT_V2_A2_04 | Prenez contact avec l'AS si besoin | Contactez l'AS ou la MDPH dans le mois | Contactez l'AS ou la MDPH cette semaine |

#### CAT_02  valuation de la dpendance (AGGIR)

> Niveaux existants :  STD_02 / ( CCC_02 propos) / ( CRIT_02 propos)

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | valuation de dpendance conseille | Vrifier si valuation AGGIR ralise |
|  CCC ( 30j) | valuation de dpendance  initier | Initier l'valuation AGGIR sous 30 jours |
|  Critique ( 7j) | valuation de dpendance urgente | Initier l'valuation AGGIR en urgence |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V2_A2_05 | Vrifiez si l'valuation a t faite | Vrifiez rapidement le statut de l'valuation | Vrifiez ds maintenant si l'valuation est faite |
| MT_V2_A2_07 | Demandez une valuation si besoin | Demandez une valuation dans le mois | Demandez une valuation cette semaine |

#### CAT_03  Lien ALD et prestations sociales

> Niveaux existants :  STD_03 / ( CCC_03 propos)

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Droits lis  la maladie chronique  explorer | Vrifier le lien ALD-prestations |
|  CCC ( 30j) | Droits ALD  activer | Activer les prestations ALD sous 30 jours |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |
|---|---|---|
| MT_V2_A2_08 | Vrifiez les droits lis  la maladie de votre proche | valuez rapidement les droits lis  la maladie |
| MT_V2_A2_10 | Contactez la MDPH si besoin | Contactez la MDPH ou l'AS dans le mois |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP A2 n'est PAS activ (aucune rgle ne s'est dclenche = droits en place, valuation faite, ALD gre)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  Vos droits et aides semblent en place. Pensez  vrifier rgulirement que vos droits sont  jour et  signaler tout changement de situation.  |  Surveiller l'volution des droits et de la situation administrative. Vrifier les renouvellements d'aides  chaque suivi.  |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| _(NOUVELLE)_ | Rappeler les dates de renouvellement des aides | ORGA | Vrifier les dates de renouvellement des droits ouverts (APA, AAH, CMI) | Pensez  vrifier les dates de renouvellement de vos aides |
| _(NOUVELLE)_ | Sensibiliser aux changements ouvrant de nouveaux droits | INFO | Informer l'aidant que tout changement de situation (aggravation, dmnagement) peut ouvrir de nouveaux droits | Sachez que tout changement de situation peut vous ouvrir de nouveaux droits  n'hsitez pas  en parler |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  |  | E62: , N29: via delta STD_04 , N42: STD_03 , O53: STD_02 , O54: indirecte via AGGIR |
| 2 | Chaque rgle d'activation  1 version de reco |  |  | 8 rgles (3 legacy + 5 proposes)  toutes lies |
| 3 | Chaque catgorie de reco  ses MT assignes |  |  | CAT_01: 4 MT, CAT_02: 3 MT, CAT_03: 3 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  |  | Chaque CAT a 2 niveaux (aprs propositions) |
| 5 | Aucune MT orpheline |  |  | 10 MT toutes rattaches |
| 6 | Reco prvention prsente |  |  | Propose, en attente validation |
| 7 | Wording reco = conseil, MT = verbe d'action |  |  | Phase 1 + Phase 2 proposes |
| 8 | Sens clinique renseign pour chaque rgle |  |  | 8 rgles documentes |

> **Score** : **4/8 valids**, 3 en attente validation, 1 partiel (O54 indirect)

>  **Point d'attention O54** : O54 (niveau GIR) ne dclenche aucune rgle directement. Elle est utilise comme INFORMATION contextuelle (GIR 1-2 = grande dpendance, GIR 5-6 = faible). Si on voulait la rendre dclenchante, on pourrait crer une rgle :  Si GIR 1-2 et aucun droit demand  Critique . **Proposition  discuter**.

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 1 (activation droits via APA) | **3** (activation droits, valuation AGGIR, lien ALD) |
| Rgles d'activation | 3 (:1 :1 :1) | **8** (:3, :3, :2)  dont 5 proposes |
| MT totales | 0 | **10** (1 legacy adapte + 9 nouvelles) |
| MT contributives | 0 | **4** (STRUC:1, SEC:3) |
| Domaine  /  | - | 0  / 10  |
| ASR |  Vide | CAT_01  + CAT_02 partielle + CAT_03 partielle |
| Reco prvention |  |  Propose |
| Checks OK | 2/8 | 4/8 ( 8/8 aprs validations) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories identifies (activation droits, valuation AGGIR, lien ALD) |  Propos |
| 2 | Nouvelles rgles CCC/CRIT pour CAT_02 (AGGIR) |  Propos |
| 3 | Standard pour CAT_03 (N42 Non/NSP) |  Propos |
| 4 | CCC pour CAT_03 (N42 + E62 Aucun) |  Propos |
| 5 | Delta droits STD_04 (E62 en cours + N29 Aucun) |  Propos |
| 6 | 10 MT cres avec chane ORGA  INFO  STRUC  SEC |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider les 3 catgories |  Haute |
| 2 | Valider les nouvelles rgles (5 proposes) |  Haute |
| 3 | Dcider si O54 (GIR) doit dclencher une rgle |  Haute |
| 4 | Valider wording Phase 1 + Phase 2 |  Haute |
| 5 | Valider reco prvention |  Moyenne |
| 6 | Valider propositions types/acteurs |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Hb=`#  Fiche de Validation MP  A3  Charge et complexit des dmarches

> **Vulnrabilit** : V2  Administrative  
> **ASR** :  Rduire la charge mentale administrative   
> **Signature** : A3-A : Aide extrieure  la gestion  
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## CONTEXTE  Big Picture V2

### Rpartition des 18 questions V2 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **A1** | Couverture sant et protections juridiques | 4 | E21, E68, O23, O45 | Couverture sant aidant/proche + anticipation projet de vie |
| **A2** | Droits, aides et valuation dpendance | 5 | E62, N29, N42, O53, O54 | Droits ouverts, aides en cours, valuation AGGIR |
| **A3** | Charge et complexit des dmarches | 5 | E61, E66, E69, E70, N6 | Charge administrative, complexit perue, protections juridiques |
| **A4** | Situation scolaire/professionnelle et budget | 7 | E63, E64, E65, E67, N43, N5, O61 | Inclusion scolaire/pro, accompagnement, budget |

> **A3 se concentre sur la CHARGE et la COMPLEXIT** des dmarches administratives. Contrairement  A1 (COUVERTURE de base), A3 mesure le POIDS ressenti des dmarches. Contrairement  A2 (DROITS concrets), A3 ne s'intresse pas  quels droits sont ouverts mais  combien a cote en nergie mentale. Contrairement  A4 (INCLUSION et BUDGET), A3 ne couvre pas les aspects financiers ou scolaires mais les aspects de complexit et de gestion quotidienne.
>
> **Particularit** : A3 contient deux sous-thmes htrognes :
> - **Sous-thme 1** : Complexit administrative perue (E66, E69, E70)  "est-ce que les dmarches m'accablent ?"
> - **Sous-thme 2** : Anticipation juridique (E61, N6)  protections juridiques et directives anticipes
>
>  **Point d'attention** : \`E61\` (directives anticipes) et \`N6\` (mesure de protection) relvent thmatiquement de la PROTECTION JURIDIQUE. Leur prsence dans A3 plutt que dans A1 est un choix de classification legacy qui mrite discussion (voir analyse ci-dessous).

---

## 0. DONNES FIGES  Questions rattaches  A3

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E61 | Votre proche a-t-il dj rdig des directives anticipes concernant ses souhaits de soins en cas de situation grave ? | facteur | Oui / Non / Je ne sais pas |
| 2 | E66 | Les dmarches administratives lies  votre proche vous paraissent-elles complexes ? | tat | Pas du tout / Un peu / Oui |
| 3 | E69 | Vous sentez-vous  l'aise avec les dmarches administratives en ligne ? | tat | Oui, tout  fait / Oui, mais a prend beaucoup de temps / Non, je suis souvent perdue / Je n'ai pas facilement accs  un ordinateur/internet |
| 4 | E70 | Vous arrive-t-il de devoir grer des dmarches dans l'urgence ? | tat | Non, jamais / Parfois / Souvent, je suis toujours en retard / Je ne sais pas |
| 5 | N6 | Une mesure de protection a-t-elle t mise en place ? | facteur | Non / Habilitation familiale / Tutelle / Curatelle simple / Curatelle renforce / Sauvegarde de justice / Mandat de protection future |

> Total : 5 questions rattaches  A3

###  Pourquoi ces 5 questions ?

**E66**, **E69** et **E70** forment un trio cohrent mesurant la CHARGE ADMINISTRATIVE sous 3 angles complmentaires :
- E66 = **complexit perue** globale (ressenti subjectif)
- E69 = **comptence numrique** (capacit  faire les dmarches en ligne)
- E70 = **gestion de l'urgence** (les dmarches dpassent-elles l'aidant ?)

 Ces 3 questions sont clairement A3 : elles mesurent le POIDS des dmarches, pas les droits eux-mmes (A2) ni la couverture de base (A1).

**E61** (directives anticipes) et **N6** (mesure de protection) sont thmatiquement lis  la PROTECTION JURIDIQUE plutt qu' la charge administrative :

>  **Analyse E61** : Les directives anticipes sont un document juridique qui exprime les souhaits de soins du proche. Ce n'est pas une "dmarche administrative" au sens de la charge mentale  c'est un ACTE D'ANTICIPATION JURIDIQUE. Thmatiquement, E61 serait mieux dans A1 ( protections juridiques  est dans le titre de A1). Cependant, son placement dans A3 se comprend si on considre que la RDACTION des directives est une DMARCHE que l'aidant doit grer  le  cot  de cette dmarche fait partie de la charge administrative.

>  **Analyse N6** : Les mesures de protection (tutelle, curatelle, habilitation familiale, mandat de protection future, sauvegarde de justice) sont des dispositifs JURIDIQUES purs. Leur placement dans A3 est discutable  elles seraient naturellement dans A1 ( protections juridiques ). **Argument pour A3** : la mise en place d'une mesure de protection est une dmarche administrative lourde et complexe  a contribue  la charge. **Argument pour A1** : la protection juridique EST le cur du titre de A1.  Candidat fort pour double rattachement A1+A3 (voir A1.md).
>
> La reco legacy de N6 ( Anticipez et renseignez-vous sur les diffrentes protections juridiques possibles ) est explicitement rattache  A3 avec l'AS comme acteur. Cela confirme le choix legacy : la mise en place de protections = une DMARCHE  accompagner.

###  Analyse des 13 autres questions V2  Pourraient-elles appartenir  A3 ?

#### Questions A1 (Couverture sant et protections juridiques)

| Question | Libell | Pertinence A3 ? | Raisonnement |
|---|---|---|---|
| **O23** | Couverture sant du proche |  Non | Facteur de protection, pas de charge. |
| **O45** | Couverture sant de l'aidant |  Non | Idem. |
| **E68** | Temps admin mensuel |  **Dbattable** | Le temps consacr aux dmarches est une mesure DIRECTE de la charge administrative  A3 serait lgitime. **Mais** : E68 est le dclencheur principal des rgles CCC/Critique de A1 (combo E68 + E21). Le retirer de A1 viderait A1 de son signal de gravit.  Conserv dans A1 pour les rgles d'activation. |
| **E21** | Viabilit situation de vie |  Non | Projection  A1. |

>  **Verdict A1** : E68 est le seul dbattable mais son rle de dclencheur dans A1 justifie son placement actuel. La CHARGE (heures) est mesure par E68 dans A1, la COMPLEXIT (ressenti) par E66 dans A3.

#### Questions A2 (Droits, aides, valuation dpendance)

| Question | Libell | Pertinence A3 ? | Raisonnement |
|---|---|---|---|
| **E62** | Droits en cours de demande |  Non | Inventaire de droits = A2. La complexit de ces demandes serait A3, mais E62 mesure le QUOI, pas le COMMENT. |
| **N29** | Droits obtenus |  Non | Idem. |
| **N42** | Aide ALD/prestations sociales |  Non | Droit spcifique = A2. |
| **O53** | valuation AGGIR faite ? |  Non | Processus d'valuation = A2. |
| **O54** | Niveau GIR |  Non | Rsultat = A2. |

>  **Verdict A2** : Aucune question A2 dans A3.

#### Questions A4 (Situation scolaire/professionnelle et budget)

| Question | Libell | Pertinence A3 ? | Raisonnement |
|---|---|---|---|
| **E63** | Dmarches proccupantes |  **Dbattable** | Les proccupations lies aux dmarches SONT de la charge mentale  A3 serait lgitime. **Mais** : E63 est dans A4 car elle sert  identifier les TYPES de dmarches qui proccupent (dossier dpendance, MDPH, retraite)  c'est un inventaire, pas une mesure de complexit. |
| **E64-E67** | Inclusion scolaire/professionnelle |  Non | Inclusion = A4 pur. |
| **N43** | Services d'accompagnement utiliss |  Non | Historique de recours aux services = A4. |
| **N5** | Aides utilises |  Non | Services de rpit/psy = A4. |
| **O61** | Moyens financiers |  Non | Budget = A4 pur. |

>  **Verdict A4** : E63 est dbattable (charge mentale vs. inventaire) mais A4 reste cohrent.

###  Synthse affiliation

| Questions | MP actuel | Pertinence A3 ? | Confiance |
|---|---|---|---|
| O23, O45, E21 | A1 |  Non |  Haute |
| **E68** | A1 |  Dbattable (charge horaire = A3 smantiquement) |  Moyenne |
| E62, N29, N42, O53, O54 | A2 |  Non |  Haute |
| **E63** | A4 |  Dbattable (proccupation = charge mentale) |  Moyenne |
| E64, E65, E67, N43, N5, O61 | A4 |  Non |  Haute |

> **Conclusion** : Les 5 questions de A3 sont les bonnes. E68 (temps admin, A1) et E63 (proccupations, A4) sont dbattables mais leur placement actuel est dfendable. L'htrognit interne d'A3 (complexit + protection juridique) est le point d'attention principal.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse des questions et de la recommandation legacy (A3_RECO_01) rvle **2 axes cliniques distincts**, correspondant aux 2 sous-thmes identifis dans le contexte :

1. **Accompagnement  la complexit administrative**  E66, E69, E70 mesurent la difficult perue, la comptence numrique et la gestion d'urgence. L'action = simplifier, accompagner, former aux outils numriques.
2. **Anticipation et protection juridique**  E61 et N6 mesurent les protections en place. L'action = informer, anticiper les directives/mesures de protection. A3_RECO_01 legacy ("Anticipez et renseignez-vous sur les protections juridiques") s'inscrit dans cet axe.

>  **Pourquoi pas 3 catgories ?** On pourrait sparer E61 (directives anticipes) et N6 (mesures de protection) car ce sont 2 dispositifs juridiques diffrents. **Mais** : ils partagent le mme objectif (protger le proche en cas de dgradation), le mme acteur (AS), et le mme processus (anticipation juridique). Les fusionner en 1 catgorie est proportionnel (T4)  2 questions = 1 catgorie suffit.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | A3_CAT_01 | Accompagnement  la complexit administrative | valuer la charge, former aux outils numriques, simplifier les dmarches |  Propos (bas sur E66, E69, E70) |
| 2 | A3_CAT_02 | Anticipation et protection juridique | Anticiper les directives anticipes et les mesures de protection | Legacy  (A3_RECO_01 + N6) |

###  Pourquoi 2 catgories et pas 1 ou 3 ?

**Pas 1 (fusionner les deux)** : L'accompagnement aux dmarches (complexit, numrique, urgences) et l'anticipation juridique (directives, tutelle) sont fondamentalement diffrents. L'un concerne le QUOTIDIEN (comment grer ?), l'autre le FUTUR (comment protger ?). Les MT sont distinctes, les acteurs aussi (IDEC pour CAT_01, AS pour CAT_02 principalement).

**Pas 3 (sparer directives et mesures de protection)** : Proportionnalit (T4). Directives anticipes (E61) et mesures de protection (N6) = 2 questions pour 1 objectif commun. Crer 2 catgories pour 1 question chacune serait disproportionn.

> **Dcision Dr. Monka** :  Valid 2 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

Les 3 rgles legacy (V5_A3_*) sont TOUTES lies  E61 (directives anticipes) et E21 (viabilit). Les questions E66, E69, E70 n'ont **aucune rgle d'activation** en legacy  c'est une lacune majeure. La complexit administrative perue ne dclenche actuellement aucune recommandation.

>  **Anomalie critique** : E66 ("Les dmarches vous paraissent-elles complexes ?") avec rponse "Oui" ne dclenche RIEN en legacy. E69 ("Je suis souvent perdue") idem. E70 ("Souvent en retard") idem. Ces 3 signaux de surcharge sont ignors par le moteur. C'est le cur de CAT_01  toutes les rgles CAT_01 sont  crer.
>
> **Autre anomalie** : N6 (mesure de protection) a une reco legacy (pour "Non") mais n'a pas de rgle d'activation en \`activation_rules\`. La reco est lie dans \`recommendations_legacy\` uniquement.   crer.

### Rappel des questions A3 et de leurs options

> **E61**   Votre proche a-t-il dj rdig des directives anticipes ? 
> -  Oui /  **Non** /  **Je ne sais pas** (dclenchantes)

> **E66**   Les dmarches administratives vous paraissent-elles complexes ? 
> -  Pas du tout /  Un peu /  **Oui** (dclenchante)

> **E69**   Vous sentez-vous  l'aise avec les dmarches en ligne ? 
> -  Oui, tout  fait /  Oui, mais a prend beaucoup de temps /  **Non, je suis souvent perdue** /  **Je n'ai pas accs  un ordinateur/internet** (dclenchantes)

> **E70**   Grer des dmarches dans l'urgence ? 
> -  Non, jamais /  Parfois /  **Souvent, je suis toujours en retard** /  Je ne sais pas

> **N6**   Une mesure de protection a-t-elle t mise en place ? 
> -  **Non** (dclenchante) /  Habilitation familiale /  Tutelle /  Curatelle simple /  Curatelle renforce /  Sauvegarde de justice /  Mandat de protection future

---

### Catgorie 1  Accompagnement  la complexit administrative

>  **Aucune rgle legacy pour cette catgorie.** Toutes les rgles ci-dessous sont NOUVELLES.

####  Standard  \`V2_A3_STD_02\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  Les dmarches administratives vous paraissent-elles complexes ? 
>  ** Un peu ** ou ** Oui **
>
> **ALORS** : Recommander un accompagnement  la complexit administrative
>
> **Sens clinique** : L'aidant ressent une difficult, mme partielle, dans la gestion des dmarches. Signal prcoce de surcharge  informer sur les aides et simplifier.

####  Standard  \`V2_A3_STD_03\` _(NOUVEAU )_

> **SI** l'aidant a rpondu  la question :
>  Vous sentez-vous  l'aise avec les dmarches en ligne ? 
>  ** Oui, mais a prend beaucoup de temps ** ou ** Non, je suis souvent perdue ** ou ** Pas d'accs ordinateur/internet **
>
> **ALORS** : Recommander un accompagnement numrique ou un accompagnement prsenciel
>
> **Sens clinique** : Le frein numrique est un facteur aggravant de la charge administrative. Si l'aidant n'est pas  l'aise en ligne, la complexit perue est amplifie  adapter l'accompagnement (accs en mairie, CCAS, permanences).

####  CCC  \`V2_A3_CCC_02\` _(NOUVEAU )_

> **SI** l'aidant a rpondu :
> 1.  Les dmarches vous paraissent-elles complexes ?   ** Oui **
> 2. **ET**  Grer des dmarches dans l'urgence ?   ** Souvent, je suis toujours en retard **
>
> **ALORS** : Recommander un accompagnement administratif  niveau CCC ( 30 jours)
>
> **Sens clinique** : Complexit maximale perue + gestion systmatique dans l'urgence = l'aidant est submerg. Les dlais sont dpasss, les droits sont en danger de suspension  besoin d'aide concrte sous 30 jours.

####  Critique  \`V2_A3_CRIT_02\` _(NOUVEAU )_

> **SI** l'aidant a rpondu :
> 1.  Les dmarches vous paraissent-elles complexes ?   ** Oui **
> 2. **ET**  Vous sentez-vous  l'aise avec les dmarches en ligne ?   ** Non, je suis souvent perdue ** ou ** Pas d'accs **
> 3. **ET**  Grer des dmarches dans l'urgence ?   ** Souvent, je suis toujours en retard **
>
> **ALORS** : Recommander un accompagnement administratif  niveau Critique ( 7 jours)
>
> **Sens clinique** : Triple signal de dtresse administrative : complexit maximale + exclusion numrique + urgences permanentes. L'aidant n'a plus aucune capacit  grer ses dmarches seul  urgence  connecter avec un service d'accompagnement.

---

### Catgorie 2  Anticipation et protection juridique

####  Standard  \`V2_A3_STD_01\` _(legacy : V5_A3_STD_01)_

> **SI** l'aidant a rpondu  la question :
>  Votre proche a-t-il rdig des directives anticipes ? 
>  ** Non ** ou ** Je ne sais pas **
>
> **ALORS** : Recommander l'anticipation juridique (directives anticipes + protections)
>
> **Sens clinique** : Directives anticipes non rdiges  en cas de dgradation soudaine, les souhaits de soins du proche ne seront pas connus. Risque dcisionnel pour l'aidant et l'quipe soignante.

####  Standard  \`V2_A3_STD_04\` _(NOUVEAU  bas sur N6 legacy reco)_

> **SI** l'aidant a rpondu  la question :
>  Une mesure de protection a-t-elle t mise en place ? 
>  ** Non **
>
> **ALORS** : Recommander l'information sur les protections juridiques
>
> **Sens clinique** : Aucune mesure de protection en place  le proche vulnrable n'est pas protg juridiquement. Risque d'exploitation financire, de dcisions non autorises, d'absence de reprsentant lgal.
>
> **Source** : Reco legacy N6 = "Non"   Anticipez et renseignez-vous sur les diffrentes protections juridiques possibles  (acteur : AS).

####  CCC  \`V2_A3_CCC_01\` _(legacy : V5_A3_CCC_01)_

> **SI** l'aidant a rpondu :
> 1.  Votre proche a-t-il rdig des directives anticipes ?   ** Non ** ou ** Je ne sais pas **
> 2. **ET**  Pensez-vous qu'il sera possible de maintenir cette situation ?  (E21, de A1)  ** Non, un changement sera ncessaire ** ou ** Je ne sais pas **
>
> **ALORS** : Recommander l'anticipation juridique  niveau CCC ( 30 jours)
>
> **Sens clinique** : Pas de directives anticipes + situation de vie non viable = dcisions futures  risque. En cas de dgradation, personne ne saura les souhaits du proche  urgence  rdiger.
>
>  **Rgle inter-MP** : Utilise E21 qui appartient  A1. C'est un croisement inter-MP lgitime  la viabilit (A1) conditionne l'urgence de l'anticipation juridique (A3).

####  Critique  \`V2_A3_CRIT_01\` _(legacy : V5_A3_CRIT_01)_

> **SI** l'aidant a rpondu  la question :
>  Votre proche a-t-il rdig des directives anticipes ? 
>  ** Non ** (explicitement, pas "Je ne sais pas")
>
> **ALORS** : Recommander l'anticipation juridique  niveau Critique ( 7 jours)
>
> **Sens clinique** : Refus ou absence explicite de directives anticipes + situation instable  risque dcisionnel majeur. L'aidant sait que ce n'est pas fait et la situation est critique.
>
>  **Point de dbat** : Le sens clinique legacy mentionne "situation instable" mais la rgle ne vrifie que E61 = "Non". Est-ce que la Critique devrait exiger E21 = "Non" en plus ? Actuellement n'exiger que E61 = "Non" pour un niveau Critique semble **excessif**  le simple fait de ne pas avoir rdig de directives ne constitue pas une urgence  7 jours SI la situation est stable.  **Proposition : reclasser en CCC, ou ajouter la condition E21 pour le Critique.**

####  Proposition  \`V2_A3_CCC_03\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> 1. N6 = ** Non ** (aucune mesure de protection)
> 2. **ET** E21 (A1) = ** Non, un changement sera ncessaire ** ou ** Je ne sais pas **
>
> **ALORS** : Recommander la mise en place d'une mesure de protection  CCC ( 30 jours)
>
> **Sens clinique** : Aucune protection juridique + situation non viable = le proche est doublement expos. En cas de dgradation, personne ne pourra agir lgalement pour lui  urgence  initier une mesure.

---

###  Dcisions Action 2

| # | Proposition | Dcision | Rgle concerne |
|---|---|---|---|
| 1 |  Standard CAT_01 (E66 complexit) |  Propos | \`V2_A3_STD_02\` |
| 2 |  Standard CAT_01 (E69 numrique) |  Propos | \`V2_A3_STD_03\` |
| 3 |  CCC CAT_01 (E66 Oui + E70 Souvent) |  Propos | \`V2_A3_CCC_02\` |
| 4 |  Critique CAT_01 (E66 + E69 + E70) |  Propos | \`V2_A3_CRIT_02\` |
| 5 |  Standard CAT_02 (N6 = Non) |  Propos | \`V2_A3_STD_04\` |
| 6 |  CCC CAT_02 (N6 Non + E21 Non/NSP) |  Propos | \`V2_A3_CCC_03\` |
| 7 |  Reclasser CRIT_01 en CCC (E61=Non trop souple pour Critique) |  Propos | \`V2_A3_CRIT_01\` |

> **Contrle K3** :
> - CAT_01 :  OK (STD  2 + CCC + CRIT = 4 niveaux proposs)
> - CAT_02 :  OK (STD  2 + CCC  2 + CRIT legacy = 5 niveaux, mais CRIT  discuter)
>
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** :  Aucune micro-tche pour les questions A3 dans la DB. Toutes les MT sont des **propositions nouvelles**.

### CAT_01  Accompagnement  la complexit administrative

> Legacy :  aucune MT. Propositions : **4 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A3_01 | valuer le niveau de complexit perue et les freins spcifiques | ORGA | IDEC |  | NOUVEAU  |
| MT_V2_A3_02 | Informer sur les aides  la simplification (permanences, crivains publics, CCAS) | INFO | IDEC |  | NOUVEAU  |
| MT_V2_A3_03 | Proposer un plan de simplification des dmarches prioritaires | STRUC | IDEC |  | NOUVEAU  |
| MT_V2_A3_04 | Orienter vers un service d'accompagnement adapt (CCAS, EAS, France Services) | SEC | IDEC |  | NOUVEAU  |

####  Pourquoi 4 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V2_A3_01 (valuer complexit)  l'IDEC ne sait pas o se situe le frein (numrique ? formulaires ? comprhension ?). Pas de ciblage.
- Sans MT_V2_A3_02 (informer aides)  l'aidant ignore que des services gratuits de simplification existent (France Services, crivains publics, PIMMS).
- Sans MT_V2_A3_03 (plan de simplification)  on diagnostique et on informe mais pas de feuille de route concrte. L'aidant repart avec des infos mais sans mthode.
- Sans MT_V2_A3_04 (orienter)  on a un plan mais pas de relais professionnel pour l'excuter.

**Pourquoi pas 1 de plus ?**
- "Former l'aidant aux outils numriques"  trop spcifique, couvert par l'orientation vers France Services (MT_V2_A3_04) qui propose des ateliers numriques.
- "Crer un calendrier des chances"  sous-action du plan de simplification (MT_V2_A3_03), pas une MT autonome.
- La chane est complte : ORGA (diagnostiquer)  INFO (informer)  STRUC (structurer)  SEC (scuriser).

### CAT_02  Anticipation et protection juridique

> Legacy : 1 reco (A3_RECO_01) mais pas de MT. Propositions : **4 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A3_05 | valuer le niveau de protection juridique actuel du proche | ORGA | IDEC |  | NOUVEAU  |
| MT_V2_A3_06 | Informer sur les directives anticipes et les mesures de protection | INFO | IDEC |  | Bas sur A3_RECO_01 Legacy |
| MT_V2_A3_07 | Accompagner la rdaction des directives anticipes ou la dmarche de protection | STRUC | IDEC/AS |  | NOUVEAU  |
| MT_V2_A3_08 | Orienter vers l'AS ou le juge des tutelles pour initier une mesure de protection | SEC | AS |  | Legacy  (A3_RECO_01 : "contacter l'AS pour demande de protection") |

####  Pourquoi 4 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Sans MT_V2_A3_05 (valuer protection)  l'IDEC ne sait pas quelles protections sont en place ou manquantes. N6 donne un premier indice mais l'IDEC doit confirmer et dtailler.
- Sans MT_V2_A3_06 (informer)  l'aidant ne comprend pas la diffrence entre tutelle, curatelle, habilitation familiale, mandat de protection future. L'INFO est le socle.
- Sans MT_V2_A3_07 (accompagner rdaction/dmarche)  on diagnostique et on informe mais on n'aide pas concrtement  faire. La rdaction de directives anticipes est un acte qui ncessite un accompagnement.
- Sans MT_V2_A3_08 (orienter AS/juge)  on prpare le terrain mais on ne connecte pas au professionnel comptent.

**Pourquoi pas 1 de plus ?**
- "Contacter le notaire"  trop spcifique, le notaire n'est ncessaire que pour le mandat de protection future. Couvert par l'orientation AS (MT_V2_A3_08) qui identifie le bon professionnel.
- "Vrifier la validit des directives existantes"  sous-action de MT_V2_A3_05, pas une MT autonome.
- La chane est complte : ORGA (valuer)  INFO (informer)  STRUC (accompagner)  SEC (orienter).

###  Dcisions Action 3

| # | Proposition | Dcision | MT cres |
|---|---|---|---|
| 1 | 4 MT pour CAT_01 (complexit administrative) |  Propos | \`MT_V2_A3_01\`  \`MT_V2_A3_04\` |
| 2 | 4 MT pour CAT_02 (anticipation juridique) |  Propos | \`MT_V2_A3_05\`  \`MT_V2_A3_08\` |

> **Condition ASR par catgorie** :
> - CAT_01 :  2 (STRUC + SEC)   ASR complte
> - CAT_02 :  2 (STRUC + SEC)   ASR complte
>
> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs existants dans la DB** : \`IDEC\`, \`MT\` (mdecin traitant), \`Aidant (autonome)\`, \`AS\` (assistante sociale)
> **Nouveaux acteurs potentiels** : \`Juge des tutelles\`, \`France Services\`
> **Domaines** :  Mdical /  Mdico-social

### Tableau consolid des MT de A3 (final)

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Source |
|---|---|---|---|---|---|---|---|
| MT_V2_A3_01 | valuer complexit perue et freins spcifiques | ORGA | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V2_A3_02 | Informer sur aides  la simplification | INFO | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V2_A3_03 | Proposer plan de simplification | STRUC | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V2_A3_04 | Orienter vers France Services / CCAS / EAS | SEC | IDEC |  Mdico-social |  | CAT_01 | NOUVEAU  |
| MT_V2_A3_05 | valuer protection juridique actuelle | ORGA | IDEC |  Mdico-social |  | CAT_02 | NOUVEAU  |
| MT_V2_A3_06 | Informer sur directives anticipes et mesures de protection | INFO | IDEC |  Mdico-social |  | CAT_02 | Legacy  |
| MT_V2_A3_07 | Accompagner rdaction directives / dmarche de protection | STRUC | IDEC/AS |  Mdico-social |  | CAT_02 | NOUVEAU  |
| MT_V2_A3_08 | Orienter vers AS ou juge des tutelles | SEC | AS |  Mdico-social |  | CAT_02 | Legacy  |

> **Rsum** :  
> - Total MT : **8** (2 legacy adaptes + 6 nouvelles)  
> - Domaine  Mdical : **0 MT** / Domaine  Mdico-social : **8 MT**  
> - Contributives () : **4**  STRUC: 2, SEC: 2  
> - Non-contributives () : **4**  INFO: 2, ORGA: 2  
> -  ASR complte pour les 2 catgories

###  Propositions d'amlioration

| # | Proposition | Justification |
|---|---|---|
| 1 | **MT_V2_A3_02  acteur Aidant (autonome)** | L'aidant peut chercher seul les permanences et services de simplification (France Services est accessible  tous). L'IDEC facilite mais l'aidant peut agir. |
| 2 | **MT_V2_A3_07  double acteur AS + MT** | Les directives anticipes concernent les souhaits de SOINS  le mdecin traitant devrait tre impliqu dans la discussion clinique, mme si la rdaction est accompagne par l'AS. |
| 3 | **MT_V2_A3_08  prciser : AS pour mesures simples, Juge des tutelles pour tutelle/curatelle** | L'AS initie toutes les mesures SAUF la tutelle/curatelle qui ncessite une requte auprs du juge. Prciser l'aiguillage. |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

#### Wording des 8 MT (IDEC + Utilisateur)

| MT_ID | CAT | Libell | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|---|
| MT_V2_A3_01 | CAT_01 | valuer complexit | valuer avec l'aidant la nature de ses difficults administratives (complexit, numrique, urgences) | Identifiez ce qui vous pose le plus de difficults dans vos dmarches administratives |  |
| MT_V2_A3_02 | CAT_01 | Informer simplification | Informer sur les services d'aide gratuits : France Services, crivains publics, permanences CCAS | Renseignez-vous sur les services gratuits qui peuvent vous aider dans vos dmarches |  |
| MT_V2_A3_03 | CAT_01 | Plan de simplification | tablir un plan de simplification : lister les dmarches prioritaires, identifier les aides disponibles, fixer un calendrier | tablissez un plan pour simplifier vos dmarches les plus urgentes |  |
| MT_V2_A3_04 | CAT_01 | Orienter accompagnement | Orienter vers un point d'accueil (France Services, CCAS, EAS) adapt  la situation gographique et aux besoins de l'aidant | Rendez-vous dans un point France Services ou au CCAS de votre commune pour tre accompagn |  |
| MT_V2_A3_05 | CAT_02 | valuer protection | valuer le niveau actuel de protection juridique du proche (directives anticipes, personne de confiance, mesure de protection) | Faites le point sur les protections juridiques en place pour votre proche |  |
| MT_V2_A3_06 | CAT_02 | Informer protections | Expliquer les diffrentes options de protection : directives anticipes, personne de confiance, habilitation familiale, tutelle, curatelle, mandat de protection future | Renseignez-vous sur les protections juridiques adaptes  la situation de votre proche |  |
| MT_V2_A3_07 | CAT_02 | Accompagner dmarche | Accompagner la rdaction des directives anticipes avec le proche et/ou la prparation d'une demande de mesure de protection | Prparez les directives anticipes de votre proche ou une demande de protection avec une assistante sociale |  |
| MT_V2_A3_08 | CAT_02 | Orienter AS/juge | Orienter vers l'assistante sociale du secteur pour les mesures simples, ou vers le juge des tutelles pour les mesures contraignantes (tutelle, curatelle) | Prenez contact avec une assistante sociale pour mettre en place la protection adapte |  |

#### Wording des 2 Recos de base

| CAT | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | / |
|---|---|---|---|
| CAT_01 | Aide pour simplifier vos dmarches | Accompagner la simplification administrative |  |
| CAT_02 | Anticipation des protections juridiques | Accompagner l'anticipation juridique |  |

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit

#### CAT_01  Accompagnement  la complexit administrative

> Niveaux existants :  STD_02 + STD_03 /  CCC_02 /  CRIT_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Accompagnement administratif disponible | Informer sur les aides  la simplification |
|  CCC ( 30j) | Accompagnement administratif recommand | Organiser un accompagnement sous 30 jours |
|  Critique ( 7j) | Accompagnement administratif urgent | Connecter avec un service d'aide sous 7 jours |

**MT versionnes (exemples cls) :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V2_A3_01 | Identifiez vos difficults administratives | Faites le point rapidement sur vos difficults | Identifiez ds maintenant vos blocages administratifs |
| MT_V2_A3_04 | Renseignez-vous sur France Services | Rendez-vous  France Services dans le mois | Rendez-vous  France Services cette semaine |

#### CAT_02  Anticipation et protection juridique

> Niveaux existants :  STD_01 + STD_04 /  CCC_01 + CCC_03 /  CRIT_01 ( discuter)

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Anticipation juridique conseille | Informer sur les protections juridiques |
|  CCC ( 30j) | Anticipation juridique recommande | Initier les dmarches de protection sous 30 jours |
|  Critique ( 7j) | Anticipation juridique urgente | Initier les dmarches de protection en urgence |

**MT versionnes (exemples cls) :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V2_A3_06 | Renseignez-vous sur les protections possibles | Informez-vous rapidement sur les protections | Informez-vous ds maintenant sur les protections |
| MT_V2_A3_08 | Contactez une AS si besoin | Contactez une AS dans le mois | Contactez une AS cette semaine |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP A3 n'est PAS activ (dmarches non perues comme complexes,  l'aise en ligne, pas d'urgences, directives anticipes faites, protection juridique en place)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  Vos dmarches administratives semblent bien gres et les protections juridiques de votre proche sont en place. Pensez  consulter rgulirement pour vrifier que tout reste  jour.  |  Situation administrative stable. Vrifier les renouvellements et l'actualisation des protections lors du prochain suivi.  |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| _(NOUVELLE)_ | Sensibiliser aux volutions administratives | INFO | Alerter l'aidant sur les changements rglementaires pouvant impacter ses droits | Restez inform des volutions de vos droits et dmarches |
| _(NOUVELLE)_ | Vrifier l'actualit des protections juridiques | ORGA | Vrifier la validit et la pertinence des mesures de protection en place | Vrifiez que les protections juridiques de votre proche sont toujours adaptes |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  |  | E61: , E66: , E69: , E70:  (via CCC_02), N6:  (STD_04) |
| 2 | Chaque rgle d'activation  1 version de reco |  |  | 9 rgles (3 legacy + 6 proposes)  toutes lies |
| 3 | Chaque catgorie de reco  ses MT assignes |  |  | CAT_01: 4 MT, CAT_02: 4 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  |  | CAT_01: 3 niveaux, CAT_02: 3+ niveaux |
| 5 | Aucune MT orpheline |  |  | 8 MT toutes rattaches |
| 6 | Reco prvention prsente |  |  | Propose |
| 7 | Wording reco = conseil, MT = verbe d'action |  |  | Phase 1 + Phase 2 proposes |
| 8 | Sens clinique renseign pour chaque rgle |  |  | 9 rgles documentes |

> **Score** : **4/8 valids**, 3 en attente validation, 1 partiel

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 1 (anticipation juridique) | **2** (complexit admin, anticipation juridique) |
| Rgles d'activation | 3 (:1 :1 :1) | **9** (:4, :3, :2)  dont 6 proposes |
| MT totales | 0 | **8** (2 legacy adaptes + 6 nouvelles) |
| MT contributives | 0 | **4** (STRUC:2, SEC:2) |
| Domaine  /  | - | 0  / 8  |
| ASR |  Vide | CAT_01  + CAT_02  |
| Reco prvention |  |  Propose |
| Checks OK | 2/8 | 4/8 ( 8/8 aprs validations) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 2 catgories identifies (complexit admin, anticipation juridique) |  Propos |
| 2 | 4 nouvelles rgles CAT_01 (E66, E69, E70  jamais exploites legacy) |  Propos |
| 3 | 2 nouvelles rgles CAT_02 (N6=Non + CCC N6+E21) |  Propos |
| 4 |  Reclassement CRIT_01 (E61=Non seul  Critique trop svre ?) |  Propos  discuter |
| 5 | Htrognit A3 signale (complexit + protection = 2 thmes distincts) |  Observation |
| 6 | 8 MT cres  chane complte pour les 2 catgories |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider les 2 catgories |  Haute |
| 2 | Valider les 6 nouvelles rgles (complexit + protection) |  Haute |
| 3 | Dcider si CRIT_01 (E61=Non seul) reste Critique |  Haute |
| 4 | Confirmer ou non le double rattachement N6  A1+A3 |  Haute |
| 5 | Valider wording Phase 1 + Phase 2 |  Haute |
| 6 | Valider reco prvention |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Bb=`#  Fiche de Validation MP  A4  Situation scolaire/professionnelle et budget

> **Vulnrabilit** : V2  Administrative  
> **ASR** :  Clarifier situation d'inclusion et impacts budget   
> **Signature** : A4-A : Ajustement professionnel effectif  
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## CONTEXTE  Big Picture V2

### Rpartition des 18 questions V2 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **A1** | Couverture sant et protections juridiques | 4 | E21, E68, O23, O45 | Couverture sant aidant/proche + anticipation |
| **A2** | Droits, aides et valuation dpendance | 5 | E62, N29, N42, O53, O54 | Droits ouverts, aides, AGGIR |
| **A3** | Charge et complexit des dmarches | 5 | E61, E66, E69, E70, N6 | Charge admin, complexit, protection juridique |
| **A4** | Situation scolaire/professionnelle et budget | 7 | E63, E64, E65, E67, N43, N5, O61 | Inclusion, accompagnement, budget |

> **A4 est le plus grand MP de V2** (7 questions) et couvre les aspects d'**INCLUSION SOCIALE** du proche et de l'aidant, ainsi que la **VIABILIT FINANCIRE**.
>
> A4 se distingue des autres MPs V2 :
> - **vs A1** (couverture) : A1 = avoir une mutuelle ; A4 = avoir les moyens de vivre dignement
> - **vs A2** (droits) : A2 = quels droits sont ouverts ; A4 = quel est l'impact concret sur le quotidien (cole, travail, budget)
> - **vs A3** (charge) : A3 = les dmarches m'puisent ; A4 = la situation scolaire/pro/financire est-elle tenable
>
> **Particularit** : A4 contient 3 sous-thmes distincts :
> - **Sous-thme 1** : Inclusion scolaire/structure du proche (E64, E65)  "le proche a-t-il accs  une structure adapte ?"
> - **Sous-thme 2** : Activit professionnelle du proche + proccupations + accompagnement (E67, E63, N43, N5)  "le proche a-t-il une activit ? L'aidant est-il accompagn ?"
> - **Sous-thme 3** : Budget (O61)  "les moyens financiers suffisent-ils ?"

---

## 0. DONNES FIGES  Questions rattaches  A4

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E63 | En ce moment, quelles dmarches vous proccupent le plus ? | facteur | 8 options (dpendance, MDPH, retraite, logement, aides ponctuelles, renouvellement droits, autre, aucune) |
| 2 | E64 | L'enfant/adolescent frquente-t-il une cole ou une structure ducative/occupationnelle adapte ? | facteur | Oui sans difficult / Oui avec amnagements / Trs difficile / Non |
| 3 | E65 | L'enfant/adolescent bnficie-t-il d'un accompagnement par un AESH ou un AVS ? | facteur | Non / Oui, dj en place / Oui, besoin identifi mais pas encore en place |
| 4 | E67 | La personne accompagne bnficie-t-elle actuellement d'une activit professionnelle ou occupationnelle adapte ? | facteur | Oui, adapte / Oui, mais difficile / Non, sans problme / Non, avec difficults |
| 5 | N43 | De quels services d'aide et d'accompagnement dans les dmarches administratives avez-vous dj bnfici ? | facteur | 10 options (AS, MDPH, MDA, CCAS, mutuelles, associations, PFR, assurance maladie, EAS, aucun) |
| 6 | N5 | De quelles aides avez-vous dj bnfici ? | facteur | Solutions de rpit / Formations aidants / Accompagnement psy / Aucune / Autre |
| 7 | O61 | Les moyens financiers dont vous disposez permettent-ils de faire face  la situation ? | tat | Oui / Non |

> Total : 7 questions rattaches  A4  le plus gros MP de V2

###  Pourquoi ces 7 questions ?

**E64** et **E65** forment un duo sur l'INCLUSION SCOLAIRE :
- E64 = accs  une cole/structure adapte (oui/non/difficile)
- E65 = accompagnement AESH/AVS (en place/besoin/non)

 Ce duo cible les ENFANTS/ADOLESCENTS aids. C'est un angle spcifique de V2 : la dimension ADMINISTRATIVE de l'inclusion (dossier MDPH pour l'AESH, notification MDPH pour la structure). La difficult d'accs ou l'absence d'AESH = carence administrative majeure.

**E67** couvre l'INCLUSION PROFESSIONNELLE/OCCUPATIONNELLE du proche adulte :
- Activit adapte, difficile, ou absente  signal d'inclusion ou d'isolement

**E63** = les PROCCUPATIONS de l'aidant concernant les dmarches spcifiques. Ce n'est pas la charge (A3) mais l'INVENTAIRE des proccupations (quels types de dossiers psent : MDPH, dpendance, logement).

**N43** = le RECOURS aux services d'accompagnement (AS, MDPH, CCAS). Ce n'est pas les droits obtenus (A2) mais les SERVICES UTILISS pour obtenir ces droits.

**N5** = les AIDES utilises par l'aidant (rpit, formation, psy). Ce sont des ressources de soutien, pas des droits administratifs.

**O61** = la VIABILIT FINANCIRE globale. C'est la question de clture de V2 : aprs tout (couverture, droits, charge, inclusion), est-ce que les MOYENS FINANCIERS permettent de tenir ?

###  Analyse des 11 autres questions V2  Pourraient-elles appartenir  A4 ?

| Question | MP actuel | Pertinence A4 ? | Raisonnement |
|---|---|---|---|
| O23, O45 | A1 |  Non | Couverture sant = A1 |
| E68, E21 | A1 |  Non | Temps admin + viabilit = A1 |
| E62, N29 | A2 |  Non | Droits ouverts/demands = A2. N29 pourrait croiser avec O61 mais A2 = inventaire, A4 = impact financier |
| N42, O53, O54 | A2 |  Non | ALD/AGGIR = A2 |
| E61, N6 | A3 |  Non | Protection juridique = A3 |
| E66, E69, E70 | A3 |  Non | Complexit admin = A3. E63 (proccupations) est dans A4 car c'est un inventaire, pas une mesure de complexit |

>  **Verdict** : Les 7 questions de A4 sont les bonnes. Pas de candidat  migration. L'htrognit (scolaire + pro + budget + accompagnement) est gre par 3 catgories distinctes.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse des 7 questions, des 2 recos legacy (A4_RECO_01 = guidage dmarches, A4_RECO_02 = financements complmentaires) et des donnes idec_actions en legacy (E64/E65/E67 ont des actions IDEC pour certaines rponses) rvle **3 axes cliniques** :

1. **Inclusion scolaire et professionnelle**  E64, E65, E67 dtectent si le proche a accs  une structure adapte et un accompagnement. C'est le cur de A4 : garantir que le proche est inclus dans la socit.
2. **Accompagnement et ressources pour l'aidant**  N43, N5, E63 mesurent les services utiliss, les aides reues, et les proccupations. L'action = complter le recours aux services, orienter vers les aides manquantes. A4_RECO_01 legacy s'inscrit ici.
3. **Viabilit financire**  O61 est la question de clture : les moyens suffisent-ils ? A4_RECO_02 legacy (financements complmentaires via mutuelle) s'inscrit ici.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | A4_CAT_01 | Inclusion scolaire et professionnelle | Assurer l'accs du proche  une structure adapte et accompagenment AESH |  Propos (E64, E65, E67 + actions IDEC legacy) |
| 2 | A4_CAT_02 | Accompagnement et ressources aidant | Complter le recours aux services et orienter vers les aides manquantes | Legacy  (A4_RECO_01) + E63, N43, N5 |
| 3 | A4_CAT_03 | Viabilit financire | valuer et scuriser les moyens financiers | Legacy  (A4_RECO_02) + O61 |

###  Pourquoi 3 catgories et pas 2 ou 4 ?

**Pas 2 (fusionner CAT_02 et CAT_03)** : L'accompagnement aidant (services, aides, proccupations) et la viabilit financire sont complmentaires mais distincts. Un aidant peut tre bien accompagn (N43 rempli) mais en difficult financire (O61 = Non). Ou inversement. Les MT sont diffrentes.

**Pas 4 (sparer scolaire et professionnel)** : E64+E65 (scolaire) et E67 (professionnel) partagent le mme objectif (inclusion du proche) et les mmes acteurs (MDPH, structures adaptes). Proportionnalit (T4) : 3 questions  1 catgorie suffit. Et les rponses de E64 et E65 sont souvent lies (pas d'AESH  pas d'cole).

> **T1  Cohrence inter-MP** :
> - CAT_02 (accompagnement aidant) pourrait doublonner avec A2_CAT_01 (activation droits) ou A3_CAT_01 (accompagnement complexit). La distinction : A2 = quels droits demander, A3 = comment simplifier les dmarches, A4 = quels services utiliser pour tre soutenu.
> - CAT_03 (viabilit financire) pourrait doublonner avec A2_CAT_01 (activer les droits financiers). La distinction : A2 = activer les droits (APA, AAH) ; A4 = valuer si les MOYENS globaux (y compris les droits A2) suffisent.

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

>  **Aucune rgle d'activation en DB pour A4.** Les 2 recos legacy (A4_RECO_01, A4_RECO_02) n'ont pas de \`activation_rule_id\`. Les actions IDEC dans \`recommendations_legacy\` pour E64, E65, O61 existent mais ne sont pas structures en rgles. **TOUT est  crer.**

### Rappel des questions A4 et options dclenchantes

> **E63**   Quelles dmarches vous proccupent le plus ? 
>  Toute option SAUF  Aucune en particulier  = pertinent

> **E64**   L'enfant frquente-t-il une cole/structure adapte ? 
>  ** Trs difficile ** ou ** Non ** = dclenchant

> **E65**   Bnficie-t-il d'un AESH/AVS ? 
>  ** Non ** ou ** Oui, besoin identifi mais pas en place ** = dclenchant

> **E67**   Activit professionnelle/occupationnelle adapte ? 
>  ** Oui mais difficile ** ou ** Non, avec difficults ** = dclenchant

> **N43**   Services d'accompagnement utiliss ? 
>  ** Aucun ** = dclenchant

> **N5**   Aides utilises ? 
>  ** Aucune ** = dclenchant

> **O61**   Les moyens financiers suffisent-ils ? 
>  ** Non ** = dclenchant

---

### Catgorie 1  Inclusion scolaire et professionnelle

####  Standard  \`V2_A4_STD_01\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> E64 = ** Oui, mais avec amnagements ou accompagnement **
> **OU** E67 = ** Oui, mais elle devient difficile  tenir **
>
> **ALORS** : Recommander un suivi de l'inclusion
>
> **Sens clinique** : L'inclusion est effective mais fragile. Les amnagements peuvent ne plus suffire  suivi recommand pour anticiper une dgradation.

####  CCC  \`V2_A4_CCC_01\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> 1. E64 = ** Trs difficile, il manque souvent / structure pas adapte ** ou ** Non, il ne frquente pas **
> **OU**
> 2. E65 = ** Oui, besoin identifi mais pas encore en place **
>
> **ALORS** : Recommander l'action pour l'inclusion  CCC ( 30 jours)
>
> **Sens clinique** : L'enfant n'a pas accs  une structure adapte ou l'AESH identifi n'est pas en place  dscolarisation/exclusion en cours. Urgence administrative  rsoudre sous 30 jours (dossier MDPH, notification).
>
> **Source legacy** : "valuer les difficults rencontres avec la famille" (E64), "Accompagner la constitution d'un dossier MDPH" (E65).

####  Critique  \`V2_A4_CRIT_01\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> 1. E64 = ** Non, il ne frquente pas d'cole ou de structure adapte ** **OU** ** Trs difficile **
> 2. **ET** E65 = ** Non ** (pas d'AESH, pas de besoin identifi)
> 3. **ET** E67 = ** Non, et cela cre des difficults (isolement, repli, perte de repres) **
>
> **ALORS** : Action urgente pour l'inclusion  Critique ( 7 jours)
>
> **Sens clinique** : Triple exclusion : pas de structure scolaire + pas d'accompagnement + pas d'activit avec difficults = le proche est en rupture sociale totale. Risque d'isolement grave, de repli et de dgradation rapide.

---

### Catgorie 2  Accompagnement et ressources aidant

####  Standard  \`V2_A4_STD_02\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> N43 = ** Aucun ** (aucun service d'accompagnement utilis)
> **OU** N5 = ** Aucune ** (aucune aide utilise)
>
> **ALORS** : Recommander l'orientation vers des services d'accompagnement
>
> **Sens clinique** : L'aidant n'utilise aucun service d'aide. Il gre tout seul  besoin d'informer sur les ressources existantes (AS, MDPH, CCAS, rpit, formation).
>
> **Source legacy** : A4_RECO_01 =  Demandez  tre guid dans vos dmarches et  accder aux aides et ressources disponibles .

####  CCC  \`V2_A4_CCC_02\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> 1. N43 = ** Aucun ** **ET** N5 = ** Aucune **
> 2. **ET** E63 contient au moins 2 proccupations (multiselect  2)
>
> **ALORS** : Orienter l'aidant vers des services d'accompagnement  CCC ( 30 jours)
>
> **Sens clinique** : L'aidant n'utilise aucun service, n'a reu aucune aide, et est proccup par plusieurs dmarches simultanment  signe de surcharge non accompagne. Urgence  connecter avec un AS ou CCAS.

####  Critique  \`V2_A4_CRIT_02\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> 1. N43 = ** Aucun ** **ET** N5 = ** Aucune **
> 2. **ET** O61 = ** Non ** (moyens financiers insuffisants)
>
> **ALORS** : Accompagnement urgent de l'aidant  Critique ( 7 jours)
>
> **Sens clinique** : Aucun service utilis + aucune aide reue + moyens financiers insuffisants = l'aidant est en situation de prcarit non accompagne. Triple absence de soutien  risque de rupture.

---

### Catgorie 3  Viabilit financire

####  Standard  \`V2_A4_STD_03\` _(NOUVEAU  bas sur A4_RECO_02)_

> **SI** l'aidant a rpondu :
> O61 = ** Non ** (moyens financiers insuffisants)
>
> **ALORS** : Recommander l'accs  des financements complmentaires
>
> **Sens clinique** : Les moyens financiers ne suffisent pas  besoin d'information sur les aides financires mobilisables (mutuelle, fonds sociaux, aides exceptionnelles).
>
> **Source legacy** : A4_RECO_02 =  Accdez  des financements complmentaires  (acteurs : AS + Mutuelle).

####  CCC  \`V2_A4_CCC_03\` _(NOUVEAU)_

> **SI** l'aidant a rpondu :
> 1. O61 = ** Non ** (moyens financiers insuffisants)
> 2. **ET** N43 = ** Aucun ** (aucun service d'accompagnement)
>
> **ALORS** : Orienter vers des financements et l'AS  CCC ( 30 jours)
>
> **Sens clinique** : Difficults financires + aucun recours aux services  l'aidant est en difficult financire et ne sait pas  qui s'adresser. Urgence  connecter avec l'AS pour un bilan social.

---

###  Dcisions Action 2

| # | Proposition | Dcision | Rgle |
|---|---|---|---|
| 1 |  STD CAT_01 (inclusion fragile) |  Propos | \`V2_A4_STD_01\` |
| 2 |  CCC CAT_01 (exclusion en cours) |  Propos | \`V2_A4_CCC_01\` |
| 3 |  CRIT CAT_01 (triple exclusion) |  Propos | \`V2_A4_CRIT_01\` |
| 4 |  STD CAT_02 (aucun service) |  Propos | \`V2_A4_STD_02\` |
| 5 |  CCC CAT_02 (aucun + proccupations) |  Propos | \`V2_A4_CCC_02\` |
| 6 |  CRIT CAT_02 (aucun + O61 Non) |  Propos | \`V2_A4_CRIT_02\` |
| 7 |  STD CAT_03 (O61 Non) |  Propos | \`V2_A4_STD_03\` |
| 8 |  CCC CAT_03 (O61 Non + N43 Aucun) |  Propos | \`V2_A4_CCC_03\` |

> **Contrle K3** :
> - CAT_01 :  OK (STD + CCC + CRIT = 3 niveaux)
> - CAT_02 :  OK (STD + CCC + CRIT = 3 niveaux)
> - CAT_03 :  2 niveaux seulement (STD + CCC). **Pas de Critique.** Le Critique pour O61 = Non est couvert par CAT_02 CRIT (O61 + N43 = Aucun). Un Critique CAT_03 pur ncessiterait un croisement inter-MP (ex. O61 Non + E62 Aucun de A2) qui serait trop complexe.
>
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** :  Aucune micro-tche pour les questions A4 en DB. Mais plusieurs \`idec_actions\` dans \`recommendations_legacy\` pour E64, E65, O61. Actions IDEC legacy :
> - E64 rponse 3 (trs difficile)   valuer les difficults rencontres avec la famille 
> - E64 rponse 4 (non)   Informer la famille sur les dmarches possibles 
> - E65 rponse 3 (besoin non en place)   Accompagner la constitution d'un dossier MDPH 
> - O61 rponse Non   Rappeler  l'aidant de contacter l'AS  +  Informer sur financements via mutuelle 

### CAT_01  Inclusion scolaire et professionnelle

> Legacy : actions IDEC pour E64/E65. Propositions : **4 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A4_01 | valuer les freins  l'inclusion du proche (scolaire, structure, activit) | ORGA | IDEC |  | Legacy  (E64 action IDEC) |
| MT_V2_A4_02 | Informer sur les dispositifs d'inclusion (MDPH, AESH, ESAT, accueil de jour) | INFO | IDEC |  | Legacy  (E64 action IDEC) |
| MT_V2_A4_03 | Accompagner la constitution d'un dossier MDPH pour l'inclusion | STRUC | IDEC/AS |  | Legacy  (E65 action IDEC) |
| MT_V2_A4_04 | Orienter vers la structure adapte identifie | SEC | IDEC |  | NOUVEAU  |

### CAT_02  Accompagnement et ressources aidant

> Legacy : A4_RECO_01. Propositions : **4 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A4_05 | Inventorier les services d'accompagnement mobiliss et manquants | ORGA | IDEC |  | NOUVEAU  |
| MT_V2_A4_06 | Informer sur les services disponibles (AS, CCAS, PFR, EAS, associations) | INFO | IDEC |  | Legacy  (A4_RECO_01) |
| MT_V2_A4_07 | Structurer un plan d'accompagnement individuel | STRUC | IDEC |  | NOUVEAU  |
| MT_V2_A4_08 | Orienter vers l'AS ou le CLIC pour un suivi coordonn | SEC | IDEC |  | Legacy  (A4_RECO_01 : "Orienter vers l'AS ou le CLIC") |

### CAT_03  Viabilit financire

> Legacy : A4_RECO_02. Propositions : **3 MT**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V2_A4_09 | valuer les besoins financiers non couverts | ORGA | IDEC |  | NOUVEAU  |
| MT_V2_A4_10 | Informer sur les financements complmentaires (mutuelle, fonds solidarit, aides exceptionnelles) | INFO | IDEC |  | Legacy  (A4_RECO_02) |
| MT_V2_A4_11 | Orienter vers l'AS pour un bilan social et financier | SEC | AS |  | Legacy  (O61 action IDEC) |

>  **Observation CAT_03** : Pas de MT STRUC. La viabilit financire ne produit pas un "document" (comme un dossier MDPH) mais un "aiguillage" vers les bons professionnels. L'AS ralise le bilan social  c'est elle qui structure. L'IDEC diagnostique et oriente.

###  Dcisions Action 3

| # | Proposition | Dcision | MT cres |
|---|---|---|---|
| 1 | 4 MT pour CAT_01 (inclusion) |  Propos | \`MT_V2_A4_01\`  \`MT_V2_A4_04\` |
| 2 | 4 MT pour CAT_02 (accompagnement) |  Propos | \`MT_V2_A4_05\`  \`MT_V2_A4_08\` |
| 3 | 3 MT pour CAT_03 (viabilit financire) |  Propos | \`MT_V2_A4_09\`  \`MT_V2_A4_11\` |

> **Condition ASR par catgorie** :
> - CAT_01 :  2 (STRUC + SEC)   ASR complte
> - CAT_02 :  2 (STRUC + SEC)   ASR complte
> - CAT_03 :  1 (SEC)  ASR partielle (pas de STRUC  justifi ci-dessus)
>
> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

### Tableau consolid des MT de A4 (final)

| MT_ID | Libell | Type | Acteur | Domaine | / | CAT | Source |
|---|---|---|---|---|---|---|---|
| MT_V2_A4_01 | valuer freins inclusion | ORGA | IDEC |  M-S |  | CAT_01 | Legacy  |
| MT_V2_A4_02 | Informer dispositifs inclusion | INFO | IDEC |  M-S |  | CAT_01 | Legacy  |
| MT_V2_A4_03 | Dossier MDPH inclusion | STRUC | IDEC/AS |  M-S |  | CAT_01 | Legacy  |
| MT_V2_A4_04 | Orienter structure adapte | SEC | IDEC |  M-S |  | CAT_01 | NOUVEAU  |
| MT_V2_A4_05 | Inventaire services mobiliss/manquants | ORGA | IDEC |  M-S |  | CAT_02 | NOUVEAU  |
| MT_V2_A4_06 | Informer services disponibles | INFO | IDEC |  M-S |  | CAT_02 | Legacy  |
| MT_V2_A4_07 | Plan d'accompagnement individuel | STRUC | IDEC |  M-S |  | CAT_02 | NOUVEAU  |
| MT_V2_A4_08 | Orienter AS/CLIC suivi coordonn | SEC | IDEC |  M-S |  | CAT_02 | Legacy  |
| MT_V2_A4_09 | valuer besoins financiers | ORGA | IDEC |  M-S |  | CAT_03 | NOUVEAU  |
| MT_V2_A4_10 | Informer financements complmentaires | INFO | IDEC |  M-S |  | CAT_03 | Legacy  |
| MT_V2_A4_11 | Orienter AS bilan social | SEC | AS |  M-S |  | CAT_03 | Legacy  |

> **Rsum** :  
> - Total MT : **11** (6 legacy adaptes + 5 nouvelles)  
> - 100%  Mdico-social  
> - Contributives () : **5**  STRUC: 2, SEC: 3  
> - Non-contributives () : **6**  INFO: 3, ORGA: 3

###  Propositions d'amlioration

| # | Proposition | Justification |
|---|---|---|
| 1 | **MT_V2_A4_03  acteur principal AS** | Le dossier MDPH est une expertise AS. L'IDEC repre, l'AS constitue. |
| 2 | **MT_V2_A4_02  inclure ESAT et accueil de jour dans les dispositifs** | E67 mesure l'activit pro/occupationnelle  ESAT et accueil de jour sont les structures cls pour les adultes. |
| 3 | **Ajouter STRUC  CAT_03** |  Constituer un dossier de demande d'aide financire exceptionnelle   rend l'ASR complte pour CAT_03. |

> **Dcision Dr. Monka** :  Valid |  Modifications

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base

#### Wording des 11 MT (IDEC + Utilisateur)

| MT_ID | CAT | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|
| MT_V2_A4_01 | 01 | valuer avec la famille les freins  l'inclusion du proche (accs cole/structure, AESH, activit adapte) | Identifiez ce qui empche votre proche d'accder  une structure ou activit adapte |  |
| MT_V2_A4_02 | 01 | Informer sur les dispositifs d'inclusion : MDPH, notification AESH/AVS, ESAT, accueil de jour | Renseignez-vous sur les dispositifs d'inclusion adapts (MDPH, AESH, structures) |  |
| MT_V2_A4_03 | 01 | Accompagner la constitution d'un dossier MDPH pour notification d'inclusion | Prparez un dossier MDPH pour obtenir l'accompagnement adapt |  |
| MT_V2_A4_04 | 01 | Organiser l'orientation vers la structure adapte identifie (cole, ESAT, accueil de jour) | Prenez contact avec la structure adapte identifie pour votre proche |  |
| MT_V2_A4_05 | 02 | Inventorier les services d'accompagnement dj utiliss et identifier les manques | Faites le point sur les services qui vous aident et ceux qui pourraient vous tre utiles |  |
| MT_V2_A4_06 | 02 | Informer sur les services disponibles localement : AS, CCAS, PFR, EAS, associations de patients | Renseignez-vous sur les services d'aide disponibles prs de chez vous |  |
| MT_V2_A4_07 | 02 | Structurer un plan d'accompagnement individuel intgrant les services identifis | Mettez en place un plan d'accompagnement avec les services adapts  votre situation |  |
| MT_V2_A4_08 | 02 | Orienter vers l'AS du secteur ou le CLIC pour un suivi coordonn des aides | Prenez contact avec une assistante sociale pour coordonner votre accompagnement |  |
| MT_V2_A4_09 | 03 | valuer les besoins financiers non couverts et identifier les postes de dpense critiques | Identifiez les dpenses lies  l'aide que vous ne pouvez plus assumer |  |
| MT_V2_A4_10 | 03 | Informer sur les financements complmentaires : mutuelle, fonds de solidarit, aides exceptionnelles CPAM/CAF | Renseignez-vous sur les aides financires complmentaires disponibles |  |
| MT_V2_A4_11 | 03 | Orienter vers l'AS pour raliser un bilan social complet et identifier les aides financires mobilisables | Prenez rendez-vous avec une assistante sociale pour un bilan de votre situation financire |  |

#### Wording des 3 Recos de base

| CAT | Reco Utilisateur | Reco IDEC | / |
|---|---|---|---|
| CAT_01 | Inclusion de votre proche | Accompagner l'accs  une structure adapte |  |
| CAT_02 | Aide et accompagnement pour vous | Orienter vers les services d'accompagnement |  |
| CAT_03 | Financements complmentaires | Scuriser la situation financire |  |

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections

---

### Phase 2  Versioning par criticit

#### CAT_01  Inclusion scolaire et professionnelle

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Suivi de l'inclusion conseill | Surveiller la fragilit de l'inclusion |
|  CCC ( 30j) | Inclusion  rtablir | Agir pour l'inclusion sous 30 jours |
|  Critique ( 7j) | Rupture d'inclusion  action urgente | Intervention urgente pour l'inclusion |

| MT_ID |  Standard |  CCC |  Critique |
|---|---|---|---|
| MT_V2_A4_01 | Vrifiez que l'inclusion reste adapte | valuez rapidement les freins | Identifiez ds maintenant les blocages |
| MT_V2_A4_03 | Prparez un dossier MDPH si besoin | Constituez le dossier MDPH dans le mois | Constituez le dossier MDPH cette semaine |

#### CAT_02  Accompagnement aidant

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Services d'aide  explorer | Informer sur les services disponibles |
|  CCC ( 30j) | Accompagnement recommand | Organiser l'accompagnement sous 30 jours |
|  Critique ( 7j) | Accompagnement urgent | Connecter avec l'AS sous 7 jours |

| MT_ID |  Standard |  CCC |  Critique |
|---|---|---|---|
| MT_V2_A4_08 | Contactez une AS si besoin | Contactez une AS dans le mois | Contactez une AS cette semaine |

#### CAT_03  Viabilit financire

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Financements complmentaires  explorer | Informer sur les aides financires |
|  CCC ( 30j) | Aide financire recommande | Orienter vers l'AS pour bilan financier sous 30 jours |

| MT_ID |  Standard |  CCC |
|---|---|---|
| MT_V2_A4_11 | Contactez une AS pour un bilan | Contactez une AS dans le mois pour un bilan urgent |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP A4 n'est PAS activ (inclusion effective, aidant bien accompagn, moyens financiers suffisants)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  La situation d'inclusion et les moyens financiers semblent stables. Restez vigilant aux changements de situation (fin de droits, volution des besoins).  |  Situation d'inclusion et financire stable. Vrifier les renouvellements MDPH, les amnagements scolaires/pro et les droits financiers  chaque suivi.  |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| _(NOUVELLE)_ | Vrifier le renouvellement des notifications MDPH | ORGA | Vrifier les dates de renouvellement MDPH (AESH, orientation, AAH) | Pensez  vrifier les dates de renouvellement de vos notifications MDPH |
| _(NOUVELLE)_ | Anticiper les transitions de vie (cole  collge, emploi) | INFO | Prparer l'aidant aux transitions de vie qui ncessitent de nouvelles dmarches | Anticipez les grands changements (passage au collge, recherche d'emploi) |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question  1 rgle d'activation |  |  | E63: via CCC_02 (2 proccupations), E64: , E65: , E67: , N43: , N5: , O61:  |
| 2 | Chaque rgle  1 version de reco |  |  | 8 rgles  toutes lies |
| 3 | Chaque catgorie  MT assignes |  |  | CAT_01: 4 MT, CAT_02: 4 MT, CAT_03: 3 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  |  | CAT_01: 3, CAT_02: 3, CAT_03: 2 |
| 5 | Aucune MT orpheline |  |  | 11 MT rattaches |
| 6 | Reco prvention |  |  | Propose |
| 7 | Wording reco = conseil, MT = verbe |  |  | Phase 1 + Phase 2 proposes |
| 8 | Sens clinique document |  |  | 8 rgles documentes |

> **Score** : **4/8 valids**, 3 en attente validation, 1 partiel (E63 indirect)

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories | 2 (guidage + financements) | **3** (inclusion, accompagnement, viabilit financire) |
| Rgles d'activation | 0 | **8** (:3, :3, :2)  toutes proposes |
| MT totales | 0 | **11** (6 legacy adaptes + 5 nouvelles) |
| MT contributives | 0 | **5** (STRUC:2, SEC:3) |
| Domaine  /  | - | 0  / 11  |
| ASR |  Vide | CAT_01  + CAT_02  + CAT_03 partielle |
| Reco prvention |  |  Propose |
| Checks OK | 0/8 | 4/8 ( 8/8 aprs validations) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories (inclusion + accompagnement + budget) |  Propos |
| 2 | 8 rgles d'activation cres from scratch (aucune legacy) |  Propos |
| 3 | 11 MT cres (plus gros MP de V2) |  Propos |
| 4 | CAT_03 sans CRIT (couvert par CAT_02 CRIT) |  Observation |
| 5 | CAT_03 sans STRUC (AS fait le bilan  SEC suffit) |  Observation |
| 6 | E63 dclencheur indirect (2 proccupations) |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider les 3 catgories |  Haute |
| 2 | Valider les 8 rgles (toutes nouvelles) |  Haute |
| 3 | Dcider si CAT_03 a besoin d'un CRIT propre |  Moyenne |
| 4 | Dcider si STRUC ajout  CAT_03 (dossier aide financire) |  Moyenne |
| 5 | Valider wording Phase 1 + Phase 2 |  Haute |
| 6 | Valider reco prvention |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Qb=`#  Fiche de Validation MP  S1  Charge, fatigue et risque d'puisement

> **Vulnrabilit** : V3  Sant de l'Aidant  
> **ASR** :  Reprer la surcharge et prvenir l'puisement   
> **Signature A** : S1-A  Relais rduisant la charge  
> **Signature B** : S1-B  Organisation allgeant le quotidien  
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## CONTEXTE  Big Picture V3

### Rpartition des 26 questions V3 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **S1** | Charge, fatigue et risque d'puisement | 9 | E7, E10, E11, E14, N8, O29, O32, O33, O50 | Surcharge physique et psychologique de l'aidant, risque d'puisement |
| **S2** | Inquitudes pour la scurit | 4 | E8, E9, E12, E13 | Isolement motionnel, temps pour soi, inquitudes scuritaires |
| **S3** | Sant physique et renoncement aux soins | 9 | E18, O37, O38, O39, O40, O41, O42, O43, O44 | Suivi mdical, accs aux soins, tat de sant peru |
| **S4** | Hygine de vie (activit et sommeil) | 4 | E15, E16, E17, E19 | Accs aux soins pour soi, activit physique, sommeil |

> **S1 se concentre sur la CHARGE ET L'PUISEMENT** (la consquence de l'aidance sur la sant globale de l'aidant) alors que S2 parle des INQUITUDES SCURITAIRES (risques pour le proche et isolement motionnel), S3 de la SANT PHYSIQUE OBJECTIVE (suivi mdical, renoncement aux soins), et S4 de l'HYGINE DE VIE (accs aux RDV, activit, sommeil). La frontire est clinique : S1 = "est-ce que la charge m'crase ?", S2 = "est-ce que je suis seule et inquiete ?", S3 = "est-ce que je me soigne encore ?", S4 = "est-ce que mon mode de vie me prserve ?".

---

## 0. DONNES FIGES  Questions rattaches  S1

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E7 |  quel point vous sentez-vous puise par votre rle d'aidant actuellement | etat | Pas du tout fatigue / Un peu fatigue / Trs fatigue / puise ou au bord de craquer |
| 2 | E10 | Sur le plan moral (stress, inquitude), o vous situez-vous en ce moment ? | etat | a va globalement / Je suis parfois tendue ou inquiette / Je suis souvent tendue ou inquiette / Je me sens dborde ou au bord de craquer |
| 3 | E11 | Si rien ne change, pensez-vous pouvoir continuer  vous occuper de votre proche dans les 6 prochains mois ? | etat | Oui, sans difficult particulire / Oui, mais ce sera difficile / Je ne suis pas sre / Non, je risque de ne plus y arriver |
| 4 | E14 | Et au cours des 30 derniers jours ? (jours d'arrt) | facteur | Moins de 3 jours / Entre 4 et 7 jours / Plus de 7 jours |
| 5 | N8 | Votre rle d'aidant vous a-t-il conduit  tre en arrt de travail (maladie) lors des 12 derniers mois ? | facteur | Non / J'ai d m'arrter moins de 5 jours / J'ai d m'arrter entre 5 jours et 1 mois / J'ai d m'arrter entre 1 mois et 3 mois / J'ai d m'arrter entre 3 mois et 6 mois / J'ai d m'arrter plus de 6 mois |
| 6 | O29 | Vous occuper de la personne aide a-t-il un retentissement sur votre sant (physique et/ou psychique) ? | etat | Pas du tout / Un peu / Oui |
| 7 | O32 | Souhaitez-vous tre davantage aid(e) pour vous en occuper ? | etat | Pas du tout / Un peu / Oui |
| 8 | O33 | Ressentez-vous une charge en vous occupant de cette personne ? | etat | Pas du tout / Un peu / Oui |
| 9 | O50 | Combien de temps lui consacrez-vous ? | facteur | Je n'ai malheureusement pas le temps / Entre 1h et 5h par semaine / Entre 6h et 10h par semaine / Plus de 10h par semaine |

> Total : 9 questions rattaches  S1

###  Pourquoi ces 9 questions ?

**E7** et **O33** forment un duo qui mesure l'puisement et la charge perue :
- E7 = intensit de la fatigue ressentie (gradient 4 niveaux)
- O33 = perception de la charge globale (gradient 3 niveaux)

 Elles sont dans S1 et pas S2 car elles mesurent l'TAT D'PUISEMENT (consquence), pas l'ISOLEMENT MOTIONNEL (S2) ni la SANT PHYSIQUE (S3).

**E10** mesure le moral (stress, inquitude). C'est un marqueur psychologique qui s'inscrit dans la trilogie charge-fatigue-moral  S1.

**E11** mesure la capacit de projection  6 mois. C'est un indicateur prdictif de rupture du rle d'aidant  lment central de S1 "prvenir l'puisement".

**O29** mesure le retentissement de l'aidance sur la sant de l'aidant. C'est un auto-diagnostic global  S1 (impact global) et pas S3 (qui cible le suivi mdical objectif).

**O32** mesure le souhait d'tre davantage aid. C'est un signal d'appel ("j'ai besoin d'aide")  S1 car c'est un marqueur de surcharge, pas un besoin de scurisation (S2).

**E14** et **N8** forment un duo qui mesure l'impact professionnel :
- N8 = arrt de travail sur 12 mois (fait pass)
- E14 = jours d'arrt sur 30 jours (contexte conditionnel si N8  Non)

**O50** mesure le temps d'aide hebdomadaire consacr au proche. C'est un facteur quantitatif de charge  S1.

###  Analyse des 17 autres questions V3  Pourraient-elles appartenir  S1 ?

> Les questions et leurs options sont **figes**. L'objectif est uniquement de vrifier si l'affiliation actuelle est correcte.

#### Questions S2 (Inquitudes pour la scurit)

| Question | Libell | Pertinence S1 ? | Raisonnement |
|---|---|---|---|
| **E8** | Sentiment d'tre seul(e) motionnellement |  Non | Mesure l'**isolement motionnel**. C'est un facteur de risque psycho-social  S2. S1 mesure la charge, pas la solitude. |
| **E9** | Temps pour soi dans la semaine |  **Dbattable** | L'absence de temps pour soi pourrait contribuer  l'puisement (S1). **Mais** : E9 est dans S2 car elle mesure un facteur de rcupration li  l'isolement, pas la charge elle-mme. L'aidant peut tre puis (S1) tout en ayant du temps pour soi. |
| **E12** | Inquiet que le proche se fasse du mal |  Non | Concerne la SCURIT DU PROCHE, pas l'tat de charge de l'aidant  S2 pur.  **Cependant** : E12 active V3_S1_CRIT_01 (rgle critique de S1). C'est un cas de dclenchement cross-MP : E12  appartient   S2 mais peut activer S1 via rgle critique. |
| **E13** | Inquiet que le proche mette autrui en danger |  Non | Mme logique que E12  S2 pur.  E13 active V3_S1_CRIT_02 (cross-MP). |

>  **Verdict S2** : Aucune question S2 ne devrait tre transfre dans S1. **E12** et **E13** activent S1 via des rgles critiques cross-MP (urgence vitale immdiate), mais restent rataches  S2 thmatiquement. **E9** est dbattable mais le choix de S2 est justifi (rcupration  charge).

#### Questions S3 (Sant physique et renoncement aux soins)

| Question | Libell | Pertinence S1 ? | Raisonnement |
|---|---|---|---|
| **E18** | Qualit du sommeil |  **Dbattable** | Le sommeil est un marqueur d'puisement  pourrait tre S1. **Mais** : E18 est dans S3 car elle mesure un paramtre de SANT PHYSIQUE objective (qualit du repos). S1 mesure la charge subjective. |
| **O37** | Mdecin traitant ? |  Non | Accs aux soins = S3 pur. |
| **O38** | Spcialistes qui vous suivent ? |  Non | Suivi mdical = S3 pur. |
| **O39-O44** | Dtails spcialistes, RDV, maladies, mdicaments, sant perue |  Non | Suivi mdical dtaill = S3 pur. |

>  **Verdict S3** : Aucune question S3 ne devrait tre dans S1. **E18** est le seul candidat dbattable (sommeil li  l'puisement), mais le choix S3 est justifi car E18 mesure un paramtre physiologique, pas une perception de charge.

#### Questions S4 (Hygine de vie)

| Question | Libell | Pertinence S1 ? | Raisonnement |
|---|---|---|---|
| **E15** | Difficults  obtenir des RDV mdicaux |  Non | Accs aux soins pour soi = S4 pur. Pas un marqueur de charge. |
| **E16** | Vos propres RDV mdicaux depuis que vous tes aidant |  Non | Comportement face aux soins = S4 pur. |
| **E17** | Activit physique rgulire |  Non | Hygine de vie = S4 pur. |
| **E19** | Principaux soucis de sant actuels |  Non | tat de sant dclar = S4 pur. |

>  **Verdict S4** : Aucune question S4 ne devrait tre dans S1. S4 concerne l'hygine de vie et l'accs aux soins de l'aidant, pas la charge d'aidance.

#### Question transversale (trigger)

| Question | Libell | Pertinence S1 ? | Raisonnement |
|---|---|---|---|
| **O49** | Depuis combien de temps l'aidez-vous ? |  **Cross-MP** | O49 n'est mappe  aucun MP en DB (trigger transversal). Cependant, elle active V3_S1_STD_01 : dure d'aidance > 2 ans  risque d'puisement chronique. La question reste transversale mais son impact principal est sur S1. |

###  Synthse affiliation

| Question | MP actuel | Pertinence S1 ? | Confiance |
|---|---|---|---|
| E8, E9, E12, E13 | S2 |  Non (E9 dbattable) |  Haute |
| E18, O37-O44 | S3 |  Non (E18 dbattable) |  Haute |
| E15, E16, E17, E19 | S4 |  Non |  Haute |
| O49 | Trigger transversal |  Cross-MP (active S1) |  Correcte |

> **Conclusion** : Les 9 questions de S1 sont les bonnes. **O49** (dure d'aidance) est un trigger transversal qui active S1 mais n'est pas "proprit" de S1. **E12** et **E13** (S2) activent S1 via des rgles critiques cross-MP (urgence vitale). **E9** (S2) et **E18** (S3) sont les seuls candidats dbattables  les choix actuels sont cliniquement justifis.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse des questions et des recommandations legacy montre 3 axes cliniques distincts :

1. **valuation et soutien psychologique**  E7, E10, O29, O33 mesurent l'tat d'puisement. Les recommandations legacy S1_RECO_01 et S1_RECO_04 couvrent cet axe (discussion avec IDEC, plateforme de rpit).
2. **Relais et aide  domicile**  E11, E14, N8 mesurent la capacit  tenir et l'impact professionnel. La recommandation legacy S1_RECO_02 couvre cet axe (service d'aide  domicile = SAD).
3. **Accs aux aides sociales**  O32 mesure le besoin d'aide. La recommandation legacy S1_RECO_03 couvre cet axe (contacter l'AS).

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | S1_CAT_01 | valuation et soutien face  l'puisement | valuer l'tat d'puisement et proposer un soutien psychologique | Legacy  (S1_RECO_01, S1_RECO_04) |
| 2 | S1_CAT_02 | Mise en place de relais (aide  domicile) | Organiser un relais concret via service d'aide  domicile | Legacy  (S1_RECO_02) |
| 3 | S1_CAT_03 | Accs aux aides et ajustement | Orienter vers les aides sociales pour ajuster les demandes | Legacy  (S1_RECO_03) |

###  Pourquoi 3 catgories et pas 2 ou 4 ?

**Pas 2** : L'valuation psychologique (CAT_01) et la mise en place de relais (CAT_02) sont cliniquement distincts. Un aidant peut tre puis sans avoir besoin d'un SAD (il a peut-tre besoin d'un soutien psychologique seul).  les deux actions sont indpendantes.

**Pas 4** : Ajouter une catgorie "Rpit" ddie serait redondant avec CAT_01 (la plateforme de rpit fait partie du soutien face  l'puisement). Le rpit est une modalit d'action de CAT_01, pas un axe clinique distinct.

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

Les rgles legacy V3 sont entirement certifies (100% legacy). S1 a 7 rgles d'activation rparties sur 3 niveaux : 2 Critiques (E12, E13 = risque vital), 1 CCC (E7+E11 = rupture imminente), 4 Standard (O49, N8, E14, O32).

>  **Observation cross-MP** : Les rgles critiques V3_S1_CRIT_01 (E12) et V3_S1_CRIT_02 (E13) utilisent des questions qui appartiennent  **S2**, pas  S1. C'est un cas de dclenchement cross-MP : l'inquitude scuritaire (S2) active l'urgence d'puisement (S1) car la charge motionnelle lie aux risques est un facteur majeur d'puisement.

### Rappel des questions S1 et de leurs options dclenchantes

> **E7**    quel point vous sentez-vous puise par votre rle d'aidant ? 
> -  Pas du tout fatigue /  Un peu fatigue /  **Trs fatigue** (CCC) /  **puise / au bord de craquer** (CCC)

> **E11**   Si rien ne change, pensez-vous pouvoir continuer dans les 6 prochains mois ? 
> -  Oui, sans difficult /  Oui, mais ce sera difficile /  **Je ne suis pas sre** (CCC) /  **Non, je risque de ne plus y arriver** (CCC)

> **E12**   tes-vous inquiette  l'ide que votre proche puisse se faire du mal ?  _(S2  cross-MP)_
> -  Non /  Parfois, selon les priodes /  **Oui, souvent** (Critique)

> **E13**   tes-vous inquiette  l'ide que votre proche puisse mettre d'autres en danger ?  _(S2  cross-MP)_
> -  Non /  Parfois /  **Oui** (Critique)

> **O49**   Depuis combien de temps l'aidez-vous ?  _(trigger transversal)_
> -  Moins de 6 mois /  Entre 6 mois et 2 ans /  **Depuis plus de 2 ans** (Standard)

> **N8**   Votre rle d'aidant vous a-t-il conduit  tre en arrt de travail ? 
> -  Non /  **Tout sauf  Non ** (Standard)

> **E14**   Au cours des 30 derniers jours ? (jours d'arrt) 
> -  Moins de 3 jours /  **Entre 4 et 7 jours** (Standard) /  **Plus de 7 jours** (Standard)

> **O32**   Souhaitez-vous tre davantage aid(e) pour vous en occuper ? 
> -  Pas du tout /  Un peu /  **Oui** (Standard)

---

### Catgorie 1  valuation et soutien face  l'puisement

####  Critique  \`V3_S1_CRIT_01\` + \`V3_S1_CRIT_02\`

> **SI** E12 =  Oui, souvent   **V3_S1_CRIT_01**
> Risque pour la personne aide  risque vital immdiat. Source : Legacy 
>
> **SI** E13 =  Oui   **V3_S1_CRIT_02**
> Risque pour autrui  risque vital immdiat. Source : Legacy 

####  CCC  \`V3_S1_CCC_01\`

> **SI** E7  {Trs fatigue, puise / au bord de craquer} **ET** E11  {Non, je risque de ne plus y arriver, Je ne suis pas sre}
>
> **ALORS** : valuation urgente et soutien face  l'puisement ( 30 jours)
>
> **Sens clinique** : Risque de rupture imminente du rle d'aidant. L'aidant est trs fatigu ET incertain de pouvoir continuer  ncessite un soutien rapide. Source : Legacy 

####  Standard  \`V3_S1_STD_01\` + \`V3_S1_STD_04\`

> **SI** O49 =  Depuis plus de 2 ans   **V3_S1_STD_01**
> Dure d'aidance > 2 ans  risque d'puisement chronique. Source : Legacy 
>
> **SI** O32 =  Oui   **V3_S1_STD_04**
> Souhait d'tre davantage aid  signal de surcharge. Source : Legacy 

---

### Catgorie 2  Mise en place de relais (aide  domicile)

####  CCC  _(mme CCC_01 que CAT_01  double activation)_

> Le CCC V3_S1_CCC_01 active aussi CAT_02. Quand l'aidant est en rupture imminente, le relais par SAD est une rponse concrte.

####  Standard  \`V3_S1_STD_02\` + \`V3_S1_STD_03\`

> **SI** N8   Non   **V3_S1_STD_02**
> Arrt de travail li au rle d'aidant  ncessit de relais. Source : Legacy 
>
> **SI** E14  {Entre 4 et 7 jours, Plus de 7 jours}  **V3_S1_STD_03**
> Jours d'arrt frquents sur 30 jours  incapacit  tenir sans relais. Source : Legacy 

---

### Catgorie 3  Accs aux aides et ajustement

####  Standard  \`V3_S1_STD_02\`

> Le mme signal N8 (arrt de travail) justifie aussi l'orientation vers les aides sociales pour ajustement des aides existantes.

---

###  Dcisions Action 2

| # | Rgle | Niveau | Catgorie(s) | Source |
|---|---|---|---|---|
| 1 | V3_S1_CRIT_01 (E12 = Oui) |  Critique | CAT_01 | Legacy  |
| 2 | V3_S1_CRIT_02 (E13 = Oui) |  Critique | CAT_01 | Legacy  |
| 3 | V3_S1_CCC_01 (E7 fatigue + E11 incertitude) |  CCC | CAT_01, CAT_02 | Legacy  |
| 4 | V3_S1_STD_01 (O49 > 2 ans) |  Standard | CAT_01 | Legacy  |
| 5 | V3_S1_STD_02 (N8  Non) |  Standard | CAT_02, CAT_03 | Legacy  |
| 6 | V3_S1_STD_03 (E14  4 jours) |  Standard | CAT_02 | Legacy  |
| 7 | V3_S1_STD_04 (O32 = Oui) |  Standard | CAT_01 | Legacy  |

> **Contrle K3** :
> - CAT_01 :  3 niveaux (Critique + CCC + Standard)
> - CAT_02 :  2 niveaux (CCC + Standard)
> - CAT_03 :  1 seul niveau (Standard)  pas de CCC ni Critique pour les aides sociales
>
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** : 4 MT legacy existent en DB pour S1 (1 contributive + 3 non-contributives). Les libells et types sont 100% legacy. Les acteurs/domaines sont proposs par l'IA .

### CAT_01  valuation et soutien face  l'puisement

> Legacy : MT_V3_004, MT_V3_032, MT_V3_014

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V3_004 | Proposer un change avec l'aidant pour valuer le vcu motionnel | SEC | IDEC  |  | Legacy  |
| MT_V3_032 | Contacter l'aidant pour valuer la charge mentale | INFO | IDEC  |  | Legacy  |
| MT_V3_014 | changer sur les difficults d'organisation | ORGA | IDEC  |  | Legacy  |

####  Analyse des MT  CAT_01

**Chane d'action** : INFO (MT_V3_032 : valuer)  SEC (MT_V3_004 : soutien)  ORGA (MT_V3_014 : organiser). La squence est cohrente : on value d'abord, puis on soutient, puis on organise.

**Condition de validation** : 1 MT contributive (MT_V3_004 SEC)  ASR partielle via CAT_01.

### CAT_02  Mise en place de relais (aide  domicile)

>  **Aucune MT legacy ddie  CAT_02 dans S1.** La reco S1_RECO_02 (SAD) existe mais n'a pas de MT spcifique dans S1. Les MT du SAD sont dans S2 (MT_V3_005).

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| _(Aucune MT legacy)_ | | | | | |

>  **Observation** : S1_RECO_02 (solliciter un SAD) est une reco CCC qui existe en DB. L'action IDEC associe est "Confirmer avec l'aidant le nombre d'heures envisages pour l'intervention du SAD". Cependant, aucune MT formelle n'est rattache  S1 pour cette action  les MT SAD sont dans S2.  valuer si des MT CAT_02 doivent tre cres pour S1.

### CAT_03  Accs aux aides et ajustement

> Legacy : MT_V3_031

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V3_031 | Rappeler  l'aidant de contacter l'AS | INFO | IDEC  |  | Legacy  |

####  Analyse des MT  CAT_03

**Observation** : 1 seule MT, non-contributive (INFO). L'aidant est orient vers l'AS mais aucune MT de scurisation (SEC) ni de structuration (STRUC) n'existe.

---

###  Synthse MT  S1

| Mtrique | Valeur |
|---|---|
| MT totales legacy | **4** |
| MT contributives () | **1** (SEC : MT_V3_004) |
| MT non-contributives () | **3** (INFO : MT_V3_031, MT_V3_032 / ORGA : MT_V3_014) |
| ASR validation | 1 MT contributive  100% = **ASR valide**  |

> **Dcision Dr. Monka** :  Valid |  Ajout MT pour CAT_02 |  Modifications

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs legacy** : \`IDEC\` (seul acteur prsent dans les MT S1)
> **Domaines proposs** :  Mdico-social 

### Tableau consolid des MT de S1 (tat actuel)

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Reco | Source |
|---|---|---|---|---|---|---|---|---|
| MT_V3_004 | Proposer un change pour valuer le vcu motionnel | SEC | IDEC  |  Mdico-social  |  | CAT_01 | S1_RECO_01 | Legacy  |
| MT_V3_032 | Contacter l'aidant pour valuer la charge mentale | INFO | IDEC  |  Mdico-social  |  | CAT_01 | S1_RECO_01 | Legacy  |
| MT_V3_014 | changer sur les difficults d'organisation | ORGA | IDEC  |  Mdico-social  |  | CAT_01 | S1_RECO_01 | Legacy  |
| MT_V3_031 | Rappeler  l'aidant de contacter l'AS | INFO | IDEC  |  Mdico-social  |  | CAT_03 | S1_RECO_03 | Legacy  |

> **Rsum** :
> - Total MT : **4** (toutes legacy)
> - Domaine  Mdical : **0 MT** / Domaine  Mdico-social : **4 MT**
> - Contributives () : **1**  SEC : 1
> - Non-contributives () : **3**  INFO : 2, ORGA : 1

###  Observations

>  **Pas de MT mdicale (MED)** : S1 est un MP mdico-social. L'puisement de l'aidant ne ncessite pas d'acte mdical direct en premire intention. L'IDEC value et oriente. C'est cohrent avec le primtre.
>
>  **Acteur unique IDEC** : Les 4 MT sont assignes  l'IDEC. Aucun autre acteur n'est mobilis (pas d'AS, pas de mdecin traitant, pas de psychologue en MT formelle). Le volet "rpit" (S1_RECO_04) n'a pas de MT associe.

###  Propositions d'amlioration

| # | Proposition | Justification |
|---|---|---|
| 1 | **MT_V3_032  acteur Aidant (autonome)** | L'aidant pourrait identifier sa propre charge mentale via un outil d'auto-valuation. L'IDEC facilite mais l'aidant peut amorcer. |
| 2 | **Ajouter des MT pour S1_RECO_04 (rpit)** | La reco legacy "Contactez la plateforme de rpit" n'a aucune MT associe. Proposition : 1 MT ORGA "Rechercher la plateforme de rpit du territoire" + 1 MT SEC "Mettre en lien avec la plateforme". |

> **Dcision Dr. Monka** :  Valid |  Modifier les acteurs |  Ajouter MT rpit

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

> **Rgle de wording** :
> - **Reco** = conseil succinct. Pas une phrase, pas un verbe d'action. Un label court qui dit "quoi" sans dtailler "comment".
> - **MT** = action concrte. Verbe d'action des deux cts.

#### Wording des 4 Recos legacy

| Reco ID | Niveau | Texte utilisateur | Actions IDEC | Source |
|---|---|---|---|---|
| S1_RECO_01 |  Standard | Discutez des difficults d'tre aidant avec l'IDEC | Contacter l'aidant pour valuer la charge mentale | ia_reformul |
| S1_RECO_02 |  CCC | Sollicit un service d'aide  domicile pour prendre le relais | Confirmer avec l'aidant le nombre d'heures envisages pour le SAD | Legacy  |
| S1_RECO_03 |  Standard | Demandez  ajuster les demandes d'aide | Rappeler  l'aidant de contacter l'AS | ia_reformul |
| S1_RECO_04 |  Standard | Contactez la plateforme de rpit de votre territoire | Mettre en lien avec la plateforme de rpit locale. valuer le besoin de relais | Legacy  |

#### Wording des 4 MT (IDEC + Utilisateur)

| MT_ID | CAT | Libell | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|---|
| MT_V3_004 | CAT_01 | change vcu motionnel | Proposer un change avec l'aidant pour valuer le vcu motionnel et le niveau de fatigue | Parlez de votre vcu avec un professionnel |  |
| MT_V3_032 | CAT_01 | valuer charge mentale | Contacter l'aidant pour valuer la charge mentale et les facteurs d'puisement | Faites le point sur votre niveau de charge et de fatigue |  |
| MT_V3_014 | CAT_01 | Difficults organisation | changer avec l'aidant sur les difficults d'organisation du quotidien | Identifiez les points de friction dans votre organisation quotidienne |  |
| MT_V3_031 | CAT_03 | Contacter l'AS | Rappeler  l'aidant de contacter l'assistante sociale pour ajuster les aides | Contactez votre assistante sociale pour ajuster vos aides |  |

> **Dcision Dr. Monka** :  Wording valid |  Corrections

---

### Phase 2  Versioning par criticit (Reco + MT)

#### CAT_01  valuation et soutien face  l'puisement

> Niveaux existants :  CRIT_01/02 /  CCC_01 /  STD_01, STD_04

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Discutez de votre vcu d'aidant avec l'IDEC | valuer la charge mentale de l'aidant |
|  CCC ( 30j) | Un soutien urgent est recommand face  l'puisement | Organiser un soutien face  l'puisement sous 30 jours |
|  Critique ( 7j) | Intervention immdiate ncessaire  risque identifi | Dclencher une intervention de scurisation en urgence ( 7 jours) |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |  Critique (Utilisateur) |
|---|---|---|---|
| MT_V3_004 | Parlez de votre vcu avec un professionnel | Prenez rendez-vous rapidement pour un soutien | Contactez immdiatement un professionnel |
| MT_V3_032 | Faites le point sur votre charge | valuez rapidement votre niveau d'puisement | Alertez votre entourage et un professionnel |

#### CAT_02  Mise en place de relais

> Niveaux existants :  CCC_01 /  STD_02, STD_03

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Envisagez un service d'aide  domicile | Informer sur les options de relais  domicile |
|  CCC ( 30j) | Sollicitez un service d'aide  domicile pour prendre le relais | Confirmer le nombre d'heures pour l'intervention du SAD dans le mois |

#### CAT_03  Accs aux aides et ajustement

> Niveaux existants :  STD_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Demandez  ajuster vos aides | Rappeler  l'aidant de contacter l'AS |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |
|---|---|
| MT_V3_031 | Contactez votre assistante sociale pour ajuster vos aides |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP S1 n'est PAS activ (aucune rgle ne s'est dclenche = pas d'puisement dtect, capacit de continuer intacte, pas d'arrt de travail)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  Votre niveau d'nergie et votre capacit  tenir le rle d'aidant semblent prservs. Restez attentifve aux signaux de fatigue et n'hsitez pas  demander de l'aide si besoin.  |  Surveiller l'volution de la charge et de la fatigue. Sensibiliser l'aidant aux signes d'puisement. Rvaluer au prochain suivi.  |

### 6.2  Checklist de cohrence

| # | Vrification | Rsultat | Dtail |
|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  | E7 (via CCC_01), E11 (via CCC_01), E14 (STD_03), N8 (STD_02), O32 (STD_04) : . **E10, O29, O33, O50** :  pas de rgle d'activation directe  questions de contexte/scoring uniquement |
| 2 | Chaque rgle d'activation  1 version de reco |  | 7 rgles  toutes lies  au moins 1 reco |
| 3 | Chaque catgorie de reco  ses MT assignes |  | CAT_01 : 3 MT . CAT_02 : **0 MT** . CAT_03 : 1 MT  |
| 4 | K3 respect (2 niveaux par catgorie) |  | CAT_01 : 3 niveaux . CAT_02 : 2 niveaux . CAT_03 : 1 niveau  |
| 5 | Aucune MT orpheline |  | 4 MT toutes rattaches |
| 6 | Reco prvention prsente |  | Propose |
| 7 | Wording reco = conseil, MT = verbe d'action |  | Propos |
| 8 | Sens clinique renseign pour chaque rgle |  | 7 rgles documentes |

> **Score** : **4/8 valids**, 2 proposs, 2 partiels

---

## SUIVI DYNAMIQUE  S1

### Question de suivi N3

| Champ | Valeur |
|---|---|
| **Question N3 ID** | S_S1 |
| **Libell** | Y a-t-il eu des changements concernant : charge, fatigue et risque d'puisement ? |
| **Rponses** | Oui / Non |
| **Source** | Legacy  |

**Si Oui  Rouverture :**

| # | Question ID | Libell | Classification |
|---|---|---|---|
| 1 | E7 |  quel point vous sentez-vous puise par votre rle d'aidant ? | etat |
| 2 | E10 | Sur le plan moral (stress, inquitude), o vous situez-vous ? | etat |
| 3 | E11 | Pensez-vous pouvoir continuer dans les 6 prochains mois ? | etat |
| 4 | E14 | Et au cours des 30 derniers jours ? (jours d'arrt) | facteur |
| 5 | N8 | Arrt de travail li au rle d'aidant ? | facteur |
| 6 | O29 | Retentissement sur votre sant ? | etat |
| 7 | O32 | Souhaitez-vous tre davantage aid(e) ? | etat |
| 8 | O33 | Ressentez-vous une charge ? | etat |
| 9 | O50 | Combien de temps lui consacrez-vous ? | facteur |

---

## SCORING  Questions S1 contribuant au score V3

| Question | Score max | Barme |
|---|---|---|
| E7 | 2 | Pas du tout = 0 / Un peu = +1 / Trs fatigue ou puise = +2 |
| E10 | 2 | a va = 0 / Parfois = +1 / Souvent ou dborde = +2 |
| E11 | 2 | Oui, sans difficult = 0 / Difficile ou incertain = +1 / Non = +2 |
| O29 | 2 | Pas du tout = 0 / Un peu = +1 / Oui = +2 |
| O33 | 2 | Pas du tout = 0 / Un peu = +1 / Oui = +2 |

> **Score S1 contribue au score global V3** (max 20 points sur 10 questions). Les questions E14, N8, O32, O50 sont **non-scorantes** (facteurs/descriptives).

---

## SYNTHSE FINALE

| Mtrique | Valeur |
|---|---|
| Catgories de reco | **3** (soutien puisement, relais SAD, aides sociales) |
| Rgles d'activation | **7** (:2, :1, :4)  100% legacy |
| MT totales | **4** (toutes legacy) |
| MT contributives | **1** (SEC : MT_V3_004) |
| Domaine  /  | 0  / 4  |
| ASR |  1 MT contributive = 100%  ASR valide |
| Reco prvention |  Propose |
| Checks OK | 4/8 |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories (soutien, relais, aides sociales) | Legacy  |
| 2 | 7 rgles d'activation (100% legacy) | Legacy  |
| 3 | 4 MT existantes (100% legacy) | Legacy  |
| 4 | Acteurs/domaines MT : propositions IA |   valider |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider les 3 catgories |  Haute |
| 2 | Ajouter des MT pour CAT_02 (relais SAD) ? |  Haute |
| 3 | Ajouter des MT pour S1_RECO_04 (rpit) ? |  Haute |
| 4 | Valider les acteurs/domaines proposs IA |  Moyenne |
| 5 | Valider wording Phase 1 + Phase 2 |  Moyenne |
| 6 | Valider reco prvention |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Kb=`#  Fiche de Validation MP  S2  Inquitudes pour la scurit

> **Vulnrabilit** : V3  Sant de l'Aidant  
> **ASR** :  Rduire les risques graves   
> **Signature A** : S2-A  Soutien par l'entourage  
> **Signature B** : S2-B  Accompagnement professionnel engag  
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## CONTEXTE  Big Picture V3

### Rpartition des 26 questions V3 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **S1** | Charge, fatigue et risque d'puisement | 9 | E7, E10, E11, E14, N8, O29, O32, O33, O50 | Surcharge physique et psychologique de l'aidant |
| **S2** | Inquitudes pour la scurit | 4 | E8, E9, E12, E13 | Isolement motionnel, temps pour soi, inquitudes scuritaires |
| **S3** | Sant physique et renoncement aux soins | 9 | E18, O37, O38, O39, O40, O41, O42, O43, O44 | Suivi mdical, accs aux soins |
| **S4** | Hygine de vie (activit et sommeil) | 4 | E15, E16, E17, E19 | Accs aux RDV, activit physique, sommeil |

> **S2 se concentre sur les INQUITUDES SCURITAIRES et l'ISOLEMENT MOTIONNEL** : l'aidant se sent-il seul motionnellement ? A-t-il du temps pour rcuprer ? Est-il inquiet pour la scurit de son proche ? La frontire avec S1 est clinique : S1 = "je suis puise par la charge", S2 = "je suis seule face aux risques". S2 cible la dimension RELATIONNELLE et SCURITAIRE de la dtresse, S1 la dimension CHARGE et FATIGUE.

---

## 0. DONNES FIGES  Questions rattaches  S2

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E8 | Avez-vous le sentiment d'tre seul(e) motionnellement face  votre rle d'aidant ? | etat | Jamais / Parfois / Souvent / Tout le temps |
| 2 | E9 | Parvenez-vous  avoir du temps pour vous au cours d'une semaine habituelle ? | etat | Oui / Non |
| 3 | E12 | tes-vous inquiette  l'ide que votre proche puisse se faire du mal (parole, geste, ngligence grave de sa sant) ? | etat | Non / Parfois, selon les priodes / Oui, souvent |
| 4 | E13 | tes-vous inquiette  l'ide que votre proche puisse mettre d'autres personnes en danger (comportements agressifs, imprvisibles, conduite  risques) ? | etat | Non / Parfois / Oui |

> Total : 4 questions rattaches  S2

###  Pourquoi ces 4 questions ?

**E8** mesure le **sentiment de solitude motionnelle** face au rle d'aidant (gradient 4 niveaux : jamais  tout le temps). C'est un marqueur d'isolement psycho-social.  S2 et pas S1 car ce n'est pas la charge qui est mesure mais l'isolement. Un aidant peut tre peu charg mais motionnellement seul.

**E9** mesure la **disponibilit de temps pour soi** (binaire : oui/non). C'est un indicateur de rcupration.  S2 car l'absence de temps pour soi traduit un enfermement dans le rle d'aidant (isolement) plutt qu'une charge quantitative (S1).

>  **E9 = candidat dbattable S1 vs S2** : L'absence de temps pour soi contribue aussi  l'puisement (S1). Le choix de S2 se justifie car E9 mesure un facteur de **rcupration/isolement** (dimension relationnelle), pas un facteur de **charge** (dimension quantitative). De plus, E9 forme un CCC avec E8 (V3_S2_CCC_01)  la combinaison isolement + absence de rcupration est cliniquement cohrente dans un mme MP.

**E12** mesure l'**inquitude pour la scurit du proche** (risque de se faire du mal). C'est un marqueur de risque vital.  S2 car c'est une INQUITUDE SCURITAIRE, pas un tat de charge (S1).

>  **Cross-MP** : E12 active V3_S1_CRIT_01 (rgle critique de S1). L'inquitude scuritaire est si grave qu'elle dclenche aussi le MP charge/puisement en urgence.

**E13** mesure l'**inquitude pour le danger envers autrui** (comportements agressifs, conduite  risques). Mme logique que E12.  S2 pur.

>  **Cross-MP** : E13 active V3_S1_CRIT_02 (rgle critique de S1).

###  Analyse des 22 autres questions V3  Pourraient-elles appartenir  S2 ?

> Les questions et leurs options sont **figes**. L'objectif est uniquement de vrifier si l'affiliation actuelle est correcte.

#### Questions S1 (Charge, fatigue et risque d'puisement)

| Question | Libell | Pertinence S2 ? | Raisonnement |
|---|---|---|---|
| **E7** | puisement par le rle d'aidant |  Non | Mesure la **fatigue/charge**  S1 pur. L'puisement n'est pas de l'isolement. |
| **E10** | Moral (stress, inquitude) |  **Dbattable** | Le stress et l'inquitude pourraient tre lis  l'isolement (S2). **Mais** : E10 est dans S1 car il mesure le MORAL GLOBAL dans un contexte de charge, pas un isolement spcifique. |
| **E11** | Capacit  continuer 6 mois |  Non | Projection de capacit = S1 pur (charge  long terme). |
| **E14** | Jours d'arrt sur 30 jours |  Non | Impact professionnel = S1 pur. |
| **N8** | Arrt de travail li au rle |  Non | Impact professionnel = S1 pur. |
| **O29** | Retentissement sur la sant |  Non | Impact global sur la sant = S1 pur. |
| **O32** | Souhait d'tre davantage aid |  Non | Signal de surcharge = S1 pur. |
| **O33** | Charge ressentie |  Non | Perception de charge = S1 pur. |
| **O50** | Temps consacr au proche |  Non | Volume d'aide = S1 pur. |

>  **Verdict S1** : Aucune question S1 ne devrait tre dans S2. **E10** est le seul candidat dbattable (stress/inquitude pourrait tre isolement), mais le choix S1 est justifi car E10 mesure le moral dans un contexte de charge, pas la solitude.

#### Questions S3 (Sant physique)

| Question | Libell | Pertinence S2 ? | Raisonnement |
|---|---|---|---|
| **E18** | Qualit du sommeil |  Non | Paramtre physiologique = S3 pur. |
| **O37-O44** | Suivi mdical, spcialistes, maladies |  Non | Sant objective = S3 pur. |

>  **Verdict S3** : Aucune question S3 ne devrait tre dans S2.

#### Questions S4 (Hygine de vie)

| Question | Libell | Pertinence S2 ? | Raisonnement |
|---|---|---|---|
| **E15** | Difficults  obtenir des RDV |  Non | Accs aux soins = S4 pur. |
| **E16** | Vos propres RDV mdicaux |  Non | Comportement face aux soins = S4 pur. |
| **E17** | Activit physique |  Non | Hygine de vie = S4 pur. |
| **E19** | Soucis de sant actuels |  Non | tat dclar = S4 pur. |

>  **Verdict S4** : Aucune question S4 ne devrait tre dans S2.

###  Synthse affiliation

| Question | MP actuel | Pertinence S2 ? | Confiance |
|---|---|---|---|
| E7, E11, E14, N8, O29, O32, O33, O50 | S1 |  Non |  Haute |
| E10 | S1 |  Dbattable |  Moyenne |
| E18, O37-O44 | S3 |  Non |  Haute |
| E15, E16, E17, E19 | S4 |  Non |  Haute |

> **Conclusion** : Les 4 questions de S2 sont les bonnes. **E10** (S1) est le seul candidat dbattable  le choix actuel est cliniquement justifi (moral = charge, pas isolement).
>
>  **Observation structurelle** : S2 a seulement 4 questions, c'est le plus petit MP de V3 ex quo avec S4. C'est cohrent avec le fait que S2 couvre un thme cibl (isolement + scurit) vs S1 et S3 qui couvrent des dimensions plus larges.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse des questions et des recommandations legacy montre 3 axes cliniques distincts :

1. **Scurisation par aide  domicile**  E12/E13 (inquitudes scuritaires)  S2_RECO_01 et S2_RECO_04 (service d'aide  domicile pour assurer la scurit du proche).
2. **Intervention mdico-sociale renforce**  E13 (danger pour autrui)  S2_RECO_02 (CMP pour prise de contact et RDV infirmier). C'est l'escalade clinique quand la situation dpasse le SAD.
3. **Soutien psychologique**  E8 (solitude motionnelle)  S2_RECO_03 (soutien psychologique pour l'aidant isol).

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | S2_CAT_01 | Scurisation par aide  domicile | Mettre en place un SAD pour assurer la scurit du proche et soulager l'aidant | Legacy  (S2_RECO_01, S2_RECO_04) |
| 2 | S2_CAT_02 | Intervention mdico-sociale renforce | Mobiliser les dispositifs mdico-sociaux (CMP) pour un suivi rapproch | Legacy  (S2_RECO_02) |
| 3 | S2_CAT_03 | Soutien psychologique | Orienter vers un soutien psychologique face  l'isolement motionnel | Legacy  (S2_RECO_03) |

###  Pourquoi 3 catgories et pas 2 ou 4 ?

**Pas 2** : La scurisation par SAD (CAT_01) et l'intervention CMP (CAT_02) sont cliniquement distincts. Le SAD assure une prsence physique pour la scurit. Le CMP assure un suivi psychiatrique/infirmier rapproch.  deux niveaux d'intervention diffrents.

**Pas 4** : Ajouter une catgorie "Soutien entourage" serait pertinent (la Signature A = "Soutien par l'entourage") mais aucune reco legacy ne cible explicitement l'entourage dans S2. Pas d'ajout sans base legacy.

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

Les rgles legacy V3 pour S2 sont simples : 1 CCC (E8+E9) et 1 Standard (E9 seul). Aucune rgle Critique propre  S2. Les questions scuritaires E12/E13 dclenchent S1 (urgence vitale) en cross-MP, pas S2.

>  **Observation** : S2 n'a aucune rgle Critique alors que E12 et E13 (ses propres questions) dclenchent des Critiques dans S1. C'est un choix clinique : le risque vital (CRIT) est trait par S1 (urgence de scurisation globale), S2 traite le versant psycho-social (isolement + rcupration).

### Rappel des questions S2 et de leurs options dclenchantes

> **E8**   Avez-vous le sentiment d'tre seul(e) motionnellement face  votre rle d'aidant ? 
> -  Jamais /  Parfois /  **Souvent** (CCC) /  **Tout le temps** (CCC)

> **E9**   Parvenez-vous  avoir du temps pour vous au cours d'une semaine habituelle ? 
> -  Oui /  **Non** (Standard + CCC)

> **E12**   tes-vous inquiette  l'ide que votre proche puisse se faire du mal ? 
> -  Non /  Parfois, selon les priodes /  Oui, souvent
> -  Aucune rgle d'activation S2  active S1 en cross-MP (V3_S1_CRIT_01)

> **E13**   tes-vous inquiette  l'ide que votre proche puisse mettre d'autres en danger ? 
> -  Non /  Parfois /  Oui
> -  Aucune rgle d'activation S2  active S1 en cross-MP (V3_S1_CRIT_02)

---

### Catgorie 1  Scurisation par aide  domicile

####  CCC  _(activ par V3_S2_CCC_01)_

> **SI** le CCC de S2 est activ (isolement + absence de rcupration), la mise en place d'un SAD est une rponse de scurisation concrte  CAT_01.

####  Standard  \`V3_S2_STD_01\`

> **SI** E9 =  Non   **V3_S2_STD_01**
>
> **ALORS** : Recommander un relais  domicile pour dgager du temps  l'aidant
>
> **Sens clinique** : Absence de temps pour soi  besoin de relais physique pour rcuprer. Source : Legacy 

---

### Catgorie 2  Intervention mdico-sociale renforce

####  Standard  _(activ par STD_01)_

> L'absence de temps pour soi (E9 = Non) peut aussi justifier une intervention mdico-sociale renforce si la situation est complexe  CAT_02 active en Standard.

---

### Catgorie 3  Soutien psychologique

####  CCC  \`V3_S2_CCC_01\`

> **SI** E8  {Souvent, Tout le temps} **ET** E9 =  Non 
>
> **ALORS** : Recommander un soutien psychologique en priorit ( 30 jours)
>
> **Sens clinique** : Isolement affectif avec absence de rcupration. L'aidant est motionnellement seul ET n'a pas de temps pour lui  combinaison  risque psychologique lev. Source : Legacy 

####  Standard  \`V3_S2_STD_01\`

> Le mme signal E9 (absence de temps pour soi) justifie aussi une orientation vers un soutien psychologique en Standard.

---

###  Dcisions Action 2

| # | Rgle | Niveau | Catgorie(s) | Source |
|---|---|---|---|---|
| 1 | V3_S2_CCC_01 (E8 souvent/tout le temps + E9 Non) |  CCC | CAT_01, CAT_03 | Legacy  |
| 2 | V3_S2_STD_01 (E9 = Non) |  Standard | CAT_01, CAT_02, CAT_03 | Legacy  |

> **Contrle K3** :
> - CAT_01 :  2 niveaux (CCC + Standard)
> - CAT_02 :  1 seul niveau (Standard)
> - CAT_03 :  2 niveaux (CCC + Standard)
>
>  **Observation K3** : CAT_02 n'a que 1 niveau. C'est cohrent car l'intervention mdico-sociale renforce (CMP) est une escalade qui se justifie surtout en situation de crise  et les crises (E12, E13) sont traites par S1 en cross-MP.
>
>  **Questions E12 et E13 sans activation S2** : Les 2 questions scuritaires de S2 ne dclenchent aucune rgle propre  S2. Elles activent S1 en cross-MP. C'est un cas indit : des questions "proprit" de S2 activent un autre MP.
>
> **Dcision Dr. Monka** :  Valid |  Ajouter des rgles spcifiques S2 pour E12/E13 |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** : 8 MT legacy existent en DB pour S2 (5 contributives + 3 non-contributives). C'est le MP avec le plus de MT contributives de V3. Tous les libells et types sont 100% legacy. Les acteurs/domaines sont proposs IA .

### CAT_01  Scurisation par aide  domicile

> Legacy : MT_V3_005

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V3_005 | Confirmer avec l'aidant le nombre d'heures envisages pour le SAD | SEC | IDEC  |  | Legacy  |

####  Analyse  CAT_01

**1 seule MT contributive (SEC)** : La confirmation des heures SAD est l'action concrte de scurisation. C'est suffisant pour CAT_01 car le SAD est un dispositif externe  l'IDEC confirme, le SAD excute.

### CAT_02  Intervention mdico-sociale renforce

> Legacy : MT_V3_002, MT_V3_003, MT_V3_006, MT_V3_011, MT_V3_012

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V3_002 | Suivi IDEC de la mise en place de l'intervention (via chat/mail) | SEC | IDEC  |  | Legacy  |
| MT_V3_003 | Contacter le CMP de secteur pour prise de contact et RDV infirmier | SEC | IDEC  |  | Legacy  |
| MT_V3_006 | Proposer un temps d'change pour faire le point | SEC | IDEC  |  | Legacy  |
| MT_V3_011 | Tracer la situation comme stable dans le dossier (CRM) | ORGA | IDEC  |  | Legacy  |
| MT_V3_012 | Identifier les situations ou contextes dclenchants | ORGA | Aidant  |  | Legacy  |

####  Analyse  CAT_02

**Chane d'action** : SEC (MT_V3_003 : contacter CMP)  SEC (MT_V3_006 : changer)  SEC (MT_V3_002 : suivi)  ORGA (MT_V3_011 : tracer)  ORGA (MT_V3_012 : identifier dclencheurs). La squence est logique : mobilisation  change  suivi  documentation.

**3 MT contributives (SEC)** : Reprsente la chane complte de mobilisation mdico-sociale. C'est cohrent avec la complexit de l'intervention CMP.

### CAT_03  Soutien psychologique

> Legacy : MT_V3_001, MT_V3_010

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V3_001 | Orienter vers un soutien psychologique | SEC | Psychologue  |  | Legacy  |
| MT_V3_010 | Noter un isolement ponctuel | ORGA | IDEC  |  | Legacy  |

####  Analyse  CAT_03

**1 MT contributive (SEC)** : L'orientation vers un psychologue est l'action de scurisation. La MT ORGA (noter l'isolement) est un suivi documentaire.

---

###  Synthse MT  S2

| Mtrique | Valeur |
|---|---|
| MT totales legacy | **8** |
| MT contributives () | **5** (SEC : MT_V3_001, MT_V3_002, MT_V3_003, MT_V3_005, MT_V3_006) |
| MT non-contributives () | **3** (ORGA : MT_V3_010, MT_V3_011, MT_V3_012) |
| ASR validation | 5 MT contributives  100% = **ASR valide**  |

> **Condition de validation ASR** : Les 5 MT contributives de S2 doivent TOUTES tre compltes pour que l'ASR  Rduire les risques graves  soit valide (K11).
>
> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs legacy** : \`IDEC\`, \`Psychologue\` (proposs IA), \`Aidant\` (propos IA)
> **Domaines proposs** :  Mdico-social,  Mdical (pour CMP)

### Tableau consolid des MT de S2 (tat actuel)

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Reco | Source |
|---|---|---|---|---|---|---|---|---|
| MT_V3_005 | Confirmer heures envisages pour le SAD | SEC | IDEC  |  Mdico-social  |  | CAT_01 | S2_RECO_01 | Legacy  |
| MT_V3_002 | Suivi mise en place de l'intervention | SEC | IDEC  |  Mdico-social  |  | CAT_02 | S2_RECO_02 | Legacy  |
| MT_V3_003 | Contacter le CMP pour RDV infirmier | SEC | IDEC  |  Mdical  |  | CAT_02 | S2_RECO_02 | Legacy  |
| MT_V3_006 | Proposer un temps d'change | SEC | IDEC  |  Mdico-social  |  | CAT_02 | S2_RECO_02 | Legacy  |
| MT_V3_011 | Tracer la situation dans le CRM | ORGA | IDEC  |  Mdico-social  |  | CAT_02 | S2_RECO_02 | Legacy  |
| MT_V3_012 | Identifier les contextes dclenchants | ORGA | Aidant  |  Mdico-social  |  | CAT_02 | S2_RECO_02 | Legacy  |
| MT_V3_001 | Orienter vers un soutien psychologique | SEC | Psychologue  |  Mdical  |  | CAT_03 | S2_RECO_03 | Legacy  |
| MT_V3_010 | Noter un isolement ponctuel | ORGA | IDEC  |  Mdico-social  |  | CAT_03 | S2_RECO_03 | Legacy  |

> **Rsum** :
> - Total MT : **8** (toutes legacy)
> - Domaine  Mdical : **2 MT** (CMP + psychologue) / Domaine  Mdico-social : **6 MT**
> - Contributives () : **5**  SEC : 5
> - Non-contributives () : **3**  ORGA : 3
> - Types utiliss : SEC (5), ORGA (3). **Aucun INFO, STRUC, MED**.

###  Observations

>  **Toutes les MT contributives sont de type SEC** : S2 est un MP de scurisation pure. Aucune MT structurante (STRUC) ni mdicale (MED). C'est cohrent avec la nature du MP : rduire les risques graves via des interventions de scurisation.
>
>  **MT_V3_012 assigne  l'Aidant** : C'est la seule MT assigne directement  l'aidant (et pas  l'IDEC). L'aidant identifie ses propres situations dclenchantes  c'est un acte d'auto-observation cohrent avec K7 (autonomie par dfaut).
>
>  **MT_V3_003  domaine  Mdical** : Le CMP est un dispositif mdical. L'IDEC coordonne mais le CMP est l'acteur clinique  le domaine mdical est justifi.

###  Propositions d'amlioration

| # | Proposition | Justification |
|---|---|---|
| 1 | **MT_V3_001  acteur IDEC** (au lieu de Psychologue) | C'est l'IDEC qui ORIENTE vers le psychologue, pas le psychologue qui s'auto-saisit. L'acteur devrait reflter qui initie l'action. |
| 2 | **Ajouter INFO pour CAT_03** | CAT_03 n'a aucune MT INFO. Proposition : "Informer l'aidant sur les dispositifs de soutien psychologique disponibles" (INFO). |

> **Dcision Dr. Monka** :  Valid |  Modifier les acteurs |  Ajouter MT

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

#### Wording des 4 Recos legacy

| Reco ID | Niveau | Texte utilisateur | Actions IDEC | Source |
|---|---|---|---|---|
| S2_RECO_01 |  Standard | Sollicit un SAD pour assurer la scurit de votre proche | Confirmer le nombre d'heures pour l'intervention du SAD | Legacy  |
| S2_RECO_02 |  Standard | Demandez une intervention mdico-sociale renforce | Contacter le CMP de secteur pour prise de contact et RDV infirmier | ia_reformul |
| S2_RECO_03 |  CCC | Envisager un soutien psychologique | Noter un isolement ponctuel | ia_reformul |
| S2_RECO_04 |  CCC | Sollicit un service d'aide  domicile pour prendre le relais | Confirmer le nombre d'heures pour l'intervention du SAD | Legacy  |

#### Wording des 8 MT (IDEC + Utilisateur)

| MT_ID | CAT | Libell | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|---|
| MT_V3_005 | CAT_01 | Confirmer heures SAD | Confirmer avec l'aidant le nombre d'heures envisages pour l'intervention du service  domicile | changez avec l'IDEC sur les heures d'aide  domicile envisages |  |
| MT_V3_002 | CAT_02 | Suivi intervention | Assurer le suivi de la mise en place de l'intervention mdico-sociale (chat/mail) | Suivez avec votre IDEC la mise en place de l'aide |  |
| MT_V3_003 | CAT_02 | Contacter CMP | Contacter le CMP de secteur pour prise de contact et RDV infirmier | Un rendez-vous avec un infirmier du CMP va tre organis |  |
| MT_V3_006 | CAT_02 | change point | Proposer un temps d'change pour faire le point sur la situation et les inquitudes | Prenez le temps d'un change avec un professionnel pour faire le point |  |
| MT_V3_011 | CAT_02 | Tracer CRM | Tracer la situation comme stable et les actions entreprises dans le dossier CRM | _(MT interne IDEC  pas de wording utilisateur)_ |  |
| MT_V3_012 | CAT_02 | Identifier dclencheurs | Accompagner l'aidant dans l'identification des situations dclenchantes | Reprez les moments ou situations qui dclenchent vos inquitudes |  |
| MT_V3_001 | CAT_03 | Soutien psy | Orienter l'aidant vers un soutien psychologique (psychologue, groupe de parole) | Envisagez un accompagnement psychologique pour parler de ce que vous vivez |  |
| MT_V3_010 | CAT_03 | Noter isolement | Documenter un isolement ponctuel et surveiller l'volution | _(MT interne IDEC  pas de wording utilisateur)_ |  |

> **Dcision Dr. Monka** :  Wording valid |  Corrections

---

### Phase 2  Versioning par criticit (Reco + MT)

#### CAT_01  Scurisation par aide  domicile

> Niveaux existants :  CCC_01 /  STD_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Service d'aide  domicile recommand | Informer sur les options d'aide  domicile |
|  CCC ( 30j) | Service d'aide  domicile  mettre en place rapidement | Organiser l'intervention SAD sous 30 jours |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |
|---|---|---|
| MT_V3_005 | Renseignez-vous sur les heures d'aide possibles | Confirmez rapidement les heures d'aide  domicile prvues |

#### CAT_02  Intervention mdico-sociale renforce

> Niveaux existants :  STD_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Intervention mdico-sociale disponible | Proposer une prise en charge CMP si la situation l'exige |

#### CAT_03  Soutien psychologique

> Niveaux existants :  CCC_01 /  STD_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Soutien psychologique disponible | Informer sur les dispositifs de soutien psychologique |
|  CCC ( 30j) | Soutien psychologique recommand | Orienter vers un soutien psychologique sous 30 jours |

**MT versionnes :**

| MT_ID |  Standard (Utilisateur) |  CCC (Utilisateur) |
|---|---|---|
| MT_V3_001 | Un accompagnement psychologique est disponible si vous le souhaitez | Prenez rendez-vous avec un psychologue dans le mois |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP S2 n'est PAS activ (aucune rgle ne s'est dclenche = pas d'isolement motionnel, temps pour soi prserv, pas d'inquitude scuritaire majeure)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  Vous ne semblez pas isole et vos inquitudes pour votre proche sont matrises. Restez vigilante : si vous vous sentez seule ou inquiete, n'hsitez pas  en parler.  |  Pas d'isolement ni d'inquitude scuritaire dtects. Rester vigilant sur les signaux d'isolement motionnel. Rvaluer au prochain suivi.  |

### 6.2  Checklist de cohrence

| # | Vrification | Rsultat | Dtail |
|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  | E8 (via CCC_01), E9 (STD_01 + CCC_01) : . **E12, E13** :  pas de rgle S2  activent S1 en cross-MP uniquement |
| 2 | Chaque rgle d'activation  1 version de reco |  | 2 rgles  toutes lies  des recos |
| 3 | Chaque catgorie de reco  ses MT assignes |  | CAT_01 : 1 MT, CAT_02 : 5 MT, CAT_03 : 2 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  | CAT_01 : 2 niveaux . CAT_02 : 1 niveau . CAT_03 : 2 niveaux  |
| 5 | Aucune MT orpheline |  | 8 MT toutes rattaches |
| 6 | Reco prvention prsente |  | Propose |
| 7 | Wording reco = conseil, MT = verbe d'action |  | Propos |
| 8 | Sens clinique renseign pour chaque rgle |  | 2 rgles documentes |

> **Score** : **4/8 valids**, 2 proposs, 2 partiels
>
>  **Point majeur** : E12 et E13 n'activent aucune rgle de S2. C'est une anomalie potentielle (2 questions "proprit" de S2 qui n'ont aucun effet dans S2).  discuter avec Dr. Monka :
> - **Option A** : Accepter le cross-MP (S1 traite l'urgence vitale, S2 traite l'isolement)  justifiable cliniquement
> - **Option B** : Ajouter des rgles S2 Standard pour E12 et E13 (ex: E12 = "Parfois"  STD  S2_RECO_02)

---

## SUIVI DYNAMIQUE  S2

### Question de suivi N3

| Champ | Valeur |
|---|---|
| **Question N3 ID** | S_S2 |
| **Libell** | Y a-t-il eu des changements concernant : inquitudes pour la scurit ? |
| **Rponses** | Oui / Non |
| **Source** | Legacy  |

**Si Oui  Rouverture :**

| # | Question ID | Libell | Classification |
|---|---|---|---|
| 1 | E8 | Sentiment d'tre seul(e) motionnellement ? | etat |
| 2 | E9 | Parvenez-vous  avoir du temps pour vous ? | etat |
| 3 | E12 | Inquiet que votre proche se fasse du mal ? | etat |
| 4 | E13 | Inquiet que votre proche mette d'autres en danger ? | etat |

---

## SCORING  Questions S2 contribuant au score V3

| Question | Score max | Barme |
|---|---|---|
| E8 | 2 | Jamais = 0 / Parfois = +1 / Souvent ou tout le temps = +2 |
| E9 | 2 | Oui = 0 / Non = +2 |

> **Score S2 contribue au score global V3** (max 20 points sur 10 questions). E12 et E13 sont **non-scorantes** (elles n'apparaissent pas dans le barme de scoring V3).

---

## SYNTHSE FINALE

| Mtrique | Valeur |
|---|---|
| Catgories de reco | **3** (SAD, intervention CMP, soutien psy) |
| Rgles d'activation | **2** (:1, :1)  100% legacy |
| MT totales | **8** (toutes legacy) |
| MT contributives | **5** (SEC : 5) |
| Domaine  /  | 2  / 6  |
| ASR |  5 MT contributives = 100%  ASR valide |
| Reco prvention |  Propose |
| Checks OK | 4/8 |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories (SAD, CMP, soutien psy) | Legacy  |
| 2 | 2 rgles d'activation (100% legacy) | Legacy  |
| 3 | 8 MT existantes (100% legacy) | Legacy  |
| 4 | Acteurs/domaines MT : propositions IA |   valider |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider les 3 catgories |  Haute |
| 2 | E12/E13 sans rgle S2 : accepter le cross-MP ou ajouter des rgles STD ? |  Haute |
| 3 | Valider les acteurs/domaines proposs IA |  Moyenne |
| 4 | Valider wording Phase 1 + Phase 2 |  Moyenne |
| 5 | Valider reco prvention |  Moyenne |
| 6 | MT_V3_001 : acteur Psychologue  IDEC ? |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,$b=`#  Fiche de Validation MP  S3  Sant physique et renoncement aux soins

> **Vulnrabilit** : V3  Sant de l'Aidant  
> **ASR** :  Protger votre sant   
> **Signature A** : S3-A  Suivi mdical repris  
> **Signature B** : S3-B  Dmarche de soin engage  
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## CONTEXTE  Big Picture V3

### Rpartition des 26 questions V3 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **S1** | Charge, fatigue et risque d'puisement | 9 | E7, E10, E11, E14, N8, O29, O32, O33, O50 | Surcharge physique et psychologique de l'aidant |
| **S2** | Inquitudes pour la scurit | 4 | E8, E9, E12, E13 | Isolement motionnel, inquitudes scuritaires |
| **S3** | Sant physique et renoncement aux soins | 9 | E18, O37, O38, O39, O40, O41, O42, O43, O44 | Suivi mdical, accs aux soins, tat de sant peru |
| **S4** | Hygine de vie (activit et sommeil) | 4 | E15, E16, E17, E19 | Accs aux RDV, activit physique, sommeil |

> **S3 se concentre sur la SANT PHYSIQUE OBJECTIVE et le RENONCEMENT AUX SOINS** : l'aidant a-t-il un mdecin traitant ? Voit-il des spcialistes ? A-t-il ralis ses examens ? Comment peroit-il sa sant ? Comment dort-il ? La frontire avec S1 est clinique : S1 = charge SUBJECTIVE (fatigue, puisement peru), S3 = sant OBJECTIVE (suivi mdical, pathologies, sommeil). La frontire avec S4 est fonctionnelle : S3 = je me soigne (accs aux soins existants), S4 = je prends soin de moi (hygine de vie proactive, accs aux nouveaux RDV).

---

## 0. DONNES FIGES  Questions rattaches  S3

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E18 | Globalement, comment valueriez-vous la qualit de votre sommeil ces dernires semaines ? (sachant que l'idal est de dormir minimum 6h par nuit) | etat | Bonne / Correcte / Mauvaise (je dors mal ou pas assez) / Trs mauvaise (je me rveille puise) |
| 2 | O37 | Avez-vous un mdecin traitant ? | facteur | Oui / Non |
| 3 | O38 | Avez-vous d'autres mdecins spcialistes qui vous suivent actuellement ? | facteur | Oui / Non |
| 4 | O39 | Lesquels ? (plusieurs rponses possibles) | etat | Cardiologue / Oncologue / Neurologue / Pneumologue / Ophtalmologue / Psychiatre / Chirurgien-Dentiste / Gastro-entrologue / Endocrinologue-Diabtologue / ORL / Gyncologue / Nphrologue / Griatre / Dermatologue / Autre |
| 5 | O40 | Avez-vous dj ralis des rendez-vous mdicaux cette anne ? | facteur | Oui / Non |
| 6 | O41 | Lesquels ? (plusieurs rponses possibles) | facteur | Bilan de sant gnral (prise de sang) / Audition / Vue / Contrle dentaire / Suivi cardiovasculaire / Ostodensitomtrie / Vaccination / Examen gyncologique / Suivi dermatologique / Suivi psychologique / Dpistage des cancers |
| 7 | O42 | tes-vous concern ou avez-vous t concern par une ou plusieurs de ces maladies ? (plusieurs rponses possibles) | facteur | Troubles neurologiques / Troubles psychiques / Dermatologique / Respiratoire / Gnito-urinaire / Endocrinienne / Cancer / Mtabolique / Maladie cardiovasculaire / Musculo-squelettique / Gastro-intestinale / Maladies gntiques / Troubles visuels svres / Troubles auditifs svres / Je ne sais pas |
| 8 | O43 | Combien de mdicaments diffrents prenez-vous chaque jour ? | facteur | 1  3 mdicaments / 4  6 mdicaments / 7 mdicaments et plus / Je ne prends pas de traitement actuellement |
| 9 | O44 | Selon vous et par rapport  une personne du mme ge, diriez-vous que votre sant est : | etat | Meilleure / Identique / Moins bonne |

> Total : 9 questions rattaches  S3

###  Pourquoi ces 9 questions ?

**E18** mesure la **qualit du sommeil** (gradient 4 niveaux). Le sommeil est un indicateur physiologique objectif de l'tat de sant.  S3 et pas S1 car E18 mesure un paramtre de SANT PHYSIQUE, pas la charge subjective.

**O37** et **O38** forment un duo qui cartographie l'**accs au suivi mdical** :
- O37 = mdecin traitant (le socle de base)
- O38 = spcialistes (le suivi avanc)

**O39** dtaille les spcialistes (conditionnel si O38 = Oui). Permet de cibler les MT de prise de RDV par spcialit  les 13 MT MED de S3 en dpendent directement.

**O40** et **O41** mesurent les **examens raliss cette anne** : O40 = binaire (oui/non), O41 = dtail si oui. Permet d'identifier les examens manquants.

**O42** cartographie les **pathologies actuelles ou passes** de l'aidant. C'est un inventaire factuel qui conditionne le type de suivi ncessaire.

**O43** mesure la **polymdication** (nombre de mdicaments quotidiens). C'est un facteur de risque pharmaceutique  justifie le bilan de mdication.

**O44** mesure la **sant perue** relative aux pairs. C'est un indicateur subjectif de sant globale qui, combin  E18, forme le CCC de S3.

###  Analyse des 17 autres questions V3  Pourraient-elles appartenir  S3 ?

#### Questions S1 (Charge, fatigue)

| Question | Libell | Pertinence S3 ? | Raisonnement |
|---|---|---|---|
| **E7** | puisement par le rle d'aidant |  Non | Fatigue subjective lie  l'aidance = S1 pur. S3 mesure la sant objective. |
| **E10** | Moral (stress, inquitude) |  Non | Moral = S1 pur. |
| **O29** | Retentissement sur la sant |  **Dbattable** | O29 mesure le retentissement de l'aidance sur la sant  pourrait tre S3. **Mais** : O29 est dans S1 car elle mesure l'IMPACT DE L'AIDANCE (cause = aidance), pas l'TAT DE SANT (fait mdical). O29 = "l'aidance me rend malade", S3 = "suis-je suivi mdicalement ?". |
| **Autres S1** | E11, E14, N8, O32, O33, O50 |  Non | Charge, capacit, impact professionnel = S1 pur. |

>  **Verdict S1** : Aucune question S1 ne devrait tre dans S3. **O29** est le seul dbattable  le choix S1 est cliniquement justifi.

#### Questions S2 (Inquitudes scurit)

| Question | Libell | Pertinence S3 ? | Raisonnement |
|---|---|---|---|
| **E8, E9, E12, E13** | Isolement, temps pour soi, scurit proche |  Non | Dimension psycho-sociale/scuritaire = S2 pur. |

>  **Verdict S2** : Aucune question S2 ne devrait tre dans S3.

#### Questions S4 (Hygine de vie)

| Question | Libell | Pertinence S3 ? | Raisonnement |
|---|---|---|---|
| **E15** | Difficults  obtenir des RDV |  **Dbattable** | L'accs aux RDV mdicaux touche au suivi mdical (S3). **Mais** : E15 est dans S4 car elle mesure une DIFFICULT D'ACCS proactive (l'aidant essaie d'obtenir des RDV), alors que S3 mesure le SUIVI EXISTANT (a-t-il un MT ? des spcialistes ?). E15 = "je galre  prendre mes RDV", S3 = "j'ai un suivi ou pas ?". |
| **E16** | Vos propres RDV mdicaux depuis que vous tes aidant |  **Dbattable** | Mme logique qu'E15. E16 mesure le COMPORTEMENT face aux soins (reporter, annuler)  S4. S3 mesure l'TAT du suivi en cours. |
| **E17** | Activit physique |  Non | Hygine de vie = S4 pur. |
| **E19** | Soucis de sant actuels |  **Dbattable** | Les soucis de sant actuels pourraient tre dans S3 (sant physique). **Mais** : E19 est dans S4 car elle est dclarative et oriente "bien-tre" (fatigue, sommeil, moral, douleurs), pas "suivi mdical". E19 sert  identifier les BESOINS, pas  mesurer les FAITS mdicaux. |

>  **Verdict S4** : **E15** et **E16** sont des candidats dbattables  la frontire S3/S4 est la plus fine de V3. Les choix actuels sont justifis par la distinction accs proactif (S4) vs suivi existant (S3). **E19** est aussi dbattable mais son caractre dclaratif le place logiquement en S4.

###  Synthse affiliation

| Question | MP actuel | Pertinence S3 ? | Confiance |
|---|---|---|---|
| S1 (9 questions) | S1 |  Non (O29 dbattable) |  Haute |
| S2 (4 questions) | S2 |  Non |  Haute |
| E15, E16 | S4 |  Dbattable |  Moyenne |
| E17 | S4 |  Non |  Haute |
| E19 | S4 |  Dbattable |  Moyenne |

> **Conclusion** : Les 9 questions de S3 sont les bonnes. La frontire S3/S4 est la plus fine (E15, E16, E19 sont dbattables). Le critre discriminant est : **S3 = tat de suivi mdical existant**, **S4 = comportement proactif de soin de soi**.
>
>  **Observation structurelle** : S3 est le MP le plus dense de V3 en termes de MTs (18 MTs = 16 contributives + 2 non-contributives). C'est cohrent car le suivi mdical spcialis gnre 1 MT par spcialit  13 MTs MED rien que pour S3_RECO_03.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse des questions et des recommandations legacy montre 3 axes cliniques distincts :

1. **Gestion du sommeil et bilan de sant**  E18/O44 (sommeil + sant perue)  S3_RECO_01 et S3_RECO_04 (RDV mdecin traitant pour bilan).
2. **Accs aux soins et mdecin traitant**  O37 (mdecin traitant)  S3_RECO_02 (accompagnement d'accs aux soins, recherche MT).
3. **Suivi spcialis et mdication**  O38/O39/O42/O43 (spcialistes, pathologies, mdicaments)  S3_RECO_03 et S3_RECO_05 (RDV spcialistes + bilan mdication).

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | S3_CAT_01 | Bilan de sant et sommeil | Organiser un bilan de sant global et adresser les troubles du sommeil | Legacy  (S3_RECO_01, S3_RECO_04) |
| 2 | S3_CAT_02 | Accs au mdecin traitant | Faciliter l'accs  un mdecin traitant si absent | Legacy  (S3_RECO_02) |
| 3 | S3_CAT_03 | Suivi spcialis et mdication | Relancer le suivi spcialis et vrifier la mdication | Legacy  (S3_RECO_03, S3_RECO_05) |

###  Pourquoi 3 catgories et pas 2 ou 4 ?

**Pas 2** : Le bilan de sant gnral (CAT_01) et le suivi spcialis (CAT_03) sont cliniquement distincts. Un aidant peut avoir un MT mais ne pas voir ses spcialistes (et inversement). Les actions sont indpendantes.

**Pas 4** : La mdication (S3_RECO_05) est rattache  CAT_03 car le bilan de mdication se fait avec les spcialistes. Crer une catgorie "mdication" serait redondant.

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

S3 a **une seule rgle d'activation** : 1 CCC. Aucune Critique, aucun Standard. C'est le MP de V3 avec le moins de rgles.

>  **Observation majeure** : S3 n'a ni rgle Critique ni rgle Standard. Cela signifie que S3 ne s'active QUE lorsque 2 conditions combines sont remplies (O44 + E18). Les 7 autres questions de S3 (O37, O38, O39, O40, O41, O42, O43) ne dclenchent AUCUNE activation. Elles servent uniquement de contexte factuel pour cibler les MTs.
>
>  **Anomalie K2** : Avec 1 seul niveau d'activation (CCC), K3 (englobement multi-niveaux) ne s'applique pas. C'est un cas limite : un MP avec 9 questions mais 1 seule rgle.

### Rappel des questions dclenchantes

> **O44**   Selon vous et par rapport  une personne du mme ge, diriez-vous que votre sant est : 
> -  Meilleure /  Identique /  **Moins bonne** (CCC)

> **E18**   Comment valueriez-vous la qualit de votre sommeil ces dernires semaines ? 
> -  Bonne /  Correcte /  **Mauvaise** (CCC) /  **Trs mauvaise** (CCC)

---

### Catgorie 1  Bilan de sant et sommeil

####  CCC  \`V3_S3_CCC_01\`

> **SI** O44 =  Moins bonne  **ET** E18  {Mauvaise, Trs mauvaise}
>
> **ALORS** : Organiser un bilan de sant et adresser les troubles du sommeil ( 30 jours)
>
> **Sens clinique** : Dgradation physique objective par le vcu. L'aidant peroit sa sant comme  moins bonne  ET dort mal  double signal de dgradation physique. Source : Legacy 

---

### Catgorie 2  Accs au mdecin traitant

####  CCC  _(mme CCC_01  double activation)_

> Le CCC active aussi CAT_02 : si la sant se dgrade, vrifier que l'aidant a un mdecin traitant est prioritaire.

---

### Catgorie 3  Suivi spcialis et mdication

####  CCC  _(mme CCC_01  triple activation)_

> Le CCC active CAT_03 aussi : la dgradation de sant justifie une relance du suivi spcialis et un bilan de mdication.

---

###  Dcisions Action 2

| # | Rgle | Niveau | Catgorie(s) | Source |
|---|---|---|---|---|
| 1 | V3_S3_CCC_01 (O44 = Moins bonne + E18 mauvaise/trs mauvaise) |  CCC | CAT_01, CAT_02, CAT_03 | Legacy  |

> **Contrle K3** :
> - CAT_01 :  1 seul niveau (CCC)
> - CAT_02 :  1 seul niveau (CCC)
> - CAT_03 :  1 seul niveau (CCC)
>
>  **Aucune catgorie ne respecte K3 (2 niveaux)**. C'est un cas limite cliniquement justifiable : S3 traite la sant de l'aidant, pas une urgence. L'activation ne se fait qu'en cas de dgradation combine (CCC). Pas de Critique car la dgradation de sant seule ne constitue pas une urgence vitale  7 jours. Pas de Standard car les questions factuelles (O37, O38...) ne justifient pas d'activation en l'absence de signal de dgradation.
>
>  **Options possibles pour enrichir les niveaux** :
> - **Option A** : Ajouter un Standard pour O37 = "Non" (pas de mdecin traitant  orienter). **Justification** : un aidant sans MT est un aidant sans filet de scurit mdicale.
> - **Option B** : Ajouter un Standard pour O40 = "Non" (pas de RDV cette anne  encourager). **Justification** : absence de suivi annuel = renoncement potentiel aux soins.
> - **Option C** : Laisser en l'tat (1 seul CCC)  justifi car S3 est un MP de "cartographie" plus que d'"urgence".
>
> **Dcision Dr. Monka** :  Option A |  Option B |  Option C |  Autre

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** : 18 MT legacy existent en DB pour S3 (16 contributives + 2 non-contributives). C'est le MP le plus dense de V3. Les 16 MT contributives sont TOUTES de type MED (prises de RDV avec spcialistes). Les acteurs et domaines sont proposs IA .

### CAT_01  Bilan de sant et sommeil

> Legacy : MT_V3_020

| MT_ID | Libell MT | Type | Acteur | / | Reco | Source |
|---|---|---|---|---|---|---|
| MT_V3_020 | Contacter le mdecin traitant pour bilan de sant | MED | Mdecin traitant  |  | S3_RECO_04 | Legacy  |

####  Analyse  CAT_01

**1 MT contributive (MED)** : Le bilan de sant auprs du MT est l'action pivot de CAT_01. Le sommeil (E18) est abord dans le cadre du bilan (S3_RECO_01).

### CAT_02  Accs au mdecin traitant

> Legacy : MT_V3_033, MT_V3_008

| MT_ID | Libell MT | Type | Acteur | / | Reco | Source |
|---|---|---|---|---|---|---|
| MT_V3_033 | Informer sur les dispositifs d'accs aux soins (courrier DAC/CPTS) | INFO | Aidant  |  | S3_RECO_02 | Legacy  |
| MT_V3_008 | Respecter la non-rponse sans insistance | ORGA | IDEC  |  | S3_RECO_04 | Legacy  |

####  Analyse  CAT_02

**0 MT contributive** : CAT_02 n'a que des MTs non-contributives (INFO + ORGA). L'accs au MT est un axe d'information/accompagnement, pas de scurisation directe. L'ASR ne se valide pas via CAT_02.

### CAT_03  Suivi spcialis et mdication

> Legacy : MT_V3_015  MT_V3_030 (13 MTs par spcialit) + MT_V3_018, MT_V3_019

| MT_ID | Libell MT | Type | Acteur | / | Reco | Source |
|---|---|---|---|---|---|---|
| MT_V3_015 | Prendre RDV avec Dermatologue | MED | Professionnel de sant  |  | S3_RECO_03 | Legacy  |
| MT_V3_016 | Prendre RDV avec Gyncologue | MED | Professionnel de sant  |  | S3_RECO_03 | Legacy  |
| MT_V3_017 | Prendre RDV avec Cardiologue | MED | Professionnel de sant  |  | S3_RECO_03 | Legacy  |
| MT_V3_021 | Prendre RDV avec Oncologue | MED | Professionnel de sant  |  | S3_RECO_03 | Legacy  |
| MT_V3_022 | Prendre RDV avec Endocrinologue-Diabtologue | MED | Professionnel de sant  |  | S3_RECO_03 | Legacy  |
| MT_V3_023 | Prendre RDV avec Pneumologue | MED | Professionnel de sant  |  | S3_RECO_03 | Legacy  |
| MT_V3_024 | Prendre RDV avec Neurologue | MED | Mdecin spcialiste  |  | S3_RECO_03 | Legacy  |
| MT_V3_025 | Prendre RDV avec Griatre | MED | Mdecin spcialiste  |  | S3_RECO_03 | Legacy  |
| MT_V3_026 | Prendre RDV avec Ophtalmologue | MED | Professionnel de sant  |  | S3_RECO_03 | Legacy  |
| MT_V3_027 | Prendre RDV avec ORL | MED | Professionnel de sant  |  | S3_RECO_03 | Legacy  |
| MT_V3_028 | Prendre RDV avec Psychiatre | MED | Mdecin spcialiste  |  | S3_RECO_03 | Legacy  |
| MT_V3_029 | Prendre RDV avec Gastro-Entrologue | MED | Professionnel de sant  |  | S3_RECO_03 | Legacy  |
| MT_V3_030 | Prendre RDV avec Chirurgien-dentiste | MED | Professionnel de sant  |  | S3_RECO_03 | Legacy  |
| MT_V3_018 | Orienter vers le mdecin traitant | MED | Mdecin traitant  |  | S3_RECO_05 | Legacy  |
| MT_V3_019 | Contacter le MT pour bilan de mdication | MED | Mdecin traitant  |  | S3_RECO_05 | Legacy  |

####  Analyse  CAT_03

**15 MT contributives (MED)** : 13 MTs de prise de RDV par spcialit (conditionnes  O39) + 2 MTs mdecin traitant pour bilan de mdication. C'est le bloc le plus massif de tout V3.

>  **Point de proportionnalit (T4)** : 13 MTs pour une seule reco (S3_RECO_03) est inhabituel. C'est justifi car chaque spcialit ncessite un RDV spar, mais en pratique seules les spcialits dclares par l'aidant (O39) seront actives. Le systme devrait filtrer les MTs en fonction de la rponse  O39.

---

###  Synthse MT  S3

| Mtrique | Valeur |
|---|---|
| MT totales legacy | **18** |
| MT contributives () | **16** (MED : 16) |
| MT non-contributives () | **2** (INFO : MT_V3_033 / ORGA : MT_V3_008) |
| ASR validation | 16 MT contributives  100% = **ASR valide**  |

> **Condition de validation ASR** : En thorie, les 16 MT contributives doivent TOUTES tre compltes (K11). En pratique, seules les MT correspondant aux spcialistes dclars (O39) seront pertinentes. C'est un point  clarifier avec Dr. Monka.
>
>  **Question K11** : Est-ce que les 16 MTs sont TOUTES ncessaires pour valider l'ASR, ou seulement celles actives par les rponses  O39 ? Si l'aidant n'a pas de cardiologue, MT_V3_017 (prendre RDV cardiologue) est-elle quand mme requise pour l'ASR ?
>
> **Dcision Dr. Monka** :  K11 sur toutes les MT |  K11 sur les MT actives par O39 seulement

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs legacy** : \`Mdecin traitant\`, \`Professionnel de sant\`, \`Mdecin spcialiste\`, \`Aidant\`, \`IDEC\` (tous proposs IA )
> **Domaines** :  Mdical (16 MT) /  Mdico-social (2 MT)

### Tableau consolid des MT de S3 (tat actuel)

| MT_ID | Libell | Type | Acteur | Domaine | / | Reco | Source |
|---|---|---|---|---|---|---|---|
| MT_V3_020 | Contacter MT pour bilan de sant | MED | Mdecin traitant  |  Mdical  |  | S3_RECO_04 | Legacy  |
| MT_V3_033 | Informer dispositifs accs aux soins | INFO | Aidant  |  Mdico-social  |  | S3_RECO_02 | Legacy  |
| MT_V3_008 | Respecter la non-rponse | ORGA | IDEC  |  Mdico-social  |  | S3_RECO_04 | Legacy  |
| MT_V3_015030 | Prendre RDV avec [spcialiste] 13 | MED | Prof. sant  |  Mdical  |  | S3_RECO_03 | Legacy  |
| MT_V3_018 | Orienter vers le MT | MED | Mdecin traitant  |  Mdical  |  | S3_RECO_05 | Legacy  |
| MT_V3_019 | Contacter MT pour bilan mdication | MED | Mdecin traitant  |  Mdical  |  | S3_RECO_05 | Legacy  |

> **Rsum** :
> - Total MT : **18** (toutes legacy)
> - Domaine  Mdical : **16 MT** / Domaine  Mdico-social : **2 MT**
> - Contributives () : **16**  MED : 16
> - Non-contributives () : **2**  INFO : 1, ORGA : 1
> - Types utiliss : MED (16), INFO (1), ORGA (1). **Aucun SEC, STRUC**.

###  Observations

>  **S3 est le seul MP de V3 massivement mdical** : 16/18 MT sont MED. C'est le contraire de S1 (100% mdico-social) et S2 (mixte). C'est cohrent : S3 traite la sant physique, donc les actions sont mdicales.
>
>  **Aucune MT SEC ni STRUC** : Pas d'action de scurisation ni de structuration. Le MP est purement orient "prise de RDV" + "bilan"  pas de montage organisationnel complexe.

> **Dcision Dr. Monka** :  Valid |  Modifier les acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

#### Wording des 5 Recos legacy

| Reco ID | Niveau | Texte utilisateur | Actions IDEC | Source |
|---|---|---|---|---|
| S3_RECO_01 |  CCC | Prendre RDV avec le mdecin traitant pour changer sur vos troubles du sommeil | Contacter le MT pour bilan de sant | Legacy  |
| S3_RECO_02 |  CCC | Bnficiez d'un accompagnement d'accs aux soins (Mdecin traitant) | Informer sur les dispositifs d'accs aux soins (courrier DAC/CPTS), chercher un MT via internet | Legacy  |
| S3_RECO_03 |  CCC | Un suivi rgulier est  prvoir selon les prconisations du mdecin | Prendre RDV avec les spcialistes selon dernire consultation | Legacy  |
| S3_RECO_04 |  CCC | Demandez un bilan de sant | Contacter le MT pour bilan de sant | Legacy  |
| S3_RECO_05 |  CCC | Prendre RDV avec votre mdecin traitant pour bilan | Contacter le MT pour bilan de mdication | Legacy  |

#### Wording MT (exemples  les 13 MTs spcialistes ont le mme pattern)

| MT_ID | Libell | Wording IDEC | Wording Utilisateur | / |
|---|---|---|---|---|
| MT_V3_020 | Bilan sant MT | Contacter le mdecin traitant pour organiser un bilan de sant | Prenez rendez-vous avec votre mdecin traitant pour un bilan |  |
| MT_V3_033 | Accs aux soins | Informer l'aidant sur les dispositifs d'accs aux soins | Renseignez-vous sur les dispositifs pour trouver un mdecin traitant |  |
| MT_V3_015030 | RDV [spcialiste] | Prendre RDV avec [spcialiste] selon date dernire consultation | Prenez rendez-vous avec votre [spcialiste] pour un suivi |  |
| MT_V3_018 | MT orientation | Orienter l'aidant vers son mdecin traitant | Consultez votre mdecin traitant |  |
| MT_V3_019 | Bilan mdication | Contacter le MT pour exposer l'tat de sant et bilan de mdication | Demandez un bilan de vos mdicaments  votre mdecin |  |

> **Dcision Dr. Monka** :  Wording valid |  Corrections

---

### Phase 2  Versioning par criticit

>  **S3 n'a qu'un seul niveau d'activation (CCC)**. Le versioning ne produit qu'une seule version par reco/MT. Si des rgles Standard sont ajoutes (Action 2, Options A/B), le versioning devra tre enrichi.

| Niveau | Reco Utilisateur (CAT_01) | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Bilan de sant et suivi sommeil recommands | Organiser bilan de sant et adresser les troubles du sommeil sous 30 jours |

| Niveau | Reco Utilisateur (CAT_02) | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Accompagnement pour trouver un mdecin traitant | Faciliter l'accs  un mdecin traitant sous 30 jours |

| Niveau | Reco Utilisateur (CAT_03) | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Suivi mdical spcialis  relancer | Relancer le suivi spcialis et bilan de mdication sous 30 jours |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP S3 n'est PAS activ (O44  "Moins bonne" ou E18 pas mauvaise = sant perue OK et sommeil correct)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  Votre sant semble prserve et votre sommeil correct. Continuez  consulter rgulirement votre mdecin traitant et vos spcialistes. Pensez  signaler tout changement.  |  Sant perue et sommeil dans les limites acceptables. Encourager le maintien du suivi mdical rgulier. Rvaluer au prochain suivi.  |

### 6.2  Checklist de cohrence

| # | Vrification | Rsultat | Dtail |
|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  | E18 (via CCC_01), O44 (via CCC_01) : . **O37, O38, O39, O40, O41, O42, O43** :  pas de rgle  questions de contexte factuel uniquement |
| 2 | Chaque rgle d'activation  1 version de reco |  | 1 rgle  5 recos lies |
| 3 | Chaque catgorie de reco  ses MT assignes |  | CAT_01 : 1 MT, CAT_02 : 2 MT, CAT_03 : 15 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  | Aucune catgorie n'a 2 niveaux (1 seul CCC partout) |
| 5 | Aucune MT orpheline |  | 18 MT toutes rattaches |
| 6 | Reco prvention prsente |  | Propose |
| 7 | Wording reco = conseil, MT = verbe d'action |  | Propos |
| 8 | Sens clinique renseign pour chaque rgle |  | 1 rgle documente |

> **Score** : **4/8 valids**, 2 proposs, 1 partiel, 1 

>  **Points majeurs** :
> - **7 questions sans rgle d'activation** (O37-O43)  elles servent de contexte pour cibler les MTs mais ne dclenchent rien
> - **K3 non respect**  1 seul niveau d'activation. Options proposes en Action 2.
> - **16 MT contributives pour l'ASR**  question K11  clarifier (voir Action 3)

---

## SUIVI DYNAMIQUE  S3

### Question de suivi N3

| Champ | Valeur |
|---|---|
| **Question N3 ID** | S_S3 |
| **Libell** | Y a-t-il eu des changements concernant : sant physique et renoncement aux soins ? |
| **Rponses** | Oui / Non |
| **Source** | Legacy  |

**Si Oui  Rouverture :**

| # | Question ID | Libell | Classification |
|---|---|---|---|
| 1 | E18 | Qualit de votre sommeil ces dernires semaines ? | etat |
| 2 | O37 | Avez-vous un mdecin traitant ? | facteur |
| 3 | O38 | Avez-vous des mdecins spcialistes ? | facteur |
| 4 | O39 | Lesquels ? | etat |
| 5 | O40 | RDV mdicaux raliss cette anne ? | facteur |
| 6 | O41 | Lesquels ? | facteur |
| 7 | O42 | Maladies concernes ? | facteur |
| 8 | O43 | Mdicaments quotidiens ? | facteur |
| 9 | O44 | Sant par rapport  une personne du mme ge ? | etat |

---

## SCORING  Questions S3 contribuant au score V3

| Question | Score max | Barme |
|---|---|---|
| E18 | 2 | Bonne = 0 / Correcte = +1 / Mauvaise ou trs mauvaise = +2 |
| O44 | 2 | Meilleure = 0 / Identique = +1 / Moins bonne = +2 |

> **Score S3 contribue au score global V3** (max 20 points sur 10 questions). Les questions O37-O43 sont **non-scorantes** (facteurs factuels).

---

## SYNTHSE FINALE

| Mtrique | Valeur |
|---|---|
| Catgories de reco | **3** (bilan sant, accs MT, suivi spcialis) |
| Rgles d'activation | **1** (:1)  100% legacy |
| MT totales | **18** (toutes legacy) |
| MT contributives | **16** (MED : 16) |
| Domaine  /  | 16  / 2  |
| ASR |  16 MT contributives (question K11  clarifier) |
| Reco prvention |  Propose |
| Checks OK | 4/8 |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | K3 non respect : ajouter des rgles Standard (O37=Non ? O40=Non ?) ou accepter 1 seul CCC ? |  Haute |
| 2 | K11 : les 16 MT MED sont-elles toutes ncessaires ou conditionnes par O39 ? |  Haute |
| 3 | Valider les 3 catgories |  Haute |
| 4 | Valider les acteurs/domaines proposs IA |  Moyenne |
| 5 | Valider wording |  Moyenne |
| 6 | Valider reco prvention |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Jb=`#  Fiche de Validation MP  S4  Hygine de vie (activit et sommeil)

> **Vulnrabilit** : V3  Sant de l'Aidant  
> **ASR** :  Prserver votre qualit de vie   
> **Signature A** : S4-A  Hygine de vie maintenue  
> **Signature B** : S4-B  Dmarche proactive engage  
> **Date de validation** : ../02/2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## CONTEXTE  Big Picture V3

### Rpartition des 26 questions V3 entre les 4 MPs

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **S1** | Charge, fatigue et risque d'puisement | 9 | E7, E10, E11, E14, N8, O29, O32, O33, O50 | Surcharge physique et psychologique |
| **S2** | Inquitudes pour la scurit | 4 | E8, E9, E12, E13 | Isolement motionnel, inquitudes scuritaires |
| **S3** | Sant physique et renoncement aux soins | 9 | E18, O37, O38, O39, O40, O41, O42, O43, O44 | Suivi mdical, accs aux soins |
| **S4** | Hygine de vie (activit et sommeil) | 4 | E15, E16, E17, E19 | Accs aux RDV pour soi, activit physique, soucis sant |

> **S4 se concentre sur l'HYGINE DE VIE PROACTIVE** : l'aidant prend-il soin de lui-mme ? Accde-t-il  ses propres soins ? Fait-il de l'activit physique ? Quels sont ses soucis de sant prioritaires ? La frontire avec S3 est fonctionnelle : S3 = SUIVI MDICAL EXISTANT (a-t-il un MT ? des spcialistes ?), S4 = COMPORTEMENT PROACTIF (prend-il ses RDV ? fait-il du sport ? mange-t-il bien ?). S4 est le MP de la PRVENTION ACTIVE  aider l'aidant  maintenir son mode de vie sain.

---

## 0. DONNES FIGES  Questions rattaches  S4

### Questions actuelles

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E15 | Rencontrez-vous des difficults  obtenir des rendez-vous mdicaux pour vous-mme ? | etat | Pas du tout / Un peu / Oui |
| 2 | E16 | Depuis que vous tes aidant, vos propres rendez-vous mdicaux | etat | Je les gre normalement / J'ai du mal  les prendre ou  les garder / Je les reporte ou les annule souvent / Je ne sais pas / Je prfre ne pas rpondre |
| 3 | E17 | Pratiquez-vous une activit physique rgulire (au moins 30 minutes, 3 fois par semaine) ? | facteur | Oui / Non |
| 4 | E19 | Quels sont aujourd'hui vos principaux soucis de sant ? | etat | Fatigue / Sommeil / Douleurs / Moral (anxit, ides noires, dcouragement) / Alimentation ou poids / Problmes de tension, de cur, de diabte / Autre problme de sant / Aucun en particulier |

> Total : 4 questions rattaches  S4

###  Pourquoi ces 4 questions ?

**E15** et **E16** forment un duo qui mesure l'**accs aux soins pour soi-mme** :
- E15 = difficult objective  obtenir des RDV (gradient 3 niveaux)
- E16 = comportement face aux RDV depuis le dbut de l'aidance (5 rponses dont "ne sais pas" et "prfre ne pas rpondre")

 S4 et pas S3 car E15/E16 mesurent un COMPORTEMENT PROACTIF (est-ce que je prends/garde mes RDV ?), pas un TAT DE SUIVI (est-ce que j'ai un mdecin ? S3). La distinction est : S3 = "ai-je un suivi ?", S4 = "est-ce que je l'entretiens ?".

>  **E15/E16 = candidats dbattables S3 vs S4** : L'accs aux soins pourrait aussi tre class dans S3. Le choix S4 est justifi car :
> 1. E15/E16 mesurent un comportement actif (prendre/garder des RDV) = hygine de vie
> 2. S3 contient dj 9 questions (le max de V3)  l'quilibre serait rompu  11 vs 2
> 3. La combinaison E15+E16 forme le CCC de S4 (renoncement actif aux soins)  cliniquement cohrent dans le mme MP

**E17** mesure l'**activit physique rgulire**. C'est l'indicateur classique d'hygine de vie.  S4 pur.

**E19** identifie les **soucis de sant prioritaires** de l'aidant (choix multiples). C'est un inventaire dclaratif qui sert  cibler les recommandations (fatigue  S1/bilan, sommeil  S3, douleurs  bilan mdical, moral  S2/soutien psy).  S4 car c'est une question d'ORIENTATION (de quoi l'aidant a-t-il besoin ?) plus que de DIAGNOSTIC (S3) ou de CHARGE (S1).

###  Analyse des 22 autres questions V3  Pourraient-elles appartenir  S4 ?

#### Questions S1 (Charge, fatigue)

| Question | Libell | Pertinence S4 ? | Raisonnement |
|---|---|---|---|
| **E7, E10, E11, E14, N8, O29, O32, O33, O50** | Charge, puisement, moral, impact pro |  Non | Tous = charge/fatigue = S1 pur. |

>  **Verdict S1** : Aucune question S1 ne devrait tre dans S4.

#### Questions S2 (Inquitudes scurit)

| Question | Libell | Pertinence S4 ? | Raisonnement |
|---|---|---|---|
| **E8, E9, E12, E13** | Isolement, temps, scurit |  Non | Dimension psycho-sociale/scuritaire = S2 pur. |

>  **Verdict S2** : Aucune question S2 ne devrait tre dans S4.

#### Questions S3 (Sant physique)

| Question | Libell | Pertinence S4 ? | Raisonnement |
|---|---|---|---|
| **E18** | Qualit du sommeil |  **Dbattable** | Le sommeil est un marqueur d'hygine de vie  pourrait tre S4. **Mais** : E18 est dans S3 car elle mesure un paramtre de SANT PHYSIQUE OBJECTIVE (qualit du repos), pas un COMPORTEMENT. De plus, E18 forme le CCC de S3 avec O44. |
| **O37-O44** | Suivi mdical, pathologies, mdicaments |  Non | Suivi mdical existant = S3 pur. |

>  **Verdict S3** : Aucune question S3 ne devrait tre dans S4. **E18** est le seul dbattable  justifi en S3.

###  Synthse affiliation

| Question | MP actuel | Pertinence S4 ? | Confiance |
|---|---|---|---|
| S1 (9 questions) | S1 |  Non |  Haute |
| S2 (4 questions) | S2 |  Non |  Haute |
| E18 | S3 |  Dbattable |  Moyenne |
| O37-O44 | S3 |  Non |  Haute |

> **Conclusion** : Les 4 questions de S4 sont les bonnes. S4 est le MP le plus lger de V3 (4 questions, partag avec S2). C'est cohrent avec son rle de "prvention active"  il cible des comportements, pas des situations complexes.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

L'analyse des questions et des recommandations legacy montre 2 axes cliniques :

1. **Reprise du suivi mdical personnel**  E15/E16 (accs aux RDV + gestion des RDV)  S4_RECO_01 (bilan de sant MT).
2. **Identification des soucis de sant**  E19 (soucis prioritaires)  S4_RECO_01 (bilan MT orient sur les soucis dclars).

>  **Problme** : S4 n'a qu'**1 seule reco** (S4_RECO_01). Toutes les questions convergent vers la mme action : "Prendre RDV avec le MT pour bilan". Il n'y a pas de reco pour l'activit physique (E17). C'est un MP trs concentr.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | S4_CAT_01 | Bilan mdical et reprise du suivi | Organiser un bilan de sant MT pour adresser le renoncement aux soins et les soucis de sant | Legacy  (S4_RECO_01) |

###  Pourquoi 1 seule catgorie ?

**Pas 2** : On pourrait sparer "accs aux soins" (E15/E16) de "soucis de sant" (E19). **Mais** : la seule reco legacy (S4_RECO_01) couvre les deux  la sparation serait artificielle.

**Pas 0** : S4 a des contenus cliniques rels (renoncement aux soins = problme de sant publique majeur chez les aidants). 1 catgorie est le minimum viable.

>  **Observation** : S4 est le MP le plus lger de V3 en termes de catgories. Avec 1 seule catgorie et 1 seule reco, il se rapproche d'un "sous-MP" qui pourrait tre fusionn avec S3.  discuter avec Dr. Monka.
>
>  **Option d'enrichissement** :
> - Ajouter une CAT_02 "Activit physique et bien-tre" couvrant E17 (pas d'activit physique  encourager reprise sportive). Aucune reco legacy n'existe pour E17, mais c'est un axe de prvention vident.
>
> **Dcision Dr. Monka** :  1 catgorie |  Ajouter CAT_02 (activit physique) |  Fusionner S4 avec S3

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Raisonnement

S4 a **une seule rgle d'activation** : 1 CCC. Aucune Critique, aucun Standard. Mme situation que S3.

### Rappel des questions dclenchantes

> **E15**   Rencontrez-vous des difficults  obtenir des rendez-vous mdicaux pour vous-mme ? 
> -  Pas du tout /  **Un peu** (CCC) /  **Oui** (CCC)

> **E16**   Depuis que vous tes aidant, vos propres rendez-vous mdicaux 
> -  Je les gre normalement /  J'ai du mal  les prendre ou  les garder /  **Je les reporte ou les annule souvent** (CCC) /  Je ne sais pas /  Je prfre ne pas rpondre

> **E17**   Pratiquez-vous une activit physique rgulire ? 
> -  Oui /  Non
> -  **Aucune rgle d'activation.**

> **E19**   Quels sont aujourd'hui vos principaux soucis de sant ? 
> - Fatigue / Sommeil / Douleurs / Moral / Alimentation ou poids / Problmes cardiovasculaires / Autre / Aucun
> -  **Aucune rgle d'activation.** Questions de contexte uniquement.

---

### Catgorie 1  Bilan mdical et reprise du suivi

####  CCC  \`V3_S4_CCC_01\`

> **SI** E15  {Un peu, Oui} **ET** E16 =  Je les reporte ou les annule souvent 
>
> **ALORS** : Organiser un bilan de sant avec le mdecin traitant ( 30 jours)
>
> **Sens clinique** : Renoncement actif aux soins de l'aidant. L'aidant a des difficults d'accs aux RDV ET reporte/annule activement ses propres soins  signal fort de renoncement aux soins. Source : Legacy 

---

###  Dcisions Action 2

| # | Rgle | Niveau | Catgorie(s) | Source |
|---|---|---|---|---|
| 1 | V3_S4_CCC_01 (E15  Un peu + E16 = reporte souvent) |  CCC | CAT_01 | Legacy  |

> **Contrle K3** :
> - CAT_01 :  1 seul niveau (CCC)
>
>  **K3 non respect**  mme situation que S3. Les mmes options s'appliquent :
> - **Option A** : Ajouter Standard pour E16 = "J'ai du mal" (pas seulement "reporte souvent"). **Justification** : la difficult  prendre ses RDV, mme sans report systmatique, est un signal de renoncement premier.
> - **Option B** : Ajouter Standard pour E17 = "Non" (pas d'activit physique). **Justification** : l'inactivit physique est un facteur de risque sant tabli. Mais aucune reco legacy n'existe pour E17  il faudrait en crer une.
> - **Option C** : Laisser en l'tat (1 seul CCC).
>
>  **2 questions sans rgle d'activation** : E17 (activit physique) et E19 (soucis sant) ne dclenchent rien. E17 est un indicateur d'hygine de vie qui mriterait une rgle Standard. E19 sert de contexte pour cibler le bilan MT.
>
> **Dcision Dr. Monka** :  Option A |  Option B |  Option C |  Autre

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Raisonnement

> **tat legacy** : S4 n'a **aucune MT legacy** en DB.
>
>  **Anomalie majeure** : S4 est le seul MP de V3 (et possiblement de tout Monka)  avoir 0 micro-tche. La reco S4_RECO_01 existe mais n'a aucune MT associe. Cela signifie que :
> 1. L'ASR de S4 ne peut PAS tre valide (K11 : 100% des MT contributives requises  0 MT = 0/0 = division par zro logique)
> 2. L'IDEC n'a aucune action concrte  excuter lorsque S4 est activ
> 3. L'aidant ne reoit aucune MT  complter

### CAT_01  Bilan mdical et reprise du suivi

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| _(Aucune MT)_ | | | | | |

>  **Point critique** : S4 est un MP "vide" ct micro-tches. C'est le problme identifi dans \`C_master_mt_asr.md\` : *"MP S4 has no Contributive MTs, requiring a potential rule adjustment or ASR modification."*
>
>  **Options pour rsoudre l'absence de MT** :
>
> **Option 1  Crer des MT pour S4** :
> | MT propose | Type | Acteur | Reco |
> |---|---|---|---|
> | Contacter le MT pour organiser un bilan de sant | MED  | IDEC | S4_RECO_01 |
> | Identifier les RDV mdicaux  reprendre | INFO  | Aidant | S4_RECO_01 |
> | Accompagner la planification des RDV | ORGA  | IDEC | S4_RECO_01 |
>
> **Avantage** : S4 devient fonctionnel avec 1 MT contributive (MED)  ASR validable.
> **Risque** : Doublon potentiel avec S3 (MT_V3_020 = "contacter MT pour bilan de sant").
>
> **Option 2  Fusionner S4 dans S3** :
> Absorber les 4 questions et la rgle CCC dans S3. S3 passerait de 9  13 questions.
> **Avantage** : limine le MP vide. Simplifie l'architecture.
> **Risque** : S3 deviendrait trs dense (13 questions + 19+ MT). Perte de la granularit thmatique.
>
> **Option 3  Modifier l'ASR de S4** :
> Redfinir l'ASR pour qu'elle ne ncessite pas de MT contributives (validation automatique ou par rponse aux questions uniquement).
> **Avantage** : Conserve S4 comme MP indpendant.
> **Risque** : Droge  K11 (100% MT contributives requises).
>
> **Dcision Dr. Monka** :  Option 1 (crer MT) |  Option 2 (fusionner avec S3) |  Option 3 (modifier ASR)

---

###  Synthse MT  S4

| Mtrique | Valeur |
|---|---|
| MT totales legacy | **0** |
| MT contributives | **0** |
| MT non-contributives | **0** |
| ASR validation |  **Impossible** (0 MT  K11 non applicable) |

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **tat actuel** : Aucune MT  aucun acteur, aucun domaine. Ce tableau sera rempli une fois la dcision Action 3 prise.

| MT_ID | Libell | Type | Acteur | Domaine | / | Reco | Source |
|---|---|---|---|---|---|---|---|
| _(Aucune MT)_ | | | | | | | |

> **Dcision Dr. Monka** : En attente de la dcision Action 3.

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

#### Wording de la Reco legacy

| Reco ID | Niveau | Texte utilisateur | Actions IDEC | Source |
|---|---|---|---|---|
| S4_RECO_01 |  CCC | Prendre rendez-vous avec le mdecin traitant pour bilan de sant | Contacter le mdecin traitant pour bilan de sant | Legacy  |

> **Observation** : Le texte utilisateur de S4_RECO_01 est quasi-identique  S3_RECO_04 ("Demandez un bilan de sant") et S3_RECO_01 ("Prendre RDV avec le MT"). Ce doublon renforce l'option de fusion S3/S4.

#### Wording MT

> Pas de MT legacy  wording en attente de la dcision Action 3.

### Phase 2  Versioning par criticit

> S4 n'a qu'un seul niveau d'activation (CCC). Le versioning ne produit qu'une seule version.

| Niveau | Reco Utilisateur (CAT_01) | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Reprenez votre suivi mdical avec votre mdecin traitant | Organiser la reprise du suivi mdical de l'aidant sous 30 jours |

> **Dcision Dr. Monka** :  Wording valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP S4 n'est PAS activ (l'aidant accde facilement  ses RDV et ne reporte pas ses soins)

| | Wording Utilisateur | Wording IDEC |
|---|---|---|
|  Prvention |  Vous semblez maintenir un accs correct  vos propres soins. Continuez  prendre soin de vous : pensez  l'activit physique et  signaler tout souci de sant.  |  Accs aux soins prserv. Encourager l'activit physique et le maintien des bonnes habitudes. Questionner les soucis de sant dclars. Rvaluer au prochain suivi.  |

### 6.2  Checklist de cohrence

| # | Vrification | Rsultat | Dtail |
|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  | E15 (CCC_01), E16 (CCC_01) : . **E17, E19** :  pas de rgle |
| 2 | Chaque rgle d'activation  1 version de reco |  | 1 rgle  1 reco |
| 3 | Chaque catgorie de reco  ses MT assignes |  | CAT_01 : **0 MT** |
| 4 | K3 respect (2 niveaux par catgorie) |  | CAT_01 : 1 niveau seulement |
| 5 | Aucune MT orpheline | N/A | 0 MT |
| 6 | Reco prvention prsente |  | Propose |
| 7 | Wording reco = conseil, MT = verbe d'action |  | Partiel (1 reco, 0 MT) |
| 8 | Sens clinique renseign pour chaque rgle |  | 1 rgle documente |

> **Score** : **3/8 valids**, 2 proposs, 1 N/A, 2 

>  **Points critiques** :
> - **0 MT** = MP non-fonctionnel ct excution
> - **K3 non respect** = 1 seul niveau d'activation
> - **E17 (activit physique) sans rgle ni reco** = couverture clinique incomplte
> - **Reco S4_RECO_01  doublon S3_RECO_04** = risque de confusion inter-MP

---

## SUIVI DYNAMIQUE  S4

### Question de suivi N3

| Champ | Valeur |
|---|---|
| **Question N3 ID** | S_S4 |
| **Libell** | Y a-t-il eu des changements concernant : hygine de vie (activit et sommeil) ? |
| **Rponses** | Oui / Non |
| **Source** | Legacy  |

**Si Oui  Rouverture :**

| # | Question ID | Libell | Classification |
|---|---|---|---|
| 1 | E15 | Difficults  obtenir des RDV mdicaux ? | etat |
| 2 | E16 | Vos propres RDV mdicaux depuis que vous tes aidant ? | etat |
| 3 | E17 | Activit physique rgulire ? | facteur |
| 4 | E19 | Principaux soucis de sant ? | etat |

---

## SCORING  Questions S4 contribuant au score V3

| Question | Score max | Barme |
|---|---|---|
| _(Aucune question S4 ne contribue au scoring V3)_ | | |

> **Aucune question S4 n'apparat dans le barme de scoring V3.** Les 10 questions scorantes V3 sont : E7, E8, E9, E10, E11, E12, E18, O29, O33, O44. S4 est le seul MP de V3 dont aucune question ne contribue au score. Cela renforce le caractre "annexe" de S4 par rapport aux autres MPs.

---

## SYNTHSE FINALE

| Mtrique | Valeur |
|---|---|
| Catgories de reco | **1** (bilan mdical) |
| Rgles d'activation | **1** (:1)  100% legacy |
| MT totales | **0**  |
| MT contributives | **0** |
| Domaine  /  | N/A |
| ASR |  **Non validable** (0 MT) |
| Reco prvention |  Propose |
| Checks OK | 3/8 |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 1 catgorie (bilan mdical) | Legacy  |
| 2 | 1 rgle d'activation (100% legacy) | Legacy  |
| 3 | 0 MT (anomalie documente) |   rsoudre |

### Dcisions restantes (PRIORITAIRES)

| # | Dcision | Priorit |
|---|---|---|
| 1 | **Rsoudre l'absence de MT** : crer des MT / fusionner avec S3 / modifier l'ASR ? |  Critique |
| 2 | **K3 non respect** : ajouter Standard pour E16 "J'ai du mal" ou E17 "Non" ? |  Haute |
| 3 | **E17 (activit physique)** : crer une reco et des MT pour l'inactivit physique ? |  Haute |
| 4 | **Doublon reco** : S4_RECO_01  S3_RECO_04  diffrencier ou fusionner ? |  Haute |
| 5 | **Aucune question scorante** : est-ce normal que S4 ne contribue pas au score V3 ? |  Moyenne |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
>  **ATTENTION** : Ce MP ncessite des dcisions structurelles AVANT validation (Action 3  absence de MT).
`,Yb=`#  Fiche de Validation MP  F1  Vie quotidienne, budget et entourage du proche

> **Vulnrabilit** : V4  Fragilit du Proche  
> **ASR** :  F1-A : Organisation structure | F1-B : Soutien ou aide quotidienne identifie   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## CONTEXTE  Big Picture V4

V4 (Fragilit du Proche) couvre 6 MPs centrs sur le Bloc 5  Vie quotidienne et fragilits du proche :

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| **F1** | **Vie quotidienne, budget et entourage** | **8** | **E20, E21, N10, N21, N23, N27, N9, O51** | **Quotidien global, budget, isolement, projet de vie** |
| F2 | Autonomie, aide humaine et prsence | 7 | E22, E23, E24, N18, N36, O8, O9 | Aide ncessaire jour/nuit, dplacements |
| F3 | Mmoire, comportement et risques | 8 | E25, E26, E27, N19, N22, N24, N25, O13 | Troubles cognitifs, comportements |
| F4 | Douleur, fatigue, sommeil et tat gnral | 11 | N11, N12, N13, N34, N44, O15, O22, O26, O3, O4, O5, O7 | tat physique global |
| F5 | Dpendance, handicap, addictions | 10 | E28, E29, E30, E31, N16, N30, N37, N38, N39, N40, O53, O54 | Hospitalisations, handicap, addictions |
| F6 | Autonomie fonctionnelle, chutes et aides | 9 | E32, E33, N32, O11, O12, O16, O51, O6 | Capacits motrices, chutes, aides techniques |

>  **Note** : E21 est mappe  F1 ET A1 (V2). O51 est mappe  F1 ET F6. O53/O54 sont mappes  F5 ET A2 (V2). Ces partages inter-vulnrabilit/inter-MP sont normaux  les questions sont figes, seule l'activation diffre.

> F1 est le **MP de cadrage** de V4. Il pose le dcor de la situation de vie du proche : o vit-il ? peut-on maintenir la situation ? est-il isol ? a-t-il des problmes financiers ? C'est le MP qui dclenche une rflexion globale sur le projet de vie.

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## 0. DONNES FIGES  Questions rattaches  F1

### Questions rattaches  ce MP

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E20 | Si vous pensez aux 612 prochains mois, o souhaiteriez-vous idalement que vive votre proche ? | facteur |   son domicile actuel /   mon domicile /  En tablissement (EHPAD, rsidence, foyer) /  Je ne sais pas / nous n'en avons pas parl |
| 2 | E21 | Pensez-vous qu'il sera possible de maintenir cette situation de vie sans changement majeur dans les prochains mois ? | etat |  Oui, probablement /  Oui, mais cela risque d'tre difficile /  Non, un changement sera ncessaire /  Je ne sais pas |
| 3 | N10 | Quelle est la nature de l'aide que vous apportez ? (plusieurs rponses possibles) | facteur |  Tches de la vie quotidienne (mnage, repas, habillage...) /  Gestion administrative et budgtaire /  Soutien moral, prsence ou compagnie sur le lieu de vie /  Accompagnement  des rendez-vous /  Autre |
| 4 | N9 | La personne aide rencontre-t-elle des problmes pour grer son budget ou ses affaires administratives ? | facteur |  Non /  Elle se fait aider /  Oui |
| 5 | N21 | Rencontre-t-elle des problmes financiers ? | facteur |  Non /  Parfois /  Oui |
| 6 | N23 | La personne aide a-t-elle des difficults  maintenir une activit professionnelle, occupationnelle ou scolaire ? | facteur |  Non /  Parfois /  Oui |
| 7 | N27 | Estimez-vous que la personne aide est socialement isole ? | facteur |  Pas du tout /  Un peu /  Beaucoup /  Totalement |
| 8 | O51 | Songez-vous  adapter son lieu de vie / son quotidien ? | facteur |  Oui /  Non |

> Total : **8 questions** rattaches  F1 (1 etat, 7 facteur)

### Questions candidates exclues

> Pour CHAQUE question de V4 non rattache  F1 : analyse de pertinence.

| Question ID | Libell | Pertinente pour F1 ? | Raisonnement |
|---|---|---|---|
| E22 | Heures d'aide humaine par semaine |  Non | Dimension F2  volume d'aide, pas projet de vie |
| E23 | Temps possible seul au domicile |  Non | Dimension F2  autonomie fonctionnelle |
| E24 | Besoin prsence la nuit |  Non | Dimension F2  surveillance nocturne |
| E25 | Confusion jour/nuit |  Non | F3  troubles cognitifs |
| E26 | Dsorientation lieux familiers |  Non | F3  troubles cognitifs |
| E27 | Comportements dangereux |  Non | F3  scurit comportementale |
| N18 | Raliser seul les actes de la vie quotidienne |  Possible | Pourrait informer le projet de vie F1 (si la personne ne peut plus faire les actes seule, cela impacte le maintien). Mais cliniquement  F2 (aide ncessaire). |
| N19 | Changements d'humeur ou de comportement |  Non | F3  troubles comportementaux |
| N22 | Comportements  risque (automutilation) |  Non | F3  risques scuritaires |
| N24 | Troubles mmoire/concentration |  Non | F3  troubles cognitifs |
| N25 | Ides suicidaires |  Non | F3  risque vital |
| O13 | Dtrioration fonctions cognitives |  Non | F3  valuation cognitive |
| N11 | Douleurs chroniques |  Non | F4  tat physique |
| N12 | Fatigue/manque d'nergie |  Non | F4  tat gnral |
| N13 | Troubles du sommeil |  Non | F4  sommeil |
| N36 | Besoin aide planification journes |  Possible | Touche l'organisation du quotidien mais cliniquement  F2 (aide humaine ncessaire). |
| O51 | Adapter lieu de vie |  Rattache | Aussi mappe  F6  double appartenance cohrente (F1 = projet de vie, F6 = amnagement concret). |

>  **Observation** : N18 (actes vie quotidienne) pourrait enrichir l'analyse F1 sur la soutenabilit du maintien, mais elle est cliniquement mieux place en F2. Pas de proposition de dplacement.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

> **Objectif** : Identifier les types d'actions DIFFRENTES que ce MP peut proposer.  
> **Mthode** : Ignorer la criticit. Se demander : "Quelles grandes actions cliniques distinctes pour ce MP ?"  
> **Source** : Recos legacy Supabase + jugement clinique

###  Questions  se poser  Action 1

| # | Question | Pourquoi c'est important |
|---|---|---|
| 1.1 | Les catgories couvrent-elles des dimensions cliniques **rellement distinctes** ? Ou certaines se chevauchent ? | viter les doublons  chaque CAT = 1 axe d'action unique |
| 1.2 | Y a-t-il une action clinique vidente que **aucune catgorie** ne couvre ? | Dtecter les angles morts |
| 1.3 | Faut-il **fusionner** deux catgories proches ? | Simplifier si la distinction n'apporte pas de valeur clinique |
| 1.4 | Faut-il **clater** une catgorie trop large en deux ? | Granularit suffisante pour que chaque CAT soit actionnable |
| 1.5 | Combien de catgories est raisonnable pour ce MP ? (T4  proportionnalit) | Un MP simple = 1-2 CAT ; un MP complexe = 3-4 CAT max |

###  Raisonnement

> Les 9 recos legacy se regroupent naturellement autour de **3 axes d'action cliniques distincts** :
>
> 1. **Projet de vie et hbergement** (E20, E21)  Anticiper, scuriser ou prparer une transition de lieu de vie. Recos F1_RECO_01, F1_RECO_02, F1_RECO_03.
> 2. **Soutien socio-financier** (N9, N21, N23)  Accompagnement budgtaire, administratif et social de la personne aide. Recos F1_RECO_05, F1_RECO_08, F1_RECO_09.
> 3. **Lien social et soutien psychologique** (N27, N10)  Rompre l'isolement et proposer un soutien psychologique. Recos F1_RECO_04, F1_RECO_06, F1_RECO_07.
>
> **Pourquoi pas 4 catgories ?** On pourrait sparer "soutien psycho" et "lien social", mais cliniquement ils convergent : l'isolement gnre le besoin psycho, et le suivi psycho inclut souvent la resocialisation.
>
> **Pourquoi pas 2 catgories ?** Fusionner socio-financier et projet de vie serait une erreur : le premier traite des moyens concrets (budget, aides), le second traite de la stratgie (o vivra le proche demain ?).

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | F1_CAT_01 | Projet de vie et hbergement | Anticiper la trajectoire rsidentielle du proche : maintien  domicile, adaptation ou transition en tablissement | Legacy  |
| 2 | F1_CAT_02 | Soutien socio-financier et administratif | Identifier et mobiliser les aides financires, administratives et ergonomiques pour la personne aide | Legacy  |
| 3 | F1_CAT_03 | Lien social et soutien psychologique | Rompre l'isolement social de la personne aide et proposer un accompagnement psychologique si besoin | Legacy  |

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

> **Objectif** : Pour chaque catgorie, quelles Q/A la dclenchent et  quel niveau ?  
> **Rgle K3** : S'applique  L'INTRIEUR de chaque catgorie (pas entre catgories)  
> **Format obligatoire** : Afficher la question en texte complet avec toutes ses options. Mettre en **gras** la rponse dclenchante.

###  Questions  se poser  Action 2

| # | Question | Pourquoi c'est important |
|---|---|---|
| 2.1 | **Chaque question** du MP est-elle utilise dans **au moins 1 rgle** ? Si non, pourquoi ? | Dtecte les questions orphelines |
| 2.2 | **Chaque combinaison** cliniquement significative a-t-elle une rgle ? | vite les trous de couverture |
| 2.3 | Les niveaux de criticit sont-ils **cliniquement justifis** ? | La criticit doit reflter l'urgence relle |
| 2.4 | Y a-t-il des **combos de rponses** qui signalent un niveau suprieur ? | Dtecte les CCC composites potentiels |
| 2.5 | Y a-t-il des **rponses extrmes** non exploites ? | Les signaux forts doivent dclencher une rgle |
| 2.6 | Chaque catgorie a-t-elle **au minimum 2 niveaux** (Standard + CCC) ? | K3 impose la granularit |
| 2.7 | Une mme rgle peut-elle **activer plusieurs catgories** ? | Assurer la cohrence du modle d'activation |

### Catgorie 1  Projet de vie et hbergement

> **Question complte E21** :  Pensez-vous qu'il sera possible de maintenir cette situation de vie sans changement majeur dans les prochains mois ? 
> **Options** :  Oui, probablement /  Oui, mais cela risque d'tre difficile /  **Non, un changement sera ncessaire** /  **Je ne sais pas**

> **Question complte O51** :  Songez-vous  adapter son lieu de vie / son quotidien ? 
> **Options** :  **Oui** /  Non

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V2_F1_STD_01 | E21  {"Non", "Je ne sais pas"} | Activer CAT_01 | Maintien situation sans changement impossible | Legacy  |
|  Standard | V2_F1_STD_02 | O51 = "Oui" | Activer CAT_01 | Projet adaptation lieu de vie en cours | Legacy  |
|  CCC | V2_F1_CCC_01 | E21 = "Non, un changement sera ncessaire" **ET** (N21 = "Oui" **OU** N9 = "Oui") | Activer CAT_01 + CAT_02 | Vie quotidienne non tenable + fragilits financires/gestion | Legacy  |

### Catgorie 2  Soutien socio-financier et administratif

> **Question complte N21** :  Rencontre-t-elle des problmes financiers ? 
> **Options** :  Non /  Parfois /  **Oui**

> **Question complte N9** :  La personne aide rencontre-t-elle des problmes pour grer son budget ou ses affaires administratives ? 
> **Options** :  Non /  Elle se fait aider /  **Oui**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC | V2_F1_CCC_01 | E21 = "Non" **ET** (N21 = "Oui" **OU** N9 = "Oui") | Activer CAT_02 (via CAT_01) | Changement ncessaire + problmes financiers/gestion | Legacy  |

>  **Alerte K3** : CAT_02 n'a qu'un seul niveau d'activation (CCC). Il manque un niveau Standard. Par exemple :
> -  **Proposition STD pour CAT_02** : SI N21 = "Parfois" OU N9 = "Elle se fait aider"  Activer CAT_02 en Standard | Sens : fragilits sous contrle mais  surveiller.

### Catgorie 3  Lien social et soutien psychologique

> **Question complte N27** :  Estimez-vous que la personne aide est socialement isole ? 
> **Options** :  Pas du tout /  Un peu /  **Beaucoup** /  **Totalement**

> **Question complte N23** :  La personne aide a-t-elle des difficults  maintenir une activit professionnelle, occupationnelle ou scolaire ? 
> **Options** :  Non /  Parfois /  **Oui**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard |  | (Rattache  F1_RECO_06, F1_RECO_07) | Activer CAT_03 | Isolement ou difficult occupationnelle | Legacy (implicite) |

>  **Alerte** : CAT_03 n'a **aucune rgle d'activation formalise** en DB. Les recos F1_RECO_06 et F1_RECO_07 sont rattaches  V2_F1_STD_01 (= rgle CAT_01). Cliniquement, ces recos devraient avoir leurs propres rgles.
>
>  **Propositions de rgles pour CAT_03** :
> - **STD** : SI N27  {"Un peu", "Beaucoup"} OU N23 = "Parfois"  Activer CAT_03 en Standard
> - **CCC** : SI N27 = "Totalement" OU N23 = "Oui"  Activer CAT_03 en CCC

###  Raisonnement

> **Couverture des questions** :
> - E20 (lieu de vie souhait) :  **Pas utilise dans aucune rgle**. C'est une question de cadrage contextuel, pas une question dclenchante. Elle informe le choix de la reco mais ne l'active pas.   discuter : faut-il qu'E20 = "En tablissement" dclenche directement CAT_01 ?
> - E21 :  Utilise dans STD_01 et CCC_01
> - N10 :  **Pas utilise dans aucune rgle**. C'est une question multi-choix descriptive. Elle ne dclenche pas mais informe le plan d'action (quelles aides l'aidant fournit dj). Cohrent en question de cadrage.
> - N9 :  Via CCC_01
> - N21 :  Via CCC_01
> - N23 :  **Pas dans une rgle formalise**  devrait dclencher CAT_03
> - N27 :  **Pas dans une rgle formalise**  devrait dclencher CAT_03
> - O51 :  Via STD_02
>
>  **Questions orphelines** : E20, N10, N23, N27 n'ont pas de rgle directe. E20 et N10 sont des questions de cadrage (acceptable). N23 et N27 devraient activer CAT_03.

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification |
|---|---|---|
| 1 | Crer STD pour CAT_02 : SI N21 = "Parfois" OU N9 = "Elle se fait aider" | K3 : chaque CAT doit avoir 2 niveaux |
| 2 | Crer STD + CCC pour CAT_03 bases sur N27 et N23 | Questions orphelines, besoin clinique d'activer le lien social |
| 3 | Crer une rgle Critique : E21 = "Non" ET N21 = "Oui" ET N27  {"Beaucoup","Totalement"} | Triple signal = urgence : maintien intenable + problmes financiers + isolement svre |
| 4 | Discuter si E20 = "En tablissement" doit activer CAT_01 directement | Signal fort de transition dj envisage |

> **Contrle K3** :  Non vrifi  CAT_02 et CAT_03 n'ont qu'un seul niveau chacune  
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

> **Objectif** : Quelles MT concrtes pour chaque catgorie ?  
> **Principe** : Les MT sont rattaches  la catgorie, PAS au niveau de criticit.

###  Questions  se poser  Action 3

| # | Question | Pourquoi c'est important |
|---|---|---|
| 3.1 | Les MT couvrent-elles la **chane complte** d'action ? (ORGA  INFO  STRUC  SEC) | Dtecte les maillons manquants |
| 3.2 | Y a-t-il des MT dans **d'autres catgories ou MP** qui devraient tre ici ? | Redistribution potentielle |
| 3.3 | Y a-t-il des MT ici qui **appartiennent plutt  une autre catgorie** ? | Mauvaise affectation thmatique |
| 3.4 | **Pourquoi pas 1 MT de plus ?** | Force  justifier la compltude |
| 3.5 | **Pourquoi pas 1 MT de moins ?** | Force  justifier la ncessit |
| 3.6 | Au moins **1 MT contributive** ( STRUC/SEC/MED) par catgorie ? | Condition de validation ASR |
| 3.7 | Le **mix de types** est-il quilibr ? | Varit = couverture clinique |

### CAT_01  Projet de vie et hbergement

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_001 (ex MT_V2_034) | valuer les besoins actuels et  venir au domicile | ORGA | IDEC |  | Legacy |
| MT_V4_002 (ex MT_V2_036) | valuer la soutenabilit du maintien  domicile | ORGA | IDEC |  | Legacy |
| MT_V4_003 (ex MT_V2_039) | valuer l'impact sur la scurit et la fatigue de l'aidant | ORGA | IDEC |  | Legacy |
| MT_V4_004 (ex MT_V2_041) | valuer les risques lis  l'isolement | ORGA | IDEC |  | Legacy |
| MT_V4_005 (ex MT_V2_044) | changer sur les contraintes matrielles et humaines | ORGA | IDEC |  | Legacy |
| MT_V4_006 (ex MT_V2_079) | Informer sur les types d'tablissements et critres d'admission | STRUC | IDEC |  | Legacy |
| MT_V4_007 (ex MT_V2_004) | Proposer un temps d'change sur les souhaits et craintes | SEC | IDEC |  | Legacy |
| MT_V4_008 (ex MT_V2_020) | Proposer un temps d'change pour clarifier les perspectives | SEC | IDEC |  | Legacy |
| MT_V4_009 (ex MT_V2_032) | Identifier les facteurs de fragilit | ORGA | Aidant (autonome) |  | Legacy |
| MT_V4_010 (ex MT_V2_037) | Confirmer les lments qui permettent le maintien | ORGA | IDEC |  | Legacy |
| MT_V4_011 (ex MT_V2_080) | Informer sur les options d'hbergement adaptes | STRUC | IDEC |  | Legacy |

>  **11 MT pour CAT_01**  C'est beaucoup. Plusieurs MT semblent redondantes :
> - MT_V4_001/002/003/004 sont toutes des valuations ORGA trs proches (besoins, soutenabilit, impact, risques).
> - MT_V4_007/008 sont deux "temps d'change" quasi identiques.
> - MT_V4_006/011 sont deux MT STRUC sur les options d'hbergement.

>  **Proposition de fusion** :
> - Fusionner MT_V4_001+002+003  "valuer la soutenabilit globale du maintien  domicile (besoins, risques, impact aidant)"
> - Fusionner MT_V4_007+008  "Proposer un temps d'change pour clarifier le projet de vie (souhaits, craintes, perspectives)"
> - Fusionner MT_V4_006+011  "Informer sur les options d'hbergement et critres d'admission"
> - Cela donnerait **7 MT** au lieu de 11, sans perte clinique.

####  Pourquoi N MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- Chaque MT fusionne couvre un angle distinct : valuation globale (ORGA), analyse risques isolement (ORGA), contraintes (ORGA), info tablissements (STRUC), change projet de vie (SEC), identification fragilits (ORGA auto), confirmation maintien (ORGA).

**Pourquoi pas 1 de plus ?**
- On pourrait ajouter une MT INFO "Informer sur le droit au rpit de l'aidant"  mais cela relve davantage de V3 (sant de l'aidant).

### CAT_02  Soutien socio-financier et administratif

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_012 (ex MT_V2_006) | Confirmer avec l'aidant le nombre d'heures envisages pour le SAD | SEC | IDEC |  | Legacy |
| MT_V4_013 (ex MT_V2_072) | Contacter le service partenaire pour aide  domicile | INFO | IDEC |  | Legacy |
| MT_V4_014 (ex MT_V2_025) | Prendre RDV avec le MT pour dossier de demande d'aide financire | SEC | IDEC |  | Legacy |
| MT_V4_015 (ex MT_V2_027) | Prendre RDV avec le MT pour dossier MDPH (rvaluation aides) | SEC | IDEC |  | Legacy |
| MT_V4_016 (ex MT_V2_050) | Contacter le MT pour bilan de dnutrition | MED | MT |  | Legacy |
| MT_V4_017 (ex MT_V2_068) | Contacter le MT pour valuer douleur et adapter traitement | MED | MT |  | Legacy |
| MT_V4_018 (ex MT_V2_074) | Contacter une assistante sociale pour info aides | INFO | IDEC |  | Legacy |
| MT_V4_019 (ex MT_V2_076) | Rappeler  l'aidant de contacter l'AS | INFO | IDEC |  | Legacy |
| MT_V4_020 (ex MT_V2_030) | Prendre contact avec un ergothrapeute du territoire | ORGA | IDEC |  | Legacy |

>  **Observations CAT_02** :
> - MT_V4_016 (bilan dnutrition) et MT_V4_017 (valuer douleur) sont des MT **mdicales** qui semblent davantage relever de **F4** (tat gnral du proche). Leur prsence en F1 est cliniquement discutable.
> - MT_V4_014 et MT_V4_015 sont proches (toutes deux = prendre RDV MT pour dossier administratif). Possible fusion.
> - MT_V4_018 et MT_V4_019 sont complmentaires (une informe l'IDEC, l'autre rappelle  l'aidant).

>  **Proposition** :
> - Dplacer MT_V4_016 et MT_V4_017 vers F4 (tat gnral du proche)
> - Fusionner MT_V4_014+015  "Organiser les dmarches administratives avec le MT (aide financire, MDPH)"

### CAT_03  Lien social et soutien psychologique

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_021 (ex MT_V2_010) | Prendre RDV avec un psychologue du territoire | SEC | Psychologue |  | Legacy |
| MT_V4_022 (ex MT_V2_016) | Prendre RDV avec un psychiatre du territoire pour suivi | SEC | IDEC |  | Legacy |
| MT_V4_023 (ex MT_V2_024) | Prendre RDV avec psychiatre | SEC | IDEC |  | Legacy |
| MT_V4_024 (ex MT_V2_082) | Contacter une association locale (tlphone/mail) | STRUC | IDEC |  | Legacy |

>  **Observations CAT_03** :
> - MT_V4_022/023 sont des doublons (mme action : RDV psychiatre). Fusion ncessaire.
> - 4 MT (3 aprs fusion), toutes SEC ou STRUC  pas de MT INFO ni ORGA. Il manque une tape de diagnostic (comprendre le niveau d'isolement avant d'agir).

>  **Propositions** :
> - Fusionner MT_V4_022+023  "Prendre RDV avec un psychiatre du territoire pour suivi"
> - Ajouter une MT ORGA : "valuer le rseau social existant de la personne aide (famille, voisins, associations)"

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | Fusion MT CAT_01 (117) |  |  |
| 2 | Dplacement MT_V4_016/017 vers F4 |  |  |
| 3 | Fusion doublons CAT_02/03 |  |  |
| 4 | Ajout MT ORGA pour CAT_03 |  |  |

> **Condition ASR par catgorie** :
> - CAT_01 :  3 (STRUC2 + SEC2)  ASR **possible**
> - CAT_02 :  4 (SEC3 + MED2)  ASR **possible** (si MT MED restent)
> - CAT_03 :  3 (SEC2 + STRUC1)  ASR **possible**

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Objectif** : Complter chaque MT avec ses mtadonnes  
> **Acteurs existants DB** : \`IDEC\`, \`MT\` (mdecin traitant), \`Aidant (autonome)\`, \`AS\`, \`Psychologue\`  
> **Domaines** :  Mdical /  Mdico-social

###  Questions  se poser  Action 4

| # | Question | Pourquoi c'est important |
|---|---|---|
| 4.1 | Le **type MED** est-il reprsent ? | Certains MP ncessitent une action mdicale directe |
| 4.2 | L'**acteur** est-il le bon ? | Acteur = celui qui FAIT l'action |
| 4.3 | Y a-t-il des MT o l'**aidant peut agir seul** ? (T5) | Certaines MT d'INFO/ORGA sont faisables sans pro |
| 4.4 | Le **domaine** (/) est-il correct ? | Cohrence avec la filire |
| 4.5 | Faut-il un **nouvel acteur** ? | Si acteur externe rcurrent |
| 4.6 | Y a-t-il un **attribut manquant** ? | Enrichir les mtadonnes |
| 4.7 | Les MT suivent-elles un **ordre logique** ? (T6) | Squence d'excution |

### Tableau consolid des MT de F1

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Source |
|---|---|---|---|---|---|---|---|
| MT_V4_001 | valuer les besoins actuels et  venir au domicile | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_002 | valuer la soutenabilit du maintien  domicile | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_003 | valuer l'impact sur la scurit et la fatigue de l'aidant | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_004 | valuer les risques lis  l'isolement | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_005 | changer sur les contraintes matrielles et humaines | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_006 | Informer sur les types d'tablissements et critres d'admission | STRUC | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_007 | Proposer un temps d'change sur les souhaits et craintes | SEC | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_008 | Proposer un temps d'change pour clarifier les perspectives | SEC | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_009 | Identifier les facteurs de fragilit | ORGA | Aidant (autonome) |  |  | CAT_01 | Legacy |
| MT_V4_010 | Confirmer les lments qui permettent le maintien | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_011 | Informer sur les options d'hbergement adaptes | STRUC | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_012 | Confirmer les heures SAD avec l'aidant | SEC | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_013 | Contacter le service partenaire aide  domicile | INFO | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_014 | RDV MT pour dossier aide financire | SEC | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_015 | RDV MT pour dossier MDPH rvaluation | SEC | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_016 | Contacter MT pour bilan dnutrition | MED | MT |  |  | CAT_02 | Legacy |
| MT_V4_017 | Contacter MT pour valuer douleur et adapter traitement | MED | MT |  |  | CAT_02 | Legacy |
| MT_V4_018 | Contacter AS pour info aides | INFO | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_019 | Rappeler  l'aidant de contacter l'AS | INFO | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_020 | Contact ergothrapeute du territoire | ORGA | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_021 | RDV psychologue du territoire | SEC | Psychologue |  |  | CAT_03 | Legacy |
| MT_V4_022 | RDV psychiatre du territoire pour suivi | SEC | IDEC |  |  | CAT_03 | Legacy |
| MT_V4_023 | RDV psychiatre (doublon MT_V4_022) | SEC | IDEC |  |  | CAT_03 | Legacy |
| MT_V4_024 | Contacter association locale | STRUC | IDEC |  |  | CAT_03 | Legacy |

> **Rsum** :  
> - Total MT : 24 (avant fusion)  
> - Domaine  Mdical : 7 / Domaine  Mdico-social : 17
> - Contributives () : 13  STRUC: 3, SEC: 8, MED: 2  
> - Non-contributives () : 11  INFO: 4, ORGA: 7

###  Propositions d'amlioration  Types, acteurs et domaine

| # | Proposition | Justification |
|---|---|---|
| 1 | MT_V4_016/017 (MED) :  dplacer vers F4 | Ces actions concernent l'tat de sant du proche (douleur, dnutrition), pas son projet de vie |
| 2 | MT_V4_009 : Acteur Aidant (autonome)  pertinent | C'est une auto-observation, l'aidant peut le faire seul  |
| 3 | MT_V4_020 : domaine   | L'ergothrapie est une intervention mdicale |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

> **Phase 1** : Valider le wording de base.  
> **Phase 2** : Versionner par criticit.

###  Questions  se poser  Action 5

| # | Question | Pourquoi c'est important |
|---|---|---|
| 5.1 | La **reco** est-elle un label court (un cap) ? | Reco  tche |
| 5.2 | Chaque **MT** pousse-t-elle  l'action des deux cts ? | IDEC + Utilisateur |
| 5.3 | Les MT **ORGA** ont-elles un wording Utilisateur ? | Pas de MT "interne IDEC" |
| 5.4 | La **gradation** entre niveaux est-elle perceptible ? | L'escalade doit tre claire |
| 5.5 | **Toutes les MT** sont-elles versionnes ? | Versioning partiel = non valide |
| 5.6 | Le **ton** est-il adapt ? | Pas d'infantilisation ni de jargon |

### Phase 1  Wording de base : MT et Recos

#### Wording des Recos de base

| CAT | Reco ID | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | / |
|---|---|---|---|---|
| CAT_01 | F1_RECO_01 | Scuriser et renforcer le maintien  domicile | valuer la soutenabilit du maintien et informer sur les options |  |
| CAT_01 | F1_RECO_02 | Favoriser la rflexion sur le projet de vie | Proposer un temps d'change pour clarifier les perspectives |  |
| CAT_01 | F1_RECO_03 | Anticiper une transition vers un autre hbergement | Confirmer le maintien ou prparer une orientation |  |
| CAT_02 | F1_RECO_05 | Solliciter le MT pour demande d'aide | IDEC prend RDV avec le MT pour dossier d'aide |  |
| CAT_02 | F1_RECO_08 | Contacter l'assistante sociale pour faire le point | Rappeler  l'aidant de contacter l'AS |  |
| CAT_02 | F1_RECO_09 | Demander bilan et aides techniques | Contacter un ergothrapeute du territoire |  |
| CAT_02 | F1_RECO_04 | Envisager un soutien psychologique | Confirmer les heures d'intervention SAD |  |
| CAT_03 | F1_RECO_06 | Demander un suivi rgulier | RDV avec un psychiatre du territoire |  |
| CAT_03 | F1_RECO_07 | Proposer un suivi contre l'isolement social | Contacter une association locale |  |

>  **F1_RECO_01** : "Scuriser et renforcer le maintien  domicile" est trop vague pour une reco  reformuler en quelque chose de plus spcifique.
>  **F1_RECO_04** : Le texte utilisateur ("soutien psychologique") et l'action IDEC ("heures SAD") ne correspondent pas. Incohrence entre la reco et son contenu.

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit (Reco + MT)

> **Principe** : Le niveau de criticit modifie le wording. Seuls les niveaux qui existent en rgles.

#### CAT_01  Projet de vie et hbergement

> Niveaux existants :  STD_01, STD_02 /  CCC_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Envisager des ajustements pour faciliter le quotidien de votre proche | valuer les besoins actuels et identifier les premires mesures d'adaptation |
|  CCC ( 30j) | Prparer activement la suite : maintien renforc ou transition vers une autre solution | Structurer le projet de vie avec l'aidant et prparer les dmarches |

#### CAT_02  Soutien socio-financier

> Niveaux existants :  CCC_01 uniquement ( K3 non respect)

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Prenez contact avec une assistante sociale pour valuer les aides disponibles | Orienter vers l'AS et accompagner les dmarches administratives urgentes |

#### CAT_03  Lien social et soutien psychologique

> Niveaux existants : aucun formalis (rgles  crer)

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Proposez  votre proche des activits sociales ou associatives | Identifier les structures locales et proposer un premier contact |
|  CCC ( 30j) | Organisez un suivi psychologique et social pour votre proche | RDV psychologue/psychiatre + inscription association |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

###  Questions  se poser  Action 6

| # | Question | Pourquoi c'est important |
|---|---|---|
| 6.1 | La **reco prvention** est-elle formule () ? | Le mode prvention est obligatoire |
| 6.2 | Les **MT de prvention** sont-elles suffisantes ? | viter le vide ou le surplus |
| 6.3 | L'**ASR** est-elle formule clairement ? | Critre de succs objectif |
| 6.4 | Y a-t-il des **doublons avec d'autres MP** ? (T1) | Check inter-MP obligatoire |
| 6.5 | La **checklist 8 points** est-elle  jour ? | Miroir fidle de l'tat actuel |

### 6.1  Reco prvention ()

> S'affiche quand le MP n'est PAS activ (aucune rgle n'a fir)

| | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ |
|---|---|---|
|  Prvention | Restez attentif  l'volution du quotidien de votre proche | Vrifier rgulirement la stabilit de la situation de vie |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V4_PREV_01 | Surveiller les signaux de dgradation du quotidien | ORGA | Faire un point trimestriel sur la situation de vie | Notez les changements dans le quotidien de votre proche |
| MT_V4_PREV_02 | Informer sur les ressources disponibles | INFO | Transmettre les coordonnes des structures locales | Renseignez-vous sur les services d'aide disponibles dans votre secteur |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  4 orphelines |  | E20, N10 = cadrage, N23/N27 = besoin rgles CAT_03 |
| 2 | Chaque rgle d'activation  1 version de reco |  |  | 3 rgles  9 recos |
| 3 | Chaque catgorie de reco  ses MT assignes |  |  | CAT_01: 11 MT, CAT_02: 9 MT, CAT_03: 4 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  |  | CAT_01:  (STD+CCC), CAT_02:  (CCC seul), CAT_03:  (aucun formalis) |
| 5 | Aucune MT orpheline |  |  | Doublons  fusionner |
| 6 | Reco prvention prsente |  Propose |  |  valider |
| 7 | Wording reco = conseil succinct, MT = verbe d'action |  |  | F1_RECO_01 et F1_RECO_04  revoir |
| 8 | Sens clinique renseign pour chaque rgle |  |  | 3/3 rgles avec sens clinique |

> **Anomalies dtectes** :
> -  K3 non respect pour CAT_02 et CAT_03
> -  2 questions orphelines fonctionnelles (N23, N27)  besoin de rgles
> -  MT mdicales (dnutrition, douleur) mal positionnes en F1 (relvent de F4)
> -  Doublons MT : 3 paires  fusionner
> -  Incohrence F1_RECO_04 (texte utilisateur  action IDEC)

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 3 | 3 |
| Rgles d'activation | :2 :1 :0 | :_ :_ :_ |
| MT totales | 24 | ~18 (aprs fusions) |
| MT contributives | 13 | ~10 |
| Domaine  /  | 7 / 17 | 5 / 13 |
| ASR | F1-A / F1-B | F1-A / F1-B |
| Reco prvention |  | Propose |
| Checks OK | 4/8 | /8 |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories valides (projet vie, socio-financier, lien social) |  Propos |
| 2 | K3 non-compliance CAT_02 et CAT_03  crer rgles Standard |  Propos |
| 3 | Fusion des MT doublons (117 CAT_01, doublons CAT_02/03) |  Propos |
| 4 | Dplacer MT mdicales vers F4 |  Propos |
| 5 | Crer rgles CAT_03 bases sur N23/N27 |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | K3 : ajouter STD pour CAT_02 et CAT_03 |  |
| 2 | Fusionner les MT doublons ou garder la granularit ? |  |
| 3 | MT mdicales (dnutrition/douleur) : rester en F1 ou migrer vers F4 ? |  |
| 4 | E20 : doit-elle dclencher une rgle directement ? |  |
| 5 | F1_RECO_04 : corriger l'incohrence texte/action |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Wb=`#  Fiche de Validation MP  F2  Autonomie, aide humaine et prsence ncessaire

> **Vulnrabilit** : V4  Fragilit du Proche  
> **ASR** :  F2-A : Aide rgulire active | F2-B : Aide mobilisable en cas de besoin   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## CONTEXTE  Big Picture V4

V4 (Fragilit du Proche) couvre 6 MPs centrs sur le Bloc 5  Vie quotidienne et fragilits du proche :

| MP | Nom | Nb Q | Questions | Thme |
|---|---|---|---|---|
| F1 | Vie quotidienne, budget et entourage | 8 | E20, E21, N10, N21, N23, N27, N9, O51 | Quotidien global, budget, isolement |
| **F2** | **Autonomie, aide humaine et prsence** | **7** | **E22, E23, E24, N18, N36, O8, O9** | **Aide jour/nuit, mobilit, autonomie fonctionnelle** |
| F3 | Mmoire, comportement et risques | 8 | E25, E26, E27, N19, N22, N24, N25, O13 | Troubles cognitifs, comportements |
| F4 | Douleur, fatigue, sommeil et tat gnral | 11 | N11, N12, N13, N34, N44, O15, O22, O26, O3, O4, O5, O7 | tat physique global |
| F5 | Dpendance, handicap, addictions | 10 | E28-E31, N16, N30, N37-N40, O53, O54 | Hospitalisations, handicap |
| F6 | Autonomie fonctionnelle, chutes et aides | 9 | E32, E33, N32, O11, O12, O16, O51, O6 | Capacits motrices, aides techniques |

> F2 est le **MP oprationnel** de V4. L o F1 cadre le "projet de vie", F2 quantifie le besoin concret : combien d'heures d'aide, peut-il rester seul, a-t-il besoin de prsence la nuit, peut-il se dplacer seul ? C'est le MP qui dclenche les ajustements d'aide humaine.

>  **Frontire F2/F6** : F2 traite de l'aide HUMAINE ncessaire (heures, prsence, accompagnement). F6 traite des aides TECHNIQUES et de l'autonomie fonctionnelle physique (chutes, incontinence, aides matrielles). F2 = "de qui a-t-il besoin ?". F6 = "de quoi a-t-il besoin ?".

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## 0. DONNES FIGES  Questions rattaches  F2

### Questions rattaches  ce MP

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E22 | Globalement, combien d'heures d'aide humaine (aide  domicile, infirmiere, etc.) votre proche reoit-il par semaine ? | facteur |  Moins de 5 heures /  Entre 5 et 14 heures /  15  30 heures /  Plus de 30 heures /  Je ne sais pas |
| 2 | E23 | Combien de temps votre proche peut-il rester seul  son domicile sans risque particulier ? | facteur |  Il peut rester seul sans difficult /  Quelques heures, mais pas une journe entire /  Pas plus d'1 heure /  Il ne peut pas rester seul |
| 3 | E24 | La nuit, votre proche a-t-il besoin que quelqu'un soit prsent ou reste vigilant pour lui ? | facteur |  Non, il est autonome la nuit /  Parfois, en fonction de son tat /  Oui, il a souvent besoin d'aide ou de surveillance /  Oui, une prsence est ncessaire en permanence |
| 4 | N18 | La personne aide peut-elle raliser seule ses activits de la vie quotidienne (toilette, habillage, prparation des repas) ? | facteur |  Oui /  Non elle a besoin d'aide |
| 5 | N36 | A-t-elle besoin d'aide pour organiser et planifier ses journes ? | facteur |  Non /  Parfois /  Oui |
| 6 | O8 | Au quotidien a-t-elle besoin d'une aide humaine pour se dplacer en dehors de son domicile ? | facteur |  Non, elle est indpendante /  Oui, de temps en temps /  Oui, tout le temps |
| 7 | O9 | Au quotidien a-t-elle besoin d'une aide humaine pour se dplacer  l'intrieur de son domicile ? | facteur |  Non, elle est indpendante /  Oui, de temps en temps /  Oui, tout le temps |

> Total : **7 questions** rattaches  F2 (toutes facteur)
>  **Observation** : Toutes les questions sont de type "facteur". Aucune question "etat". Cela signifie que F2 value les CIRCONSTANCES (volume d'aide, capacits) mais ne mesure pas une DGRADATION directe.

### Questions candidates exclues

> Pour CHAQUE question de V4 non rattache  F2 : analyse de pertinence.

| Question ID | Libell | Pertinente pour F2 ? | Raisonnement |
|---|---|---|---|
| E20 | Lieu de vie souhait |  Non | F1  projet de vie, pas degr d'aide |
| E21 | Maintien possible sans changement |  Non | F1  soutenabilit globale |
| N10 | Nature de l'aide apporte par l'aidant |  Possible | Informe le volume d'aide informelle (aidant). Pourrait complter E22 (aide formelle). Mais cliniquement  F1 (cadrage du quotidien). |
| N9 | Problmes gestion budget/admin |  Non | F1  dimension administrative |
| N21 | Problmes financiers |  Non | F1  dimension financire |
| E25 | Confusion jour/nuit |  Possible | Impacte directement le besoin de prsence nocturne (E24). Mais cliniquement  F3 (troubles cognitifs). L'activation de E25 pourrait renforcer l'urgence de F2 via cross-activation. |
| E32 | Difficults  se lever |  Possible | Impacte l'autonomie mais cliniquement  F6 (autonomie fonctionnelle physique). F2 mesure l'aide ncessaire, F6 la capacit physique. |
| N32 | Aides techniques en place |  Non | F6  aides matrielles |
| O11 | Incontinence |  Non | F6  autonomie fonctionnelle |
| O12 | Se nourrir seule |  Possible | Touche l'autonomie mais  F6 (autonomie fonctionnelle). Pas l'aide humaine organise. |

>  **Observations cl** :
> - E25 (confusion jour/nuit) est un indicateur fort pour le besoin de prsence nocturne (E24). Une cross-activation F3F2 est envisageable.
> - N10 (nature aide aidant) complterait le tableau de F2 mais est mieux place en F1 pour le cadrage global.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

> **Objectif** : Identifier les types d'actions DIFFRENTES que ce MP peut proposer.  
> **Source** : Recos legacy Supabase + jugement clinique

###  Questions  se poser  Action 1

| # | Question | Pourquoi c'est important |
|---|---|---|
| 1.1 | Les catgories couvrent-elles des dimensions cliniques **rellement distinctes** ? | viter les doublons |
| 1.2 | Y a-t-il une action clinique vidente que **aucune catgorie** ne couvre ? | Dtecter les angles morts |
| 1.3 | Faut-il **fusionner** deux catgories proches ? | Simplifier |
| 1.4 | Faut-il **clater** une catgorie trop large ? | Granularit suffisante |
| 1.5 | Combien de catgories est raisonnable ? (T4) | Proportionnalit |

###  Raisonnement

> Les 8 recos legacy se regroupent autour de **3 axes d'action cliniques distincts** :
>
> 1. **Coordination et ajustement de l'aide  domicile** (E22, N18)  valuer si le volume et le type d'aide sont adapts au niveau de dpendance. Recos F2_RECO_01, F2_RECO_04.
> 2. **Scurisation des priodes  risque** (E23, E24)  Couvrir les moments o le proche est seul ou la nuit. Recos F2_RECO_02, F2_RECO_03.
> 3. **Rhabilitation de la mobilit** (O8, O9, N36)  Maintenir ou restaurer l'autonomie fonctionnelle par kin/ergo. Recos F2_RECO_05, F2_RECO_06, F2_RECO_07, F2_RECO_08.
>
> **Pourquoi pas 4 catgories ?** On pourrait sparer jour (E23) et nuit (E24), mais cliniquement la scurisation des priodes  risque est un continuum : les solutions sont lies (renforcement prsence, tlsurveillance).
>
> **Pourquoi pas 2 catgories ?** Fusionner coordination et scurisation serait une erreur : l'une est prventive (s'assurer que l'aide est suffisante), l'autre est ractive (couvrir les moments de danger immdiat).
>
>  **Tension F2/F6** : CAT_03 (mobilit) chevauche F6 (autonomie fonctionnelle). La distinction : F2_CAT_03 traite les BILANS et PRESCRIPTIONS (kin, ergo), F6 traite les AIDES TECHNIQUES installes.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | F2_CAT_01 | Coordination et ajustement de l'aide | valuer l'adquation entre le volume d'aide reu et le niveau rel de dpendance, ajuster si besoin | Legacy  |
| 2 | F2_CAT_02 | Scurisation des priodes  risque | Couvrir les moments o le proche est seul (jour) ou la nuit, par aide humaine ou dispositifs | Legacy  |
| 3 | F2_CAT_03 | Rhabilitation et maintien de la mobilit | Prescrire bilans kin/ergo pour maintenir ou restaurer l'autonomie de dplacement | Legacy  |

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

> **Objectif** : Pour chaque catgorie, quelles Q/A la dclenchent et  quel niveau ?  
> **Rgle K3** : S'applique  L'INTRIEUR de chaque catgorie

###  Questions  se poser  Action 2

| # | Question | Pourquoi c'est important |
|---|---|---|
| 2.1 | **Chaque question** du MP est-elle utilise dans **au moins 1 rgle** ? | Dtecte les questions orphelines |
| 2.2 | **Chaque combinaison** cliniquement significative a-t-elle une rgle ? | vite les trous de couverture |
| 2.3 | Les niveaux sont-ils **cliniquement justifis** ? | L'urgence doit tre relle |
| 2.4 | Y a-t-il des **combos** qui signalent un niveau suprieur ? | CCC composites |
| 2.5 | Y a-t-il des **rponses extrmes** non exploites ? | Signaux forts |
| 2.6 | Chaque catgorie a-t-elle **2 niveaux** ? | K3 |
| 2.7 | Une rgle peut-elle **activer plusieurs catgories** ? | Cohrence |

### Catgorie 1  Coordination et ajustement de l'aide

> **Question complte E24** :  La nuit, votre proche a-t-il besoin que quelqu'un soit prsent ou reste vigilant pour lui ? 
> **Options** :  Non, il est autonome la nuit /  Parfois, en fonction de son tat /  **Oui**, il a souvent besoin d'aide ou de surveillance /  Oui, une prsence est ncessaire en permanence

> **Question complte E23** :  Combien de temps votre proche peut-il rester seul  son domicile sans risque particulier ? 
> **Options** :  Il peut rester seul sans difficult /  Quelques heures, mais pas une journe entire /  **Pas plus d'1 heure** /  **Il ne peut pas rester seul**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V2_F2_STD_01 | E24 = "Oui" | Activer CAT_01 | Besoin prsence la nuit | Legacy  |
|  Standard | V2_F2_STD_02 | E23  {"Pas plus d'1 heure", "Ne peut pas rester seul"} | Activer CAT_01 | Temps possible seul trs limit | Legacy  |

>  **Note** : STD_01 et STD_02 sont affectes aux recos de CAT_01 et de CAT_02 (scurisation). Cliniquement, elles pourraient activer les deux catgories simultanment. Une mme rgle activant plusieurs CAT est acceptable si justifi.

### Catgorie 2  Scurisation des priodes  risque

> **Question complte E23** :  Combien de temps votre proche peut-il rester seul ? 
> **Options** :  Il peut rester seul /  Quelques heures /  **Pas plus d'1 heure** /  **Ne peut pas rester seul**

> **Question complte E24** :  La nuit, votre proche a-t-il besoin de prsence ? 
> **Options** :  Non /  Parfois /  **Oui, souvent** /  **Oui, en permanence**

> **Question complte O8** :  Besoin aide humaine dplacement extrieur ? 
> **Options** :  Non /  De temps en temps /  **Tout le temps**

> **Question complte O9** :  Besoin aide humaine dplacement intrieur ? 
> **Options** :  Non /  De temps en temps /  **Tout le temps**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC | V2_F2_CCC_01 | AU MOINS 2 parmi : E23  {"Pas plus d'1h", "Ne peut pas rester seul"}, E24 = "Oui", O8 = "Tout le temps", O9 = "Tout le temps" | Activer CAT_02 | Dpendance fonctionnelle leve ncessitant rorganisation urgente | Legacy  |

>  **Alerte K3** : CAT_02 n'a qu'un seul niveau (CCC). Il manque un niveau Standard.
>
>  **Proposition STD pour CAT_02** :
> - SI E23 = "Quelques heures" OU E24 = "Parfois"  Standard | Sens : besoin de vigilance sans urgence immdiate.

### Catgorie 3  Rhabilitation et maintien de la mobilit

> **Question complte O8** :  Besoin aide humaine pour se dplacer en dehors du domicile ? 
> **Options** :  Non /  De temps en temps /  **Tout le temps**

> **Question complte O9** :  Besoin aide humaine pour se dplacer  l'intrieur du domicile ? 
> **Options** :  Non /  De temps en temps /  **Tout le temps**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC | V2_F2_CCC_01 | (partie du mme CCC composite) O8 = "Tout le temps" ou O9 = "Tout le temps" | Activer CAT_03 | Mobilit trs rduite  bilan kin/ergo ncessaire | Legacy  |

>  **Alerte K3** : CAT_03 n'a qu'un seul niveau (CCC via le composite). Il manque un niveau Standard.
>
>  **Proposition STD pour CAT_03** :
> - SI O8 = "De temps en temps" OU O9 = "De temps en temps"  Standard | Sens : mobilit partielle, bilan prventif recommand.

###  Raisonnement

> **Couverture des questions** :
> - E22 (heures aide humaine) :  **Pas utilise dans aucune rgle**. C'est une question de cadrage : elle informe le contexte (combien d'aide reue actuellement) mais ne dclenche pas d'action. Accept comme question contextuelle.
> - E23 :  Via STD_02 et CCC_01
> - E24 :  Via STD_01 et CCC_01
> - N18 (actes vie quotidienne) :  **Pas dans une rgle formalise**. Pourtant la rponse "Non elle a besoin d'aide" est un signal important.
> - N36 (aide planification) :  **Pas dans une rgle formalise**. Pourtant "Oui" est un signal de dclin cognitif impactant l'autonomie.
> - O8 :  Via CCC_01
> - O9 :  Via CCC_01
>
>  **Questions orphelines** : E22 (cadrage  acceptable), N18 et N36 (devraient avoir des rgles).

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification |
|---|---|---|
| 1 | Crer STD pour CAT_02 : SI E23 = "Quelques heures" OU E24 = "Parfois" | K3 : 2 niveaux par CAT |
| 2 | Crer STD pour CAT_03 : SI O8 = "De temps en temps" OU O9 = "De temps en temps" | K3 : 2 niveaux par CAT |
| 3 | Crer rgle pour N18 : SI N18 = "Non"  Activer CAT_01 | Question orpheline avec signal clinique fort |
| 4 | Crer rgle pour N36 : SI N36  {"Parfois","Oui"}  Activer CAT_01 | Signal dclin cognitif impactant autonomie |
| 5 | Crer niveau Critique : AU MOINS 3 parmi les 4 conditions du CCC_01 | Triple signal = dpendance extrme ncessitant rorganisation immdiate |
| 6 | Discuter cross-activation F3F2 : SI E25 = "Oui" (confusion jour/nuit)  renforcer CAT_02 | Signal cognitif impactant directement la scurisation nocturne |

> **Contrle K3** :  Non vrifi  CAT_02 et CAT_03 n'ont qu'un seul niveau chacune  
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

> **Objectif** : Quelles MT concrtes pour chaque catgorie ?  
> **Principe** : Les MT sont rattaches  la catgorie, PAS au niveau de criticit.

###  Questions  se poser  Action 3

| # | Question | Pourquoi c'est important |
|---|---|---|
| 3.1 | Les MT couvrent-elles la **chane complte** ? (ORGA  INFO  STRUC  SEC) | Maillons manquants |
| 3.2 | Y a-t-il des MT dans **d'autres MP** qui devraient tre ici ? | Redistribution |
| 3.3 | Y a-t-il des MT ici qui **appartiennent ailleurs** ? | Mauvaise affectation |
| 3.4 | **Pourquoi pas 1 MT de plus ?** | Justifier compltude |
| 3.5 | **Pourquoi pas 1 MT de moins ?** | Justifier ncessit |
| 3.6 | Au moins **1 MT contributive** () par catgorie ? | Condition ASR |
| 3.7 | Le **mix de types** est-il quilibr ? | Varit clinique |

### CAT_01  Coordination et ajustement de l'aide

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_025 (ex MT_V2_008) | Orienter et accompagner la mise en place des aides matrielles et humaines | SEC | IDEC |  | Legacy |
| MT_V4_026 (ex MT_V2_013) | Faire le point sur les interventions existantes | SEC | IDEC |  | Legacy |
| MT_V4_027 (ex MT_V2_031) | valuer si le faible volume d'aide est suffisant | ORGA | IDEC |  | Legacy |
| MT_V4_028 (ex MT_V2_043) | valuer la charge restante pour l'aidant | ORGA | IDEC |  | Legacy |
| MT_V4_029 (ex MT_V2_073) | Vrifier la cohrence entre aides reues et niveau d'autonomie | INFO | IDEC |  | Legacy |
| MT_V4_030 (ex MT_V2_027r) | RDV MT pour dossier MDPH rvaluation des aides | SEC | IDEC |  | Legacy (F2_RECO_04) |

> 6 MT pour CAT_01  bon quilibre.
> - ORGA () : 2  valuation du volume et de la charge
> - INFO () : 1  vrification cohrence
> - SEC () : 3  mise en place, point existant, MDPH
>
>  MT_V4_027 et MT_V4_028 sont proches (valuer volume vs charge). La distinction est pertinente : l'une value l'aide reue par le proche, l'autre l'impact sur l'aidant.

####  Pourquoi 6 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- MT_V4_027 (volume suffisant ?) : sans elle, on ne vrifie pas l'adquation aide/besoins.
- MT_V4_028 (charge aidant) : sans elle, on ne croise pas avec V3 (sant aidant).
- MT_V4_029 (cohrence) : sans elle, on agit sans diagnostic pralable.

**Pourquoi pas 1 de plus ?**
- On pourrait ajouter "valuer les heures de nuit" mais c'est couvert par CAT_02.
- On pourrait ajouter "Enqute satisfaction aide  domicile" mais c'est hors scope IDEC.

### CAT_02  Scurisation des priodes  risque

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_031 (ex MT_V2_078) | Proposer un placement en EHPAD | STRUC | IDEC |  | Legacy (F2_RECO_02) |
| MT_V4_032 (ex MT_V2_014) | Proposer un renforcement des aides ou une organisation adapte | SEC | IDEC |  | Legacy (F2_RECO_03) |
| MT_V4_033 (ex MT_V2_035) | Identifier les situations dclenchantes | ORGA | Aidant (autonome) |  | Legacy |
| MT_V4_034 (ex MT_V2_038) | Identifier les moments  risque | ORGA | Aidant (autonome) |  | Legacy |
| MT_V4_035 (ex MT_V2_047) | Identifier les priodes ou situations dclenchantes | ORGA | Aidant (autonome) |  | Legacy |

>  **Observations CAT_02** :
> - MT_V4_033/034/035 sont des **triplons**  trois MT quasi identiques ("identifier les situations/moments/priodes dclenchantes"), toutes ORGA, toutes assignes  l'Aidant (autonome). Fusion imprative.
> - MT_V4_031 (placement EHPAD) est une action trs forte (institutionnalisation).  vrifier que le niveau d'activation est bien CCC ou Critique, pas Standard.

>  **Proposition de fusion** : MT_V4_033+034+035  "Identifier les moments et situations  risque (jour et nuit)"  ORGA, Aidant (autonome)
> Rsultat : **3 MT** au lieu de 5, sans perte clinique.

####  Pourquoi 3 MT (aprs fusion)  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- MT_V4_031 (EHPAD) : action de dernier recours mais ncessaire si dpendance extrme.
- MT_V4_032 (renforcement aides) : tape intermdiaire avant institutionnalisation.
- MT fusionne (identifier risques) : l'aidant doit tre acteur de la surveillance.

**Pourquoi pas 1 de plus ?**
- On pourrait ajouter "Installer une tlsurveillance/tlalarme"  pertinent mais relve de F6 (aides techniques).
- On pourrait ajouter "Organiser un planning de relais familiaux"  pertinent,  discuter.

### CAT_03  Rhabilitation et maintien de la mobilit

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_036 (ex MT_V2_065) | Se reporter  la procdure RDV mdecin spcialiste | MED | Mdecin spcialiste |  | Legacy (F2_RECO_05) |
| MT_V4_037 (ex MT_V2_081) | Contacter le CMP de secteur pour 1er contact infirmier | STRUC | IDEC |  | Legacy (F2_RECO_05) |
| MT_V4_038 (ex MT_V2_069) | Contacter MT pour bilan kin + bilan ergothrapie | MED | MT |  | Legacy (F2_RECO_07) |

> 3 MT pour CAT_03  cohrent. Toutes contributives ().
> - MED : 2  bilan spcialiste + bilan kin/ergo
> - STRUC : 1  contact CMP
>
>  **Observations** :
> - MT_V4_036 ("se reporter  la procdure RDV") : wording peu actionnable. C'est une rfrence  une procdure, pas une action concrte.  reformuler.
> - MT_V4_037 (contact CMP) : reco source = F2_RECO_05 ("demandez un suivi rgulier") rattache  N36 (planification). Le CMP est davantage orient psychiatrie  est-ce bien le bon acteur pour une question de planification des journes ? Ou faut-il un ergothrapeute/psychologue ?
> - Pas de MT ORGA ni INFO  il manque une tape d'valuation pralable (quelles capacits de mobilit restantes ?).

>  **Propositions** :
> - Reformuler MT_V4_036  "Organiser une consultation avec un mdecin spcialiste pour valuer la mobilit"
> - Ajouter une MT ORGA : "valuer les capacits de dplacement actuelles (intrieur/extrieur)"
> - Discuter la pertinence du CMP pour N36 ou rorienter vers ergothrapeute

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | Fusion triplons CAT_02 (53) |  |  |
| 2 | Reformuler MT_V4_036 (actionnable) |  |  |
| 3 | Ajouter MT ORGA valuation mobilit (CAT_03) |  |  |
| 4 | Vrifier CMP vs ergo pour N36 |  |  |

> **Condition ASR par catgorie** :
> - CAT_01 :  3 (SEC3)  ASR **possible**
> - CAT_02 :  2 (STRUC1 + SEC1)  ASR **possible**
> - CAT_03 :  3 (MED2 + STRUC1)  ASR **possible**

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Acteurs existants DB** : \`IDEC\`, \`MT\`, \`Aidant (autonome)\`, \`Mdecin spcialiste\`  
> **Domaines** :  Mdical /  Mdico-social

### Tableau consolid des MT de F2

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Source |
|---|---|---|---|---|---|---|---|
| MT_V4_025 | Orienter et accompagner mise en place des aides | SEC | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_026 | Faire le point sur les interventions existantes | SEC | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_027 | valuer si le volume d'aide est suffisant | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_028 | valuer la charge restante pour l'aidant | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_029 | Vrifier cohrence aides reues / autonomie | INFO | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_030 | RDV MT pour dossier MDPH rvaluation | SEC | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_031 | Proposer un placement en EHPAD | STRUC | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_032 | Proposer renforcement aides ou organisation adapte | SEC | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_033 | Identifier les situations dclenchantes | ORGA | Aidant (autonome) |  |  | CAT_02 | Legacy |
| MT_V4_034 | Identifier les moments  risque | ORGA | Aidant (autonome) |  |  | CAT_02 | Legacy |
| MT_V4_035 | Identifier les priodes ou situations dclenchantes | ORGA | Aidant (autonome) |  |  | CAT_02 | Legacy |
| MT_V4_036 | Consultation mdecin spcialiste (mobilit) | MED | Mdecin spcialiste |  |  | CAT_03 | Legacy |
| MT_V4_037 | Contacter CMP de secteur pour 1er contact | STRUC | IDEC |  |  | CAT_03 | Legacy |
| MT_V4_038 | Contacter MT pour bilan kin + ergothrapie | MED | MT |  |  | CAT_03 | Legacy |

> **Rsum** :  
> - Total MT : 14 (avant fusion)  
> - Domaine  Mdical : 3 / Domaine  Mdico-social : 11
> - Contributives () : 8  SEC: 4, STRUC: 2, MED: 2  
> - Non-contributives () : 6  ORGA: 5, INFO: 1

###  Propositions d'amlioration  Types, acteurs et domaine

| # | Proposition | Justification |
|---|---|---|
| 1 | MT_V4_028 (charge aidant) : cross-ref V3 ? | L'impact sur l'aidant est aussi une dimension de V3 (sant aidant). Cross-activation plutt que doublon. |
| 2 | MT_V4_033/034/035 : fusion des triplons | Mme action, mme acteur, mme type  un seul MT suffit |
| 3 | MT_V4_037 (CMP) : acteur  vrifier | Pour N36 (planification), un ergothrapeute est peut-tre plus pertinent qu'un CMP |
| 4 | Ajouter un acteur "Aide  domicile/SAD" ? | L'aide  domicile est un acteur cl de F2 mais n'a pas de MT ddie |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

#### Wording des Recos de base

| CAT | Reco ID | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | / |
|---|---|---|---|---|
| CAT_01 | F2_RECO_01 | S'assurer de la bonne coordination des intervenants | Faire le point sur les interventions existantes |  |
| CAT_01 | F2_RECO_04 | Demander valuation/rvaluation du plan d'accompagnement | IDEC prend RDV MT pour dossier MDPH |  |
| CAT_02 | F2_RECO_02 | Scuriser les priodes d'absence prolonge | Identifier les moments  risque |  |
| CAT_02 | F2_RECO_03 | Scuriser les priodes nocturnes  risque | Identifier les situations dclenchantes |  |
| CAT_03 | F2_RECO_05 | Demander un suivi rgulier | Contacter CMP pour prise de contact |  |
| CAT_03 | F2_RECO_06 | Demander bilan de la marche chez kin et/ou ergo | Contacter MT pour prescription bilan kin/ergo |  |
| CAT_03 | F2_RECO_07 | Demander bilan ergothrapie pour maintenir l'autonomie | Contacter MT pour prescription bilan ergo |  |
| CAT_03 | F2_RECO_08 | Demander bilan ergo et/ou kin pour capacits motrices | Contacter MT pour prescription bilan kin/ergo |  |

>  **F2_RECO_05** : "Demander un suivi rgulier" est trop gnrique. Suivi de quoi ? Par qui ? Vis--vis de N36 (planification), le wording devrait tre plus spcifique.
>  **F2_RECO_07/08** : Doublons quasi identiques avec F2_RECO_06. Les 3 recos prescrivent la mme chose (bilan kin/ergo). Fusion recommande.

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit (Reco + MT)

#### CAT_01  Coordination et ajustement de l'aide

> Niveaux existants :  STD_01, STD_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Vrifiez que l'aide reue correspond bien aux besoins actuels | Faire le point sur les interventions et si ncessaire initier une rvaluation |

#### CAT_02  Scurisation des priodes  risque

> Niveaux existants :  CCC_01 uniquement ( K3)

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | La dpendance de votre proche ncessite une rorganisation urgente de l'aide | Structurer un plan de scurisation couvrant les priodes jour/nuit  risque |

#### CAT_03  Rhabilitation et maintien de la mobilit

> Niveaux existants :  CCC_01 uniquement ( K3)

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Demandez un bilan kin et ergo pour votre proche | Contacter le MT pour prescription bilan kin + ergothrapie |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP n'est PAS activ (aucune rgle n'a fir)

| | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ |
|---|---|---|
|  Prvention | Restez attentif  l'volution de l'autonomie de votre proche | Vrifier priodiquement l'adquation entre aide reue et besoins |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V4_PREV_03 | Surveiller les signaux de perte d'autonomie | ORGA | Faire un point rgulier sur les capacits du proche | Notez si votre proche a plus de difficults qu'avant dans ses gestes quotidiens |
| MT_V4_PREV_04 | Informer sur les bilans griatriques prventifs | INFO | Proposer un bilan griatrique si pas fait rcemment | Renseignez-vous sur un bilan griatrique pour votre proche |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question du MP  1 rgle d'activation |  3 orphelines |  | E22 = cadrage, N18/N36 = besoin rgles |
| 2 | Chaque rgle d'activation  1 version de reco |  |  | 3 rgles  8 recos |
| 3 | Chaque catgorie de reco  ses MT assignes |  |  | CAT_01: 6 MT, CAT_02: 5 MT, CAT_03: 3 MT |
| 4 | K3 respect (2 niveaux par catgorie) |  |  | CAT_01:  (2 STD), CAT_02:  (CCC seul), CAT_03:  (CCC seul) |
| 5 | Aucune MT orpheline |  |  | Triplons  fusionner |
| 6 | Reco prvention prsente |  Propose |  |  valider |
| 7 | Wording reco = conseil succinct, MT = verbe d'action |  |  | F2_RECO_05 trop gnrique, F2_RECO_06/07/08 doublons |
| 8 | Sens clinique renseign pour chaque rgle |  |  | 3/3 rgles avec sens clinique |

> **Anomalies dtectes** :
> -  K3 non respect pour CAT_02 et CAT_03
> -  2 questions orphelines fonctionnelles (N18, N36)  besoin de rgles
> -  3 MT triplons en CAT_02  fusion imprative
> -  3 recos doublons (F2_RECO_06/07/08) pour les bilans kin/ergo  fusion
> -  F2_RECO_05 : wording trop gnrique
> -  Cross-activation F3F2 pour E25 (confusion jour/nuit)  envisager

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 3 | 3 |
| Rgles d'activation | :2 :1 :0 | :_ :_ :_ |
| MT totales | 14 | ~10 (aprs fusions) |
| MT contributives | 8 | ~6 |
| Domaine  /  | 3 / 11 | 3 / 7 |
| ASR | F2-A / F2-B | F2-A / F2-B |
| Reco prvention |  | Propose |
| Checks OK | 4/8 | /8 |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories (coordination aide, scurisation, mobilit) |  Propos |
| 2 | K3 non-compliance CAT_02 et CAT_03  crer rgles Standard |  Propos |
| 3 | Fusion triplons CAT_02 (53 MT) |  Propos |
| 4 | Fusion recos doublons F2_RECO_06/07/08 |  Propos |
| 5 | Crer rgles pour N18 et N36 |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | K3 : ajouter STD pour CAT_02 et CAT_03 |  |
| 2 | Questions orphelines N18 et N36 : crer rgles ? |  |
| 3 | Fusionner recos kin/ergo (RECO_06/07/08) |  |
| 4 | Cross-activation F3F2 pour E25 (confusion jour/nuit) |  |
| 5 | Acteur CMP pour N36 : pertinent ou remplacer par ergo ? |  |
| 6 | Ajout MT "planning relais familiaux" pour CAT_02 ? |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Xb=`#  Fiche de Validation MP  F3  Mmoire, comportement et risques

> **Vulnrabilit** : V4  Fragilit du Proche  
> **ASR** :  F3-A : Dispositifs rduisant le risque | F3-B : Encadrement humain effectif   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## CONTEXTE  Big Picture V4

V4 (Fragilit du Proche) couvre 6 MPs centrs sur le Bloc 5  Vie quotidienne et fragilits du proche :

| MP | Nom | Nb Q | Thme |
|---|---|---|---|
| F1 | Vie quotidienne, budget et entourage | 8 | Quotidien global, budget, isolement |
| F2 | Autonomie, aide humaine et prsence | 7 | Aide jour/nuit, mobilit |
| **F3** | **Mmoire, comportement et risques** | **8** | **Troubles cognitifs, comportements dangereux, humeur** |
| F4 | Douleur, fatigue, sommeil et tat gnral | 11 | tat physique global |
| F5 | Dpendance, handicap, addictions | 10 | Hospitalisations, handicap |
| F6 | Autonomie fonctionnelle, chutes et aides | 9 | Capacits motrices, aides techniques |

> F3 est le **MP de vigilance cognitive et comportementale** de V4. Il repre les signaux d'alarme : confusion jour/nuit, dsorientation, comportements dangereux, troubles de la mmoire, ides suicidaires. C'est le MP le plus "critique" de V4  il contient 2 rgles de niveau Critique (comportements dangereux + comportements  risque/automutilation).

>  **Frontire F3/F4** : F3 = troubles cognitifs/comportementaux (cerveau). F4 = troubles somatiques (corps : douleur, fatigue, sommeil, nutrition). L'humeur (N19, O4) est un cas frontire : F3 traite les changements d'humeur comme indicateurs de troubles comportementaux, F4 traite l'tat dpressif comme composante de l'tat gnral.

>  **Cross-activation F3F2** : E25 (confusion jour/nuit) et E26 (dsorientation) impactent directement le besoin de scurisation nocturne/prsence (F2). Cross-activation recommande.

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : doublons avec F4 (humeur/dpression) ou F2 (scurisation) ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : minimum vital pour un patient avec troubles cognitifs ? | Actions 1, 3 |
| T3 | **Actionnabilit** : chaque MT excutable concrtement ? | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : nombre d'lments proportionnel  la gravit ? | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : l'aidant peut-il raliser la MT seul ? | Actions 3, 4 |
| T6 | **Chane d'action** : squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## 0. DONNES FIGES  Questions rattaches  F3

### Questions rattaches  ce MP

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E25 | La personne aide confond-elle parfois le jour et la nuit (sommeil invers, veils nocturnes prolongs, endormissement en journe) ? | etat |  Non /  Parfois /  Oui |
| 2 | E26 | La personne aide se perd-elle ou semble-t-elle dsoriente dans des lieux familiers ? | etat |  Non /  Parfois /  Oui |
| 3 | E27 | A-t-elle des comportements potentiellement dangereux (gaz ouvert, porte non ferme, errance, actes risqus) ? | etat |  Non /  Parfois /  Oui |
| 4 | N19 | Ressentez-vous souvent des changements d'humeur ou de comportement chez elle ? | facteur |  Jamais /  Parfois /  Souvent |
| 5 | N22 | A-t-elle des comportements  risque (automutilation, comportements dangereux) ? | etat |  Jamais /  Parfois /  Souvent |
| 6 | N24 | La personne aide a-t-elle des troubles de la mmoire ou de la concentration ? | etat |  Non /  Parfois /  Oui |
| 7 | N25 | Exprime-t-elle des ides suicidaires ? | etat |  Jamais /  Parfois /  Souvent |
| 8 | O13 | Selon vous, y a-t-il une dtrioration notable dans ses fonctions cognitives ? | etat |  Non /  Oui, diminution de certaines fonctions /  Oui, elles sont totalement altres |

> Total : **8 questions** (7 etat, 1 facteur)  
>  **Observation** : F3 est massivement "etat" (7/8). C'est cohrent : on mesure des DGRADATIONS cognitives et comportementales, pas des circonstances.

### Questions candidates exclues

| Question ID | Libell | Pertinente pour F3 ? | Raisonnement |
|---|---|---|---|
| N36 | Besoin aide planification journes |  Possible | Dclin cognitif impactant l'organisation. Mais F2 (aide humaine ncessaire) est mieux plac pour l'activation. |
| O4 | Humeur (normale/anxieuse/dprime) |  Frontire | F3 = changements d'humeur (N19), F4 = tat dpressif (O4). La distinction est fine mais cliniquement cohrente. |
| E24 | Besoin prsence la nuit |  Non | F2  une consquence de F3, pas un indicateur cognitif en soi |
| N37-N40 | Questions addiction |  Non | F5  dimension addictive, pas cognitive |

>  **Observation** : N25 (ides suicidaires) est dans F3 mais sa rgle critique (V2_F4_CRIT_01) est rattache  **F4** dans la DB. Incohrence : la question est mappe  F3 mais la rgle est en F4. ** clarifier** : les ides suicidaires sont-elles un indicateur comportemental (F3) ou un indicateur d'tat gnral (F4) ? Cliniquement, les deux sont dfendables. La rgle est dans F4, la question est dans F3.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

> Les 8 recos legacy se regroupent autour de **3 axes d'action cliniques distincts** :
>
> 1. **Scurisation des comportements  risque** (E25, E26, E27, N22)  Prvenir les dangers lis  la dsorientation, la confusion et les comportements dangereux. Recos F3_RECO_01, F3_RECO_02, F3_RECO_03, F3_RECO_05.
> 2. **valuation et suivi neuro-cognitif** (N24, O13)  Faire valuer les troubles de mmoire/cognition et obtenir un bilan griatrique/neurologique. Recos F3_RECO_06, F3_RECO_08.
> 3. **Suivi psychiatrique et gestion de l'humeur** (N19, N25)  Surveiller les changements d'humeur, valuer le risque suicidaire et orienter vers un psychiatre/psychologue. Recos F3_RECO_04, F3_RECO_07.
>
> **Pourquoi pas 4 catgories ?** On pourrait sparer scurisation jour (E25/E26) et comportements dangereux (E27/N22). Mais cliniquement, les actions sont les mmes (identifier  scuriser  alerter). La diffrence est dans le niveau de criticit, pas dans la nature de l'action.
>
> **Pourquoi pas 2 catgories ?** Fusionner neuro-cognitif (bilan mdical) et psychiatrique (suivi humeur) serait une erreur : les acteurs sont diffrents (neurologue/griatre vs psychiatre/psychologue) et les actions sont distinctes.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | F3_CAT_01 | Scurisation des comportements  risque | Identifier et prvenir les dangers lis  la dsorientation, confusion et comportements dangereux | Legacy  |
| 2 | F3_CAT_02 | valuation et suivi neuro-cognitif | Faire valuer les troubles cognitifs et obtenir un bilan griatrique/neurologique | Legacy  |
| 3 | F3_CAT_03 | Suivi psychiatrique et gestion de l'humeur | Surveiller les changements d'humeur, valuer le risque, orienter vers psychiatre/psychologue | Legacy  |

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

### Catgorie 1  Scurisation des comportements  risque

> **E25** :  La personne aide confond-elle parfois le jour et la nuit ?     Non /  Parfois /  **Oui**
> **E26** :  Se perd-elle dans des lieux familiers ?    Non /  Parfois /  **Oui**
> **E27** :  Comportements potentiellement dangereux ?    Non /  Parfois /  **Oui**
> **N22** :  Comportements  risque (automutilation) ?    Jamais /  Parfois /  **Souvent**
> **O13** :  Dtrioration fonctions cognitives ?    Non /  **Diminution** /  **Altration totale**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC | V2_F3_CCC_01 | O13  {"Diminution","Altration totale"} **ET** (E25 = "Oui" **OU** E26 = "Oui") | Activer CAT_01 + CAT_02 | Dsorganisation cognitive installe avec retentissement fonctionnel | Legacy  |
|  CRITIQUE | V2_F3_CRIT_01 | E27 = "Oui" | Activer CAT_01 | Comportements dangereux pour le proche ou l'aidant | Legacy  |
|  CRITIQUE | V2_F3_CRIT_02 | N22 = "Oui" (Souvent) | Activer CAT_01 | Comportements  risque  mise en danger | Legacy  |

>  **Alerte K3 critique** : CAT_01 n'a **AUCUN niveau Standard**. Elle s'active directement en CCC ou Critique. C'est un choix clinique dfendable (les signaux de F3 sont par nature graves), mais cela contredit K3.
>
>  **Proposition STD pour CAT_01** :
> - SI E25 = "Parfois" OU E26 = "Parfois" OU E27 = "Parfois" OU N22 = "Parfois"  Standard | Sens : signaux prcoces ncessitant vigilance.

### Catgorie 2  valuation et suivi neuro-cognitif

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC | V2_F3_CCC_01 | O13  {"Diminution","Altration totale"} ET (E25 = "Oui" OU E26 = "Oui") | Activer CAT_02 (via CAT_01) | Besoin bilan griatrique/neurologique | Legacy  |

>  **Alerte K3** : CAT_02 n'a qu'un seul niveau (CCC).
>
>  **Proposition STD pour CAT_02** :
> - SI N24 = "Parfois" OU O13 = "Diminution de certaines fonctions"  Standard | Sens : troubles mergents, bilan prventif recommand.

### Catgorie 3  Suivi psychiatrique et gestion de l'humeur

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC |  | N19 = "Souvent"  via rattachement F3_RECO_04 | Activer CAT_03 | Changements d'humeur frquents | Legacy (implicite) |

>  **Alerte majeure** : CAT_03 n'a **aucune rgle d'activation formalise** dans la DB. Les recos F3_RECO_04 et F3_RECO_07 sont rattaches aux rgles CCC_01 et CRIT_02 respectivement, mais ces rgles activent CAT_01, pas CAT_03.
>
>  **N25 (ides suicidaires)** : La question est dans F3, mais sa rgle (V2_F4_CRIT_01) est dans **F4**. Incohrence critique. Si N25 reste en F3, il faut soit :
> - (a) Dupliquer la rgle en F3 (V2_F3_CRIT_03)
> - (b) Ou dplacer la question N25 vers F4
>
>  **Propositions de rgles pour CAT_03** :
> - **STD** : SI N19 = "Parfois"  Standard | Sens : changements d'humeur  surveiller
> - **CCC** : SI N19 = "Souvent"  CCC | Sens : instabilit comportementale ncessitant suivi
> - **CRITIQUE** : SI N25  {"Parfois","Souvent"}  Critique | Sens : risque suicidaire  action immdiate

###  Raisonnement couverture

> **Couverture des questions** :
> - E25 :  Via CCC_01
> - E26 :  Via CCC_01
> - E27 :  Via CRIT_01
> - N19 :  **Pas dans une rgle formalise**  devrait activer CAT_03
> - N22 :  Via CRIT_02
> - N24 :  **Pas dans une rgle formalise**  devrait activer CAT_02
> - N25 :  Rgle dans F4, pas F3
> - O13 :  Via CCC_01
>
>  **3 questions avec problmes** : N19 (orpheline), N24 (orpheline), N25 (mauvais MP dans la rgle).

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification | Priorit |
|---|---|---|---|
| 1 | Crer STD pour CAT_01 : "Parfois" sur E25/E26/E27/N22 | K3 + signaux prcoces non couverts |  |
| 2 | Crer STD pour CAT_02 : N24 = "Parfois" OU O13 = "Diminution" | K3 + question N24 orpheline |  |
| 3 | Crer STD + CCC + CRIT pour CAT_03 bases sur N19 et N25 | CAT_03 sans rgles formalises |  |
| 4 | Rsoudre N25 : question F3 vs rgle F4 | Incohrence de rattachement |  |

> **Contrle K3** :  Non vrifi  aucune catgorie n'a de niveau Standard  
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

### CAT_01  Scurisation des comportements  risque

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_039 (ex MT_V2_040) | Identifier les situations ou moments  risque | ORGA | Aidant (autonome) |  | Legacy |
| MT_V4_040 (ex MT_V2_042) | valuer la gravit et la frquence des comportements | ORGA | IDEC |  | Legacy |
| MT_V4_041 (ex MT_V2_045) | Identifier les situations  risque (fatigue, moments journe) | ORGA | Aidant (autonome) |  | Legacy |
| MT_V4_042 (ex MT_V2_075) | Identifier les situations ou moments de dsorientation | INFO | IDEC |  | Legacy |

>  **Observations CAT_01** :
> - MT_V4_039 et MT_V4_041 sont des **doublons** : "identifier les situations  risque" deux fois, mme acteur. Fusion imprative.
> - **0 MT contributive ()**  ASR impossible. Il manque des MT SEC/STRUC/MED.
> - Il n'y a aucune MT d'action concrte (alerter un professionnel, installer un dispositif, etc.)

>  **Propositions** :
> - Fusionner MT_V4_039+041  "Identifier et documenter les situations  risque (moments, frquence, nature)"
> - Ajouter MT SEC : "Alerter le MT en cas de comportement dangereux avr"
> - Ajouter MT STRUC : "valuer la pertinence d'un dispositif de scurit (tlalarme, dtecteur gaz, verrous)"

### CAT_02  valuation et suivi neuro-cognitif

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_043 (ex MT_V2_061) | RDV avec psychiatre  prescription surveillance traitements par IDEL | MED | Mdecin spcialiste |  | Legacy |
| MT_V4_044 (ex MT_V2_056) | RDV MT pour lettre d'adressage neurologue et griatre  passage IDEL surveillance mdicaments | MED | MT |  | Legacy |
| MT_V4_045 (ex MT_V2_062) | Contacter MT pour lettre d'adressage bilan griatrique complet (bilan mmoire) | MED | MT |  | Legacy |
| MT_V4_046 (ex MT_V2_067) | RDV MT pour lettre d'adressage griatre  prescription IDEL surveillance mdicaments | MED | MT |  | Legacy |

>  **Observations CAT_02** :
> - MT_V4_044/045/046 sont **triplons** : toutes = "contacter le MT pour lettre d'adressage griatre/neurologue + IDEL". Fusion imprative.
> - 4 MT, toutes MED ()  bon pour l'ASR, mais pas de diversit de types. Il manque ORGA (valuer avant d'agir).

>  **Propositions** :
> - Fusionner MT_V4_044+045+046  "Obtenir une lettre d'adressage du MT pour bilan griatrique/neurologique complet + prescription IDEL"
> - Rsultat : 2 MT (psychiatre + MT griatrique)  suffisant si on ajoute 1 ORGA.
> - Ajouter MT ORGA : "valuer le retentissement des troubles cognitifs sur le quotidien (actes  risque, oublis, erreurs mdicamenteuses)"

### CAT_03  Suivi psychiatrique et gestion de l'humeur

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_047 (ex MT_V2_059) | RDV mdecin gnraliste pour orienter vers les urgences | MED | Professionnel de sant |  | Legacy |

>  **Observations CAT_03** :
> - **1 seule MT**  clairement insuffisant pour un MP qui couvre les ides suicidaires et les changements d'humeur.
> - La MT existante est l'orientation d'urgence (N25 = ides suicidaires)  correcte pour le niveau Critique mais rien pour Standard/CCC.
> - Aucune MT pour N19 (changements d'humeur)  les recos F3_RECO_04 existent mais sans MT concrtes.

>  **Propositions** :
> - Ajouter MT SEC : "Prendre RDV avec un psychiatre pour valuer les changements d'humeur" (source : F3_RECO_04)
> - Ajouter MT SEC : "Prendre RDV avec un psychologue conventionn" (source : F3_RECO_07)
> - Ajouter MT ORGA : "Documenter la frquence et la nature des pisodes d'instabilit motionnelle"

###  Dcisions Action 3

| # | Proposition | Dcision |
|---|---|---|
| 1 | Fusion doublons CAT_01 (43) |  |
| 2 | Ajout MT contributives CAT_01 (SEC + STRUC) |  |
| 3 | Fusion triplons CAT_02 (42) |  |
| 4 | Ajout MT ORGA CAT_02 |  |
| 5 | Ajout 3 MT pour CAT_03 (SEC + ORGA) |  |

> **Condition ASR par catgorie** :
> - CAT_01 :  0   ASR **impossible**  besoin MT contributives
> - CAT_02 :  4 (MED4  2 aprs fusion)  ASR **possible**
> - CAT_03 :  1 (MED1)  ASR **possible** (si ajouts)

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

### Tableau consolid des MT de F3

| MT_ID | Libell | Type | Acteur | Domaine | / | Cat | Source |
|---|---|---|---|---|---|---|---|
| MT_V4_039 | Identifier situations/moments  risque | ORGA | Aidant (autonome) |  |  | CAT_01 | Legacy |
| MT_V4_040 | valuer gravit/frquence des comportements | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_041 | Identifier situations risque (doublon) | ORGA | Aidant (autonome) |  |  | CAT_01 | Legacy |
| MT_V4_042 | Identifier moments de dsorientation | INFO | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_043 | RDV psychiatre + prescription IDEL | MED | Mdecin spcialiste |  |  | CAT_02 | Legacy |
| MT_V4_044 | RDV MT lettre d'adressage neurologue/griatre | MED | MT |  |  | CAT_02 | Legacy |
| MT_V4_045 | MT lettre adressage bilan griatrique | MED | MT |  |  | CAT_02 | Legacy |
| MT_V4_046 | MT lettre adressage griatre + IDEL (doublon) | MED | MT |  |  | CAT_02 | Legacy |
| MT_V4_047 | RDV MG orienter urgences | MED | Professionnel de sant |  |  | CAT_03 | Legacy |

> **Rsum** :  
> - Total MT : 9 (avant fusion)
> - Domaine  : 5 / Domaine  : 4  
> - Contributives () : 5  MED: 5
> - Non-contributives () : 4  ORGA: 3, INFO: 1
> -  Pas de SEC ni STRUC  typiquement manquant pour un MP de scurisation

###  Propositions d'amlioration

| # | Proposition | Justification |
|---|---|---|
| 1 | Ajouter acteur "quipe mobile griatrique" | Pour les situations complexes de dsorientation |
| 2 | MT_V4_047 : acteur "Professionnel de sant"  trop vague | Prciser : "IDEC  oriente vers MT  urgences" |
| 3 | Ajouter SEC : "Alerter le rseau d'aide en cas de comportement dangereux avr" | Scurisation immdiate |

> **Dcision Dr. Monka** :  Valid |  Modifications

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base

| CAT | Reco ID | Reco Utilisateur | Reco IDEC | / |
|---|---|---|---|---|
| CAT_01 | F3_RECO_01 | Prvenir l'aggravation des troubles du rythme veille-sommeil | Identifier les priodes ou situations dclenchantes |  |
| CAT_01 | F3_RECO_02 | valuer le niveau de dsorientation et prvenir les situations  risque | Identifier les situations ou moments de dsorientation |  |
| CAT_01 | F3_RECO_03 | Situation  risque lev ncessitant une action immdiate | Identifier les situations ou moments  risque |  |
| CAT_02 | F3_RECO_06 | valuer les troubles mmoire/concentration et adapter la prise en charge | RDV psychiatre + prescription IDEL surveillance |  |
| CAT_02 | F3_RECO_08 | Demander courrier consultation griatrique ou neurologique | RDV MT pour lettre adressage + prescription IDEL |  |
| CAT_03 | F3_RECO_04 | valuer les changements d'humeur et rvaluer les traitements | RDV psychiatre pour suivi |  |
| CAT_03 | F3_RECO_05 | Demander sances de suivi pour prvenir dtrioration | RDV psychiatre pour suivi |  |
| CAT_03 | F3_RECO_07 | valuer le risque suicidaire et orienter vers les urgences | RDV psychologue conventionn |  |

>  **F3_RECO_03** : "Situation  risque lev ncessitant une action immdiate" n'est pas une reco  c'est un constat. Reformuler en action.
>  **F3_RECO_05** : doublon wording avec F3_RECO_04 (mme action : RDV psychiatre).
>  **F3_RECO_07** : Incohrence  le texte dit "orienter vers les urgences" mais l'action IDEC dit "RDV psychologue". Le psychologue n'est pas les urgences.

### Phase 2  Versioning par criticit

#### CAT_01  Scurisation des comportements

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Prvenir les situations de danger lies  la confusion et la dsorientation | valuer le risque et scuriser l'environnement du proche |
|  Critique ( 72h) | Agir immdiatement : votre proche prsente des comportements dangereux | Contacter le MT en urgence  scurisation immdiate ncessaire |

#### CAT_02  valuation neuro-cognitive

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Faites valuer les fonctions cognitives de votre proche par un spcialiste | Obtenir lettre adressage MT pour bilan griatrique/neurologique + IDEL |

#### CAT_03  Suivi psychiatrique et gestion de l'humeur

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Faites valuer les changements d'humeur de votre proche | RDV psychiatre pour bilan et adaptation traitement |
|  Critique ( 72h) | Alerte : votre proche exprime des ides suicidaires  consultez en urgence | Orienter immdiatement vers les urgences ou le 3114 |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

| | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Prvention | Restez attentif aux signes de trouble cognitif ou comportemental chez votre proche | Surveiller l'apparition de signaux de dsorientation, confusion ou changements d'humeur |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V4_PREV_05 | Surveiller les signaux cognitifs prcoces | ORGA | Vrifier priodiquement la mmoire et l'orientation | Notez si votre proche oublie plus souvent ou semble dsorient |
| MT_V4_PREV_06 | Informer sur les consultations mmoire | INFO | Proposer RDV consultation mmoire si +65 ans | Renseignez-vous sur les consultations mmoire gratuites |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Dtail |
|---|---|---|---|
| 1 | Chaque question  1 rgle |  | N19 orpheline, N24 orpheline, N25 = rgle F4 |
| 2 | Chaque rgle  1 reco |  | 3 rgles  8 recos |
| 3 | Chaque CAT  ses MT |  | CAT_01: 4 MT (0 ), CAT_02: 4 MT, CAT_03: 1 MT |
| 4 | K3 respect |  | **Aucune CAT n'a de Standard** |
| 5 | Aucune MT orpheline |  | Doublons + triplons |
| 6 | Reco prvention |  Propose |  valider |
| 7 | Wording correct |  | F3_RECO_03 = constat, F3_RECO_07 incohrent |
| 8 | Sens clinique renseign |  | 3/3 rgles OK |

> **Anomalies critiques** :
> -  **K3 totalement non respect** : 0 rgle Standard sur les 3 catgories
> -  **CAT_01 : 0 MT contributive**  ASR impossible
> -  **N25 : question F3, rgle F4**  incohrence de rattachement
> -  **CAT_03 : 1 seule MT** pour couvrir humeur + ides suicidaires
> -  **Doublons/triplons** MT : 2 fusions ncessaires

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories | 3 | 3 |
| Rgles | :0 :1 :2 | :_ :_ :_ |
| MT totales | 9 | ~8 (aprs fusions + ajouts) |
| MT contributives | 5 | ~7 (aprs ajouts SEC/STRUC) |
| Checks OK | 3/8 | /8 |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Crer niveaux Standard pour les 3 catgories |  |
| 2 | Ajouter MT contributives (SEC/STRUC) pour CAT_01 |  |
| 3 | Rsoudre le rattachement N25 (F3 vs F4) |  |
| 4 | toffer CAT_03 (1 MT  3-4 MT) |  |
| 5 | Fusionner doublons/triplons |  |
| 6 | Cross-activation F3F2 |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,Zb=`#  Fiche de Validation MP  F4  Douleur, fatigue, sommeil et tat gnral

> **Vulnrabilit** : V4  Fragilit du Proche  
> **ASR** :  F4-A : Suivi ou traitement en cours | F4-B : Accompagnement soulageant l'tat gnral   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## CONTEXTE  Big Picture V4

V4 (Fragilit du Proche) couvre 6 MPs centrs sur le Bloc 5 :

| MP | Nom | Nb Q | Thme |
|---|---|---|---|
| F1 | Vie quotidienne, budget et entourage | 8 | Quotidien global, budget |
| F2 | Autonomie, aide humaine et prsence | 7 | Aide jour/nuit, mobilit |
| F3 | Mmoire, comportement et risques | 8 | Troubles cognitifs, comportements |
| **F4** | **Douleur, fatigue, sommeil et tat gnral** | **11** | **Douleur, nergie, sommeil, humeur, nutrition, sensoriels, mdication** |
| F5 | Dpendance, handicap, addictions | 10 | Hospitalisations, handicap |
| F6 | Autonomie fonctionnelle, chutes et aides | 9 | Capacits motrices, aides techniques |

> F4 est le **MP somatique central** de V4. Avec 11 questions, c'est le plus large de V4. Il couvre l'ensemble de l'tat physique du proche : douleur chronique, fatigue, sommeil, nutrition, poids, sensoriels (vue/audition), taille (ostoporose), humeur/dpression, mdication. C'est le MP qui dtecte la **dgradation somato-psychique globale** par accumulation.

>  **Frontire F4/F3** : F4 = corps (somatique). F3 = cerveau (cognitif/comportemental). La frontire est O4 (humeur) : F4 traite l'tat dpressif comme composante somatique, F3 traite les changements d'humeur comme indicateur comportemental. N25 (ides suicidaires) est en F3 mais sa rgle CRIT_01 est rattache  F4 dans la DB.

>  **Particularit F4** : Les rgles CRIT de F4 (CRIT_01 = N25, CRIT_02 = N38, CRIT_03 = N39) utilisent des questions rattaches  d'autres MPs (N25  F3, N38/N39  F5). C'est une forme de **cross-activation critique** : quand un signal vital est dtect dans un autre MP, F4 s'active en Critique.  documenter proprement ou  raffecter.

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : doublons avec F3 (humeur) ou F5 (alcool/tabac) ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : minimum vital griatrique pour un patient poly-symptomatique ? | Actions 1, 3 |
| T3 | **Actionnabilit** : chaque MT excutable concrtement ? | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : 11 questions  combien de CAT ? | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : l'aidant peut-il y contribuer ? | Actions 3, 4 |
| T6 | **Chane d'action** : squence logique ? | Actions 3, 4 |

---

## 0. DONNES FIGES  Questions rattaches  F4

### Questions rattaches  ce MP

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | N11 | La personne aide est-elle sujette  des douleurs chroniques lies  son tat de sant ? | etat |  Non /  Occasionnellement /  Oui |
| 2 | N12 | Ressentez-vous souvent de la fatigue ou un manque d'nergie chez la personne aide ? | etat |  Non /  Parfois /  Oui |
| 3 | N13 | La personne aide a-t-elle des troubles du sommeil ? | etat |  Non /  Parfois /  Oui |
| 4 | N34 | A-t-elle des difficults  s'alimenter correctement (sous-alimentation, suralimentation) ? | etat |  Non /  Parfois /  Oui |
| 5 | N44 | Avez-vous constat un changement de poids ? | facteur |  Non /  Oui _(conditionnel N3)_ |
| 6 | O3 | Combien de mdicaments diffrents prend-elle chaque jour ? | facteur |  Pas de traitement /  1  3 /  4  6 /  7 et plus |
| 7 | O4 | Selon vous, en ce moment, diriez-vous de la personne aide qu'elle est : | etat |  D'humeur normale /  Parfois anxieuse ou triste /  Dprime |
| 8 | O5 | Selon vous et par rapport  une personne du mme ge, diriez-vous que la personne aide est : | facteur |  En meilleure sant /  Sant quivalente /  En moins bonne sant |
| 9 | O7 | Avez-vous constat des changements dans la manire dont elle se nourrit ? | etat |  Non /  Oui /  Oui et elle est dnutrie |
| 10 | O15 | La personne aide consomme-t-elle habituellement : (plusieurs) | facteur |  Alcool (+3 verres/j) /  Tabac /  Aucun des deux |
| 11 | O22 | Quels ont t les principaux constats suite aux derniers examens de vue et d'audition ? | facteur |  Correct /  Correct avec lunettes/lentilles /  Correct avec appareillage auditif /  Mauvais malgr lunettes /  Mauvais malgr appareillage /  Je ne sais pas |
| 12 | O26 | Avez-vous constat une diminution de sa taille habituelle ? | etat |  Oui /  Non |

> Total : **12 questions** (7 etat, 5 facteur)   Le contexte indiquait 11 mais O7 est aussi mappe  F4, portant le total  12.

### Questions candidates exclues

| Question ID | Libell | Pertinente ? | Raisonnement |
|---|---|---|---|
| N25 | Ides suicidaires |  Cross-activation | Question F3 mais rgle F4_CRIT_01 en DB. Cross-activation critique, pas rattachement direct. |
| N38 | Difficults contrle addiction |  Cross-activation | Question F5 mais rgle F4_CRIT_02. Idem : cross-activation. |
| N39 | Problmes sant lis addiction |  Cross-activation | Question F5 mais rgle F4_CRIT_03. Idem. |
| E25 | Confusion jour/nuit |  Non | F3  troubles cognitifs, mais impacte le sommeil. Cross-ref possible. |
| N13 vs E25 | Sommeil vs confusion |  | N13 (F4) traite les troubles du sommeil SOMATIQUES. E25 (F3) traite la confusion jour/nuit COGNITIVE. Distinction clinique valide. |

>  **Observation structurelle** : Les 3 rgles Critique de F4 utilisent des questions d'AUTRES MPs (N25F3, N38/N39F5). Ce sont en ralit des **rgles de cross-activation critique** : "si un signal d'urgence est dtect ailleurs, F4 monte en Critique".  formaliser comme telles dans l'architecture globale.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

> Les 10 recos legacy couvrent un spectre trs large (douleur, fatigue, sommeil, nutrition, sensoriels, mdication, humeur, os). Regroupement en **4 catgories d'action cliniques** :
>
> 1. **Gestion de la douleur et de la fatigue** (N11, N12)  valuer et traiter la douleur chronique, investiguer les causes de fatigue. Recos F4_RECO_01, F4_RECO_02.
> 2. **Sommeil, nutrition et tat somatique** (N13, N34, N44, O7, O26)  Troubles du sommeil, alimentation, changement de poids, taille (ostoporose). Recos F4_RECO_03, F4_RECO_04, F4_RECO_05, F4_RECO_07, F4_RECO_10.
> 3. **Bilan sensoriel et mdication** (O3, O15, O22)  Suivi vue/audition, polymdication, consommation substances. Recos F4_RECO_06, F4_RECO_08.
> 4. **tat psychologique et humeur** (O4, O5)  Dpression, anxit, tat compar  l'ge. Reco F4_RECO_09.
>
> **Pourquoi 4 catgories ?** 12 questions couvrant 4 axes somatiques distincts : douleur/fatigue, nutrition/sommeil, sensoriels/mdication, humeur. Fusionner davantage perdrait la spcificit clinique.
>
> **Pourquoi pas 5 ?** On pourrait sparer nutrition et sommeil. Mais cliniquement, ils convergent souvent (dnutrition + insomnie = syndrome griatrique global). Les recos sont similaires (bilan MT).

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | F4_CAT_01 | Gestion de la douleur et de la fatigue | valuer douleur chronique, asthnie, adapter traitement antalgique | Legacy  |
| 2 | F4_CAT_02 | Sommeil, nutrition et tat somatique | Troubles sommeil, nutrition (dnutrition/suralimentation), poids, ostoporose | Legacy  |
| 3 | F4_CAT_03 | Bilan sensoriel et mdication | Suivi vue/audition, bilan polymdication, consommation substances | Legacy  |
| 4 | F4_CAT_04 | tat psychologique et humeur | valuation dpression/anxit, sant compare, orientation psychologue | Legacy  |

> **Dcision Dr. Monka** :  Valid 4 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

### Rgles de F4 dans la DB

> **Question complte N11** :  Douleurs chroniques ?    Non /  Occasionnellement /  **Oui**
> **Question complte N12** :  Fatigue/manque d'nergie ?    Non /  Parfois /  **Oui**
> **Question complte N13** :  Troubles du sommeil ?    Non /  Parfois /  **Oui**
> **Question complte N34** :  Difficults alimentation ?    Non /  Parfois /  **Oui**
> **Question complte O4** :  Humeur ?    D'humeur normale /  Parfois anxieuse /  **Dprime**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC | V2_F4_CCC_01 | AU MOINS 2 parmi : N11="Oui", N12="Oui", N13="Oui", N34="Oui", O4="Dprime" | Activer CAT_01 + CAT_02 + CAT_04 | Dgradation somato-psychique globale par accumulation | Legacy  |
|  CRITIQUE | V2_F4_CRIT_01 | N25 = "Souvent" _(question F3)_ | Activer CAT_04 | Ides suicidaires  risque vital immdiat | Legacy  |
|  CRITIQUE | V2_F4_CRIT_02 | N38 = "Oui" _(question F5)_ | Cross-activation | Perte de contrle addiction | Legacy  |
|  CRITIQUE | V2_F4_CRIT_03 | N39 = "Oui" _(question F5)_ | Cross-activation | Violence passive ou active | Legacy  |

### CAT_01  Gestion de la douleur et de la fatigue

| Niveau | Rgle | Condition | Sens clinique | Source |
|---|---|---|---|---|
|  CCC | V2_F4_CCC_01 (partiel) | N11 = "Oui" dans le composite | Douleur chronique avre, faisant partie d'un tableau multi-symptomatique | Legacy  |

>  **Alerte K3** : CAT_01 n'a **aucun niveau Standard**. La douleur occasionnelle (N11 = "Occasionnellement") ou la fatigue partielle (N12 = "Parfois") ne dclenchent rien.
>
>  **Proposition STD pour CAT_01** :
> - SI N11 = "Occasionnellement" OU N12 = "Parfois"  Standard | Sens : symptmes  surveiller, bilan prventif.

### CAT_02  Sommeil, nutrition et tat somatique

| Niveau | Rgle | Condition | Sens clinique | Source |
|---|---|---|---|---|
|  CCC | V2_F4_CCC_01 (partiel) | N13 = "Oui" et/ou N34 = "Oui" dans le composite | Troubles installs, risque dnutrition/insomnie chronique | Legacy  |

>  **Alerte K3** : Aucun Standard. N44 (poids), O7 (nutrition), O26 (taille) n'ont aucune rgle propre. Toutes sont des questions orphelines.
>
>  **Propositions STD pour CAT_02** :
> - SI N13 = "Parfois" OU N34 = "Parfois"  Standard | Sens : troubles mergents
> - SI N44 = "Oui" OU O7 = "Oui" OU O26 = "Oui"  Standard | Sens : changements physiques  investiguer

### CAT_03  Bilan sensoriel et mdication

>  **Aucune rgle d'activation dans la DB** pour CAT_03. Les recos F4_RECO_06 (vue/audition) et F4_RECO_08 (mdication) sont rattaches au CCC_01 composite, mais ce dernier ne vrifie pas O3, O15 ni O22.
>
>  **Propositions de rgles pour CAT_03** :
> - **STD** : SI O3  {"4  6","7 et plus"}  Standard | Sens : polymdication  risque
> - **CCC** : SI O22 contient "Mauvais malgr" OU O15 contient "Alcool"  CCC | Sens : dficit sensoriel non compens ou addiction

### CAT_04  tat psychologique et humeur

| Niveau | Rgle | Condition | Sens clinique | Source |
|---|---|---|---|---|
|  CCC | V2_F4_CCC_01 (partiel) | O4 = "Dprime" dans le composite | tat dpressif avr | Legacy  |
|  CRITIQUE | V2_F4_CRIT_01 | N25 = "Souvent" | Ides suicidaires  risque vital | Legacy  |

>  **Alerte K3** : Pas de Standard. O4 = "Parfois anxieuse/triste" ne dclenche rien.
>
>  **Proposition STD** : SI O4 = "Parfois anxieuse ou triste" OU O5 = "En moins bonne sant"  Standard | Sens : fragilit psychologique mergente.

###  Raisonnement couverture

> **Couverture des questions** :
> - N11 :  Via CCC_01 (partiel)
> - N12 :  Via CCC_01 (partiel)
> - N13 :  Via CCC_01 (partiel)
> - N34 :  Via CCC_01 (partiel)
> - N44 :  **Orpheline**  devrait activer CAT_02
> - O3 :  **Orpheline**  devrait activer CAT_03
> - O4 :  Via CCC_01 (partiel)
> - O5 :  **Orpheline**  sant compare, question de cadrage ?
> - O7 :  **Orpheline**  devrait activer CAT_02 (nutrition)
> - O15 :  **Orpheline**  devrait activer CAT_03 (substances)
> - O22 :  **Orpheline**  devrait activer CAT_03 (sensoriels)
> - O26 :  **Orpheline**  devrait activer CAT_02 (ostoporose)
>
>  **7 questions orphelines sur 12**  situation trs problmatique. La CCC_01 composite ne couvre que 5 questions. Toutes les questions "facteur" (valuation, mdicaments, vue, poids) n'ont aucune rgle.

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification | Priorit |
|---|---|---|---|
| 1 | Crer STD CAT_01 : N11="Occasionnellement" OU N12="Parfois" | K3 + couverture "avant la crise" |  |
| 2 | Crer STD CAT_02 : N13/N34="Parfois" ou N44/O7/O26="Oui" | K3 + 3 questions orphelines |  |
| 3 | Crer STD + CCC CAT_03 : O3 4, O22 "Mauvais", O15 "Alcool" | CAT entire sans rgle + 3 orphelines |  |
| 4 | Crer STD CAT_04 : O4="Parfois anxieuse" ou O5="Moins bonne sant" | K3 + 2 questions orphelines |  |
| 5 | Formaliser les CRIT comme cross-activations | CRIT_01/02/03 utilisent des questions d'autres MPs |  |

> **Contrle K3** :  Aucune CAT n'a de Standard  
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

### CAT_01  Gestion de la douleur et de la fatigue

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_048 (ex MT_V2_049) | Contacter MT pour bilan douleur (lettre adressage) | MED | MT |  | Legacy (RECO_01) |
| MT_V4_049 (ex MT_V2_057) | RDV MT pour bilan tat sant et rvaluer traitements | MED | MT |  | Legacy (RECO_02) |
| MT_V4_050 (ex MT_V2_058) | RDV MT pour bilan sant et rvaluer traitements (doublon) | MED | MT |  | Legacy (RECO_02) |
| MT_V4_051 (ex MT_V2_063) | Contacter MT pour prescription IDEL (prparation et surveillance traitements) | MED | MT |  | Legacy (RECO_02) |

>  **MT_V4_049/050** sont des **doublons stricts** (mme libell  une lettre prs : "traitement" vs "traitements").
> - 4 MT, toutes MED ()  bon pour ASR mais monotone.
> - Pas de MT ORGA ni INFO (pas d'valuation pralable par l'IDEC/aidant).

>  **Propositions** :
> - Fusionner MT_V4_049+050+051  "Obtenir RDV MT pour bilan de sant global, rvaluation traitements et prescription IDEL si besoin"
> - Rsultat : 2 MT (bilan douleur + bilan sant global)
> - Ajouter MT ORGA : "valuer avec l'aidant l'impact de la douleur/fatigue sur le quotidien"

### CAT_02  Sommeil, nutrition et tat somatique

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_052 (ex MT_V2_009) | RDV chirurgien-dentiste pour suivi | SEC | IDEC |  | Legacy (RECO_04) |
| MT_V4_053 (ex MT_V2_054) | RDV MT pour bilan sant + orienter psychiatre | MED | MT |  | Legacy (RECO_04) |
| MT_V4_054 (ex MT_V2_064) | RDV MT pour bilan osseux | MED | MT |  | Legacy (RECO_07) |

> 3 MT, bon quilibre SEC/MED.
> - MT_V4_052 (dentiste) est rattache  RECO_04 (alimentation)  lien : troubles alimentation  vrifier tat bucco-dentaire. Cohrent.
> - MT_V4_053 (MT  psychiatre) : rattache  RECO_04 (alimentation) mais l'action est "orienter vers psychiatre"  lien indirect via troubles alimentaires psychognes ?  clarifier.
> - Pas de MT pour N13 (sommeil) ni O7 (changements nutrition) ni N44 (poids).

>  **Propositions** :
> - Ajouter MT MED : "Contacter MT pour bilan troubles du sommeil" (pour N13)
> - Ajouter MT MED : "Contacter MT pour bilan nutritionnel / dnutrition" (pour O7/N34)
> - Clarifier MT_V4_053 : l'orientation psychiatre pour troubles alimentaires est-elle pertinente ici ?

### CAT_03  Bilan sensoriel et mdication

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_055 (ex MT_V2_017) | RDV avec l'ophtalmologue | SEC | IDEC |  | Legacy (RECO_06) |
| MT_V4_056 (ex MT_V2_022) | RDV avec ophtalmologue (doublon) | SEC | IDEC |  | Legacy (RECO_06) |
| MT_V4_057 (ex MT_V2_028) | RDV avec l'ORL | SEC | IDEC |  | Legacy (RECO_06) |
| MT_V4_058 (ex MT_V2_052) | Contacter MT pour bilan de mdication | MED | MT |  | Legacy (RECO_08) |

>  MT_V4_055/056 sont des **doublons** (RDV ophtalmo).
> - 4 MT (3 aprs fusion), toutes contributives (). Bon.
> - Mix SEC (IDEC prend RDV) + MED (bilan mdical).

>  **Propositions** :
> - Fusionner MT_V4_055+056  "Prendre RDV avec l'ophtalmologue du territoire"
> - Ajouter MT INFO : "Informer l'aidant des risques lis  la polymdication" (pour O3)

### CAT_04  tat psychologique et humeur

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_059 (ex MT_V2_051) | Contacter MT pour bilan de chute | MED | MT |  | Legacy (RECO_09) |
| MT_V4_060 (ex MT_V2_053) | RDV MT pour prescription sances psychologue | MED | Professionnel de sant |  | Legacy (RECO_09) |
| MT_V4_061 (ex MT_V2_070) | RDV MT pour prescription psychologue + lettre adressage addictologue | MED | MT |  | Legacy (RECO_09) |
| MT_V4_062 (ex MT_V2_003) | Contacter chirurgien-dentiste pour suivi | SEC | IDEC |  | Legacy (RECO_10) |

>  **Observations CAT_04** :
> - MT_V4_059 (bilan de chute) : pourquoi dans CAT_04 (humeur) ? Les chutes relvent de F6. Mal affecte.
> - MT_V4_061 (addictologue) : les addictions relvent de F5. Prsence justifiable si cross-activation CRIT_02/03.
> - MT_V4_062 (dentiste) : dj prsente en CAT_02 (MT_V4_052). Doublon inter-catgorie.
> - MT_V4_060/061 sont proches (RDV MT pour psychologue).

>  **Propositions** :
> - Dplacer MT_V4_059 (chute) vers F6
> - Supprimer MT_V4_062 (doublon chirurgien-dentiste avec CAT_02)
> - Fusionner MT_V4_060+061  "Obtenir prescription MT pour sances psychologue et/ou adressage addictologue"
> - Ajouter MT ORGA : "valuer l'impact de l'tat psychologique sur le quotidien (motivation, activits, socialisation)"

###  Dcisions Action 3

| # | Proposition | Dcision |
|---|---|---|
| 1 | Fusion doublons CAT_01 (42) + ajout ORGA |  |
| 2 | Ajout MT sommeil + nutrition pour CAT_02 |  |
| 3 | Fusion doublon ophtalmo CAT_03 (43) |  |
| 4 | Dplacer MT chute vers F6, supprimer doublon dentiste CAT_04 |  |
| 5 | Fusionner psychologue/addictologue CAT_04 |  |

> **Condition ASR par catgorie** :
> - CAT_01 :  4 (MED4  2 aprs fusion)  ASR **possible**
> - CAT_02 :  3 (SEC1, MED2)  ASR **possible**
> - CAT_03 :  4 (SEC32, MED1)  ASR **possible**
> - CAT_04 :  4 (MED31, SEC10)  ASR **possible** (si ajout)

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

### Tableau consolid des MT de F4

| MT_ID | Libell | Type | Acteur | Domaine | / | Cat | Source |
|---|---|---|---|---|---|---|---|
| MT_V4_048 | MT bilan douleur (lettre adressage) | MED | MT |  |  | CAT_01 | Legacy |
| MT_V4_049 | RDV MT bilan sant + rvaluer traitements | MED | MT |  |  | CAT_01 | Legacy |
| MT_V4_050 | RDV MT bilan sant rvaluer traitements (doublon) | MED | MT |  |  | CAT_01 | Legacy |
| MT_V4_051 | MT prescription IDEL surveillance traitements | MED | MT |  |  | CAT_01 | Legacy |
| MT_V4_052 | RDV chirurgien-dentiste | SEC | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_053 | RDV MT bilan sant + orienter psychiatre | MED | MT |  |  | CAT_02 | Legacy |
| MT_V4_054 | RDV MT bilan osseux | MED | MT |  |  | CAT_02 | Legacy |
| MT_V4_055 | RDV ophtalmologue | SEC | IDEC |  |  | CAT_03 | Legacy |
| MT_V4_056 | RDV ophtalmologue (doublon) | SEC | IDEC |  |  | CAT_03 | Legacy |
| MT_V4_057 | RDV ORL | SEC | IDEC |  |  | CAT_03 | Legacy |
| MT_V4_058 | MT bilan mdication | MED | MT |  |  | CAT_03 | Legacy |
| MT_V4_059 | MT bilan de chute ( mal affect) | MED | MT |  |  | CAT_04 | Legacy |
| MT_V4_060 | RDV MT prescription psychologue | MED | Prof. sant |  |  | CAT_04 | Legacy |
| MT_V4_061 | RDV MT psychologue + adressage addictologue | MED | MT |  |  | CAT_04 | Legacy |
| MT_V4_062 | Chirurgien-dentiste suivi ( doublon CAT_02) | SEC | IDEC |  |  | CAT_04 | Legacy |

> **Rsum** :
> - Total MT : 15 (avant fusion  ~10 aprs)
> - Domaine  : **15/15**  tout est mdical. Aucun  mdico-social.
> - Contributives () : **15/15**  toutes contributives
> - Non-contributives () : **0**  aucune MT ORGA/INFO
>
>  **Anomalie structurelle majeure** : F4 n'a **AUCUNE MT non-contributive** (pas d'ORGA, pas d'INFO). Toutes les MT sont des RDV ou bilans mdicaux. Il manque compltement la dimension d'valuation (IDEC/aidant) et d'information. Ce MP est purement "orienteur mdical" sans diagnostic pralable ni accompagnement.

###  Propositions d'amlioration

| # | Proposition | Justification |
|---|---|---|
| 1 | Ajouter MT ORGA par catgorie | valuer AVANT d'agir : la chane T6 est brise (pas de diagnostic) |
| 2 | Ajouter MT INFO : hygine de vie, polymdication | L'aidant a besoin d'information, pas seulement d'orientation |
| 3 | Acteur "Professionnel de sant"  trop vague | Prciser (IDEC, MT, spcialiste) |
| 4 | Tous domaine   revoir si MT sociales possibles | Certaines MT (RDV chirurgien-dentiste via IDEC) sont plutt  |

> **Dcision Dr. Monka** :  Valid |  Modifications

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base

| CAT | Reco ID | Reco Utilisateur | Reco IDEC | / |
|---|---|---|---|---|
| CAT_01 | F4_RECO_01 | Prescription/modification traitement antalgique + courrier griatre/algologue | MT bilan douleur (lettre adressage) |  |
| CAT_01 | F4_RECO_02 | Demander  rvaluer les traitements | RDV MT bilan sant + rvaluer traitements |  |
| CAT_02 | F4_RECO_03 | Rvaluer traitements et troubles du sommeil | RDV MT prescription psychologue |  |
| CAT_02 | F4_RECO_04 | Vrifier l'tat bucco-dentaire | RDV MT bilan sant + orienter psychiatre |  |
| CAT_02 | F4_RECO_05 | valuer tat nutritionnel + cause changement poids + courrier psychiatre | RDV MT bilan sant orienter psychiatre |  |
| CAT_02 | F4_RECO_07 | Prescription ostodensitomtrie + bilan osseux | RDV MT bilan osseux |  |
| CAT_02 | F4_RECO_10 | Vrification tat bucco-dentaire | MT bilan dnutrition |  |
| CAT_03 | F4_RECO_06 | Effectuer suivi annuel vue/audition | RDV ophtalmologue |  |
| CAT_03 | F4_RECO_08 | Faire bilan de mdication | MT bilan mdication |  |
| CAT_04 | F4_RECO_09 | Prescription sances psychologue | RDV MT prescription psychologue |  |

>  **F4_RECO_03** : Texte = "troubles du sommeil", action IDEC = "prescription psychologue". Incohrent : sommeil  psychologue (sauf si psychogne).
>  **F4_RECO_04** : Texte = "tat bucco-dentaire", action IDEC = "orienter psychiatre". Incohrence complte.
>  **F4_RECO_05** : Texte = "tat nutritionnel" puis "courrier psychiatre". Le lien nutritionpsychiatre est tnu sauf troubles alimentaires psychognes.
>  **F4_RECO_10** : Texte = "tat bucco-dentaire", action IDEC = "bilan dnutrition". Double incohrence (doublon F4_RECO_04 sur dentaire + action diffrente).

### Phase 2  Versioning par criticit

#### CAT_01  Gestion douleur/fatigue

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Faites valuer la douleur et la fatigue de votre proche par le mdecin | Contacter MT pour bilan douleur et rvaluation des traitements |

#### CAT_02  Sommeil, nutrition, tat somatique

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Faites un point complet sur le sommeil, l'alimentation et l'tat physique | Organiser bilans : nutrition, sommeil, ostoporose, dentaire |

#### CAT_03  Bilan sensoriel et mdication

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Faites vrifier la vue, l'audition et les mdicaments de votre proche | RDV ophtalmologue + ORL + bilan mdication par MT |

#### CAT_04  tat psychologique

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  CCC ( 30j) | Faites valuer l'tat moral de votre proche | RDV MT pour prescription sances psychologue |
|  Critique ( 72h) | Alerte : votre proche exprime des ides suicidaires  consultez en urgence | Orienter immdiatement vers les urgences ou le 3114 |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

| | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Prvention | Veillez au confort et au bien-tre quotidien de votre proche | Assurer le suivi rgulier des constantes de sant de base |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V4_PREV_07 | Suivre les indicateurs de confort | ORGA | Point trimestriel douleur/fatigue/sommeil | Observez si votre proche dort moins bien ou se plaint de douleurs |
| MT_V4_PREV_08 | Suivi annuel vue et audition | INFO | Rappeler RDV bilan sensoriel annuel | Pensez au bilan annuel vue et audition pour votre proche |
| MT_V4_PREV_09 | Surveiller l'alimentation | ORGA | Vrifier rgulirement les habitudes alimentaires | Notez les changements dans les repas de votre proche |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Dtail |
|---|---|---|---|
| 1 | Chaque question  1 rgle |  | **7 orphelines** : N44, O3, O5, O7, O15, O22, O26 |
| 2 | Chaque rgle  1 reco |  | 4 rgles  10 recos |
| 3 | Chaque CAT  ses MT |  | CAT_01: 4, CAT_02: 3, CAT_03: 4, CAT_04: 4 |
| 4 | K3 respect |  | **Aucune CAT n'a de Standard** |
| 5 | Aucune MT orpheline |  | Doublons + MT mal affectes |
| 6 | Reco prvention |  Propose |  valider |
| 7 | Wording correct |  | **4 incohrences majeures** (RECO_03, 04, 05, 10) |
| 8 | Sens clinique |  | 4/4 rgles OK |

> **Anomalies critiques** :
> -  **7 questions orphelines sur 12**  problme systmique majeur
> -  **K3 totalement non respect** : 0 rgle Standard sur 4 catgories
> -  **4 incohrences wording** : texte utilisateur  action IDEC
> -  **0 MT non-contributive** : pas de diagnostic/info, seulement des orientations mdicales
> -  **Doublons** : 3 paires + 1 MT mal affecte (chute)
> -  **Cross-activations critiques** non formalises (N25F3, N38/N39F5)

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories | 4 | 4 |
| Rgles | :0 :1 :3 | :_ :_ :_ |
| MT totales | 15 | ~10 (aprs fusions/retraits) |
| MT contributives | 15/15 | ~8 |
| Non-contributives | 0/15 | ~4 (ajouts) |
| Questions orphelines | 7/12 | /12 |
| Incohrences wording | 4 | /0 |
| Checks OK | 3/8 | /8 |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Crer niveaux Standard pour les 4 catgories |  |
| 2 | Crer rgles pour les 7 questions orphelines |  |
| 3 | Corriger les 4 incohrences wording |  |
| 4 | Ajouter MT ORGA/INFO (0 actuellement) |  |
| 5 | Fusionner doublons et retirer MT mal affectes |  |
| 6 | Formaliser les cross-activations critiques |  |
| 7 | Dplacer MT_V4_059 (chute) vers F6 |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,ey=`#  Fiche de Validation MP  F5  Dpendance, handicap et addictions

> **Vulnrabilit** : V4  Fragilit du Proche  
> **ASR** :  F5-A : Parcours de soin stabilis | F5-B : Droits et aides administratives en cours   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## CONTEXTE  Big Picture V4

V4 (Fragilit du Proche) couvre 6 MPs. F5 est le 5me :

| MP | Nom | Nb Q | Thme |
|---|---|---|---|
| F1 | Vie quotidienne, budget et entourage | 8 | Quotidien global, budget |
| F2 | Autonomie, aide humaine et prsence | 7 | Aide jour/nuit, mobilit |
| F3 | Mmoire, comportement et risques | 8 | Troubles cognitifs, comportements |
| F4 | Douleur, fatigue, sommeil et tat gnral | 12 | tat physique global |
| **F5** | **Dpendance, handicap et addictions** | **12** | **Hospitalisations, handicap, addictions, dpendance AGGIR** |
| F6 | Autonomie fonctionnelle, chutes et aides | 9 | Capacits motrices, aides techniques |

> F5 est le **MP mdico-administratif** de V4. Il couvre trois dimensions trs diffrentes :
> 1. **Hospitalisations rcentes** (E28-E31) : frquence, nature (programme/urgences), dure
> 2. **Handicap reconnu** (N16, N30) : origine et taux d'incapacit
> 3. **Addictions** (N37-N40) : type, contrle, impact sant, tentatives de sevrage
> 4. **Dpendance administrative** (O53, O54) : grille AGGIR, niveau GIR
>
> C'est un MP htrogne qui mlange du clinique pur (addictions) avec du mdico-administratif (AGGIR, handicap, hospitalisations). Cette htrognit est son point faible mais aussi sa richesse : il capte les situations de **poly-fragilit institutionnelle**.

>  **Particularit F5** : Beaucoup de questions conditionnelles (E29 conditionnel E28, E30/E31 conditionnel E29, N37-N40 conditionnel N3, O54 conditionnel O53). L'arbre de conditions est complexe.

>  **Cross-activation F5F4** : N38 et N39 sont mappes  F5 mais ont des rgles Critique dans F4 (V2_F4_CRIT_02 et V2_F4_CRIT_03). Les addictions impactent  la fois le comportement (F5) et l'tat somatique (F4).

>  **Bonne nouvelle** : F5 est le **premier MP de V4 avec K3 partiellement respect**  il a une rgle Standard (STD_01) ET une rgle CCC (CCC_01).

---

## QUESTIONS TRANSVERSALES

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : doublons avec F4 (addiction/sant) ou F6 (dpendance/autonomie) ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : parcours pluridisciplinaire (MT, addictologue, MDPH, services sociaux) couvert ? | Actions 1, 3 |
| T3 | **Actionnabilit** : les dmarches administratives (APA, MDPH) sont-elles  la porte de l'IDEC ? | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : 12 questions trs htrognes  combien de CAT ? | Actions 1, 2, 3 |

---

## 0. DONNES FIGES  Questions rattaches  F5

### Questions rattaches  ce MP

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E28 | Au cours des 3 derniers mois, combien de fois votre proche a-t-il t hospitalis ? | facteur |  Aucune /  1 fois /  2 fois /  3 fois /  4 fois ou plus /  Je ne sais pas |
| 2 | E29 | Parmi ces hospitalisations, combien taient programmes ? | facteur |  0 /  1 /  2 /  3 /  4+ /  Je ne sais pas _(conditionnel E28)_ |
| 3 | E30 | Parmi les non programmes, combien par les urgences ? | facteur |  0 /  1 /  2 /  3 /  4+ /  Je ne sais pas _(conditionnel E29)_ |
| 4 | E31 | Dure de la dernire hospitalisation ? | facteur |  <1 jour /  1-3 j /  4-7 j /  >7 j /  Je ne sais pas _(conditionnel E28)_ |
| 5 | N16 | Origine du handicap ? | facteur |  Naissance /  Maladie /  Accident _(conditionnel N3)_ |
| 6 | N30 | Taux d'incapacit reconnu ? | facteur |  <50% /  50-79% /  80% /  Je ne sais pas _(conditionnel N3)_ |
| 7 | N37 | Type d'addiction ? (choix multiples) | facteur |  Alcool /  Tabac /  Stupfiants /  Mdicaments /  Jeux d'argent /  Jeux vido /  Autre _(conditionnel N3)_ |
| 8 | N38 | Difficults  contrler la consommation/comportement addictif ? | etat |  Non /  Parfois /  Oui _(conditionnel N3)_ |
| 9 | N39 | Problmes de sant physique lis  l'addiction ? | etat |  Non /  Je ne sais pas /  Oui _(conditionnel N3)_ |
| 10 | N40 | Tentative de sevrage ou traitement addiction ? | facteur |  Non /  Je ne sais pas /  Oui _(conditionnel N3)_ |
| 11 | O53 | Dpendance value par les services sociaux (grille AGGIR) ? | facteur |  Oui /  Non /  Je ne sais pas |
| 12 | O54 | Niveau de dpendance AGGIR (GIR) ? | facteur |  1 /  2 /  3 /  4 /  5 /  6 /  Je ne sais pas _(conditionnel O53)_ |

> Total : **12 questions** (10 facteur, 2 etat)  
>  **Trs majoritairement facteur** (10/12)  F5 value des CIRCONSTANCES institutionnelles, pas des dgradations.

### Questions candidates exclues

| Question ID | Libell | Pertinente ? | Raisonnement |
|---|---|---|---|
| O15 | Consommation alcool/tabac |  Frontire | F4 traite O15 comme indicateur somatique. F5 traite N37 comme type d'addiction. O15 = consommation, N37 = addiction identifie. Distinction fine. |
| N25 | Ides suicidaires |  Non | F3 (comportement) / F4 (tat gnral)  pas F5 |
| O3 | Polymdication |  Non | F4 (mdication)  sauf si le handicap implique une polymdication, mais c'est un effet secondaire |

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

> Les 12 questions couvrent **3 domaines cliniques fondamentalement distincts** :
>
> 1. **Parcours hospitalier et prvention des r-hospitalisations** (E28-E31)  Comprendre la trajectoire mdicale rcente et prvenir les rechutes / passages aux urgences. Reco : lien faible avec F5_RECO_01 (addictions).
> 2. **Addictions et suivi addictologique** (N37-N40)  Identifier, valuer et orienter vers un addictologue/CSAPA. Reco F5_RECO_01.
> 3. **Dpendance administrative et droits sociaux** (O53, O54, N16, N30)  valuation AGGIR, orientation APA/MDPH/PCH. Reco F5_RECO_02.
>
> **Pourquoi 3 catgories ?** Les hospitalisations (trajectoire mdicale), les addictions (comportemental/mdical) et la dpendance administrative (droits sociaux) sont tellement distinctes qu'un professionnel diffrent intervient pour chacune. Fusionner serait cliniquement incohrent.
>
> **Pourquoi pas 4 ?** On pourrait sparer handicap (N16/N30) de la dpendance AGGIR (O53/O54). Mais les deux convergent vers les mmes droits (MDPH/APA) et les mmes acteurs (services sociaux, assistante sociale). La CAT "droits sociaux" les couvre ensemble.
>
> **Pourquoi pas 2 ?** On pourrait fusionner hospitalisations et addictions (trajectoire de soin). Mais les acteurs et les actions sont compltement diffrents : urgentiste/MT vs addictologue/CSAPA.

>  **Force de proposition** : CAT_01 (hospitalisations) n'a AUCUNE reco legacy. C'est une catgorie entire  crer. Les hospitalisations rcurrentes sont un signal fort de dstabilisation clinique  l'absence de reco est un angle mort majeur de l'hritage.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | F5_CAT_01 | Prvention des r-hospitalisations | Analyser la trajectoire hospitalire et prvenir les passages aux urgences |  Propos |
| 2 | F5_CAT_02 | Suivi addictologique | Identifier, valuer et orienter vers addictologue/CSAPA | Legacy  |
| 3 | F5_CAT_03 | Droits sociaux et valuation dpendance | Accompagner APA, MDPH, PCH, rvaluation AGGIR | Legacy  |

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

### Rgles legacy (2 existantes  K3  partiel)

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  STD | V2_F5_STD_01 | E28  2 | Activer CAT_01 + CAT_03 | 2 hospitalisations rcentes  parcours instable | Legacy  |
|  CCC | V2_F5_CCC_01 | E28  2 **ET** O53 = "Non" | Activer CAT_01 + CAT_03 | Instabilit mdicale + aucune valuation dpendance  urgence mdico-sociale | Legacy  |

>  **K3 partiellement respect** : CAT_01 et CAT_03 ont 2 niveaux (STD + CCC). C'est le premier MP de V4  avoir K3 OK sur au moins une catgorie.

### CAT_01  Prvention des r-hospitalisations

| Niveau | Rgle | Condition | Source |
|---|---|---|---|
|  STD | V2_F5_STD_01 | E28  2 | Legacy  |
|  CCC | V2_F5_CCC_01 (partiel) | E28  2 ET O53 = "Non" | Legacy  |

>  K3 OK pour CAT_01.
>  **Mais :** E29 (nb programmes), E30 (nb urgences), E31 (dure) ne sont utilises dans aucune rgle. Or un patient hospitalis 2+ fois aux URGENCES avec un sjour >7 jours est cliniquement trs diffrent de 2 hospitalisations programmes d'une journe.
>
>  **Propositions d'enrichissement** :
> - **Critique** : SI E28  3 ET E30  2  Critique | Sens : hospitalisations rptes non programmes via urgences = instabilit aigu
> - Moduler CCC : SI E28  2 ET E31 = ">7 jours"  CCC renforc | Sens : hospitalisation prolonge = dgradation significative

### CAT_02  Suivi addictologique

>  **Aucune rgle d'activation formalise dans la DB** pour les questions addiction (N37-N40). La F5_RECO_01 est rattache  V2_F5_STD_01 (hospitalisations 2), pas aux questions addiction.
>
> C'est un **angle mort critique** : un patient avec une addiction svre (N38 = "Oui") mais 0 hospitalisation ne dclenche RIEN.

>  **Propositions de rgles pour CAT_02** :
> - **STD** : SI N38 = "Parfois"  Standard | Sens : difficults de contrle mergentes
> - **CCC** : SI N38 = "Oui" OU N39 = "Oui"  CCC | Sens : perte de contrle ou dommages physiques
> - **Critique** : SI N38 = "Oui" ET N39 = "Oui"  Critique | Sens : addiction incontrle avec impact sant = urgence addictologique
>
>  **Cross-activation avec F4** : Les rgles V2_F4_CRIT_02 (N38="Oui") et V2_F4_CRIT_03 (N39="Oui") existent dj dans F4. Crer des rgles F5 propres ne serait pas un doublon car les actions sont diffrentes : F4 = bilan somatique, F5 = orientation addictologue/CSAPA.

### CAT_03  Droits sociaux et valuation dpendance

| Niveau | Rgle | Condition | Source |
|---|---|---|---|
|  STD | V2_F5_STD_01 (partiel) | E28  2 | Legacy  |
|  CCC | V2_F5_CCC_01 | E28  2 ET O53 = "Non" | Legacy  |

>  K3 OK pour CAT_03.
>  **Mais** : N16 (origine handicap), N30 (taux incapacit), O54 (GIR) ne sont dans aucune rgle. Or :
> - Un taux d'incapacit 80% (N30) est un signal fort de besoin d'accompagnement renforc.
> - Un GIR 1 ou 2 (O54) signifie une dpendance lourde ncessitant des aides massives.
> - L'absence d'valuation AGGIR (O53 = "Non") est dj en CCC mais seulement SI E28  2.

>  **Propositions d'enrichissement** :
> - **STD** : SI O53 = "Non" (sans condition E28)  Standard | Sens : proche non valu = droits potentiellement non exercs
> - **CCC** : SI N30 = "80%" OU O54  {"1","2"}  CCC | Sens : dpendance lourde ncessitant mobilisation maximale des aides
> - **STD** : SI N30 = "50-79%" OU O54  {"3","4"}  Standard | Sens : dpendance modre, vrifier adquation des aides

### Couverture des questions

> - E28 :  Via STD_01 et CCC_01
> - E29 :  **Orpheline** (programmes vs non programmes)
> - E30 :  **Orpheline** (passage urgences)
> - E31 :  **Orpheline** (dure)
> - N16 :  **Orpheline** (origine handicap  cadrage?)
> - N30 :  **Orpheline** (taux incapacit)
> - N37 :  **Orpheline** (type addiction  cadrage)
> - N38 :  **Orpheline**  devrait activer CAT_02
> - N39 :  **Orpheline**  devrait activer CAT_02
> - N40 :  **Orpheline** (tentative sevrage  cadrage)
> - O53 :  Via CCC_01 (mais uniquement si E28  2)
> - O54 :  **Orpheline** (GIR)
>
>  **10 questions orphelines sur 12**  pire score de V4. Seules E28 et O53 (en combo) ont des rgles.

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification | Priorit |
|---|---|---|---|
| 1 | Crer rgles CAT_02 : N38/N39 (STD + CCC + CRIT) | CAT entire sans rgle + 2 questions orphelines |  |
| 2 | Enrichir CAT_01 avec E30 (urgences) et E31 (dure) | Signaux cliniques importants non exploits |  |
| 3 | Enrichir CAT_03 avec N30 (taux), O54 (GIR), O53 seul | Questions de dpendance non exploites |  |
| 4 | Clarifier N16, N37, N40 comme questions de cadrage | Contextualisation sans action obligatoire |  |

> **Contrle K3** :  CAT_01 et CAT_03 OK (STD+CCC) /  CAT_02 sans aucune rgle  
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

### CAT_01  Prvention des r-hospitalisations

>  **0 MT legacy** pour CAT_01. Les rgles STD_01 et CCC_01 n'ont pas de MT ddies  la prvention hospitalire.

>  **Propositions de MT** :
> - MT ORGA : "tablir un historique des hospitalisations (motifs, dure, urgences vs programmes)"
> - MT INFO : "Informer l'aidant sur le protocole de retour  domicile post-hospitalisation"
> - MT SEC : "Organiser un RDV de liaison avec le service hospitalier pour prvenir la r-hospitalisation (HAD, SSR)"
> - MT MED : "Contacter le MT pour un bilan de sortie et un plan de suivi post-hospitalisation"

### CAT_02  Suivi addictologique

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_063 (ex MT_V2_011) | RDV avec un psychologue conventionn (recherche sur internet) | SEC | Psychologue |  | Legacy (RECO_01) |

> **1 seule MT legacy** pour toute la dimension addictions (4 questions N37-N40). Trs insuffisant.
>
>  La MT est "RDV psychologue" mais la reco dit "addictologue ou CSAPA". Incohrence acteur.

>  **Propositions de MT** :
> - Reformuler MT_V4_063  "Prendre RDV avec un addictologue ou un CSAPA du territoire"
> - MT ORGA : "valuer avec l'aidant le niveau de contrle et l'impact de l'addiction sur le quotidien"
> - MT MED : "Contacter MT pour lettre d'adressage addictologue  bilan addiction"
> - MT INFO : "Informer l'aidant des ressources addiction (CSAPA, lignes d'coute, groupes de parole)"
> - MT SEC : "Accompagner la mise en place du sevrage ou du traitement de substitution"

### CAT_03  Droits sociaux et valuation dpendance

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_064 (ex MT_V2_077) | Variable selon dpartement (demande papier ou numrique)  vrifier spcificits avant dmarches | INFO | IDEC |  | Legacy (RECO_02) |

> **1 seule MT legacy**  et elle est trs mal rdige (c'est plus un commentaire qu'une action).

>  **Propositions de MT** :
> - Reformuler MT_V4_064  "Initier la demande APA auprs du Conseil Dpartemental (vrifier format requis par dpartement)"
> - MT ORGA : "valuer si la grille AGGIR actuelle correspond au niveau de dpendance observ"
> - MT SEC : "Accompagner le dossier MDPH si handicap reconnu (N16/N30)"
> - MT INFO : "Informer l'aidant des droits ouverts par le GIR (APA, aides fiscales, services)"
> - MT SEC : "Demander une rvaluation GIR si dgradation constate depuis la dernire valuation"

###  Dcisions Action 3

| # | Proposition | Dcision |
|---|---|---|
| 1 | Crer 4 MT pour CAT_01 (inexistante) |  |
| 2 | Reformuler + toffer CAT_02 (15 MT) |  |
| 3 | Reformuler + toffer CAT_03 (15 MT) |  |

> **Condition ASR par catgorie** :
> - CAT_01 :  0   ASR **impossible**  besoin MT contributives (proposes)
> - CAT_02 :  1 (SEC)  ASR **fragile**  besoin enrichissement
> - CAT_03 :  0 (INFO seul = )   ASR **impossible**  besoin MT contributives

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

### Tableau consolid des MT de F5

| MT_ID | Libell | Type | Acteur | Domaine | / | Cat | Source |
|---|---|---|---|---|---|---|---|
| MT_V4_063 | RDV psychologue conventionn | SEC | Psychologue |  |  | CAT_02 | Legacy |
| MT_V4_064 | Dmarches APA (variable par dpartement) | INFO | IDEC |  |  | CAT_03 | Legacy |

> **Rsum** :
> - Total MT legacy : **2**  le plus bas de V4
> - 1 contributive (), 1 non-contributive ()
> - **CAT_01 entire sans MT**
>
>  **F5 est le MP le plus "vide" de V4** : 2 recos, 2 MT pour 12 questions. C'est le MP qui ncessite le plus de travail de cration.

###  Propositions acteurs supplmentaires

| Acteur propos | Justification |
|---|---|
| Addictologue / CSAPA | Acteur-cl pour N37-N40, absent du legacy |
| Assistante sociale | Pour CAT_03 (droits sociaux, MDPH, APA) |
| quipe hospitalire / HAD | Pour CAT_01 (liaison sortie hospitalisation) |

> **Dcision Dr. Monka** :  Valid |  Modifications

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base

| CAT | Reco ID | Reco Utilisateur | Reco IDEC | / |
|---|---|---|---|---|
| CAT_02 | F5_RECO_01 | Suivi comportement addictif + propre suivi si besoin | RDV MT pour prescription psychologue + lettre adressage addictologue |  |
| CAT_03 | F5_RECO_02 | Demander financement perte d'autonomie via APA | Variable selon dpartement |  |

>  **F5_RECO_01** : mlange deux actions (suivi du proche + propre suivi de l'aidant). Le suivi de l'aidant relve de V1-V3, pas V4.
>  **F5_RECO_02** : "Variable selon dpartement" n'est pas une action IDEC. C'est un commentaire.  reformuler.

### Phase 2  Versioning par criticit

#### CAT_01  Prvention des r-hospitalisations

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Votre proche a t hospitalis plusieurs fois rcemment  un suivi renforc est recommand | Organiser un bilan de sortie avec le MT et un plan de prvention r-hospitalisation |
|  CCC ( 30j) | Hospitalisations rptes sans valuation de la dpendance  agir rapidement | Contacter les services sociaux pour valuation AGGIR + organiser liaison hospitalire |

#### CAT_02  Suivi addictologique

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Un suivi de l'addiction est recommand pour votre proche | Contacter MT pour orientation addictologue |
|  CCC ( 30j) | L'addiction impacte la sant de votre proche  une prise en charge spcialise est ncessaire | Contacter MT + CSAPA pour prise en charge addictologique |
|  Critique ( 72h) | Addiction incontrle avec dommages physiques  consultation urgente | Orienter vers addictologue ou urgences + CSAPA en urgence |

#### CAT_03  Droits sociaux

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Vrifiez que la dpendance de votre proche a bien t value et les aides actives | Vrifier valuation AGGIR et droits APA/MDPH |
|  CCC ( 30j) | Votre proche n'a pas t valu par les services sociaux malgr une situation instable | Initier la demande APA + valuation AGGIR en urgence |

>  **Toutes les recos ci-dessus sont proposes** car le legacy est quasi vide pour F5.

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

| | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Prvention | Anticipez les besoins administratifs et de suivi mdical de votre proche | Vrifier priodiquement les droits ouverts et les besoins d'valuation |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V4_PREV_10 | Vrifier les droits sociaux ouverts | INFO | Contrler annuellement APA/MDPH/PCH | Vrifiez que votre proche bnficie bien de toutes les aides auxquelles il a droit |
| MT_V4_PREV_11 | Prparer un carnet de suivi hospitalier | ORGA | Documenter chaque hospitalisation | Tenez un carnet des hospitalisations (date, motif, dure) pour le suivi mdical |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Dtail |
|---|---|---|---|
| 1 | Chaque question  1 rgle |  | **10 orphelines sur 12** |
| 2 | Chaque rgle  1 reco |  | 2 rgles  2 recos |
| 3 | Chaque CAT  ses MT |  | CAT_01: 0 MT, CAT_02: 1 MT, CAT_03: 1 MT |
| 4 | K3 respect |  | CAT_01/03:  (STD+CCC), CAT_02:  (aucune) |
| 5 | Aucune MT orpheline |  | Pas de doublon (2 MT seulement) |
| 6 | Reco prvention |  Propose |  valider |
| 7 | Wording correct |  | 2 incohrences (RECO_01 + RECO_02) |
| 8 | Sens clinique |  | 2/2 rgles OK |

> **Anomalies critiques** :
> -  **10/12 questions orphelines**  pire de V4
> -  **CAT_01 entirement vide** (0 reco, 0 MT)
> -  **CAT_02 sans rgle** malgr 4 questions addiction
> -  **Seulement 2 MT** pour 12 questions
> -  **MP ncessitant le plus de cration** de tout V4

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories | 2 (propos 3) | 3 |
| Rgles | :1 :1 :0 | :_ :_ :_ |
| MT totales | 2 | ~14 (aprs crations) |
| Questions orphelines | 10/12 | /12 |
| Checks OK | 3/8 | /8 |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | Valider CAT_01 (r-hospitalisations)  entirement propose |  |
| 2 | Crer rgles CAT_02 pour addictions |  |
| 3 | Crer ~12 MT (tout est  construire) |  |
| 4 | Enrichir CAT_01 avec E29/E30/E31 |  |
| 5 | Enrichir CAT_03 avec N30/O54 |  |
| 6 | Confirmer N16/N37/N40 comme questions de cadrage |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,ny=`#  Fiche de Validation MP  F6  Autonomie fonctionnelle, chutes et aides techniques

> **Vulnrabilit** : V4  Fragilit du Proche  
> **ASR** :  F6-A : Environnement scuris et adapt | F6-B : Bilans fonctionnels  jour   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## CONTEXTE  Big Picture V4

V4 (Fragilit du Proche)  F6 est le dernier MP :

| MP | Nom | Nb Q | Thme |
|---|---|---|---|
| F1 | Vie quotidienne, budget et entourage | 8 | Quotidien global, budget |
| F2 | Autonomie, aide humaine et prsence | 7 | Aide jour/nuit, mobilit |
| F3 | Mmoire, comportement et risques | 8 | Troubles cognitifs, comportements |
| F4 | Douleur, fatigue, sommeil et tat gnral | 12 | tat physique global |
| F5 | Dpendance, handicap et addictions | 12 | Hospitalisations, handicap, addictions |
| **F6** | **Autonomie fonctionnelle, chutes et aides techniques** | **9** | **Capacits motrices, pathologies, aides matrielles, adaptation domicile, chutes** |

> F6 est le **MP d'action fonctionnelle et matrielle** de V4. L o F2 traite l'aide HUMAINE (combien d'heures, qui est prsent), F6 traite l'aide TECHNIQUE et les capacits physiques rsiduelles : le proche peut-il se lever ? Utiliser un tlphone ? A-t-il des aides matrielles ? A-t-il chut ? Quelles pathologies a-t-il ?
>
> C'est le MP le plus **orient spcialistes** de V4 : la reco F6_RECO_05 (pathologies) couvre potentiellement **14 spcialits mdicales** avec 11 MT de type "RDV spcialiste". C'est un cas unique dans tout V4.

>  **Particularit majeure F6** : **AUCUNE rgle d'activation dans la DB**. Les 7 recos ont \`activation_rule_id = null\` et \`niveau = null\`. C'est la situation la plus extrme de V4  le MP entier fonctionne sans logique d'activation.

>  **Frontire F6/F2** : F6 = capacits physiques et aides TECHNIQUES. F2 = aide HUMAINE organise. F6 = "de quoi a-t-il besoin ?". F2 = "de qui a-t-il besoin ?".

>  **Frontire F6/F4** : F6 = autonomie fonctionnelle RSIDUELLE (peut-il faire X ?). F4 = symptmes (a-t-il mal ? est-il fatigu ?). F6 est en aval de F4 : les symptmes de F4 causent la perte d'autonomie de F6.

---

## QUESTIONS TRANSVERSALES

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : doublons avec F2 (aide humaine/mobilit) ou F4 (chutes/sensoriel) ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : valuation griatrique fonctionnelle complte ? | Actions 1, 3 |
| T3 | **Actionnabilit** : orientation vers le bon spcialiste ? | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : 9 questions + 14 spcialits  combien de CAT ? | Actions 1, 2, 3 |
| T5 | **O16 (pathologies)** : question  choix multiples avec 16 sous-items  comment grer ? | Actions 2, 3 |

---

## 0. DONNES FIGES  Questions rattaches  F6

### Questions rattaches  ce MP

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E32 | Difficults  se lever d'un lit/fauteuil sans aide ? | etat |  Non /  Parfois /  Oui |
| 2 | E33 | Difficults  utiliser tlphone/appareils simples ? | etat |  Non /  Parfois /  Oui |
| 3 | N32 | Aides techniques en place ? (choix multiples) | facteur |  Aucune /  Mobilit /  Communication /  Soins personnels /  Sensorielles /  Amnagement domicile /  Technologiques /  Cognition |
| 4 | O11 | Est-elle incontinente ? | facteur |  Non /  Parfois /  Oui |
| 5 | O12 | Peut-elle se nourrir par elle-mme ? | facteur |  Oui /  Parfois /  Non |
| 6 | O16 | Pathologies (choix multiples  16 items) | facteur |  Neuro /  Psychiatriques /  Dermato /  Respi /  Gnito-urinaire /  Endocrinienne /  Cancer /  Mtabolique /  Cardio /  Musculo-squelettique /  Gastro /  Gntique /  Visuels /  Auditifs /  Aucun /  Je ne sais pas |
| 7 | O51 | Songez-vous  adapter son lieu de vie ? | facteur |  Oui /  Non |
| 8 | O6 | A-t-elle chut dans les 6 derniers mois ? | etat |  Non /  Oui sans gravit /  Oui avec complication, ou plusieurs fois |

> Total : **8 questions** (3 etat, 5 facteur)   Le contexte initial indiquait 9 questions. La 9me (O51) est partage avec F1. Vrifi : **8 questions uniques** dans F6.

>  **O16 est une question monstre** : 16 sous-items de pathologies diffrentes. C'est essentiellement une question qui en contient 16. La reco F6_RECO_05 a un \`legacy_count\` de 14, ce qui signifie 14 recos distinctes fusionnes. Chaque pathologie dclenche thoriquement un RDV spcialiste diffrent.

### Questions candidates exclues

| Question ID | Libell | Pertinente ? | Raisonnement |
|---|---|---|---|
| O8 | Aide humaine dplacement extrieur |  Non | F2  aide HUMAINE, pas aide TECHNIQUE |
| O9 | Aide humaine dplacement intrieur |  Non | F2  aide HUMAINE |
| O22 | Rsultats vue/audition |  Non | F4  bilan sensoriel (dj trait) |
| O26 | Diminution taille |  Non | F4  ostoporose |
| E25 | Confusion jour/nuit |  Non | F3  cognitif |

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Raisonnement

> Les 7 recos legacy couvrent **4 axes d'action cliniques** :
>
> 1. **Prvention et gestion des chutes** (E32, O6)  Scuriser les transferts, bilans kin/chute. Recos F6_RECO_01, F6_RECO_07.
> 2. **valuation et adaptation du domicile** (N32, O51)  Aides techniques, bilan ergo, adaptation lieu de vie. Recos F6_RECO_02, F6_RECO_06.
> 3. **Suivi spcialis des pathologies** (O16)  Orientation vers les spcialistes selon les pathologies dclares. Reco F6_RECO_05.
> 4. **Autonomie dans les actes quotidiens** (E33, O11, O12)  valuer les capacits restantes, adapter les aides (nutrition autonome, incontinence, utilisation appareils). Recos F6_RECO_03, F6_RECO_04.
>
> **Pourquoi 4 catgories ?** Parce que F6 est trs htrogne : les chutes, le domicile, les pathologies chroniques et l'autonomie quotidienne sont des axes distincts avec des acteurs diffrents (kin vs ergo vs spcialiste vs MT).
>
> **Pourquoi pas 3 ?** On pourrait fusionner chutes + domicile (scurisation physique). Mais les acteurs sont diffrents : la chute relve du kin/MT, l'adaptation domicile de l'ergothrapeute. Et les recos legacy les sparent.
>
> **Pourquoi pas 5 ?** On pourrait sparer O16 (pathologies) par type. Mais c'est irraliste : O16 est une seule question avec 16 sous-items. La catgoriser par spcialit crerait 14 sous-catgories. Mieux : 1 CAT "suivi spcialis" avec des MT adaptes  chaque pathologie coche.

>  **Force de proposition** : CAT_03 (pathologies) est un cas unique. O16 est essentiellement un **routeur de spcialistes** : selon la pathologie coche, l'IDEC prend RDV avec le spcialiste correspondant. Cette logique n'est pas une catgorie clinique classique  c'est un **mcanisme de dispatch**.  discuter si c'est mieux modlis comme une catgorie  part ou comme un ensemble de MTconditionnelles.

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | F6_CAT_01 | Prvention et gestion des chutes | Scuriser les transferts, bilans chute/kin, semelles orthopdiques | Legacy  |
| 2 | F6_CAT_02 | valuation et adaptation du domicile | Bilan ergo, aides techniques, adaptation lieu de vie | Legacy  |
| 3 | F6_CAT_03 | Suivi spcialis des pathologies | Orientation vers spcialistes selon pathologies dclares (O16) | Legacy  |
| 4 | F6_CAT_04 | Autonomie dans les actes quotidiens | Aides alimentation, incontinence, utilisation appareils, rvaluation APA | Legacy  |

> **Dcision Dr. Monka** :  Valid 4 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  AUCUNE RGLE LEGACY

> **F6 n'a AUCUNE rgle d'activation dans la DB.** Les 7 recos ont \`activation_rule_id = null\`. C'est le seul MP de V4 dans cette situation.
>
> Cela signifie que :
> - Soit les recos s'affichent toujours (pas de condition)
> - Soit elles ne s'affichent jamais (pas d'activation)
> - Soit l'activation est implicite (la rponse dclenche directement la reco)
>
> Dans tous les cas, **il faut crer des rgles de zro**.

### CAT_01  Prvention et gestion des chutes

>  **Propositions de rgles** :
>
> | Niveau | Condition SI | Sens clinique |
> |---|---|---|
> |  Standard | O6 = "Oui, mais sans gravit" OU E32 = "Parfois" | Risque de chute mergent |
> |  CCC | O6 = "Oui avec complication ou plusieurs fois" | Chutes rptes ou graves  bilan urgent |
> |  CCC | E32 = "Oui" ET O6  "Non" | Transferts impossibles + chutes  risque majeur |

### CAT_02  valuation et adaptation du domicile

>  **Propositions de rgles** :
>
> | Niveau | Condition SI | Sens clinique |
> |---|---|---|
> |  Standard | O51 = "Oui" | L'aidant envisage une adaptation  besoin d'accompagnement |
> |  Standard | N32 = "Aucune" ET (E32 = "Oui" OU O6  "Non") | Pas d'aides techniques malgr perte d'autonomie |
> |  CCC | N32 = "Aucune" ET E32 = "Oui" ET O6 = "Oui complication" | Pas d'aides + transferts impossibles + chutes graves |

### CAT_03  Suivi spcialis des pathologies

>  **Propositions de rgles** :
>
> | Niveau | Condition SI | Sens clinique |
> |---|---|---|
> |  Standard | O16  "Aucun" ET O16  "Je ne sais pas" | Au moins une pathologie dclare  suivi spcialis |
> |  CCC | O16 contient 3 pathologies diffrentes | Poly-pathologie  coordination de soins complexe |
>
>  **Particularit O16** : C'est une question  choix multiples avec 16 options. La valeur de O16 est un array. La logique de rgle doit grer des conditions sur des tableaux (contient, ne contient pas, cardinalit N).

### CAT_04  Autonomie dans les actes quotidiens

>  **Propositions de rgles** :
>
> | Niveau | Condition SI | Sens clinique |
> |---|---|---|
> |  Standard | O11 = "Parfois" OU O12 = "Parfois" OU E33 = "Parfois" | Autonomie dgrade partiellement |
> |  CCC | AU MOINS 2 parmi : O11 = "Oui", O12 = "Non", E33 = "Oui" | Autonomie svrement rduite (2 actes perdus) |
> |  Critique | O11 = "Oui" ET O12 = "Non" ET E33 = "Oui" | Autonomie totalement perdue  rvaluation urgente de la prise en charge |

### Couverture des questions

> - E32 :  (propos dans CAT_01 + CAT_02)
> - E33 :  (propos dans CAT_04)
> - N32 :  (propos dans CAT_02)
> - O6 :  (propos dans CAT_01)
> - O11 :  (propos dans CAT_04)
> - O12 :  (propos dans CAT_04)
> - O16 :  (propos dans CAT_03)
> - O51 :  (propos dans CAT_02)
>
>  **8/8 questions couvertes**  100% de couverture (toutes proposes, aucune legacy).

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification | Priorit |
|---|---|---|---|
| 1 | Crer toutes les rgles (aucune n'existe) | MP entier sans activation |  |
| 2 | K3 : chaque CAT a au moins STD + CCC | Conformit K3 systmatique |  |
| 3 | Grer le cas O16 (choix multiples  logique array) | Question unique dans le systme |  |
| 4 | Rgle Critique pour CAT_04 (autonomie totale perdue) | Signal clinique majeur de dcompensation |  |

> **Contrle K3** :  Impossible  valuer  0 rgle legacy  
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

### CAT_01  Prvention et gestion des chutes

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_065 (ex MT_V2_033) | valuer le risque de chute et la perte d'autonomie | ORGA | IDEC |  | Legacy (RECO_01) |
| MT_V4_066 (ex MT_V2_046) | valuer le risque de fugue ou de perte | ORGA | IDEC |  | Legacy (RECO_01) |
| MT_V4_067 (ex MT_V2_055) | Contacter MT pour bilan de chute et bilan kin | MED | MT |  | Legacy (RECO_07) |

> 3 MT  quilibre correct : 2 ORGA (valuation) + 1 MED (action).
>  MT_V4_066 (risque de fugue) : pertinente ici ? La fugue relve davantage de F3 (troubles cognitifs). Un patient qui fugue a un problme de dsorientation (E26, F3), pas de chute (F6).
>
>  **Propositions** :
> - Dplacer MT_V4_066 vers F3 (scurisation comportements)
> - Ajouter MT SEC : "Scuriser les transferts (barres d'appui, lit mdicalis, sige de douche)"

### CAT_02  valuation et adaptation du domicile

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_068 (ex MT_V2_066) | RDV MT pour prescription matriel mdical + bilan ergothrapeute | MED | MT |  | Legacy (RECO_02) |

> 1 seule MT  insuffisant pour une catgorie ergothrapie/adaptation.

>  **Propositions** :
> - MT SEC : "Contacter un ergothrapeute pour valuation du domicile"
> - MT ORGA : "Lister les aides techniques en place (N32) et identifier les manques"
> - MT INFO : "Informer l'aidant des aides financires pour adaptation domicile (crdit d'impt, APA, PCH)"

### CAT_03  Suivi spcialis des pathologies

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_069 (ex MT_V2_001) | RDV pneumologue | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_070 (ex MT_V2_002) | RDV ORL | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_071 (ex MT_V2_005) | RDV nphrologue | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_072 (ex MT_V2_007) | RDV cardiologue | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_073 (ex MT_V2_012) | RDV dermatologue | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_074 (ex MT_V2_015) | RDV diabtologue | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_075 (ex MT_V2_018) | RDV cancrologue | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_076 (ex MT_V2_019) | RDV neurologue | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_077 (ex MT_V2_021) | RDV rhumatologue | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_078 (ex MT_V2_023) | RDV endocrinologue | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_079 (ex MT_V2_026) | RDV urologue | SEC | IDEC |  | Legacy (RECO_05) |
| MT_V4_080 (ex MT_V2_029) | RDV gastro-entrologue | SEC | IDEC |  | Legacy (RECO_05) |

> **12 MT  toutes identiques** sauf le nom du spcialiste. Toutes SEC, toutes IDEC, toutes "Recherche sur internet".
>
>  **Design observation** : Ces 12 MT ne sont pas des MT classiques. C'est un **mcanisme de dispatch conditionnel** : si le patient a coch "Cancer" dans O16, la MT correspondante = "RDV cancrologue". La MT est dtermine par la rponse, pas par la rgle.
>
> C'est un cas unique dans le systme Monka. Deux options d'implmentation :
> 1. **12 MT distinctes** avec activation conditionnelle sur la valeur O16  lourd mais explicite
> 2. **1 MT paramtrique** : "Prendre RDV avec le spcialiste correspondant  la pathologie identifie"  plus lgant mais perd la granularit
>
>  **Recommandation** : Option 2 (1 MT paramtrique) + liste de mapping {pathologie  spcialiste} en annexe.
> - Avantage : simplifie la structure, vite 12 MT quasi identiques
> - Inconvnient : le moteur doit rsoudre le mapping  l'excution

>  **Spcialistes manquants vs O16** :
> Pathologies O16 sans MT : gntique (mucoviscidose, trisomie), visuels svres, auditifs svres.
> MT sans correspondance O16 directe : nphrologue (pas dans O16).

### CAT_04  Autonomie dans les actes quotidiens

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_081 (ex MT_V2_060) | Contacter MT pour lettre adressage urologue + prescription kin (rducation) | MED | MT |  | Legacy (RECO_03) |
| MT_V4_082 (ex MT_V2_071) | RDV nutritionniste pour bilan nutritionnel | MED | MT |  | Legacy (RECO_03) |
| MT_V4_083 (ex MT_V2_048) | Contacter MT pour rvaluation APA + lettre adressage bilan griatre complet | MED | MT |  | Legacy (RECO_04) |

> 3 MT  toutes MED (). Pas d'ORGA ni d'INFO.
>
>  **Observations** :
> - MT_V4_081 (urologue + kin)  pour incontinence (O11). Le lien est cliniquement correct.
> - MT_V4_082 (nutritionniste)  pour alimentation (O12). Correct.
> - MT_V4_083 (APA + griatre)  pour autonomie globale. Correct.
> - **Manque** : rien pour E33 (utilisation appareils). Ni ORGA (valuer la difficult), ni INFO (former).

>  **Propositions** :
> - Ajouter MT ORGA : "valuer les capacits restantes pour les gestes quotidiens (manger, tlphone, transferts)"
> - Ajouter MT INFO : "Former l'aidant aux aides  l'alimentation et aux gestes de scurit"

###  Dcisions Action 3

| # | Proposition | Dcision |
|---|---|---|
| 1 | Dplacer MT_V4_066 (fugue) vers F3 |  |
| 2 | Remplacer 12 MT spcialistes par 1 MT paramtrique + mapping |  |
| 3 | toffer CAT_02 (14 MT) |  |
| 4 | Ajouter MT pour E33 (appareils) dans CAT_04 |  |

> **Condition ASR par catgorie** :
> - CAT_01 :  1 (MED)  ASR **fragile**
> - CAT_02 :  1 (MED)  ASR **fragile**
> - CAT_03 :  12 (SEC)  ASR **possible** (mais design  revoir)
> - CAT_04 :  3 (MED3)  ASR **possible**

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

### Tableau consolid des MT de F6

| MT_ID | Libell | Type | Acteur | Domaine | / | Cat | Source |
|---|---|---|---|---|---|---|---|
| MT_V4_065 | valuer risque chute | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_066 | valuer risque fugue (  F3?) | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_067 | Bilan chute + kin | MED | MT |  |  | CAT_01 | Legacy |
| MT_V4_068 | Prescription matriel + ergo | MED | MT |  |  | CAT_02 | Legacy |
| MT_V4_069-080 | RDV spcialistes 12 | SEC | IDEC |  |  | CAT_03 | Legacy |
| MT_V4_081 | Urologue + kin rducation | MED | MT |  |  | CAT_04 | Legacy |
| MT_V4_082 | RDV nutritionniste | MED | MT |  |  | CAT_04 | Legacy |
| MT_V4_083 | Rvaluation APA + griatre | MED | MT |  |  | CAT_04 | Legacy |

> **Rsum** :
> - Total MT : 18 (dont 12 = dispatch spcialistes)
> - Contributives () : 16 / Non-contributives () : 2
> - Mix types : SEC (12), MED (5), ORGA (2), INFO (0), STRUC (0)
> -  **87% des MT sont des "prises de RDV"**  F6 est un MP d'orientation, pas de diagnostic

###  Propositions acteurs supplmentaires

| Acteur propos | Justification |
|---|---|
| Ergothrapeute | Acteur-cl pour CAT_02 (adaptation domicile), prsent dans RECO_02/06 mais pas dans les MT legacy |
| Kinsithrapeute | Cit dans RECO_01/07 mais absent des acteurs MT |
| Orthophoniste | Cit dans RECO_04 (troubles dglutition) mais absent des MT |

> **Dcision Dr. Monka** :  Valid |  Modifications

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base

| CAT | Reco ID | Reco Utilisateur | Reco IDEC | / |
|---|---|---|---|---|
| CAT_01 | F6_RECO_01 | Prvenir le risque de chute et scuriser les transferts | Identifier les situations  risque |  |
| CAT_01 | F6_RECO_07 | Bilan de chute + bilan kin (semelles si besoin) | Contacter MT pour bilan chute |  |
| CAT_02 | F6_RECO_02 | Prescription matriel mdical + bilan ergo | RDV MT pour prescriptions |  |
| CAT_02 | F6_RECO_06 | Bilan + aides techniques vie quotidienne | Contact ergo du territoire |  |
| CAT_03 | F6_RECO_05 | Suivi rgulier selon prconisations | Prendre RDV avec le spcialiste |  |
| CAT_04 | F6_RECO_03 | Bilan + plan nutritionnel | MT pour urologue + kin |  |
| CAT_04 | F6_RECO_04 | APA + rvaluation + courrier griatre/orthophoniste | MT pour rvaluation APA + griatre |  |

>  **F6_RECO_05** : "Un suivi rgulier est  prvoir" est trop gnrique. Ne dit pas quel suivi, quel spcialiste, quelle frquence.
>  **F6_RECO_03** : Texte = "bilan nutritionnel", action IDEC = "urologue + kin". Incohrence complte  texte et action ne correspondent pas.
>  **F6_RECO_04** : Texte mentionne orthophoniste (troubles dglutition) mais l'action IDEC ne le fait pas.

### Phase 2  Versioning par criticit

#### CAT_01  Prvention des chutes

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Un risque de chute a t identifi  un bilan prventif est recommand | valuer le risque et contacter MT pour bilan chute |
|  CCC ( 30j) | Votre proche a chut avec des complications  un bilan urgent est ncessaire | Organiser bilan chute complet + kin + scurisation transferts |

#### CAT_02  Adaptation du domicile

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | L'adaptation du lieu de vie de votre proche peut amliorer sa scurit | Contacter un ergothrapeute pour valuation domicile |
|  CCC ( 30j) | Le domicile n'est pas scuris malgr une perte d'autonomie avre | Prescription matriel mdical + bilan ergo en urgence |

#### CAT_03  Suivi spcialis

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Veillez  ce que votre proche suive rgulirement les spcialistes pour ses pathologies | Prendre RDV avec le(s) spcialiste(s) correspondant(s) |
|  CCC ( 30j) | Votre proche a de multiples pathologies  une coordination de soins est ncessaire | Organiser un parcours coordonn avec les spcialistes concerns |

#### CAT_04  Autonomie quotidienne

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Certaines capacits de votre proche se dgradent  un bilan fonctionnel est recommand | valuer les capacits restantes et adapter les aides |
|  CCC ( 30j) | Votre proche a perdu plusieurs capacits quotidiennes  rvaluation urgente | Rvaluation APA + bilan griatrique + orientation spcialise |
|  Critique ( 72h) | Votre proche ne peut plus manger, se dplacer ni utiliser d'appareils  rorganisation immdiate | Contact MT urgence pour valuation complte + alerte services sociaux |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

| | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Prvention | Anticipez les besoins d'adaptation du domicile et de suivi mdical | Maintenir  jour les RDV spcialistes et valuer priodiquement l'autonomie |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V4_PREV_12 | Surveillance de l'autonomie fonctionnelle | ORGA | Point trimestriel sur les capacits (transferts, alimentation, appareils) | Observez si votre proche a plus de mal  se lever, manger ou utiliser son tlphone |
| MT_V4_PREV_13 | Rappel suivi spcialistes | INFO | Vrifier annuellement que les RDV spcialistes sont  jour | Pensez  vrifier que votre proche a bien ses RDV de suivi mdical |
| MT_V4_PREV_14 | valuation environnement domicile | ORGA | Audit annuel scurit domicile (tapis, clairage, barres) | Vrifiez que le domicile de votre proche reste scuris (sol, luminosit, barres) |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Dtail |
|---|---|---|---|
| 1 | Chaque question  1 rgle |    | **0 rgle legacy**  toutes proposes |
| 2 | Chaque rgle  1 reco |  | 7 recos legacy (pas lies aux rgles) |
| 3 | Chaque CAT  ses MT |  | CAT_01: 3, CAT_02: 1, CAT_03: 12, CAT_04: 3 |
| 4 | K3 respect |    | 0 legacy, toutes rgles proposes |
| 5 | Aucune MT orpheline |  | MT_V4_066 (fugue) mal place |
| 6 | Reco prvention |  Propose |  valider |
| 7 | Wording correct |  | 1 incohrence majeure (RECO_03), 2 wordings vagues |
| 8 | Sens clinique |  | Pas de rgles legacy = pas de sens clinique  valuer |

> **Anomalies critiques** :
> -  **0 rgle d'activation**  MP entier sans logique de dclenchement
> -  **F6_RECO_03** : incohrence texte/action
> -  **12 MT de dispatch spcialistes**  architecture  repenser (MT paramtrique ?)
> -  **MT fugue** (MT_V4_066) mal affecte  F3
> -  **CAT_02 trop maigre** (1 MT pour adaptation domicile)

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories | 4 (propos) | 4 |
| Rgles | :0 :0 :0 | :_ :_ :_ |
| MT totales | 18 (dont 12 dispatch) | ~10-12 (si MT paramtrique) |
| Questions couvertes | 0/8 (legacy)  8/8 (propos) | /8 |
| Checks OK | 2/8 | /8 |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | **Crer TOUTES les rgles** (0 legacy) |  |
| 2 | Dcider : 12 MT spcialistes ou 1 MT paramtrique ? |  |
| 3 | Corriger incohrence F6_RECO_03 |  |
| 4 | toffer CAT_02 (domicile : 14 MT) |  |
| 5 | Dplacer MT_V4_066 (fugue) vers F3 |  |
| 6 | Ajouter acteurs ergo/kin/orthophoniste |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,ty=`#  Fiche de Validation MP  M1  Comprhension du diagnostic et de la maladie

> **Vulnrabilit** : V5  Parcours Mdical  
> **ASR** :  M1-A : Diagnostic clarifi et compris par l'aidant | M1-B : Parcours de soins lisible et stable   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## BIG PICTURE  V5 entire (6 MPs, ~35 questions)

| MP | Sous-bloc | Nb Q | Questions | Thmatique |
|---|---|---|---|---|
| **M1** | 6.1  Diagnostic | **7** | E34, E35, E36, E37, E38, N17, N41 | Comprhension maladie, errance diagnostique, transition enfant/adulte, ALD |
| M2 | 6.2  Accs soins | 9 | E39, E40, E41, O17, O18, O19, O20, O21, O24 | Proximit, difficults accs, ETP, spcialistes, bilans |
| M3 | 6.3  Urgences/hospit | 4 | E42, E43, E44, E46 | RDV imprvus, ruptures suivi, bilan synthse, suivi post-hospit |
| M4 | 6.4  Addictions/psy | 5 | E45, E46, E47, E48, E49, E50, E51 | Suivi addictologie, plan de crise, suivi psy, observance |
| M5 | 6.5  Coordination | 4 | E52, E53, E55, O59 | Rfrent coordonnateur, intervenants domicile |
| M6 | 6.6  Vision globale | 5 | E54, E56, E57, E58, E59, E60 | Organisation soins, inquitudes, plan de route, bilans spcialiss |

>  **Note** : E46 est mappe  la fois M3 ET M4 (cross-MP). Ces partages inter-MP sont normaux  les questions sont figes, seule l'activation diffre.

M1 est le **MP fondateur** de V5. Il pose la question de base : l'aidant comprend-il la maladie de son proche ? Le diagnostic est-il clair ? Y a-t-il eu errance mdicale ? C'est le socle sur lequel reposent tous les autres MPs de V5  si le diagnostic n'est pas clair, aucune coordination (M5), aucun suivi (M3), aucun accs aux soins (M2) ne peut fonctionner correctement.

>  **Particularit M1** : Premier MP de V5  tre **K3-conforme** (STD + CCC sur au moins CAT_01). C'est aussi le seul MP de V5  contenir N17 (type de handicap) et N41 (ALD), deux questions **conditionnelles** importantes.

>  **Frontire M1/M2** : M1 = "comprend-on la maladie ?" (diagnostic). M2 = "accde-t-on aux soins ?" (logistique). E34/E35 = comprhension  M1. E39/E40 = accs  M2. Pas de chevauchement.

>  **Frontire M1/M6** : M1 = diagnostic initial clarifi. M6 = vision globale du parcours. E57 (plan de route) et E58 (bilans spcialiss) sont en M6 car ils portent sur le suivi  long terme, pas sur la comprhension initiale.

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

> Ces questions traversent toutes les actions. Y revenir rgulirement.

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : est-ce que les MT/recos de ce MP risquent de doublonner avec un autre MP de la mme vulnrabilit ? Ou d'une autre vulnrabilit ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : est-ce qu'on couvre le minimum vital pour un patient dans cette situation ? Un professionnel pourrait-il dire "il manque quelque chose" ? | Actions 1, 3 |
| T3 | **Actionnabilit** : est-ce que chaque lment produit (reco, MT, wording) est concrtement excutable par l'acteur dsign ? Pas de formulation floue. | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : est-ce que le nombre d'lments (catgories, rgles, MT) est proportionnel  la complexit clinique du MP ? Ni trop, ni pas assez. | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : pour chaque MT, l'aidant pourrait-il la raliser seul ? Si oui, l'acteur devrait peut-tre tre \`Aidant (autonome)\`. | Actions 3, 4 |
| T6 | **Chane d'action** : dans chaque catgorie, les MT forment-elles une squence logique (diagnostiquer  informer  structurer  scuriser) ? | Actions 3, 4 |

---

## 0. DONNES FIGES  Questions rattaches  M1

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E34 | Comprenez-vous bien la maladie, l'tat de sant et les besoins mdicaux de votre proche ? | tat | Oui  Partiellement  Pas du tout |
| 2 | E35 | Avez-vous l'impression que le diagnostic de votre proche est clair et bien tabli aujourd'hui ? | tat | Oui, le diagnostic est clair  On m'a voqu plusieurs hypothses, mais rien de vraiment tranch  Non, personne ne nous a vraiment donn de diagnostic  Je ne sais pas |
| 3 | E36 | Depuis le dbut des problmes de sant de votre proche, avez-vous le sentiment d'avoir consult beaucoup de professionnels ou fait beaucoup d'examens sans que la situation soit vraiment clarifie ? | tat | Non, pas particulirement  Oui, un peu  Oui, beaucoup (impression de tourner en rond) |
| 4 | E37 | Avez-vous dj reu des avis mdicaux contradictoires sur la situation de votre proche (diagnostic ou traitement) ? | tat | Non  Oui, parfois  Oui, souvent |
| 5 | E38 | Si votre proche est pass ou va passer de services 'enfant'  des services 'adulte' (pdopsychiatrie  psychiatrie adulte, pdiatrie  mdecine adulte), ce passage a-t-il t prpar et organis ? | Facteur | Oui, bien prpar  Un peu, mais cela reste flou  Non, pas du tout  Pas concern |
| 6 | N17 | Quel est son type de handicap ? (plusieurs rponses possibles) | Facteur | Handicap cognitif  Handicap psychique  Handicap visuel  Handicap auditif  Handicap intellectuel  Handicap moteur  Traumatisme cranien  Autisme ou autres TED  Troubles majeurs du comportement  Maladie invalidante |
| 7 | N41 | Bnficie-t-elle d'une reconnaissance officielle d'une maladie chronique (ALD) auprs de l'Assurance Maladie ? | Facteur | Oui  Non  Je ne sais pas |

> Total : **7 questions** rattaches  M1

>  **E38 est conditionnelle** : N3 rponse 2,3,4,5 ET O1 rponse 1 (= proche est un enfant). Ne s'affiche pas pour tous les aidants.
>  **N17 est conditionnelle** : N3 rponse 2 (= handicap). 
>  **N41 est universelle** : pas de condition, s'affiche pour tous.

### Questions candidates exclues

> Pour CHAQUE question de V5 non rattache  M1 : analyse de pertinence.

| Question ID | Libell | Pertinente pour M1 ? | Raisonnement |
|---|---|---|---|
| E39 | Premier professionnel de sant  moins de 15 min ? |  Non | Accs gographique  M2 |
| E40 | Difficults pour accder aux soins ? |  Non | Logistique accs  M2 |
| E41 | Programme ETP dj ralis ? |  Non | ducation thrapeutique  M2, pas comprhension diagnostic |
| O17 | A-t-elle un mdecin traitant ? |  Non | Structure de suivi  M2 |
| O18/O19 | Spcialistes qui la suivent ? Lesquels ? |  Non | Cartographie intervenants  M2 |
| O20/O21 | RDV mdicaux raliss cette anne ? Lesquels ? |  Non | Historique de suivi  M2 |
| O24 | Difficults  prendre RDV spcialistes ? |  Non | Accs logistique  M2 |
| E42 | RDV non prvus ce mois-ci ? |  Non | Urgences  M3 |
| E43 | Priodes sans suivi mdical ? |  Non | Ruptures  M3 |
| E44 | Bilan de synthse dj ralis ? |  Potentiel | Un bilan de synthse CLARIFIE le diagnostic. Mais cliniquement, c'est un acte de coordination (M3), pas de comprhension initiale. **Garder en M3.** |
| E46 | Suivi post-hospitalisation organis ? |  Non | Coordination post-hospit  M3/M4 |
| E45 | Suivi addictologie ? |  Non | Addictions  M4 |
| E47 | Plan clair en cas de dgradation ? |  Non | Gestion de crise  M4 |
| E48-E51 | Suivi psy/addictions/observance |  Non | Suivi spcialis  M4 |
| E52/E53/E55 | Coordinateur identifi ? Rfrent ? |  Non | Coordination  M5 |
| O59 | Professionnels au domicile ? |  Non | Intervenants domicile  M5 |
| E54/E56/E57/E58/E59/E60 | Organisation soins, inquitudes, bilans |  Non | Vision globale  M6 |

>  **Seule E44** a un potentiel M1, mais le bilan de synthse est un ACTE (coordination), pas une comprhension. Dcision : rester en M3.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

> **Objectif** : Identifier les types d'actions DIFFRENTES que ce MP peut proposer.  
> **Mthode** : Ignorer la criticit. Se demander : "Quelles grandes actions cliniques distinctes pour ce MP ?"  
> **Source** : Jugement clinique + recos legacy existantes

###  Questions  se poser  Action 1

| # | Question | Rponse |
|---|---|---|
| 1.1 | Les catgories couvrent-elles des dimensions cliniques **rellement distinctes** ? |  Oui  comprhension maladie, clarification parcours, transition enfant/adulte = 3 axes distincts |
| 1.2 | Y a-t-il une action clinique vidente que **aucune catgorie** ne couvre ? |  La question ALD (N41) n'a pas de catgorie ddie. Proposition : l'intgrer dans CAT_01 comme action administrative lie au diagnostic. |
| 1.3 | Faut-il **fusionner** deux catgories proches ? | Non. La transition enfant/adulte (CAT_03) est spcifique aux jeunes, pas fusionnable avec la comprhension gnrale. |
| 1.4 | Faut-il **clater** une catgorie trop large en deux ? | Non. Le nombre est proportionnel. |
| 1.5 | Combien de catgories est raisonnable pour ce MP ? | 3 catgories pour 7 questions = proportionnel (T4 OK) |

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | M1_CAT_01 | Comprhension du diagnostic | Clarifier la maladie, ses implications, et la reconnaissance ALD |  IA (regroupement E34, E35, N41) |
| 2 | M1_CAT_02 | Errance diagnostique et cohrence mdicale | Lutter contre l'errance (trop d'examens, avis contradictoires) | Legacy  (E36, E37 utilises dans les rgles) |
| 3 | M1_CAT_03 | Transition enfant-adulte | Scuriser le passage entre services pdiatriques et adultes | Legacy  (E38, N17 contextuels) |

###  Raisonnement

> **Pourquoi 3 catgories et pas 2 ?** CAT_03 (transition) est conditionnelle (ne concerne que les proches jeunes via E38). Si on la fusionne avec CAT_01, on perd la spcificit de la cible. De plus, les MTs legacy pour E38 sont distinctes (coordination entre services).
>
> **Pourquoi pas 4 ?** N41 (ALD) n'est pas assez riche pour une catgorie ddie (1 seule question, 1 seule MT). L'intgrer dans CAT_01 comme action complmentaire  la comprhension du diagnostic est cliniquement pertinent : l'ALD est une consquence administrative de la clarification du diagnostic.
>
> **N17 (type de handicap)** est une question de contexte pur  elle ne gnre pas d'action spcifique en M1, mais enrichit le profil du proche. Elle est utilise implicitement dans CAT_01 et CAT_03 pour adapter les recos.

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

> **Objectif** : Pour chaque catgorie, quelles Q/A la dclenchent et  quel niveau ?  
> **Rgle K3** : S'applique  L'INTRIEUR de chaque catgorie (pas entre catgories)  
> **Format obligatoire** : Afficher la question en texte complet avec toutes ses options. Mettre en **gras** la rponse dclenchante.

###  Questions  se poser  Action 2

| # | Question | Rponse |
|---|---|---|
| 2.1 | Chaque question du MP  1 rgle ? |  Non  E34, E35, N17, N41 sont orphelines (4/7). Seulement E36, E37, E38 sont dans des rgles. |
| 2.2 | Chaque combo cliniquement significatif a une rgle ? |  Non  E34 = "Pas du tout" (ne comprend RIEN) n'a aucune rgle. C'est critique. |
| 2.3 | Niveaux cliniquement justifis ? |  STD = signal isol, CCC = cumul de signaux  logique |
| 2.4 | Combos multi-questions pour niveau suprieur ? |  CCC_01 = E36 + E37, CCC_02 = E38 + E36 |
| 2.5 | Rponses extrmes non exploites ? |  E34 "Pas du tout" + E35 "Non, personne ne nous a donn de diagnostic" = combo extrme sans rgle |
| 2.6 | 2 niveaux par catgorie ? |  CAT_02 (STD + CCC).  CAT_01 et CAT_03 = 0 niveau legacy |
| 2.7 | Une rgle active plusieurs catgories ? | Non |

### Catgorie 1  Comprhension du diagnostic

>  **0 rgle legacy** sur cette catgorie.  
> E34 et E35 ne sont dans AUCUNE rgle d'activation. N41 non plus.  
> **C'est un angle mort majeur** : l'aidant peut ne RIEN comprendre  la maladie et le moteur ne ragit pas.

**Rgles PROPOSES :**

> **E34** :  Comprenez-vous bien la maladie, l'tat de sant et les besoins mdicaux de votre proche ? 
> Options :  Oui /  **Partiellement** /  **Pas du tout**

> **E35** :  Avez-vous l'impression que le diagnostic de votre proche est clair et bien tabli aujourd'hui ? 
> Options :  Oui, le diagnostic est clair /  **On m'a voqu plusieurs hypothses, mais rien de vraiment tranch** /  **Non, personne ne nous a vraiment donn de diagnostic** /  **Je ne sais pas**

> **N41** :  Bnficie-t-elle d'une reconnaissance officielle d'une maladie chronique (ALD) ? 
> Options :  Oui /  **Non** /  **Je ne sais pas**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M1_STD_P01 | E34 = "Partiellement" | Activer CAT_01 | Comprhension partielle  besoin d'information complmentaire |  Propos |
|  Standard | V4_M1_STD_P02 | N41  {"Non", "Je ne sais pas"} | Activer CAT_01 | Pas d'ALD  vrifier ligibilit (impact financier majeur) |  Propos |
|  CCC | V4_M1_CCC_P01 | E34 = "Pas du tout" **OU** E35  {"Non, personne ne nous a donn de diagnostic", "Je ne sais pas"} | Activer CAT_01 | Incomprhension totale ou diagnostic inexistant  intervention prioritaire |  Propos |
|  Critique | V4_M1_CRIT_P01 | E34 = "Pas du tout" **ET** E35 = "Non, personne ne nous a donn de diagnostic" | Activer CAT_01 | Aucune comprhension ET aucun diagnostic  situation d'errance totale, risque de dcompensation par manque d'accompagnement |  Propos |

> **K3 CAT_01** :  4 niveaux proposs (STD + CCC + CRIT)  K3 conforme si valid.

### Catgorie 2  Errance diagnostique et cohrence mdicale

> **E36** :  Depuis le dbut des problmes de sant de votre proche, avez-vous le sentiment d'avoir consult beaucoup de professionnels ou fait beaucoup d'examens sans que la situation soit vraiment clarifie ? 
> Options :  Non, pas particulirement /  **Oui, un peu** /  **Oui, beaucoup (impression de tourner en rond)**

> **E37** :  Avez-vous dj reu des avis mdicaux contradictoires sur la situation de votre proche (diagnostic ou traitement) ? 
> Options :  Non /  Oui, parfois /  **Oui, souvent**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M1_STD_01 | E36 = "Oui, beaucoup" | Activer CAT_02 | Examens nombreux sans clarification  errance diagnostique | Legacy  |
|  Standard | V4_M1_STD_02 | E37 = "Oui, souvent" | Activer CAT_02 | Avis mdicaux contradictoires frquents | Legacy  |
|  CCC | V4_M1_CCC_01 | E36 = "Oui, beaucoup" **ET** E37 = "Oui, souvent" | Activer CAT_02 | Parcours sans diagnostic stabilis + perte de repres (double signal) | Legacy  |

> **K3 CAT_02** :  2 niveaux (STD + CCC)  K3 conforme.

>  **Proposition** : Ajouter une rgle CCC ou Critique pour E36 = "Oui, beaucoup" **ET** E34 = "Pas du tout" (errance + incomprhension totale = croiser M1_CAT_01 et M1_CAT_02). Cela activerait CAT_01 + CAT_02 simultanment.

### Catgorie 3  Transition enfant-adulte

> **E38** :  Si votre proche est pass ou va passer de services 'enfant'  des services 'adulte' (pdopsychiatrie  psychiatrie adulte, pdiatrie  mdecine adulte), ce passage a-t-il t prpar et organis ? 
> Options :  Oui, bien prpar /  **Un peu, mais cela reste flou** /  **Non, pas du tout** /  Pas concern

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC | V4_M1_CCC_02 | E38 = "Non, pas du tout" **ET** E36  {"Oui, un peu", "Oui, beaucoup"} | Activer CAT_03 | Passage enfant/adulte mal prpar + errance mdicale | Legacy  |

>  **K3 CAT_03** :  1 seul niveau (CCC). Pas de Standard.

>  **Proposition K3 CAT_03** :
> |  Standard | V4_M1_STD_P03 | E38 = "Un peu, mais cela reste flou" | Activer CAT_03 | Transition engage mais mal structure  besoin d'accompagnement |  Propos |

###  Raisonnement

> **Legacy** : 4 rgles (2 STD + 2 CCC) sur 2 questions seulement (E36, E37). Bonne qualit sur CAT_02 (errance), mais angle mort total sur CAT_01 (comprhension) et quasi-vide sur CAT_03 (transition).
>
> **Propositions** : 5 nouvelles rgles pour combler les lacunes :
> - CAT_01 : 4 rgles proposes (STD 2, CCC 1, CRIT 1)  couvre E34, E35, N41
> - CAT_03 : 1 rgle Standard propose  couvre E38 isol (cas flou sans errance)
>
> **Si DR. Monka valide** : M1 passe de 4 rgles  9, de 2 questions actives  5 actives, et K3 passe de 1/3 conforme  3/3 conforme.

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification |
|---|---|---|
| 1 | Crer STD_P01 (E34 = Partiellement) | Comprhension partielle ncessite un complment d'info  signal faible mais actionnable |
| 2 | Crer STD_P02 (N41  Non/NSP) | Pas d'ALD = charge financire potentielle, vrification ligibilit ncessaire |
| 3 | Crer CCC_P01 (E34 = Pas du tout OU E35 = Non/NSP) | Incomprhension totale ou absence de diagnostic  intervention IDEC ncessaire |
| 4 | Crer CRIT_P01 (E34 = Pas du tout ET E35 = Non) | Double signal extrme : aucun diagnostic + aucune comprhension = errance totale |
| 5 | Crer STD_P03 (E38 = Flou) | Transition flou sans errance mdicale = Standard, pas CCC |

> **Contrle K3** :  Vrifi  CAT_01  (STD+CCC+CRIT), CAT_02  (STD+CCC), CAT_03  si STD_P03 valid  
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

> **Objectif** : Quelles MT concrtes pour chaque catgorie ?  
> **Principe** : Les MT sont rattaches  la catgorie, PAS au niveau de criticit. Le niveau change le wording, pas les tches.

###  Questions  se poser  Action 3

| # | Question | Rponse |
|---|---|---|
| 3.1 | Chane complte ? |  ORGA  INFO  SEC  MED couvert dans les MT legacy |
| 3.2 | MT d'autres CAT/MP  rcuprer ? | Non, les MT de M2 sont distinctes (accs vs comprhension) |
| 3.3 | MT mal affectes ? |  MT_V4_050 ("Noter que la situation n'est pas concerne" pour E38 = "Pas concern")  pas une vraie MT, c'est un flag.  convertir en logique moteur. |
| 3.4 | Pourquoi pas 1 de plus ? | Voir analyse par CAT |
| 3.5 | Pourquoi pas 1 de moins ? | Voir analyse par CAT |
| 3.6 | 1 MT contributive par CAT ? |  CAT_02 : SEC + MED.  CAT_01 :  vrifier (recos sans MT spcifiques).  CAT_03 : SEC + STRUC |
| 3.7 | Mix quilibr ? |  Beaucoup d'ORGA, peu de MED directs |

### CAT_01  Comprhension du diagnostic

>  **Aucune MT legacy explicitement rattache  CAT_01** (car aucune reco legacy n'est sur E34/E35). Les MT de M1_RECO_01 et M1_RECO_02 traitent de la comprhension mais sont rattaches aux recos lies  V4_M1_STD_02 (E37).

**MT existantes raffectes  CAT_01 :**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_023 | Identifier les points incompris ou sources de doute | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_074 | Proposer un temps d'change ddi | SEC | IDEC |  | Legacy  |
| MT_V4_003 | Identifier les zones d'incertitude exprimes par l'aidant | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_034 | Valoriser la comprhension de l'aidant | ORGA | IDEC |  | Legacy  |
| MT_V4_064 | Proposer un temps d'change pour faire le point | SEC | IDEC |  | Legacy  |
| MT_V4_124 | Proposer une consultation mdicale explicative | MED | Professionnel de sant |  | Legacy  |
| MT_V4_131 | Contacter le mdecin traitant pour dossier ALD (100%) | MED | Mdecin traitant |  | Legacy  |

####  Pourquoi 7 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- MT_V4_131 (ALD) : si on l'enlve, on perd le levier financier. L'ALD = prise en charge 100% des soins. Impact concret majeur.
- MT_V4_124 (consultation explicative) : si on l'enlve, on reste dans l'change IDEC. Or, seul un mdecin peut VRAIMENT expliquer le diagnostic.

**Pourquoi pas 1 de plus ?**
-  **MT propose** : "Fournir un document explicatif vulgaris sur la pathologie" (type INFO). Actuellement, on change et on propose des RDV, mais on ne donne pas de support crit. Un document adapt au profil N17 serait un vrai plus.

### CAT_02  Errance diagnostique et cohrence mdicale

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_028 | Confirmer que le parcours de soins est peru comme clair | ORGA | IDEC |  | Legacy  |
| MT_V4_051 | Identifier les zones d'incomprhension du parcours mdical | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_009 | Identifier les points de divergence perus par l'aidant | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_032 | Confirmer la bonne comprhension du diagnostic par l'aidant | ORGA | IDEC |  | Legacy  |
| MT_V4_045 | Confirmer l'absence de contradiction perue | ORGA | IDEC |  | Legacy  |

####  Pourquoi 5 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- MT_V4_009 et MT_V4_051 semblent proches (identifier divergences / identifier incomprhensions). Mais cliniquement : divergence = "les mdecins ne sont pas d'accord", incomprhension = "je ne comprends pas ce qu'ils disent". Ce sont deux diagnostics diffrents.

**Pourquoi pas 1 de plus ?**
-  **Aucune MT contributive** dans CAT_02 ! 5 MT dont 5 sont ORGA (). Pas de SEC, pas de MED.
-  **Proposition** : Ajouter une MT SEC "Organiser une runion de coordination entre les professionnels ayant mis des avis divergents" (acteur IDEC). + une MT MED "Demander un second avis mdical auprs d'un centre de rfrence" (acteur Mdecin spcialiste).

>  **CAT_02 n'a 0 MT contributive ()  ASR impossible en l'tat.** C'est un problme majeur. Les 5 MT ORGA ne font que "diagnostiquer" le problme sans le rsoudre.

### CAT_03  Transition enfant-adulte

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_050 | Noter que la situation n'est pas concerne | ORGA | IDEC |  | Legacy  |
| MT_V4_054 | Proposer une coordination entre les services | SEC | IDEC |  | Legacy  |
| MT_V4_135 | Identifier les zones d'incertitude de la transition | STRUC | IDEC |  | Legacy  |

####  Pourquoi 3 MT  ni plus, ni moins ?

**Pourquoi pas 1 de moins ?**
- MT_V4_050 ("noter pas concern") n'est pas une vraie MT. C'est un flag moteur. **Proposition : la retirer et la traiter comme logique moteur (E38 = "Pas concern"  ne pas activer CAT_03).**

**Pourquoi pas 1 de plus ?**
-  **MT propose** : "Identifier les rfrents enfants et adultes pour assurer le relais" (type STRUC, acteur IDEC). La transition ncessite d'identifier QUI passe le relais  QUI.

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | Retirer MT_V4_050 (flag moteur, pas une MT) |  Propos |  |
| 2 | Ajouter MT INFO "Document explicatif vulgaris" dans CAT_01 |  Propos | MT_V5_M1_P01 |
| 3 | Ajouter MT SEC "Runion coordination professionnels" dans CAT_02 |  Propos | MT_V5_M1_P02 |
| 4 | Ajouter MT MED "Second avis mdical centre de rfrence" dans CAT_02 |  Propos | MT_V5_M1_P03 |
| 5 | Ajouter MT STRUC "Identifier rfrents enfants/adultes" dans CAT_03 |  Propos | MT_V5_M1_P04 |

> **Condition ASR par catgorie** :
> - CAT_01 :  3 (SEC 2, MED 2)  ASR complte 
> - CAT_02 :  0 legacy  **ASR impossible**  ( 2 si propositions valides)
> - CAT_03 :  2 (SEC + STRUC)  ASR complte 

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

> **Objectif** : Complter chaque MT avec ses mtadonnes

###  Questions  se poser  Action 4

| # | Question | Rponse |
|---|---|---|
| 4.1 | MED prsent ? |  2 MT MED (consultation explicative + ALD) |
| 4.2 | Acteurs corrects ? |  MT_V4_023 et MT_V4_003 : acteur "Aidant (autonome)" OK car c'est de l'auto-observation |
| 4.3 | MT aidant autonome ? |  3 MT dj en Aidant autonome |
| 4.4 | Domaines corrects ? |  MT_V4_028/032/045 sont en mdico-social mais traitent de comprhension mdicale  limite |
| 4.5 | Nouvel acteur ? | Non ncessaire |
| 4.6 | Attributs manquants ? |  MT_V4_131 (ALD) : dlai = "ds que possible", prrequis = "diagnostic confirm" |
| 4.7 | Ordre logique ? | CAT_01 : ORGA (identifier)  SEC (planifier change)  MED (consultation + ALD)  |

### Tableau consolid des MT de M1

| MT_ID | Libell | Type | Acteur | Domaine | / | Catgorie | Source |
|---|---|---|---|---|---|---|---|
| MT_V4_023 | Identifier les points incompris ou sources de doute | ORGA | Aidant (autonome) |  |  | CAT_01 | Legacy |
| MT_V4_074 | Proposer un temps d'change ddi | SEC | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_003 | Identifier les zones d'incertitude exprimes par l'aidant | ORGA | Aidant (autonome) |  |  | CAT_01 | Legacy |
| MT_V4_034 | Valoriser la comprhension de l'aidant | ORGA | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_064 | Proposer un temps d'change pour faire le point | SEC | IDEC |  |  | CAT_01 | Legacy |
| MT_V4_124 | Proposer une consultation mdicale explicative | MED | Professionnel de sant |  |  | CAT_01 | Legacy |
| MT_V4_131 | Contacter le mdecin traitant pour dossier ALD (100%) | MED | Mdecin traitant |  |  | CAT_01 | Legacy |
| MT_V4_028 | Confirmer que le parcours de soins est peru comme clair | ORGA | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_051 | Identifier les zones d'incomprhension du parcours mdical | ORGA | Aidant (autonome) |  |  | CAT_02 | Legacy |
| MT_V4_009 | Identifier les points de divergence perus par l'aidant | ORGA | Aidant (autonome) |  |  | CAT_02 | Legacy |
| MT_V4_032 | Confirmer la bonne comprhension du diagnostic par l'aidant | ORGA | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_045 | Confirmer l'absence de contradiction perue | ORGA | IDEC |  |  | CAT_02 | Legacy |
| MT_V4_054 | Proposer une coordination entre les services | SEC | IDEC |  |  | CAT_03 | Legacy |
| MT_V4_135 | Identifier les zones d'incertitude de la transition | STRUC | IDEC |  |  | CAT_03 | Legacy |

> **Rsum** :  
> - Total MT : 14 (hors MT_V4_050 retire)
> - Domaine  Mdical : 2 / Domaine  Mdico-social : 12
> - Contributives () : 6  SEC: 3, MED: 2, STRUC: 1  
> - Non-contributives () : 8  ORGA: 8

###  Propositions d'amlioration  Types, acteurs et domaine

| # | Proposition | Justification |
|---|---|---|
| 1 |  CAT_02 : 0 MT contributive. Ajouter SEC + MED. | Sans MT contributive, l'ASR ne peut pas tre valide |
| 2 |  Ratio ORGA/contributive dsquilibr (8 ORGA pour 6 contributives) | Trop de "diagnostic" de la situation, pas assez d'action concrte |
| 3 | MT_V4_074 et MT_V4_064 sont quasi-identiques ("temps d'change ddi" vs "temps d'change pour faire le point") |  Fusionner en 1 seule MT |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording de base : MT et Recos

#### Wording des Recos de base

| CAT | Reco ID | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | Source | / |
|---|---|---|---|---|---|
| CAT_01 | M1_RECO_01 | Renforcer l'information et clarifier certains points mdicaux | Identifier les points incompris ou sources de doute | Legacy |  "Renforcer l'information" est un verbe d'action, pas un conseil succinct |
| CAT_01 | M1_RECO_02 | Clarifier la situation mdicale et les hypothses en cours | Confirmer la bonne comprhension du diagnostic par l'aidant | Legacy |  Mme problme  verbe d'action |
| CAT_02 | M1_RECO_03 | Maintenir le suivi mdical actuel et rester attentif  l'volution | Confirmer l'absence de contradiction perue | Legacy |  Trop vague pour une reco CCC |
| CAT_02 | M1_RECO_04 | Clarifier le parcours de soins et les tapes  venir | Identifier les zones d'incomprhension du parcours mdical | Legacy |  Verbe d'action |
| CAT_02 | M1_RECO_05 | Mettre en place un accompagnement renforc pour harmoniser le suivi | Identifier les points de divergence perus par l'aidant | Legacy |  "Mettre en place" = verbe d'action |
| CAT_03 | M1_RECO_06 | Clarifier les modalits de la transition et les interlocuteurs | Identifier les zones d'incertitude de la transition | Legacy |  Verbe d'action |
| CAT_01 | M1_RECO_07 | Demandez  vrifier l'ligibilit  la mise sous ALD | Contacter le mdecin traitant pour dossier ALD (100%) | Legacy |  Reco claire et actionnable |

>  **Wording recos propos** (format conseil succinct, pas verbe d'action) :

| CAT | Reco ID | Reco Utilisateur propose | Reco IDEC propose |
|---|---|---|---|
| CAT_01 | M1_RECO_01 | Information complmentaire sur la pathologie | Complter l'information mdicale pour l'aidant |
| CAT_01 | M1_RECO_02 | clairage sur le diagnostic en cours | Vrifier et clarifier la comprhension du diagnostic |
| CAT_02 | M1_RECO_03 | Suivi attentif du parcours mdical | Surveiller la cohrence du parcours de soins |
| CAT_02 | M1_RECO_04 | Parcours de soins  structurer | Structurer le parcours avec les chances  venir |
| CAT_02 | M1_RECO_05 | Harmonisation des avis mdicaux | Coordonner les professionnels pour un avis unifi |
| CAT_03 | M1_RECO_06 | Transition services enfant  adulte  accompagner | Identifier et coordonner les relais enfant/adulte |
| CAT_01 | M1_RECO_07 | ligibilit ALD  vrifier | Dclencher la demande ALD avec le mdecin traitant |

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit (Reco + MT)

#### CAT_01  Comprhension du diagnostic

> Niveaux existants :  STD_P01/P02 /  CCC_P01 /  CRIT_P01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Des questions sur la maladie de votre proche ? N'hsitez pas  demander des prcisions  l'quipe | Proposer un complment d'information adapt au niveau de comprhension |
|  CCC ( 30j) | Le diagnostic de votre proche ncessite des claircissements  une consultation explicative est recommande | Organiser un temps mdical ddi pour clarifier le diagnostic |
|  Critique ( 7j) | La situation mdicale de votre proche doit tre clarifie en urgence  contactez le mdecin traitant rapidement | Dclencher un RDV mdical explicatif dans les 7 jours |

#### CAT_02  Errance diagnostique

> Niveaux existants :  STD_01/02 /  CCC_01

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Le parcours mdical semble complexe  un point rgulier avec l'IDEC peut aider | Vrifier la perception du parcours et lever les zones d'ombre |
|  CCC ( 30j) | Trop d'examens et d'avis contradictoires  une coordination entre professionnels est ncessaire | Organiser une mise en cohrence du parcours mdical |

#### CAT_03  Transition enfant-adulte

> Niveaux existants :  STD_P03 /  CCC_02

**Reco versionne :**

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | La transition vers les services adultes se prpare  votre IDEC peut vous aider  identifier les relais | Vrifier que les interlocuteurs enfants/adultes sont identifis |
|  CCC ( 30j) | Le passage services enfant  adulte n'est pas organis  une coordination entre les quipes est urgente | Contacter les deux services pour organiser un relais structur |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

> S'affiche quand le MP n'est PAS activ (aucune rgle n'a fir)

| | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ |
|---|---|---|
|  Prvention | Le diagnostic de votre proche semble bien compris  restez attentif aux volutions et n'hsitez pas  poser des questions | Confirmer la bonne comprhension du diagnostic  rester en veille sur les volutions cliniques |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V5_M1_PREV_01 | Vrifier la comprhension de la maladie | ORGA | Interroger l'aidant sur sa comprhension actuelle de la pathologie | Prenez le temps de noter ce que vous comprenez de la maladie de votre proche |
| MT_V5_M1_PREV_02 | Signaler tout changement de diagnostic ou nouveau traitement | INFO | Informer l'aidant qu'il doit signaler tout changement mdical | Si un nouveau diagnostic ou traitement est propos, contactez votre IDEC |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question du MP  1 rgle |  3/7 (E34,E35,N41 orphelines) |  6/7 (N17 = contexte pur) | +5 rgles proposes |
| 2 | Chaque rgle  1 version de reco |  |  | 7 recos legacy couvrent |
| 3 | Chaque catgorie  ses MT assignes |  |  | MT redistribues par CAT |
| 4 | K3 respect (2 niveaux par catgorie) |  1/3 (seul CAT_02) |  3/3 si propositions valides | +5 rgles |
| 5 | Aucune MT orpheline |  |  | |
| 6 | Reco prvention prsente |  |  | +1 reco + 2 MT prvention |
| 7 | Wording reco = conseil succinct, MT = verbe d'action |  (verbes d'action dans recos) |  si wording propos valid | |
| 8 | Sens clinique renseign pour chaque rgle |  |  | |

> **Anomalies dtectes** :
> -  **CAT_02 : 0 MT contributive**  problme majeur non rsolu par le legacy. 2 MT proposes (SEC + MED).
> -  **MT_V4_074 et MT_V4_064 quasi-identiques**  fusionner ?
> -  **MT_V4_050** ("pas concern") n'est pas une MT clinique  convertir en logique moteur.
> -  **N17 reste sans rgle**  c'est une question de profil, pas d'activation. OK si document.

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 0 formalises | 3 (CAT_01, CAT_02, CAT_03) |
| Rgles d'activation | :2 :2 :0 | :4 :3 :1 |
| MT totales | 15 | 14 (-1 flag) + 4 proposes = 18 |
| MT contributives | 6 | 8 (+2 proposes CAT_02) |
| Domaine  /  | 2 / 12 | 3 / 15 |
| ASR | Non formule | M1-A  / M1-B  (si propositions valides) |
| Reco prvention |  Absente |  1 reco + 2 MT |
| Checks OK | 3/8 | 8/8 (si propositions valides) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | CAT_01 couvre E34, E35, N41  M1_RECO_07 (ALD) rattache |  Propos |
| 2 | 5 rgles proposes pour combler KPI questions orphelines |  Propos |
| 3 | MT_V4_050 retire (flag moteur) |  Propos |
| 4 | 4 MT proposes (INFO, SEC, MED, STRUC) |  Propos |
| 5 | Wording recos reformul (conseil succinct au lieu de verbe d'action) |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | **CAT_02 : ajouter MT contributives SEC + MED**  sans a, ASR impossible |  |
| 2 | **Valider les 5 nouvelles rgles** (K3 en dpend) |  |
| 3 | **Fusionner MT_V4_074 et MT_V4_064** (quasi-doublons) |  |
| 4 | **Confirmer que N17 ne ncessite pas de rgle** |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,iy=`#  Fiche de Validation MP  M2  Accs aux soins et aux professionnels de sant

> **Vulnrabilit** : V5  Parcours Mdical  
> **ASR** :  M2-A : Accs aux professionnels de sant fonctionnel | M2-B : Suivi prventif et ducation thrapeutique engags   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## BIG PICTURE  V5 entire (6 MPs, ~35 questions)

| MP | Sous-bloc | Nb Q | Questions | Thmatique |
|---|---|---|---|---|
| M1 | 6.1  Diagnostic | 7 | E34, E35, E36, E37, E38, N17, N41 | Comprhension maladie, errance diagnostique, transition |
| **M2** | **6.2  Accs soins** | **9** | **E39, E40, E41, O17, O18, O19, O20, O21, O24** | **Proximit, difficults accs, ETP, spcialistes, bilans** |
| M3 | 6.3  Urgences/hospit | 4 | E42, E43, E44, E46 | RDV imprvus, ruptures, bilan synthse, post-hospit |
| M4 | 6.4  Addictions/psy | 7 | E45, E46, E47, E48, E49, E50, E51 | Suivi addictologie, plan crise, suivi psy |
| M5 | 6.5  Coordination | 4 | E52, E53, E55, O59 | Rfrent, intervenants domicile |
| M6 | 6.6  Vision globale | 6 | E54, E56, E57, E58, E59, E60 | Organisation soins, inquitudes, bilans spcialiss |

M2 est le **MP logistique** de V5. L o M1 traite de la comprhension (le diagnostic est-il clair ?), M2 traite de l'accs concret : le proche peut-il physiquement voir un mdecin ? Y a-t-il des spcialistes  proximit ? Les bilans sont-ils faits ? C'est le MP qui gnre le plus de MTs de type "prise de RDV spcialistes"  un pattern de dispatch similaire  F6_RECO_05 (V4).

>  **Particularit M2** : C'est le **MP le plus riche en questions** de V5 (9 questions) mais aussi le plus problmatique en activation : **seulement 2 rgles CCC, 0 Standard**. K3 totalement non-conforme sur toutes les catgories.

>  **Frontire M2/M5** : M2 = "accde-t-on aux soins ?" (disponibilit). M5 = "les soins sont-ils coordonns ?" (organisation). O17 (mdecin traitant) est en M2 car c'est une question d'accs, pas de coordination. O59 (intervenants domicile) est en M5 car c'est de la coordination.

>  **Cross-activation critique** : V4_M2_CCC_02 utilise E42 + E43 (questions de M3). Cela signifie que M2 peut tre activ par des questions qui ne lui sont PAS rattaches. C'est un choix clinique valide (ruptures de suivi = difficults d'accs) mais  documenter.

---

## QUESTIONS TRANSVERSALES ( se poser AVANT et APRS chaque action)

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : doublons MT/recos avec un autre MP ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : minimum vital couvert ? | Actions 1, 3 |
| T3 | **Actionnabilit** : chaque lment excutable ? | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : nombre proportionnel  la complexit ? | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : MT faisable seul ? | Actions 3, 4 |
| T6 | **Chane d'action** : squence logique ? | Actions 3, 4 |

---

## 0. DONNES FIGES  Questions rattaches  M2

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E39 | Le premier professionnel de sant (mdecin, infirmier, spcialiste) est-il situ  moins de 15 minutes du domicile de votre proche ? | Facteur | Oui  Non |
| 2 | E40 | Quelles sont les principales difficults pour accder aux soins dont votre proche aurait besoin ? (plusieurs rponses possibles) | tat | Dlais RDV  Peu/pas de mdecins  Difficults transport  Difficults outils en ligne  Organisation travail/vie perso  Cot des soins  Autre  Pas de difficults |
| 3 | E41 | Votre proche a-t-il dj particip  un programme d'ETP li  sa maladie ? | Facteur | Oui  Non, on ne nous en a jamais parl  Non, mais on nous l'a propos  Je ne sais pas |
| 4 | O17 | A-t-elle un mdecin traitant ? | Facteur | Oui  Non |
| 5 | O18 | A-t-elle d'autres mdecins spcialistes qui la suivent actuellement ? | Facteur | Oui  Non |
| 6 | O19 | Lesquels ? (plusieurs rponses possibles) | Facteur | Cardiologue  Oncologue  Neurologue  Pneumologue  Ophtalmologue  Psychiatre  Chirurgien-Dentiste  Gastro-entrologue  Endocrinologue  ORL  Gyncologue  Nphrologue  Griatre  Dermatologue  Autre |
| 7 | O20 | La personne aide a-t-elle dj ralis des RDV mdicaux cette anne ? | Facteur | Oui  Non |
| 8 | O21 | Lesquels ? (plusieurs rponses possibles) | Facteur | Bilan de sant gnral  Audition  Vue  Contrle dentaire  Suivi cardiovasculaire  Ostodensitomtrie  Vaccination  Examen gyncologique  Suivi dermatologique  Suivi psychologique  Dpistage des cancers |
| 9 | O24 | prouvez-vous des difficults  prendre RDV chez des spcialistes autour de son domicile ? | tat | Pas du tout  Un peu  Oui |

> Total : **9 questions** rattaches  M2

>  **E41 est conditionnelle** : N3 rponse 1 ou 3 (vieillissement ou maladie chronique). Ne s'affiche pas pour handicap/psy/addictions.
>  **O19 est conditionnel** : O18 = Oui (a des spcialistes). Sinon masque.
>  **O21 est conditionnel** : O20 = Oui (a ralis des RDV). Sinon masque.

### Questions candidates exclues

| Question ID | Libell | Pertinente pour M2 ? | Raisonnement |
|---|---|---|---|
| E34-E38 | Comprhension diagnostic, errance, transition |  Non | Comprhension  M1, pas accs |
| N17 | Type de handicap |  Non | Profil  M1 |
| N41 | ALD |  Potentiel | L'ALD impacte le COT d'accs aux soins (E40 = "Cot des soins"). Mais cliniquement, l'ALD est un acte administratif li au diagnostic (M1). **Garder en M1.** |
| E42/E43 | RDV imprvus / ruptures de suivi |  Utilises en cross-activation | Questions de M3, mais utilises dans V4_M2_CCC_02. Les ruptures de suivi PEUVENT tre causes par des difficults d'accs. Cross-activation valide. |
| E44 | Bilan de synthse |  Non | Coordination  M3 |
| E46/E47 | Suivi post-hospit / plan crise |  Non | Urgences  M3/M4 |
| E45/E48-E51 | Addictions/psy |  Non | Suivi spcialis  M4 |
| E52/E53/E55/O59 | Coordination |  Non | Organisation  M5 |
| E54/E56-E60 | Vision globale |  Non | Macro  M6 |
| N14 | Mdicaments de la personne aide grs par ? |  Potentiel | Utilise dans M2_RECO_04. N14 est mappe V4 (F2), pas V5. **Cross-vulnrabilit** documente. |

>  **N14 est utilise dans M2_RECO_04** (bilan griatrique) mais elle appartient  V4/F2, pas V5/M2. C'est une cross-vulnrabilit : le moteur utilise la rponse N14 pour dclencher une reco dans un autre primtre.  documenter pour Dr. Monka.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Questions  se poser  Action 1

| # | Question | Rponse |
|---|---|---|
| 1.1 | Catgories cliniquement distinctes ? |  Accs gographique, difficults pratiques, ducation thrapeutique, rseau de spcialistes = 4 axes distincts |
| 1.2 | Angle mort ? |  Les questions O20/O21 (bilans raliss) n'ont pas de catgorie propre  elles servent de contexte pour savoir si le suivi prventif est  jour. Intgrer dans CAT_04. |
| 1.3 | Fusionner ? | Oui. E39 (proximit) et O24 (difficults RDV spcialistes) traitent du mme problme  fusionner dans CAT_01. |
| 1.4 | clater ? | Non. |
| 1.5 | Combien raisonnable ? | 4 catgories pour 9 questions = proportionnel (T4 OK) |

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | M2_CAT_01 | Accessibilit gographique et prise de RDV | Faciliter l'accs physique aux professionnels de sant |  IA (E39, O24, E40 partiel) |
| 2 | M2_CAT_02 | Difficults pratiques d'accs aux soins | Lever les freins logistiques (transport, cot, outils numriques, organisation) | Legacy  (E40) |
| 3 | M2_CAT_03 | ducation thrapeutique du patient (ETP) | Engager ou relancer un programme ETP | Legacy  (E41) |
| 4 | M2_CAT_04 | Rseau de spcialistes et suivi prventif | S'assurer que le proche a un MT, des spcialistes identifis, et des bilans  jour | Legacy  (O17, O18, O19, O20, O21) |

###  Raisonnement

> **Pourquoi 4 catgories et pas 3 ?** L'ETP (CAT_03) est une dimension distincte de l'accs logistique (CAT_02). L'ETP n'est pas un problme d'accs mais d'ducation  c'est un levier de prvention qui change fondamentalement la nature de l'intervention. Fusionner ETP avec "accs aux soins" diluerait le message clinique.
>
> **Pourquoi pas 5 ?** CAT_01 (proximit gographique) et une ventuelle "CAT prise de RDV" traiteraient du mme problme sous un angle diffrent. Mieux : les fusionner car la solution est la mme (aider  trouver des professionnels / organiser les RDV).
>
> **CAT_04 est la plus riche en questions** (5 questions : O17, O18, O19, O20, O21) mais elles sont surtout de contexte (factorielle). Les actions concrtes sont : vrifier MG, prendre RDV spcialistes manquants, planifier les bilans prventifs non faits.

> **Dcision Dr. Monka** :  Valid 4 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Questions  se poser  Action 2

| # | Question | Rponse |
|---|---|---|
| 2.1 | Chaque question  1 rgle ? |  **7/9 orphelines** (E39, E41, O17, O18, O19, O20, O21). Seules E40 et O24 sont dans des rgles. E42/E43 sont utilises mais ne sont PAS rattaches  M2. |
| 2.2 | Chaque combo significatif a une rgle ? |  O17 = "Non" (pas de mdecin traitant !) n'a aucune rgle. C'est **critique**. |
| 2.3 | Niveaux cliniquement justifis ? |  Les 2 rgles legacy sont CCC. Pas de Standard  tout ou rien. |
| 2.4 | Combos multi-questions ? |  CCC_01 = O24 + E40, CCC_02 = E42 + E43 (cross-MP) |
| 2.5 | Rponses extrmes non exploites ? |  O17 = "Non" (pas de MT !), O20 = "Non" (aucun bilan cette anne), E41 = "Non, on ne nous en a jamais parl" |
| 2.6 | 2 niveaux par catgorie ? |  0/4 catgories K3-conformes |
| 2.7 | Une rgle active plusieurs catgories ? | Oui  V4_M2_CCC_01 pourrait activer CAT_01 + CAT_02 (accs + difficults) |

### Catgorie 1  Accessibilit gographique et prise de RDV

>  **0 rgle legacy** directement sur cette catgorie.
> O24 est utilise dans V4_M2_CCC_01 mais combine avec E40. E39 n'est dans aucune rgle.

> **E39** :  Le premier professionnel de sant est-il situ  moins de 15 minutes du domicile ? 
> Options :  Oui /  **Non**

> **O24** :  prouvez-vous des difficults  prendre RDV chez des spcialistes ? 
> Options :  Pas du tout /  **Un peu** /  **Oui**

**Rgles legacy (partiellement lies) :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC | V4_M2_CCC_01 | O24 = "Oui" **ET** E40  "Pas de difficults" | Activer CAT_01 + CAT_02 | Difficults concrtes et persistantes d'accs | Legacy  |

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M2_STD_P01 | O24 = "Un peu" | Activer CAT_01 | Difficults modres de prise de RDV |  Propos |
|  Standard | V4_M2_STD_P02 | E39 = "Non" | Activer CAT_01 | loignement gographique  facteur de risque d'abandon de suivi |  Propos |

> **K3 CAT_01** :  si propositions valides (STD + CCC)

### Catgorie 2  Difficults pratiques d'accs aux soins

> **E40** :  Quelles sont les principales difficults pour accder aux soins ? (choix multiples) 
> Options :  Dlais RDV /  Peu/pas de mdecins /  **Difficults transport** /  **Difficults outils en ligne** /  **Organisation travail/vie perso** /  **Cot des soins** /  Autre /  Pas de difficults

**Rgles legacy :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  CCC | V4_M2_CCC_01 | O24 = "Oui" **ET** E40  "Pas de difficults" | Activer CAT_01 + CAT_02 | Difficults concrtes d'accs | Legacy  |

>  V4_M2_CCC_01 est partage entre CAT_01 et CAT_02. C'est cliniquement valide : les difficults d'accs et les problmes de RDV sont lis.

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M2_STD_P03 | E40  "Pas de difficults" (au moins 1 difficult coche) | Activer CAT_02 | Au moins une difficult d'accs identifie  signal faible |  Propos |

> **K3 CAT_02** :  si propositions valides (STD + CCC)

### Catgorie 3  ducation thrapeutique (ETP)

> **E41** :  Votre proche a-t-il dj particip  un programme d'ETP ? 
> Options :  Oui /  **Non, on ne nous en a jamais parl** /  **Non, mais on nous l'a propos** /  **Je ne sais pas**

>  **0 rgle legacy** sur cette catgorie. E41 est orpheline.

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M2_STD_P04 | E41 = "Non, mais on nous l'a propos" | Activer CAT_03 | ETP propose mais non engage  lever les freins |  Propos |
|  CCC | V4_M2_CCC_P01 | E41  {"Non, on ne nous en a jamais parl", "Je ne sais pas"} | Activer CAT_03 | Patient jamais inform de l'ETP  carence informationnelle |  Propos |

> **K3 CAT_03** :  si propositions valides (STD + CCC)

### Catgorie 4  Rseau de spcialistes et suivi prventif

> **O17** :  A-t-elle un mdecin traitant ?   Options :  Oui /  **Non**
> **O18** :  A-t-elle des spcialistes qui la suivent ?   Options :  Oui /  **Non**
> **O20** :  A-t-elle ralis des RDV mdicaux cette anne ?   Options :  Oui /  **Non**

>  **0 rgle legacy** sur cette catgorie. O17, O18, O20 sont toutes orphelines.
>  **O17 = "Non"** est un signal CRITIQUE : un proche sans mdecin traitant est en rupture de parcours mdical. Pourtant, aucune rgle ne le capte.

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M2_STD_P05 | O20 = "Non" | Activer CAT_04 | Aucun RDV mdical ralis cette anne  suivi prventif en retard |  Propos |
|  Standard | V4_M2_STD_P06 | O18 = "Non" | Activer CAT_04 | Pas de spcialiste en suivi  risque de lacune dans le parcours |  Propos |
|  CCC | V4_M2_CCC_02 | E42  2 **ET** E43 = "Oui, plusieurs priodes ou plus de 6 mois" | Activer CAT_04 | Crises non anticipes + ruptures prolonges de suivi | Legacy  |
|  Critique | V4_M2_CRIT_P01 | O17 = "Non" | Activer CAT_04 | **Pas de mdecin traitant = rupture totale du parcours.** Aucun pivot de coordination. Urgence absolue. |  Propos |

> **K3 CAT_04** :  si propositions valides (STD + CCC + CRIT)

###  Raisonnement

> **Legacy** : 2 rgles (CCC  2) sur seulement 3 questions effectives (O24, E40, E42+E43). **7/9 questions orphelines  pire score V5**.
>
> **Pattern identique V4** : rappelle F5 et F6 de V4 (0-2 rgles pour 8-12 questions). Le legacy ne couvre que les combos composites (CCC), jamais les signaux isols (Standard).
>
> **Propositions** : 8 nouvelles rgles pour passer de 0/4 K3 conforme  4/4.
>
> **Dcision critique** : O17 = "Non" (pas de MT) est propose en  Critique. C'est le signal le plus grave de M2 : sans mdecin traitant, aucun parcours de soin n'est possible.

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification |
|---|---|---|
| 1 | STD_P01 : O24 = "Un peu" | Signal faible de difficult de RDV |
| 2 | STD_P02 : E39 = "Non" | loignement = facteur d'abandon |
| 3 | STD_P03 : E40  "Pas de difficults" | Au moins 1 frein identifi |
| 4 | STD_P04 : E41 = "Non, mais propos" | ETP non engage  lever les freins |
| 5 | CCC_P01 : E41 = "Non/NSP" | Carence informationnelle ETP |
| 6 | STD_P05 : O20 = "Non" | 0 bilan cette anne |
| 7 | STD_P06 : O18 = "Non" | Pas de spcialiste |
| 8 | **CRIT_P01** : O17 = "Non" | **Pas de mdecin traitant = CRITIQUE** |

> **Contrle K3** :  CAT_01  / CAT_02  / CAT_03  / CAT_04  (si propositions valides)  
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

###  Questions  se poser  Action 3

| # | Question | Rponse |
|---|---|---|
| 3.1 | Chane complte ? |  ORGA  INFO  SEC  MED couvert dans les MT legacy |
| 3.2 | MT d'autres CAT/MP ? | M2_RECO_04 utilise N14 (V4/F2)  cross-vulnrabilit |
| 3.3 | MT mal affectes ? |  M2_RECO_06 contient 16 MTs de dispatch spcialistes (O19). Mme pattern que F6_RECO_05 de V4.  systmatiser. |
| 3.4/3.5 | +1/-1 ? | Voir par CAT |
| 3.6 | 1 contributive par CAT ? |  Toutes les CAT ont des SEC/MED |
| 3.7 | Mix quilibr ? |  Beaucoup de SEC (prise RDV), peu d'INFO |

### CAT_01  Accessibilit gographique et prise de RDV

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_026 | valuer les difficults lies  l'loignement gographique | ORGA | IDEC |  | Legacy  |
| MT_V4_094 | Proposer un accompagnement pour la prise de RDV | SEC | IDEC |  | Legacy  |
| MT_V4_044 | Identifier des professionnels hors secteur immdiat | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_126 | Rechercher des alternatives (autres praticiens, tlconsultation) | MED | Professionnel de sant |  | Legacy  |
| MT_V4_133 | Se reporter  "Procdure pour prendre un RDV spcialiste" | MED | Mdecin spcialiste |  | Legacy  |

####  Pourquoi 5 MT ?

**Pourquoi pas 1 de moins ?** MT_V4_126 (tlconsultation) est un levier moderne important pour les zones sous-dotes. L'enlever prive d'une solution concrte de dsengorgement.

**Pourquoi pas 1 de plus ?**  **Proposition** : "Informer sur les dispositifs de transport sanitaire (VSL, ambulance, transport social)"  type INFO. L'loignement gographique + la mobilit rduite du proche = combo frquent.

### CAT_02  Difficults pratiques d'accs aux soins

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_005 | Confirmer l'absence de difficult d'accs aux soins | ORGA | IDEC |  | Legacy  |
| MT_V4_007 | Prsenter les solutions de tlassistance existantes | ORGA | IDEC |  | Legacy  |
| MT_V4_016 | Confirmer l'accessibilit des professionnels | ORGA | IDEC |  | Legacy  |
| MT_V4_019 | changer avec l'aidant pour prciser la difficult | ORGA | IDEC |  | Legacy  |
| MT_V4_033 | Alerter les professionnels rfrents | ORGA | IDEC |  | Legacy  |
| MT_V4_039 | valuer les besoins de transport | ORGA | IDEC |  | Legacy  |
| MT_V4_046 | Identifier les contraintes organisationnelles | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_085 | Vrifier l'implication du professionnel dans le suivi | SEC | IDEC |  | Legacy  |
| MT_V4_110 | Informer sur les dispositifs de prise en charge existants | INFO | Aidant (autonome) |  | Legacy  |
| MT_V4_120 | Faire le point avec le proche et/ou les professionnels | INFO | IDEC |  | Legacy  |

####  Pourquoi 10 MT ?

**Pourquoi pas 1 de moins ?**
-  MT_V4_005 ("Confirmer l'absence de difficult") et MT_V4_016 ("Confirmer l'accessibilit") sont quasi-identiques. **Proposition : fusionner.**
-  MT_V4_007 ("tlassistance") semble plus pertinente pour V4 (fragilit physique) que V5 (parcours mdical).  vrifier.

**Pourquoi pas 1 de plus ?**
-  **Proposition** : "Accompagner  la demande d'aide au transport CPAM/APA" (type STRUC). Les dispositifs existent mais les aidants ne les connaissent pas.

>  **CAT_02 : 7 ORGA sur 10 MT**. Ratio dsquilibr. Beaucoup de diagnostic/change, peu d'action structurante.

### CAT_03  ducation thrapeutique (ETP)

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_011 | changer sur les raisons de l'arrt du suivi | ORGA | IDEC |  | Legacy  |
| MT_V4_018 | changer sur les raisons du refus ou du report | ORGA | IDEC |  | Legacy  |
| MT_V4_024 | Valoriser la participation au programme ETP | ORGA | IDEC |  | Legacy  |
| MT_V4_037 | Valoriser la participation aux groupes de parole | ORGA | IDEC |  | Legacy  |
| MT_V4_081 | changer sur les effets du suivi | SEC | IDEC |  | Legacy  |
| MT_V4_087 | changer sur les freins au suivi | SEC | IDEC |  | Legacy  |
| MT_V4_116 | Expliquer le principe et les bnfices de l'ETP | INFO | IDEC |  | Legacy  |

####  Pourquoi 7 MT ?

**Pourquoi pas 1 de moins ?**
- MT_V4_011 et MT_V4_018 sont proches ("raisons d'arrt" vs "raisons de refus/report"). Mais cliniquement : l'arrt = le proche tait engag puis a dcroch (motivation), le refus/report = le proche n'a jamais commenc (freins pratiques ou psychologiques). Distinct.

**Pourquoi pas 1 de plus ?**
-  **Proposition** : "Rechercher les programmes ETP disponibles sur le territoire" (type STRUC, acteur IDEC). Actuellement, on explique l'ETP (INFO) et on change sur les freins (ORGA/SEC), mais on ne fait pas la recherche concrte de programme.

### CAT_04  Rseau de spcialistes et suivi prventif

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_052 | Prendre RDV avec un APA du territoire | SEC | IDEC |  | Legacy  |
| MT_V4_053 | Prendre RDV avec pneumologue | SEC | IDEC |  | Legacy  |
| MT_V4_055 | Prendre RDV avec ORL | SEC | IDEC |  | Legacy  |
| MT_V4_057 | Prendre RDV avec griatre | SEC | IDEC |  | Legacy  |
| MT_V4_058 | Prendre RDV avec nphrologue | SEC | IDEC |  | Legacy  |
| MT_V4_060 | Prendre RDV avec chirurgien-dentiste | SEC | IDEC |  | Legacy  |
| MT_V4_069 | Prendre RDV avec oncologue | SEC | IDEC |  | Legacy  |
| MT_V4_073 | Prendre RDV avec psychiatre | SEC | IDEC |  | Legacy  |
| MT_V4_077 | Prendre RDV avec pdicure-podologue | SEC | IDEC |  | Legacy  |
| MT_V4_079 | Prendre RDV avec IDEL | SEC | IDEC |  | Legacy  |
| MT_V4_083 | Prendre RDV avec neurologue | SEC | IDEC |  | Legacy  |
| MT_V4_084 | Prendre RDV avec kinsithrapeute | SEC | IDEC |  | Legacy  |
| MT_V4_086 | Prendre RDV avec cardiologue | SEC | IDEC |  | Legacy  |
| MT_V4_091 | Prendre RDV avec endocrinologue | SEC | IDEC |  | Legacy  |
| MT_V4_095 | Prendre RDV avec gastro-entrologue | SEC | IDEC |  | Legacy  |
| MT_V4_096 | Prendre RDV avec dermatologue | SEC | IDEC |  | Legacy  |
| MT_V4_098 | Prendre RDV avec ophtalmologue | SEC | IDEC |  | Legacy  |

>  **17 MTs de dispatch spcialistes**  mme mcanisme que F6_RECO_05 de V4 (O16 pathologies  spcialistes). Ici, O19 (liste des spcialistes)  MTs de prise de RDV pour chaque spcialiste.

>  **Proposition MT paramtrique** : Comme propos en F6, plutt que 17 MTs quasi-identiques ("Prendre RDV avec [SPCIALISTE]"), crer **1 MT paramtrique** \`MT_V5_M2_DISPATCH : "Prendre RDV avec le spcialiste identifi" {param: O19.selected}\`. Le moteur gnre dynamiquement la MT en fonction des choix O19.

**Autres MTs CAT_04 (non-dispatch) :**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
|  |  Aucune MT legacy hors dispatch |  |  |  |  |

>  **Problme** : CAT_04 n'a QUE des MTs de dispatch (prise de RDV). Il manque :
> - MT ORGA : "Vrifier que le proche a un mdecin traitant" (O17)
> - MT INFO : "Informer sur les bilans de prvention recommands par ge"
> - MT STRUC : "Constituer le dossier de suivi avec les RDV planifis"

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | Fusionner MT_V4_005 et MT_V4_016 (quasi-doublons CAT_02) |  Propos |  |
| 2 | Ajouter MT INFO "Transport sanitaire CPAM/APA" dans CAT_01 |  Propos | MT_V5_M2_P01 |
| 3 | Ajouter MT STRUC "Demande aide transport" dans CAT_02 |  Propos | MT_V5_M2_P02 |
| 4 | Ajouter MT STRUC "Rechercher programmes ETP territoire" dans CAT_03 |  Propos | MT_V5_M2_P03 |
| 5 | Ajouter MT ORGA "Vrifier mdecin traitant" dans CAT_04 |  Propos | MT_V5_M2_P04 |
| 6 | Ajouter MT INFO "Bilans prvention par ge" dans CAT_04 |  Propos | MT_V5_M2_P05 |
| 7 | MT paramtrique dispatch spcialistes |  Propos | MT_V5_M2_DISPATCH |

> **Condition ASR par catgorie** :
> - CAT_01 :  3 (SEC 1, MED 2)  ASR complte 
> - CAT_02 :  1 (SEC 1) + propose STRUC  ASR complte si valid 
> - CAT_03 :  2 (SEC 2) + propose STRUC  ASR complte 
> - CAT_04 :  17 (SEC dispatch)  ASR complte  (dispatch = action concrte)

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

###  Questions  se poser  Action 4

| # | Question | Rponse |
|---|---|---|
| 4.1 | MED prsent ? |  MED dans M2_RECO_04 (bilan griatrique) et M2_RECO_05 (DAC/CPTS) |
| 4.2 | Acteurs corrects ? |  IDEC majoritaire + Aidant (autonome) + Mdecin spcialiste + DAC/CPTS |
| 4.3 | MT aidant autonome ? |  Seulement 2 sur ~30  les aidants pourraient faire plus de recherches seuls |
| 4.4 | Domaines corrects ? |  MT dispatch (prise RDV) : domaine mdical ou mdico-social ? Prise de RDV = acte administratif (mdico-social), mais le RDV lui-mme est mdical. **Convention : domaine du RDV cible.** |
| 4.5 | Nouvel acteur ? | DAC et CPTS dj utiliss dans M2_RECO_05  OK |
| 4.6 | Attributs manquants ? |  MT dispatch : dlai = "selon urgence et disponibilit" |
| 4.7 | Ordre logique ? | ORGA (identifier)  INFO (informer)  SEC (prendre RDV)  MED (consultation)  |

### Tableau consolid des MT de M2 (rsum)

> **Rsum** :  
> - Total MT : 39 legacy + 5 proposes = 44
> - Domaine  Mdical : ~20 (dispatch + MED) / Domaine  Mdico-social : ~24 (ORGA + INFO + STRUC)
> - Contributives () : 22  SEC: 19, MED: 3  
> - Non-contributives () : 17  ORGA: 12, INFO: 5

>  **M2 est le MP le plus riche en MTs de toute V5** (et probablement de tout le KERNEL). C'est d au mcanisme de dispatch spcialistes (17 MTs pour O19). Si le dispatch paramtrique est adopt, on passe de 39  23 MTs.

###  Propositions d'amlioration  Types, acteurs et domaine

| # | Proposition | Justification |
|---|---|---|
| 1 | Dispatch paramtrique O19 : 17 MTs  1 MT dynamique | vite la redondance, simplifie la maintenance |
| 2 | CAT_02 : ratio ORGA trop lev (7/10). Ajouter STRUC + INFO. | Plus de levier concret, moins d'change |
| 3 | Augmenter les MT "Aidant (autonome)" : recherche spcialistes, prise RDV en ligne | L'aidant peut faire ces actions seul avec un guide |

> **Dcision Dr. Monka** :  Valid |  Modifier les types/acteurs/domaines

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording des Recos de base

| CAT | Reco ID | Reco Utilisateur _(conseil succinct)_ | Reco IDEC _(directive)_ | Source | / |
|---|---|---|---|---|---|
| CAT_01 | M2_RECO_01 | Identifier des solutions pour faciliter l'accs aux soins | Confirmer l'accessibilit des professionnels | Legacy |  Verbe d'action |
| CAT_02 | M2_RECO_02 | Accompagner l'utilisation des outils numriques | Confirmer l'absence de difficult d'accs | Legacy |  Trop spcifique (outils numriques), la reco couvre 8 sous-difficults |
| CAT_03 | M2_RECO_03 | Informer sur l'existence et l'intrt de l'ETP | Expliquer le principe et les bnfices | Legacy |  Verbe d'action |
| CAT_04 | M2_RECO_04 | Bilan griatrique et bilan mmoire  demander | Contacter le MT pour lettre d'adressage | Legacy |  Claire et actionnable |
| CAT_04 | M2_RECO_05 | Contactez le DAC de votre territoire | Informer sur les dispositifs DAC/CPTS | Legacy |  |
| CAT_04 | M2_RECO_06 | Un suivi rgulier est  prvoir selon les prconisations | Prendre RDV avec [spcialiste] | Legacy |  Reco trop gnrique pour 14 spcialistes diffrents |

>  **Wording recos propos** :

| CAT | Reco ID | Reco Utilisateur propose | Reco IDEC propose |
|---|---|---|---|
| CAT_01 | M2_RECO_01 | Accessibilit aux soins  amliorer | Lever les freins d'accs gographique aux soins |
| CAT_02 | M2_RECO_02 | Freins d'accs aux soins identifis | Proposer des solutions adaptes  chaque difficult |
| CAT_03 | M2_RECO_03 | ducation thrapeutique  explorer | Orienter vers un programme ETP adapt  la pathologie |
| CAT_04 | M2_RECO_04 | Bilan griatrique recommand | Dclencher un bilan griatrique via le MT |
| CAT_04 | M2_RECO_05 | Coordination territoriale  activer | Mettre en lien avec le DAC/CPTS du territoire |
| CAT_04 | M2_RECO_06 | Suivi spcialiste  planifier | Organiser les RDV selon les spcialistes identifis |

> **Dcision Dr. Monka** :  Wording de base valid |  Corrections  apporter

---

### Phase 2  Versioning par criticit (Reco + MT)

#### CAT_01  Accessibilit gographique

> Niveaux :  STD_P01/P02 /  CCC_01

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Des professionnels de sant sont accessibles  vrifiez que vous n'avez pas de difficult de suivi | Vrifier la bonne couverture gographique en professionnels de sant |
|  CCC ( 30j) | L'accs aux professionnels est difficile pour votre proche  des solutions existent, votre IDEC peut vous aider | Identifier et mettre en place des alternatives (tlconsultation, transport, dplacement) |

#### CAT_02  Difficults pratiques

> Niveaux :  STD_P03 /  CCC_01

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Certaines difficults d'accs sont identifies  votre IDEC peut vous aider  les lever | valuer la difficult et proposer un plan d'action |
|  CCC ( 30j) | Plusieurs freins d'accs aux soins sont identifis  agissons ensemble pour les lever rapidement | Mettre en uvre des solutions sur tous les axes (transport, cot, organisation, outils) |

#### CAT_03  ETP

> Niveaux :  STD_P04 /  CCC_P01

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Un programme d'ducation thrapeutique est disponible  discutez-en avec votre IDEC | Lever les freins  la participation ETP |
|  CCC ( 30j) | L'ducation thrapeutique peut amliorer le quotidien de votre proche  informez-vous auprs de votre IDEC | Rechercher et proposer un programme ETP adapt dans le territoire |

#### CAT_04  Rseau spcialistes et suivi prventif

> Niveaux :  STD_P05/P06 /  CCC_02 /  CRIT_P01

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Le suivi mdical de votre proche mrite d'tre consolid  vrifiez les bilans et spcialistes | Identifier les lacunes du rseau mdical et planifier les RDV manquants |
|  CCC ( 30j) | Le suivi mdical prsente des ruptures  une remise  jour du rseau de soins est ncessaire | Organiser une remise  jour complte : bilans + RDV spcialistes + plan de suivi |
|  Critique ( 7j) | **Votre proche n'a pas de mdecin traitant  c'est une priorit absolue  rsoudre immdiatement** | **Dclencher dans les 7 jours : contact DAC/CPTS + CPAM pour trouver un MT** |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

| | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Prvention | L'accs aux soins de votre proche semble correct  maintenez le suivi et anticipez les prochains RDV | Confirmer le bon accs aux soins  maintenir le rseau de professionnels actif |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V5_M2_PREV_01 | Vrifier les prochains RDV mdicaux planifis | ORGA | Vrifier avec l'aidant que les prochains RDV sont programms | Consultez votre agenda mdical : les prochains RDV de votre proche sont-ils prvus ? |
| MT_V5_M2_PREV_02 | Rappeler les bilans prventifs annuels recommands | INFO | Informer l'aidant sur les bilans recommands pour l'ge et la pathologie | Votre proche a-t-il fait son bilan annuel ? Vrifiez les recommandations avec votre mdecin |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question  1 rgle |  2/9 |  8/9 (O19 = contexte) | +8 rgles proposes |
| 2 | Chaque rgle  1 version de reco |  |  | 6 recos legacy couvrent |
| 3 | Chaque catgorie  ses MT assignes |  |  | MT redistribues par CAT |
| 4 | K3 respect |  0/4 |  4/4 si valid | +8 rgles |
| 5 | Aucune MT orpheline |  |  | |
| 6 | Reco prvention |  |  | +1 reco + 2 MT |
| 7 | Wording reco = conseil succinct |  |  si wording propos valid | |
| 8 | Sens clinique renseign |  |  | |

> **Anomalies dtectes** :
> -  **Cross-activation** : V4_M2_CCC_02 utilise E42+E43 (questions M3). Documenter.
> -  **Cross-vulnrabilit** : M2_RECO_04 utilise N14 (V4/F2). Documenter.
> -  **17 MTs dispatch spcialistes** : proposer le mcanisme paramtrique.
> -  **CAT_02 : ratio ORGA 7/10**  dsquilibre  corriger.

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 0 formalises | 4 (CAT_01  CAT_04) |
| Rgles d'activation | :0 :2 :0 | :6 :3 :1 |
| MT totales | 39 | 39 + 5 proposes = 44 (ou 28 avec dispatch param.) |
| MT contributives | 22 | 24 (+2 proposes STRUC) |
| Domaine  /  | ~20 / ~19 | ~22 / ~22 |
| ASR | Non formule | M2-A  / M2-B  |
| Reco prvention |  |  |
| Checks OK | 2/8 | 8/8 (si valid) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 4 catgories formalises (accs, freins, ETP, rseau spcialistes) |  Propos |
| 2 | 8 rgles proposes pour K3 4/4 |  Propos |
| 3 | O17 = "Non"  Critique (pas de MT = rupture totale) |  Propos |
| 4 | Dispatch paramtrique O19 (17  1 MT dynamique) |  Propos |
| 5 | Cross-activations E42/E43 et N14 documentes |  Document |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | **Valider les 8 nouvelles rgles** (K3 en dpend) |  |
| 2 | **O17 = "Non"  Critique ou CCC ?** Ce choix a un impact fort sur le workflow IDEC |  |
| 3 | **Dispatch paramtrique** : adopter pour M2 et F6 ? Pattern systmique. |  |
| 4 | **Fusionner MT_V4_005 et MT_V4_016** (quasi-doublons CAT_02) |  |
| 5 | **Cross-vulnrabilit N14** : documenter dans les rgles inter-MP |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,sy=`#  Fiche de Validation MP  M3  Urgences, hospitalisations et suivi mdical

> **Vulnrabilit** : V5  Parcours Mdical  
> **ASR** :  M3-A : Suivi mdical rgulier et structur | M3-B : Sorties d'hospitalisation scurises   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## BIG PICTURE  Positionnement M3

| MP | Sous-bloc | Nb Q | Thmatique |
|---|---|---|---|
| M1 | 6.1  Diagnostic | 7 | Comprhension maladie, errance, ALD |
| M2 | 6.2  Accs soins | 9 | Proximit, difficults accs, ETP, spcialistes |
| **M3** | **6.3  Urgences/hospit** | **4** | **RDV imprvus, ruptures suivi, bilan synthse, post-hospit** |
| M4 | 6.4  Addictions/psy | 7 | Suivi addictologie, plan crise, suivi psy, observance |
| M5 | 6.5  Coordination | 4 | Rfrent, intervenants domicile |
| M6 | 6.6  Vision globale | 6 | Organisation, inquitudes, plan de route |

M3 est le **MP de surveillance** de V5. Il dtecte les signaux d'instabilit du parcours mdical : urgences non anticipes, ruptures de suivi, absence de bilan de synthse, suivi post-hospitalisation absent. C'est un MP qui RAGIT aux drapages.

>  **Particularit M3** : MP le plus riche en rgles de V5 (**8 rgles : 5 STD + 3 CCC**). Paradoxe : c'est le MP avec le MOINS de questions (4Q) mais le plus de rgles. Cela s'explique par les **cross-activations massives** : M3 utilise des questions de M4 (E47), M4 (E50, E51) et M5 (E52) dans ses rgles CCC.

>  **Cross-activations** :
> - V4_M3_CCC_01 utilise **E52** (M5  coordination) + E44 (M3)
> - V4_M3_CCC_02 utilise **E47** (M4  plan crise) + E46 (M3)
> - V4_M3_CCC_03 utilise **E50** + **E51** (M4  observance psy/addiction)
> - STD_04 utilise **E47** (M4), STD_05 utilise **E50** (M4)
>
> Seul E42 est **propre**  M3 ET utilise dans ses propres rgles.

>  **Frontire M3/M4** : M3 = "le parcours mdical reste-t-il stable ?" (ractivit). M4 = "les suivis spcialiss psy/addiction fonctionnent-ils ?" (spcialit). E46 est partage M3+M4 dans les questions, E47 est en M4 mais utilise par M3 en cross-activation.

---

## QUESTIONS TRANSVERSALES

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** : doublons MT/recos ? | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** : minimum vital ? | Actions 1, 3 |
| T3 | **Actionnabilit** : excutable ? | Actions 3, 4, 5 |
| T4 | **Proportionnalit** : proportionnel ? | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** : faisable seul ? | Actions 3, 4 |
| T6 | **Chane d'action** : squence logique ? | Actions 3, 4 |

---

## 0. DONNES FIGES  Questions rattaches  M3

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E42 | Parmi les RDV mdicaux raliss ce mois-ci, combien taient non prvus  l'avance hors hospitalisation ? | Facteur | Aucun  1 seul  2  3  4  5  6 |
| 2 | E43 | Au cours des 12 derniers mois, y a-t-il eu des priodes de plusieurs mois sans aucun suivi mdical pour le problme principal ? | Facteur | Non  Oui, 3  6 mois  Oui, plusieurs priodes ou +6 mois  Je ne sais pas |
| 3 | E44 | Votre proche a-t-il dj bnfici d'un bilan de synthse pour faire le point sur l'ensemble de ses maladies ? | Facteur | Oui, rcemment  Oui, mais il y a +1 an  Non, jamais  Je ne sais pas |
| 4 | E46 | Aprs la dernire hospitalisation, un suivi mdical a-t-il t organis ? | Facteur | Oui, clairement organis  Partiellement  Non, nous avons d tout organiser seuls  Pas hospitalis rcemment |

> Total : **4 questions** rattaches  M3
>  **E44 conditionnelle** : N3 rponse 1 ou 3 (vieillissement ou maladie chronique).
>  **E46 est cross-MP** : aussi mappe  M4.

### Questions candidates exclues

| Question ID | Pertinente pour M3 ? | Raisonnement |
|---|---|---|
| E34-E38, N17, N41 |  Non | Comprhension diagnostic  M1 |
| E39-E41, O17-O21, O24 |  Non | Accs soins  M2 |
| E45 |  Non | Suivi addictologie  M4. Mais utilise dans M4_STD_01 qui est reprise par M3 dans cross-activation |
| E47 |  Cross-utilise | Plan de crise  M4, mais **utilise dans V4_M3_CCC_02 et V4_M3_STD_04**. La question reste en M4, l'activation est cross-MP. |
| E48/E49 |  Non | Suivi psy/addiction  M4 |
| E50 |  Cross-utilise | Observance traitement  M4, mais **utilise dans V4_M3_CCC_03 et V4_M3_STD_05** |
| E51 |  Cross-utilise | Motivation addiction  M4, mais **utilise dans V4_M3_CCC_03** |
| E52 |  Cross-utilise | Coordinateur  M5, mais **utilise dans V4_M3_CCC_01** |
| E53-E60 |  Non | Coordination/vision globale  M5/M6 |

>  **Pattern original** : M3 n'utilise PAS ses propres questions dans 3/3 rgles CCC. Il combine des signaux de M4 et M5 pour dtecter des situations composites plus graves. C'est un design **sentinelle** : M3 surveille les signaux des autres MP pour dclencher des alertes croises.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Questions  se poser  Action 1

| # | Question | Rponse |
|---|---|---|
| 1.1 | Catgories distinctes ? |  Urgences/crises, ruptures de suivi, bilan de synthse, post-hospitalisation = 4 axes |
| 1.2 | Angle mort ? | Non  les 4 questions couvrent bien les 4 axes |
| 1.3 | Fusionner ? |  E42 (urgences) et E43 (ruptures) pourraient tre dans la mme CAT car les deux traitent de l'instabilit du suivi. Mais cliniquement : urgences = vnements aigus, ruptures = absence prolonge. Garder spar. |
| 1.4 | clater ? | Non |
| 1.5 | Combien ? | 3 catgories. 4 serait trop pour 4 questions (1Q = 1 CAT est trop fin). Fusionner E42+E43 dans CAT_01. |

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | M3_CAT_01 | Stabilit du suivi mdical | Dtecter et rduire les urgences non anticipes et les ruptures de suivi | Legacy  (E42, E43) |
| 2 | M3_CAT_02 | Bilan de synthse global | Organiser un bilan multi-pathologies pour structurer le parcours | Legacy  (E44) |
| 3 | M3_CAT_03 | Suivi post-hospitalisation | Scuriser les sorties d'hospitalisation | Legacy  (E46) |

###  Raisonnement

> **Pourquoi 3 et pas 4 ?** E42 et E43 sont deux faces d'un mme problme : l'instabilit du parcours. Les urgences (E42) sont souvent la consquence de ruptures (E43). Les regrouper dans CAT_01 permet une rponse intgre ("stabiliser le suivi"). Sparer serait artificiel car les MT sont similaires (rvaluer la planification).
>
> **Pourquoi pas 2 ?** Le bilan de synthse (CAT_02) est un acte spcifique, distinct du monitoring quotidien (CAT_01) et du post-hospitalier (CAT_03). C'est un bilan multi-pathologies formel, pas une simple vrification de continuit.

> **Dcision Dr. Monka** :  Valid 3 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Questions  se poser  Action 2

| # | Question | Rponse |
|---|---|---|
| 2.1 | Chaque question  1 rgle ? |  4/4  E42, E43 (via cross dans M2_CCC), E44, E46 toutes dans des rgles |
| 2.2 | Combos cliniquement significatifs ? |  Les 3 CCC font des combos cross-MP pertinents |
| 2.3 | Niveaux justifis ? |  STD = signal isol, CCC = combo multi-MP |
| 2.4 | Combos multi-questions ? |  3 CCC composites |
| 2.5 | Rponses extrmes non exploites ? |  E42  4 (4+ urgences/mois) n'a pas de rgle spcifique Critique |
| 2.6 | 2 niveaux par catgorie ? |  CAT_01  (STD+CCC), CAT_02  (STD+CCC), CAT_03  (STD+CCC). K3 OK ! |
| 2.7 | Rgle active plusieurs CAT ? | Non |

>  **Attention** : Certaines rgles de M3 utilisent des questions d'autres MPs. Le rattachement  une CAT de M3 est bas sur le SENS CLINIQUE, pas sur la question source.

### Catgorie 1  Stabilit du suivi mdical

> **E42** :  RDV mdicaux non prvus ce mois-ci ? 
> Options :  Aucun /  1 seul /  **2** /  3 /  4 /  5 /  6

> **E43** :  Priodes sans suivi mdical ces 12 derniers mois ? 
> Options :  Non /  **Oui, 3-6 mois** /  **Oui, plusieurs priodes ou +6 mois** /  Je ne sais pas

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M3_STD_01 | E42  2 | Activer CAT_01 | 2 RDV non programms = instabilit du parcours | Legacy  |
|  CCC |  |  Aucun CCC propre  CAT_01 |  |  |  |

>  **E43 n'a pas de rgle legacy propre** dans M3 (elle est en cross-activation depuis M2_CCC_02). Mais E43 est rattache  M3_RECO_02  il y a une reco sans rgle associe directe.

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M3_STD_P01 | E43  {"Oui, 3-6 mois", "Oui, plusieurs priodes ou +6 mois"} | Activer CAT_01 | Rupture de suivi avre  risque de perte de chance |  Propos |
|  CCC | V4_M3_CCC_P01 | E42  3 **ET** E43  {"Oui, plusieurs priodes ou +6 mois"} | Activer CAT_01 | Urgences frquentes + ruptures prolonges = parcours instable |  Propos |
|  Critique | V4_M3_CRIT_P01 | E42  4 | Activer CAT_01 | 4+ urgences/mois = situation de crise mdicale aigu |  Propos |

> **K3 CAT_01** :  STD + CCC + CRIT (si propositions valides)

### Catgorie 2  Bilan de synthse global

> **E44** :  Bilan de synthse dj ralis ? 
> Options :  Oui, rcemment /  **Oui, mais il y a +1 an** /  **Non, jamais** /  Je ne sais pas

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M3_STD_02 | E44 = "Non, jamais" | Activer CAT_02 | Aucun bilan global  risque d'approche fragmente | Legacy  |
|  CCC | V4_M3_CCC_01 | E44 = "Non, jamais" **ET** E52 = "Non, personne ne coordonne vraiment" | Activer CAT_02 | Pas de bilan + pas de coordinateur  parcours non structur | Legacy  (cross E52/M5) |

> **K3 CAT_02** :  2 niveaux (STD + CCC)

>  **Proposition** : Ajouter une rgle STD pour E44 = "Oui, mais il y a +1 an" (bilan ancien)  le bilan existe mais n'est plus  jour. Cliniquement pertinent pour les pathologies volutives.

### Catgorie 3  Suivi post-hospitalisation

> **E46** :  Suivi post-hospitalisation organis ? 
> Options :  Oui, clairement organis /  **Partiellement** /  **Non, nous avons d tout organiser seuls** /  Pas hospitalis rcemment

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M3_STD_03 | E46 = "Non, nous avons d tout organiser seuls" | Activer CAT_03 | Sortie d'hospitalisation non encadre | Legacy  |
|  CCC | V4_M3_CCC_02 | E47 = "Non, on improvise" **ET** E46 = "Non, nous avons d tout organiser seuls" | Activer CAT_03 | Pas de plan de crise + pas de suivi post-hospit = vulnrabilit maximale | Legacy  (cross E47/M4) |

> **K3 CAT_03** :  2 niveaux (STD + CCC)

>  **Proposition** : Ajouter une rgle STD pour E46 = "Partiellement"  le suivi existe mais est incomplet. C'est un signal faible qui mrite attention.

### Rgles cross-activant d'AUTRES CAT depuis M3

> Les rgles suivantes sont dans le scope M3 mais utilisent des questions de M4/M5. Elles doivent tre documentes ici mme si les questions sources ne sont pas rattaches  M3.

| Rgle ID | Questions | Sens clinique | CAT active | Source |
|---|---|---|---|---|
| V4_M3_STD_04 | E47 (M4) | Pas de plan en cas d'aggravation |  Cross  pertinent pour CAT_03 (gestion urgence) | Legacy  |
| V4_M3_STD_05 | E50 (M4) | Pas d'observance traitement psy |  Cross  mdicalement li  l'instabilit (CAT_01) | Legacy  |
| V4_M3_CCC_03 | E50 + E51 (M4) | Troubles psy/addictifs sans prise en charge ni adhsion |  Cross  combo M4 pur activant M3 | Legacy  |

>  **Observation** : V4_M3_STD_04, STD_05, et CCC_03 sont des rgles M3 qui utilisent EXCLUSIVEMENT des questions de M4. Elles sont probablement mieux places **dans M4** directement. Le fait qu'elles soient dans M3 cre une confusion car M3 se retrouve avec 8 rgles pour 4 questions propres.
>
> **Proposition** : Dplacer STD_04, STD_05, et CCC_03 dans M4. Cela donnerait  M3 un profil cohrent de 5 rgles (3 STD + 2 CCC) toutes sur ses propres questions + E52 (M5).

###  Raisonnement

> **Legacy** : M3 est le **MP le mieux dot en rgles de V5** (8 rgles, K3 conforme), mais 3 de ces rgles sont des "intrus" qui utilisent uniquement des questions de M4 (E47, E50, E51). Le vrai profil de M3 serait 5 rgles propres + cross-E52.
>
> **M3 est le MP "sentinelle"** : il surveille les signaux des autres MP pour dtecter des situations de crise composites. C'est un design original mais qui cre de la complexit. Si on dplace les 3 rgles intrus vers M4, M3 garde son rle de sentinelle via CCC_01 (E52/M5) et CCC_02 (E47/M4), mais les signaux psy purs (STD_04, STD_05, CCC_03) sont mieux grs par M4.

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification |
|---|---|---|
| 1 | STD_P01 : E43 = rupture de suivi | E43 n'a pas de rgle propre dans M3 malgr sa reco |
| 2 | CCC_P01 : E42  3 + E43 = ruptures prolonges | Combo instabilit maximale |
| 3 | CRIT_P01 : E42  4 | Situation de crise aigu (4+ urgences/mois) |
| 4 | STD : E44 = "il y a +1 an" | Bilan ancien,  renouveler |
| 5 | STD : E46 = "Partiellement" | Suivi post-hospit incomplet |
| 6 | **Dplacer STD_04, STD_05, CCC_03 vers M4** | Questions 100% M4, pas de lien avec M3 propre |

> **Contrle K3** :  CAT_01  / CAT_02  / CAT_03   
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

### CAT_01  Stabilit du suivi mdical

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_004 | changer avec l'aidant sur les situations ayant conduit  ces RDV | ORGA | IDEC |  | Legacy  |
| MT_V4_025 | Identifier le motif du RDV imprvu | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_027 | Analyser la rcurrence des situations d'urgence | ORGA | IDEC |  | Legacy  |
| MT_V4_056 | Proposer un temps de synthse mdicale | SEC | IDEC |  | Legacy  |
| MT_V4_061 | Vrifier la continuit du suivi mdical | SEC | IDEC |  | Legacy  |
| MT_V4_063 | Vrifier la rgularit du suivi mdical | SEC | IDEC |  | Legacy  |
| MT_V4_065 | Proposer un temps de concertation ou de synthse mdicale | SEC | IDEC |  | Legacy  |
| MT_V4_067 | Confirmer la stabilit du suivi mdical | SEC | IDEC |  | Legacy  |
| MT_V4_078 | Proposer une rvaluation du plan de soins | SEC | IDEC |  | Legacy  |
| MT_V4_090 | Confirmer la continuit du suivi mdical | SEC | IDEC |  | Legacy  |
| MT_V4_097 | changer avec l'aidant sur les raisons de la rupture de suivi | SEC | IDEC |  | Legacy  |

####  Pourquoi 11 MT ?

**Pourquoi pas 1 de moins ?**
-  **MT quasi-doublons dtects** :
  - MT_V4_056 ("temps de synthse mdicale")  MT_V4_065 ("temps de concertation ou de synthse mdicale")  **fusionner**
  - MT_V4_061 ("vrifier continuit")  MT_V4_063 ("vrifier rgularit")  MT_V4_090 ("confirmer continuit")  MT_V4_067 ("confirmer stabilit")  **4 MT quasi-identiques  fusionner en 1-2**
- Aprs fusion : ~6-7 MT  proportionnel (T4 OK)

**Pourquoi pas 1 de plus ?**
-  **Proposition** : MT MED "Solliciter un avis mdical sur la rcurrence des urgences" (acteur Mdecin traitant). Actuellement, les MT sont toutes ORGA/SEC ct IDEC  pas de levier mdical direct.

>  **8 MT SEC sur 11**  ratio trs lev mais justifi pour un MP de surveillance. La vrification de continuit EST le cur de M3.

### CAT_02  Bilan de synthse global

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_123 | Vrifier la mise en uvre des recommandations du bilan | MED | Mdecin traitant |  | Legacy  |
| MT_V4_127 | Informer sur l'intrt d'une consultation de synthse | MED | Professionnel de sant |  | Legacy  |
| MT_V4_130 | Identifier les volutions depuis le dernier bilan | MED | Mdecin traitant |  | Legacy  |

####  Pourquoi 3 MT ?

**Pourquoi pas 1 de moins ?** Chaque MT couvre une phase : informer (127)  identifier les changements (130)  vrifier la mise en uvre (123). Squence logique complte (T6 ).

**Pourquoi pas 1 de plus ?**
-  **Proposition** : MT ORGA "Aider  la prise de RDV pour le bilan de synthse" (acteur IDEC). Actuellement, toutes les MT sont MED  l'IDEC n'a pas de rle oprationnel dans cette CAT.

>  **CAT_02 : 3 MT MED contributives  ASR OK**  c'est la CAT la plus propre de M3.

### CAT_03  Suivi post-hospitalisation

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_118 | Vrifier le respect des RDV programms | INFO | IDEC |  | Legacy  |
| MT_V4_134 | Reprendre les lments de sortie d'hospitalisation | STRUC | IDEC |  | Legacy  |
| MT_V4_137 | Noter l'absence d'hospitalisation rcente | STRUC | IDEC |  | Legacy  |

####  Pourquoi 3 MT ?

**Pourquoi pas 1 de moins ?**
- MT_V4_137 ("noter absence d'hospitalisation") est un **flag moteur**, pas une vraie MT. Mme cas que MT_V4_050 de M1. **Proposition : retirer.**

**Pourquoi pas 1 de plus ?**
-  **Proposition** : MT SEC "Contacter le mdecin traitant pour vrifier la mise en place du suivi post-sortie" (acteur IDEC). Actuellement, on reprend les documents (STRUC) et on vrifie les RDV (INFO) mais on ne VRIFIE PAS le suivi effectif avec le MT.

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | Fusionner MT_V4_056 et MT_V4_065 (synthse mdicale) |  Propos |  |
| 2 | Fusionner MT_V4_061/063/067/090 (vrifier continuit  4) |  Propos |  |
| 3 | Retirer MT_V4_137 (flag moteur) |  Propos |  |
| 4 | Ajouter MT MED : avis mdical sur rcurrence urgences (CAT_01) |  Propos | MT_V5_M3_P01 |
| 5 | Ajouter MT ORGA : prise RDV bilan synthse (CAT_02) |  Propos | MT_V5_M3_P02 |
| 6 | Ajouter MT SEC : contact MT post-hospitalisation (CAT_03) |  Propos | MT_V5_M3_P03 |

> **Condition ASR par catgorie** :
> - CAT_01 :  8 (SEC 8)  ASR complte 
> - CAT_02 :  3 (MED 3)  ASR complte 
> - CAT_03 :  1 (STRUC 1)  ASR partielle  ( 2 si proposition valide)

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

### Tableau consolid des MT de M3 (rsum)

> **Rsum** :
> - Total MT : 17 legacy ( ~11 aprs fusions/retrait)
> - Domaine  Mdical : 5 / Domaine  Mdico-social : 12
> - Contributives () : 12  SEC: 8, MED: 3, STRUC: 1
> - Non-contributives () : 5  ORGA: 3, INFO: 1, STRUC: 1 (flag)

###  Propositions d'amlioration

| # | Proposition | Justification |
|---|---|---|
| 1 | CAT_01 : 4 MT quasi-identiques  fusionner | Rduire la redondance SEC |
| 2 | CAT_03 : MT_V4_137 = flag, pas MT clinique | Convertir en logique moteur |
| 3 | Ratio SEC trs lev (8/12 contributives) mais justifi pour MP surveillance | Documenter |

> **Dcision Dr. Monka** :  Valid |  Modifications

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording des Recos de base

| CAT | Reco ID | Reco Utilisateur _(legacy)_ | Reco IDEC _(legacy)_ | / |
|---|---|---|---|---|
| CAT_01 | M3_RECO_01 | Rvaluer l'organisation du suivi mdical | Alerter les professionnels rfrents |  "Rvaluer" = verbe d'action |
| CAT_01 | M3_RECO_02 | Clarifier l'historique du suivi mdical | Analyser l'impact de l'absence de suivi |  Verbe d'action |
| CAT_02 | M3_RECO_03 | Rvaluer l'intrt d'un nouveau bilan de synthse | Faire le point avec l'aidant et les professionnels |  Verbe d'action |
| CAT_03 | M3_RECO_04 | Complter et scuriser le suivi post-hospitalisation | Identifier les lments manquants dans le suivi |  Clair |

>  **Wording propos** :

| CAT | Reco ID | Reco Utilisateur propose | Reco IDEC propose |
|---|---|---|---|
| CAT_01 | M3_RECO_01 | Organisation du suivi mdical  revoir | Rvaluer le plan de soins avec les rfrents |
| CAT_01 | M3_RECO_02 | Ruptures de suivi mdical dtectes | Analyser les causes de rupture et scuriser la continuit |
| CAT_02 | M3_RECO_03 | Bilan de synthse  envisager | Organiser un bilan multi-pathologies avec le MT |
| CAT_03 | M3_RECO_04 | Suivi post-hospitalisation  scuriser | Reprendre les lments de sortie et vrifier le suivi |

> **Dcision Dr. Monka** :  Wording valid |  Corrections

---

### Phase 2  Versioning par criticit

#### CAT_01  Stabilit suivi

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Le suivi mdical a connu des perturbations  restez vigilant et programmez les prochains RDV | Vrifier la continuit du suivi et analyser les consultations imprvues |
|  CCC ( 30j) | Le parcours mdical est instable  une coordination renforce est ncessaire | Organiser une synthse mdicale et rvaluer le plan de soins |
|  Critique ( 7j) | Urgences mdicales rptes ce mois  une intervention immdiate est ncessaire | Convoquer une runion de coordination en urgence |

#### CAT_02  Bilan de synthse

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Un bilan de synthse global pourrait aider  mieux structurer le parcours | Informer sur l'intrt d'un bilan et vrifier l'ligibilit |
|  CCC ( 30j) | Aucun bilan global et pas de coordination  une mise  plat est ncessaire | Organiser un bilan multi-pathologies dans les 30 jours |

#### CAT_03  Post-hospitalisation

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | La sortie d'hospitalisation ncessite un suivi  votre IDEC peut aider | Reprendre les lments de sortie et vrifier les RDV programms |
|  CCC ( 30j) | Aucun suivi aprs l'hospitalisation et pas de plan de crise  situation  scuriser rapidement | Contacter le MT et organiser le suivi post-hospitalier dans les 30 jours |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

| | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Prvention | Le parcours mdical de votre proche est stable  continuez  anticiper les RDV et  signaler tout changement | Confirmer la stabilit du suivi  maintenir la vigilance sur les signaux d'alerte |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V5_M3_PREV_01 | Vrifier les prochains RDV mdicaux programms | ORGA | Interroger l'aidant sur le calendrier mdical en cours | Quels sont les prochains RDV mdicaux de votre proche ? Sont-ils programms ? |
| MT_V5_M3_PREV_02 | Rappeler les conduites  tenir en cas d'urgence | INFO | Vrifier que l'aidant connat les numros et procdures d'urgence | Savez-vous qui appeler et quoi faire en cas d'aggravation brutale ? |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question  1 rgle |  4/4 |  4/4 | Dj couvert |
| 2 | Chaque rgle  1 reco |  |  | 4 recos |
| 3 | Chaque catgorie  ses MT |  |  | MT redistribues |
| 4 | K3 (2 niveaux/CAT) |  3/3 |  3/3 | Dj K3-conforme |
| 5 | Aucune MT orpheline |  |  | Aprs fusions |
| 6 | Reco prvention |  |  | +1 reco + 2 MT |
| 7 | Wording OK |  |  si valid | |
| 8 | Sens clinique renseign |  |  | |

> **Anomalies dtectes** :
> -  **4 MT quasi-identiques CAT_01**  fusionner
> -  **3 rgles M3 100% questions M4**  propos de dplacer vers M4
> -  **MT_V4_137** (flag moteur)  retirer

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 0 formalises | 3 |
| Rgles d'activation | :5 :3 :0 | :7 :4 :1 (si propositions + dplacement M4) |
| MT totales | 17 | ~11 (aprs fusions) + 3 proposes = 14 |
| MT contributives | 12 | ~9 + 3 = 12 |
| Domaine  /  | 5 / 12 | 6 / 8 |
| ASR | Non formule | M3-A  / M3-B  |
| Reco prvention |  |  |
| Checks OK | 5/8 | 8/8 |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 3 catgories formalises (stabilit, bilan, post-hospit) |  Propos |
| 2 | Propos de dplacer STD_04, STD_05, CCC_03 vers M4 (questions 100% M4) |  Propos |
| 3 | 3 rgles nouvelles proposes (STD_P01, CCC_P01, CRIT_P01) |  Propos |
| 4 | 4 MT fusionnes, 1 MT retire (flag), 3 proposes |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | **Dplacer 3 rgles vers M4 ?** Si oui, M3 passe de 8  5 rgles. |  |
| 2 | **Fusionner les 4 MT de vrification continuit** |  |
| 3 | **Ajouter CRIT_P01 (E42  4)**  seuil  valider avec Dr. Monka |  |
| 4 | **E44 "il y a +1 an"  STD ?** |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,ay=`#  Fiche de Validation MP  M4  Addictions, troubles psychiques et suivi spcialis

> **Vulnrabilit** : V5  Parcours Mdical  
> **ASR** :  M4-A : Suivi spcialis psy/addiction engag et rgulier | M4-B : Plan de crise formalis et connu de l'aidant   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## BIG PICTURE  Positionnement M4

| MP | Sous-bloc | Nb Q | Thmatique |
|---|---|---|---|
| M1 | 6.1  Diagnostic | 7 | Comprhension maladie, errance, ALD |
| M2 | 6.2  Accs soins | 9 | Proximit, difficults accs, ETP, spcialistes |
| M3 | 6.3  Urgences/hospit | 4 | RDV imprvus, ruptures suivi, bilan synthse |
| **M4** | **6.4  Addictions/psy** | **7** | **Suivi addictologie, suivi post-hospit, plan crise, suivi psy, observance, motivation aide** |
| M5 | 6.5  Coordination | 4 | Rfrent, intervenants domicile |
| M6 | 6.6  Vision globale | 6 | Organisation, inquitudes, plan de route |

M4 est le **MP spcialis** de V5. Il couvre les suivis les plus complexes : addictologie, psychiatrie, et gestion de crise. C'est le MP avec le plus de **questions conditionnelles** (4/7 sont conditionnes sur N3  nature de la pathologie) et le plus de **diversit d'acteurs** (psychiatres, psychologues, CMP, CSAPA, travailleurs sociaux, associations).

>  **Particularit M4** : MP le **plus pauvre en rgles legacy** de V5 (**1 seule rgle : V4_M4_STD_01 sur E45**) mais le plus riche en recos (7) et MTs (22). C'est un dsquilibre massif : 7 recos sont TOUTES rattaches  la seule rgle STD_01, ce qui signifie que le moteur fait "tout ou rien"  soit E45 dclenche et on dploie 7 recos, soit rien ne se passe.

>  **Cross-activations depuis M3** : 3 rgles legacy de M3 (STD_04, STD_05, CCC_03) utilisent EXCLUSIVEMENT des questions M4 (E47, E50, E51). Proposition M3 : les dplacer vers M4. Si accept, M4 passe de 1  4 rgles.

>  **E46 est cross-MP** : mappe  M3 ET M4. Le suivi post-hospitalisation peut relever des deux primtres.

---

## QUESTIONS TRANSVERSALES

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** | Actions 1, 3 |
| T3 | **Actionnabilit** | Actions 3, 4, 5 |
| T4 | **Proportionnalit** | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** | Actions 3, 4 |
| T6 | **Chane d'action** | Actions 3, 4 |

---

## 0. DONNES FIGES  Questions rattaches  M4

| # | Question ID | Libell | Classification | Options de rponse | Condition |
|---|---|---|---|---|---|
| 1 | E45 | Votre proche est-il suivi dans un service ou une consultation spcialise en addictologie ? | Facteur | Oui, rgulirement  Oui, mais il/elle n'y va plus  Non  Je ne sais pas | N3 = 5 (addiction) |
| 2 | E46 | Aprs la dernire hospitalisation, un suivi mdical a-t-il t organis ? | Facteur | Oui, clairement organis  Partiellement  Non, nous avons d tout organiser seuls  Pas hospitalis rcemment |  (universelle) |
| 3 | E47 | Quand l'tat de sant se dgrade brusquement, avez-vous un plan clair ? | tat | Oui, on sait quoi faire  On a quelques repres, mais pas trs clair  Non, on improvise systmatiquement |  (universelle) |
| 4 | E48 | Votre proche est-il suivi pour ses troubles psychiques ? (choix multiples) | Facteur | MG  Psychiatre libral  CMP/CMPP  Hpital de jour  Psychologue  Aucun suivi | N3 = 4 (trouble psy) |
| 5 | E49 | Dans le suivi de l'addiction, quels types de professionnels sont impliqus ? (choix multiples) | Facteur | Mdecin  Psychiatre/psychologue  Travailleur social  Infirmier  Association  Aucun suivi structur | N3 = 5 (addiction) |
| 6 | E50 | Votre proche est-il suivi pour ses troubles psychiques et suit-il son traitement si prescrit ? | tat | Oui, suivi rgulier et traitement bien pris  Oui, mais irrgulier  Non, pas de suivi | N3 = 4 (trouble psy) |
| 7 | E51 | Votre proche est-il prt  tre aid pour son addiction ? | tat | Oui  Peut-tre / selon les conditions  Non  Je ne sais pas | N3 = 5 (addiction) |

> Total : **7 questions** rattaches  M4
>  **4 questions conditionnelles** : E45/E49/E51 (N3=5, addictions) et E48/E50 (N3=4, trouble psy). Ces MP ne s'affichent que pour les proches avec addiction ou trouble psy.
>  **E46 et E47 sont universelles**  elles s'affichent pour tous et ne dpendent pas de N3.

### Questions candidates exclues

| Question ID | Pertinente pour M4 ? | Raisonnement |
|---|---|---|
| E34-E38 |  Non | Diagnostic  M1 |
| E39-E41, O17-O24 |  Non | Accs soins  M2 |
| E42/E43 |  Non | Instabilit suivi  M3. E42/E43 sont dans cross-activation M2_CCC_02 |
| E44 |  Non | Bilan synthse  M3 |
| E52/E53/E55/O59 |  Non | Coordination  M5 |
| E54/E56-E60 |  Non | Vision globale  M6 |
| N17 |  Non | Type handicap  M1 |

> Pas de question candidate exclue ambigu  M4 est un primtre clairement spcialis.

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Questions  se poser  Action 1

| # | Question | Rponse |
|---|---|---|
| 1.1 | Catgories distinctes ? |  Addictologie, suivi psy, gestion de crise, post-hospitalisation = 4 axes |
| 1.2 | Angle mort ? |  E49 (professionnels impliqus en addiction) est de contexte pur  pas d'action ddie ncessaire |
| 1.3 | Fusionner ? |  Addictologie (E45, E49, E51) et suivi psy (E48, E50) pourraient tre fusionns car les intervenants se chevauchent (psychiatres). Mais cliniquement : l'addictologie = problmatique de MOTIVATION et ADHSION, la psy = problmatique de CONTINUIT de suivi. Garder spar. |
| 1.4 | clater ? | Non |
| 1.5 | Combien ? | 4 catgories pour 7 questions = proportionnel (T4 OK) |

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | M4_CAT_01 | Suivi addictologique | Engager ou maintenir le suivi addictologie (CSAPA, addictologue) | Legacy  (E45, E49, E51) |
| 2 | M4_CAT_02 | Suivi psychiatrique et psychologique | Assurer la continuit et l'observance du suivi psy | Legacy  (E48, E50) |
| 3 | M4_CAT_03 | Plan de crise et gestion de l'aggravation | Formaliser un plan d'action en cas de dgradation brusque | Legacy  (E47) |
| 4 | M4_CAT_04 | Suivi post-hospitalisation (psy/addiction) | Scuriser le retour aprs hospitalisation en milieu spcialis | Legacy  (E46) |

###  Raisonnement

> **Pourquoi 4 et pas 3 ?** CAT_03 (plan de crise) est un acte transversal qui s'applique indpendamment de la nature du trouble (psy ou addiction). C'est un protocole d'urgence qui mrite sa propre CAT car les MTs sont spcifiques (construire un plan, identifier les numros, tester le plan).
>
> **Pourquoi pas 5 ?** E49 (professionnels impliqus) est une question de profiling, pas d'action. Elle enrichit le contexte de CAT_01 mais ne gnre pas de catgorie propre.
>
> **CAT_04 partage E46 avec M3.** M3_CAT_03 traite le post-hospit du point de vue surveillance/coordination gnrale. M4_CAT_04 traite le post-hospit du point de vue suivi spcialis psy/addiction. Les MTs sont diffrentes.

> **Dcision Dr. Monka** :  Valid 4 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Questions  se poser  Action 2

| # | Question | Rponse |
|---|---|---|
| 2.1 | Chaque question  1 rgle ? |  **6/7 orphelines**. Seule E45 est dans une rgle. E46, E47, E48, E49, E50, E51 n'ont AUCUNE rgle propre. |
| 2.2 | Combos significatifs ? |  Pas de combo exploit |
| 2.3 | Niveaux justifis ? |  1 seul STD, 0 CCC  pas de gradation |
| 2.4 | Combos multi-questions ? |  Le legacy ne fait aucun combo |
| 2.5 | Rponses extrmes ? |  E50 = "Non, pas de suivi" (trouble psy non trait !), E51 = "Non" (refus d'aide addiction), E47 = "Non, on improvise"  AUCUNE RGLE |
| 2.6 | 2 niveaux par CAT ? |  0/4 K3-conforme |
| 2.7 | Rgle active plusieurs CAT ? | Non |

>  **M4 a le PIRE ratio questions/rgles de tout V5** : 1 rgle pour 7 questions. Et cette rgle (E45) ne couvre que les addictions. Les troubles psy (E48, E50) n'ont **aucune** activation.

### Rgles legacy de M3  dplacer (proposition)

> Si proposition M3 accepte, ces 3 rgles sont transfres  M4 :

| Rgle ID | Questions | Niveau | CAT propose | Source |
|---|---|---|---|---|
| V4_M3_STD_04 ( M4) | E47 | Standard | CAT_03 | Legacy M3 |
| V4_M3_STD_05 ( M4) | E50 | Standard | CAT_02 | Legacy M3 |
| V4_M3_CCC_03 ( M4) | E50 + E51 | CCC | CAT_01/CAT_02 cross | Legacy M3 |

### Catgorie 1  Suivi addictologique

> **E45** :  Votre proche est-il suivi en addictologie ? 
> Options :  Oui, rgulirement /  **Oui, mais il/elle n'y va plus** /  **Non** /  **Je ne sais pas**

> **E51** :  Votre proche est-il prt  tre aid pour son addiction ? 
> Options :  Oui /  **Peut-tre / selon les conditions** /  **Non** /  **Je ne sais pas**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M4_STD_01 | E45 = "Non" | Activer CAT_01 | Pas de suivi addictologie | Legacy  |
|  CCC (transfr M3) | V4_M3_CCC_03 | E50 = "Non" **ET** E51 = "Non" | Activer CAT_01 + CAT_02 | Troubles psy/addictifs sans prise en charge et refus d'aide | Legacy  (ex-M3) |

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M4_STD_P01 | E45 = "Oui, mais n'y va plus" | Activer CAT_01 | Suivi addictologie interrompu  risque de rechute |  Propos |
|  Standard | V4_M4_STD_P02 | E51 = "Non" | Activer CAT_01 | Refus d'aide explicite  approche motivationnelle ncessaire |  Propos |
|  CCC | V4_M4_CCC_P01 | E45  {"Non", "Je ne sais pas"} **ET** E51 = "Non" | Activer CAT_01 | Pas de suivi + refus d'aide = impasse addictologique |  Propos |

> **K3 CAT_01** :  si propositions valides (STD + CCC)

### Catgorie 2  Suivi psychiatrique et psychologique

> **E48** :  Votre proche est-il suivi pour troubles psychiques ? 
> Options :  MG /  Psychiatre libral /  CMP/CMPP /  Hpital de jour /  Psychologue /  **Aucun suivi actuellement**

> **E50** :  Suivi psy et observance traitement ? 
> Options :  Oui, rgulier et traitement bien pris /  **Oui, mais irrgulier** /  **Non, pas de suivi** /  **Je ne sais pas**

>  **0 rgle legacy propre**  CAT_02.

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M4_STD_P03 | E50 = "Oui, mais irrgulier" | Activer CAT_02 | Observance fragile  risque de dcompensation |  Propos |
|  Standard (transfr M3) | V4_M3_STD_05 | E50 = "Non, pas de suivi" | Activer CAT_02 | Trouble psy non trait | Legacy M3 |
|  CCC | V4_M4_CCC_P02 | E48 = "Aucun suivi" **ET** E50 = "Non" | Activer CAT_02 | Aucune structure de suivi psy  risque maximal |  Propos |
|  Critique | V4_M4_CRIT_P01 | E50 = "Non" **ET** E51 = "Non" **ET** E47 = "Non, on improvise" | Activer CAT_02 + CAT_03 | Triple signal : pas de suivi + refus d'aide + pas de plan de crise = danger immdiat |  Propos |

> **K3 CAT_02** :  si propositions valides (STD + CCC + CRIT)

### Catgorie 3  Plan de crise et gestion aggravation

> **E47** :  Plan clair en cas de dgradation brusque ? 
> Options :  Oui /  **Quelques repres, pas trs clair** /  **Non, on improvise**

>  **0 rgle legacy propre**  CAT_03.

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard (transfr M3) | V4_M3_STD_04 | E47 = "Non, on improvise" | Activer CAT_03 | Pas de plan d'urgence | Legacy M3 |
|  Standard | V4_M4_STD_P04 | E47 = "Quelques repres, pas trs clair" | Activer CAT_03 | Plan flou   formaliser |  Propos |
|  CCC | V4_M4_CCC_P03 | E47 = "Non, on improvise" **ET** E46 = "Non, nous avons d tout organiser seuls" | Activer CAT_03 | Pas de plan + pas de suivi post-hospit = danger |  Propos (= ex-V4_M3_CCC_02 lgrement modifi) |

> **K3 CAT_03** :  si propositions valides (STD + CCC)

### Catgorie 4  Suivi post-hospitalisation (psy/addiction)

> **E46** :  Suivi post-hospitalisation organis ? 
> Options :  Oui /  **Partiellement** /  **Non, tout organiser seuls** /  Pas hospitalis rcemment

>  **0 rgle legacy propre** dans M4.

>  E46 a dj des rgles dans M3 (STD_03 et CCC_02). L'activation M4 est **complmentaire** : elle cible le suivi post-hospit dans le contexte PSY/ADDICTION spcifiquement.

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M4_STD_P05 | E46 = "Partiellement" | Activer CAT_04 | Suivi post-hospit incomplet en contexte psy/addiction |  Propos |
|  CCC | V4_M4_CCC_P04 | E46 = "Non" **ET** E50 = "Non" | Activer CAT_04 | Sortie d'hospit non encadre + pas de suivi psy |  Propos |

> **K3 CAT_04** :  si propositions valides (STD + CCC)

###  Raisonnement

> **Legacy** : 1 rgle pour 7 questions = **le pire ratio de tout V5 et de toutes les vulnrabilits V1-V5**. Mme F5 de V4 (2 rgles pour 12 questions) faisait mieux. La raison : les questions psy/addiction sont apparues tard dans le questionnaire (conditionnelles sur N3) et le legacy n'a pas eu le temps de produire des rgles granulaires.
>
> **Si dplacement M3 accept + propositions** : M4 passe de **1 rgle  14 rgles** (3 transfres + 10 nouvelles + 1 existante). C'est une transformation majeure.
>
> **L'absence de rgles explique pourquoi 7 recos sont lies  1 seule activation** : le moteur dclenche V4_M4_STD_01 (E45) et dploie les 7 recos en bloc. Avec les nouvelles rgles, chaque reco peut tre cible par sa propre activation.

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification |
|---|---|---|
| 1 | STD_P01 : E45 = "n'y va plus" | Suivi addictologie interrompu |
| 2 | STD_P02 : E51 = "Non" (refus aide) | Marqueur de blocage motivationnel |
| 3 | CCC_P01 : E45 + E51 = combo | Impasse complte en addictologie |
| 4 | STD_P03 : E50 = "irrgulier" | Observance fragile |
| 5 | CCC_P02 : E48 + E50 = combo | Pas de suivi + pas d'observance |
| 6 | CRIT_P01 : E50 + E51 + E47 triple signal | Danger immdiat  psy non traite, refus aide, pas de plan |
| 7 | STD_P04 : E47 = "quelques repres" | Plan flou   formaliser |
| 8 | CCC_P03 : E47 + E46 = combo | Improvisation + pas de suivi post-hospit |
| 9 | STD_P05 : E46 = "Partiellement" | Post-hospit incomplet |
| 10 | CCC_P04 : E46 + E50 = combo | Sortie non encadre + pas de suivi psy |

> **Contrle K3** :  CAT_01  / CAT_02  / CAT_03  / CAT_04   
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

### CAT_01  Suivi addictologique

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_062 | Confirmer avec l'aidant le nombre d'heures envisages pour le SAD | SEC | IDEC |  | Legacy  |
| MT_V4_076 | Confirmer avec l'aidant le nombre d'heures pour le SSIAD | SEC | IDEC |  | Legacy  |
| MT_V4_080 | Vrifier la rgularit du suivi et l'adhsion du proche | SEC | IDEC |  | Legacy  |
| MT_V4_100 | Analyser l'impact de l'absence de suivi | SEC | IDEC |  | Legacy  |

>  **MT_V4_062 et MT_V4_076** (heures SAD/SSIAD) sont des MTs de **V4 (Fragilit physique)**, pas d'addictologie. Elles semblent **mal affectes**  probablement un artefact de la migration data. 
> - SAD = Service d'Aide  Domicile
> - SSIAD = Service de Soins Infirmiers  Domicile
>  Ces MT devraient tre en V4/F6 (Autonomie fonctionnelle), pas en V5/M4 (Addictions).
>
> **Proposition** : Retirer MT_V4_062 et MT_V4_076 de M4. Les remplacer par des MTs addictologie pertinentes.

**MTs restantes aprs nettoyage :**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_080 | Vrifier la rgularit du suivi et l'adhsion du proche | SEC | IDEC |  | Legacy  |
| MT_V4_100 | Analyser l'impact de l'absence de suivi | SEC | IDEC |  | Legacy  |

>  **Seulement 2 MT pour CAT_01** aprs nettoyage. C'est insuffisant.

**MTs PROPOSES pour CAT_01 :**

| MT_ID | Libell | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V5_M4_P01 | Orienter vers un CSAPA ou une consultation d'addictologie | MED | IDEC |  |  Propos |
| MT_V5_M4_P02 | Informer sur les groupes de parole et programmes de soutien | INFO | IDEC |  |  Propos |
| MT_V5_M4_P03 | Explorer la motivation au changement avec l'aidant | ORGA | Aidant (autonome) |  |  Propos |

### CAT_02  Suivi psychiatrique et psychologique

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_031 | Explorer les signes de souffrance psychique | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_066 | Vrifier les modalits de suivi aprs prise en charge | SEC | IDEC |  | Legacy  |
| MT_V4_082 | Suivre les objectifs de prise en charge | SEC | IDEC |  | Legacy  |
| MT_V4_099 | Vrifier la continuit du suivi psychiatrique | SEC | IDEC |  | Legacy  |
| MT_V4_010 | Explorer les besoins en sant mentale | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_114 | Faire le point avec l'aidant et/ou les professionnels | INFO | IDEC |  | Legacy  |
| MT_V4_122 | Vrifier la rgularit du suivi et la bonne observance du traitement | MED | Professionnel de sant |  | Legacy  |

####  Pourquoi 7 MT ?

**Pourquoi pas 1 de moins ?**
- MT_V4_010 ("explorer besoins en sant mentale") et MT_V4_031 ("explorer signes souffrance psychique") sont trs proches. Diffrence : 010 = valuation large des besoins, 031 = dtection spcifique de souffrance. **Proposition : garder les 2**  le champ est cliniquement diffrent.

**Pourquoi pas 1 de plus ?**
-  **Proposition** : MT STRUC "Formaliser un rseau de soins psy (CMP, psychiatre, psychologue)"  actuellement on vrifie le suivi mais on ne construit pas le rseau si inexistant.

### CAT_03  Plan de crise

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_012 | Construire un plan d'urgence personnalis | ORGA | IDEC |  | Legacy  |
| MT_V4_030 | Identifier les zones de flou dans la conduite  tenir | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_109 | Vrifier que le plan est connu et  jour | INFO | IDEC |  | Legacy  |

####  Pourquoi 3 MT ?

**Pourquoi pas 1 de moins ?** Les 3 MT couvrent : construire (012)  identifier les flous (030)  vrifier l'actualisation (109). Squence logique complte.

**Pourquoi pas 1 de plus ?**
-  **0 MT contributive () dans CAT_03 !** C'est un problme : 3 MT (ORGA + INFO) mais aucune SEC, STRUC, ou MED. Le plan de crise est "construit" et "vrifi" mais jamais formellement STRUCTUR dans un document ou VALID mdicalement.
-  **Propositions** :
  - MT_V5_M4_P04 : "Formaliser le plan de crise dans un document partag" (type STRUC, acteur IDEC)  
  - MT_V5_M4_P05 : "Faire valider le plan de crise par le mdecin rfrent" (type MED, acteur Mdecin traitant)  

### CAT_04  Suivi post-hospitalisation (psy/addiction)

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_048 | Explorer la situation avec l'aidant et le proche | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_059 | Vrifier la frquence et le contenu du suivi infirmier | SEC | IDEC |  | Legacy  |
| MT_V4_089 | Vrifier la rgularit du suivi | SEC | IDEC |  | Legacy  |
| MT_V4_092 | Vrifier la continuit du suivi psychologique ou psychiatrique | SEC | Psychologue |  | Legacy  |

**MTs de M4_RECO_07 (motivation aide addiction) :**

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_006 | Valoriser la motivation exprime | ORGA | IDEC |  | Legacy  |
| MT_V4_013 | Explorer les conditions et les rticences exprimes | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_017 | Rester disponible et maintenir un lien | ORGA | IDEC |  | Legacy  |
| MT_V4_035 | changer avec l'aidant pour mieux comprendre la situation | ORGA | IDEC |  | Legacy  |

>  Les 4 MT de M4_RECO_07 sont toutes ORGA (). Aucune action contributive pour un patient qui refuse l'aide. C'est cliniquement cohrent : face  un refus, on reste dans l'accompagnement motivationnel, pas dans l'action directive. Mais il manque un levier mdical.

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | Retirer MT_V4_062 et MT_V4_076 (MTs V4/SAD/SSIAD mal affectes) |  Propos |  |
| 2 | Ajouter MT MED : orienter vers CSAPA (CAT_01) |  Propos | MT_V5_M4_P01 |
| 3 | Ajouter MT INFO : groupes de parole (CAT_01) |  Propos | MT_V5_M4_P02 |
| 4 | Ajouter MT ORGA : motivation au changement (CAT_01) |  Propos | MT_V5_M4_P03 |
| 5 | Ajouter MT STRUC : formaliser plan de crise (CAT_03) |  Propos | MT_V5_M4_P04 |
| 6 | Ajouter MT MED : valider plan de crise avec MT (CAT_03) |  Propos | MT_V5_M4_P05 |
| 7 | Ajouter MT STRUC : rseau de soins psy (CAT_02) |  Propos | MT_V5_M4_P06 |

> **Condition ASR par catgorie** :
> - CAT_01 :  2 (SEC) + 1 propos (MED)  ASR possible 
> - CAT_02 :  4 (SEC 3 + MED 1)  ASR complte 
> - CAT_03 :  0 legacy  **ASR impossible**  ( 2 si propositions valides)
> - CAT_04 :  3 (SEC 3)  ASR complte 

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

### Tableau consolid des MT de M4 (rsum)

> **Rsum** :
> - Total MT : 22 legacy ( 20 aprs retrait MTs V4) + 6 proposes = 26
> - Domaine  Mdical : 4 / Domaine  Mdico-social : 18
> - Contributives () : 10  SEC: 8, MED: 2
> - Non-contributives () : 12  ORGA: 10, INFO: 2
> - Acteurs : IDEC (dominant), Aidant (autonome) 5, Professionnel de sant 1, Psychologue 1

>  **Ratio ORGA/contributive : 10/12 non-contributives sont ORGA**. M4 est un MP d'accompagnement motivationnel  les MTs ORGA sont cliniquement justifies (on explore, on valorise, on maintient le lien). Mais l'absence de MED/MED dans CAT_01 et CAT_03 est un frein  l'ASR.

###  Propositions d'amlioration

| # | Proposition | Justification |
|---|---|---|
| 1 | MT_V4_062/076 (SAD/SSIAD) mal affectes  retirer | Erreur d'affectation data |
| 2 | CAT_03 : 0 MT contributive  ajouter STRUC + MED | Plan de crise = document formel  STRUC + validation mdicale |
| 3 | Diversifier les acteurs : ajouter CMP, CSAPA, addictologue | M4 est le MP avec le plus de structures spcialises, mais elles ne sont pas dans les MTs |

> **Dcision Dr. Monka** :  Valid |  Modifications

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording des Recos de base

| CAT | Reco ID | Reco Utilisateur _(legacy)_ | Source Q | / |
|---|---|---|---|---|
| CAT_01 | M4_RECO_01 | Clarifier la situation mdicale et l'historique de suivi | E45 |  Trop gnrique pour de l'addictologie |
| CAT_04 | M4_RECO_02 | Complter et scuriser le suivi post-hospitalisation | E46 |  |
| CAT_03 | M4_RECO_03 | Clarifier et formaliser un plan d'action en cas de crise | E47 |  Pertinent |
| CAT_02 | M4_RECO_04 | Maintenir le lien avec la structure et suivre le projet de soins | E48 |  |
| CAT_01 | M4_RECO_05 | Maintenir l'accompagnement social et ducatif | E49 |  "Accompagnement social et ducatif"  trop V4 (fragilit). En contexte addiction = "maintenir le lien thrapeutique" |
| CAT_02 | M4_RECO_06 | Clarifier la situation de suivi et de traitement | E50 |  Verbe d'action |
| CAT_01 | M4_RECO_07 | Mettre en place rapidement un accompagnement adapt | E51 |  Verbe d'action |

>  **Wording propos** :

| CAT | Reco ID | Reco Utilisateur propose | Reco IDEC propose |
|---|---|---|---|
| CAT_01 | M4_RECO_01 | Suivi addictologique  valuer | Explorer avec l'aidant l'historique et les besoins en addictologie |
| CAT_04 | M4_RECO_02 | Suivi post-hospitalisation  scuriser | Identifier les lments manquants dans le relais post-hospit |
| CAT_03 | M4_RECO_03 | Plan de crise  formaliser | Construire un plan d'urgence personnalis avec l'aidant |
| CAT_02 | M4_RECO_04 | Continuit du suivi psy  maintenir | Vrifier le lien avec la structure de soin et le projet thrapeutique |
| CAT_01 | M4_RECO_05 | Lien thrapeutique  maintenir | Assurer la continuit de l'accompagnement addictologique |
| CAT_02 | M4_RECO_06 | Situation de suivi psy  clarifier | valuer l'observance du traitement et la rgularit du suivi |
| CAT_01 | M4_RECO_07 | Accompagnement adapt  engager rapidement | Mettre en place un accompagnement ajust  la motivation du proche |

> **Dcision Dr. Monka** :  Wording valid |  Corrections

---

### Phase 2  Versioning par criticit

#### CAT_01  Suivi addictologique

> Niveaux :  STD_01/P01/P02 /  CCC_P01

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Un suivi en addictologie peut aider votre proche  parlez-en avec votre IDEC | valuer la situation addictologique et orienter vers une consultation spcialise |
|  CCC ( 30j) | Votre proche n'a pas de suivi addictologique structur  une orientation rapide est recommande | Orienter vers un CSAPA ou un addictologue dans les 30 jours |

#### CAT_02  Suivi psy

> Niveaux :  STD_P03/M3_STD_05 /  CCC_P02 /  CRIT_P01

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Le suivi psy de votre proche mrite attention  restez en lien avec les professionnels | Vrifier la rgularit du suivi et l'observance du traitement |
|  CCC ( 30j) | Votre proche n'a pas de suivi psy structur  une mise en place rapide est recommande | Contacter un CMP ou un psychiatre pour initier un suivi |
|  Critique ( 7j) | Aucun suivi, refus d'aide et pas de plan de crise  situation de danger, contactez immdiatement | Dclencher un contact mdical d'urgence et activer le rseau de crise |

#### CAT_03  Plan de crise

> Niveaux :  STD_P04/M3_STD_04 /  CCC_P03

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | En cas de crise, il est utile d'avoir un plan  votre IDEC peut vous aider  le construire | Formaliser avec l'aidant un plan d'action en cas de dgradation |
|  CCC ( 30j) | Pas de plan de crise et sortie d'hospit non organise  formalisez rapidement un plan avec votre IDEC | Construire et faire valider un plan d'urgence dans les 30 jours |

#### CAT_04  Post-hospitalisation psy/addiction

> Niveaux :  STD_P05 /  CCC_P04

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Le suivi aprs l'hospitalisation ncessite attention  contactez votre IDEC | Reprendre les lments de sortie et vrifier la continuit du suivi psy/addiction |
|  CCC ( 30j) | Sortie d'hospitalisation sans suivi psy structur  situation  scuriser rapidement | Organiser le relais avec la structure d'aval dans les 30 jours |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

| | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Prvention | Le suivi spcialis de votre proche semble en place  restez vigilant et maintenez le lien avec les professionnels | Confirmer la stabilit du suivi psy/addiction et vrifier l'actualisation du plan de crise |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V5_M4_PREV_01 | Vrifier la rgularit du suivi spcialis | ORGA | Interroger l'aidant sur la frquence des consultations psy/addiction | Le suivi de votre proche est-il rgulier ? Quand a eu lieu le dernier RDV ? |
| MT_V5_M4_PREV_02 | Rappeler l'existence du plan de crise | INFO | Vrifier que l'aidant connat le plan de crise et les numros d'urgence | Avez-vous le plan de crise  porte de main ? Connaissez-vous les numros  appeler ? |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question  1 rgle |  1/7 |  7/7 (E49 = contexte) | +10 proposes + 3 transfres |
| 2 | Chaque rgle  1 reco |  |  | 7 recos |
| 3 | Chaque catgorie  ses MT |  |  | MT nettoyes et enrichies |
| 4 | K3 (2 niveaux/CAT) |  0/4 |  4/4 | +10 rgles + transferts |
| 5 | Aucune MT orpheline |  |  | Aprs nettoyage |
| 6 | Reco prvention |  |  | +1 reco + 2 MT |
| 7 | Wording OK |  |  si valid | |
| 8 | Sens clinique renseign |  |  | |

> **Anomalies dtectes** :
> -  **MT_V4_062 et MT_V4_076 (SAD/SSIAD)** mal affectes  M4  artefact data
> -  **CAT_03 : 0 MT contributive**  plan de crise sans formalisation
> -  **7 recos lies  1 seule rgle**  dsquilibre massif corrig par nouvelles activations
> -  **4/7 questions conditionnelles**  M4 ne s'active que pour proches psy/addiction

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 0 formalises | 4 |
| Rgles d'activation | :1 :0 :0 | :7 :4 :1 (si transferts M3 + propositions) |
| MT totales | 22 | 20 (-2 erreurs) + 6 proposes = 26 |
| MT contributives | 10 | 12 (+2 proposes) |
| Domaine  /  | 4 / 18 | 7 / 19 |
| ASR | Non formule | M4-A  (dpend propositions) / M4-B  si STRUC valide |
| Reco prvention |  |  |
| Checks OK | 1/8 | 8/8 (si propositions valides) |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 4 catgories formalises (addiction, psy, crise, post-hospit) |  Propos |
| 2 | 3 rgles transfres de M3 (questions 100% M4) |  Propos |
| 3 | 10 nouvelles rgles proposes (K3 0/4  4/4) |  Propos |
| 4 | 1 rgle Critique (triple signal E50+E51+E47) |  Propos |
| 5 | MT_V4_062/076 (SAD/SSIAD) retires  erreur data |  Propos |
| 6 | 6 MTs proposes (CAT_01 + CAT_03) |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | **Accepter le transfert des 3 rgles M3  M4** |  |
| 2 | **Valider la rgle Critique (triple signal psy)**  seuil le plus grave de V5 |  |
| 3 | **CAT_03 : ajouter MT contributives plan de crise** |  |
| 4 | **Retirer MT_V4_062/076** (erreur data SAD/SSIAD) |  |
| 5 | **7 recos  Redistribuer sur nouvelles rgles** (pas toutes sur STD_01) |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,ry=`#  Fiche de Validation MP  M5  Coordination des soins et personne de rfrence

> **Vulnrabilit** : V5  Parcours Mdical  
> **ASR** :  M5-A : Coordinateur de soins identifi et oprationnel | M5-B : Articulation inter-professionnels structure   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## BIG PICTURE  Positionnement M5

| MP | Sous-bloc | Nb Q | Thmatique |
|---|---|---|---|
| M1 | 6.1  Diagnostic | 7 | Comprhension maladie, errance, ALD |
| M2 | 6.2  Accs soins | 9 | Proximit, difficults accs, ETP, spcialistes |
| M3 | 6.3  Urgences/hospit | 4 | RDV imprvus, ruptures suivi, bilan synthse |
| M4 | 6.4  Addictions/psy | 7 | Suivi addictologie, suivi psy, plan crise |
| **M5** | **6.5  Coordination** | **4** | **Coordinateur soins, rfrent professionnel, besoin coordination, intervenants domicile** |
| M6 | 6.6  Vision globale | 6 | Organisation, inquitudes, plan de route, valuations |

M5 est le **MP pivot** de V5. La coordination est le fil conducteur qui fait que les M1-M4 fonctionnent ensemble. Un aidant peut avoir un bon diagnostic (M1), un bon accs aux soins (M2), un suivi stable (M3) et un traitement psy observ (M4), mais si personne ne coordonne, tout s'effondre.

>  **Particularit M5** : MP compact (4Q) mais transversal. E52 (coordinateur) est utilise en cross-activation dans **V4_M3_CCC_01** (M3). O59 (intervenants domicile) est une question de PROFILING  choix multiples qui cartographie les acteurs au domicile.

>  **Cross-activations** :
> - V4_M5_CCC_01 utilise **E54** (M6  organisation soins) + **E57** (M6  plan de route). C'est une CCC cross-M6.
> - E52 est utilise dans V4_M3_CCC_01 (M3) pour dtecter "pas de bilan + pas de coordinateur".

---

## QUESTIONS TRANSVERSALES

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** | Actions 1, 3 |
| T3 | **Actionnabilit** | Actions 3, 4, 5 |
| T4 | **Proportionnalit** | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** | Actions 3, 4 |
| T6 | **Chane d'action** | Actions 3, 4 |

---

## 0. DONNES FIGES  Questions rattaches  M5

| # | Question ID | Libell | Classification | Options de rponse |
|---|---|---|---|---|
| 1 | E52 | Avez-vous une personne de rfrence qui coordonne les soins de votre proche ? | Facteur | Oui, clairement identifie  Oui, mais pas sre du rle  Non, personne ne coordonne vraiment  Je ne sais pas |
| 2 | E53 | Pour vous, qui est le professionnel 'rfrent' pour la sant de votre proche ? | Facteur | Mdecin traitant  Spcialiste hospitalier  Spcialiste libral  Aucune personne  Je ne sais pas |
| 3 | E55 | Une meilleure coordination amliorerait-elle beaucoup la situation ? | tat | Non, pas vraiment  Oui, un peu  Oui, normment |
| 4 | O59 | Professionnels/services intervenant dj au domicile ? (choix multiples) | Facteur | SAD/aux. vie  SAD/aide mnagre  SSIAD  IDE libral  Kin  APA  Tl-assistance  Portage repas  ducateur  Podologue  Ergothrapeute  Aucun  Autre |

> Total : **4 questions** rattaches  M5
>  **O59 est un inventaire** (choix multiples, 13 options)  c'est du PROFILING, pas une mesure d'tat. Elle sert  contextualiser les actions, pas  dclencher des rgles.

### Questions candidates exclues

| Question ID | Pertinente pour M5 ? | Raisonnement |
|---|---|---|
| E54 |  Cross-utilise | Organisation des soins  M6, mais **utilise dans V4_M5_CCC_01** (cross-activation M6M5) |
| E57 |  Cross-utilise | Plan de route  M6, mais **utilise dans V4_M5_CCC_01** |
| E42-E51 |  Non | Domaines M3/M4 |
| E34-E41 |  Non | Domaines M1/M2 |
| E56/E58-E60 |  Non | Vision globale / valuations  M6 |

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Questions  se poser  Action 1

| # | Question | Rponse |
|---|---|---|
| 1.1 | Catgories distinctes ? |  Coordinateur de soins, rfrent mdical, besoin de coordination, intervenants domicile = 3-4 axes |
| 1.2 | Angle mort ? |  O59 = inventaire profiling  gnrer une reco serait artificiel |
| 1.3 | Fusionner ? |  E52 (coordinateur) et E53 (rfrent) traitent du mme sujet : "qui pilote ?". Fusionner = cohrent. |
| 1.4 | clater ? | Non |
| 1.5 | Combien ? | 2 catgories. E52+E53 = CAT_01 (qui pilote ?), E55 = CAT_02 (besoin ressenti). O59 = pas de CAT propre (profiling). |

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | M5_CAT_01 | Pilotage et rfrent mdical | Identifier et structurer la fonction de coordination/rfrent | Legacy  (E52, E53) |
| 2 | M5_CAT_02 | Besoin de coordination | valuer et rpondre au besoin de coordination exprim | Legacy  (E55) |

###  Raisonnement

> **Pourquoi 2 et pas 3 ?** O59 inventorie les intervenants domicile mais ne dclenche pas d'action spcifique. Son rle est de contextualiser les recos de CAT_01 (adapter les actions en fonction des acteurs dj prsents). Crer une CAT_03 "intervenants domicile" serait artificiel.
>
> **CCC cross-M6** : V4_M5_CCC_01 (E54+E57) peut activer M5 quand la situation globale est ingrable. Cliniquement, a active CAT_01 (pas de pilotage  besoin de mettre en place la coordination).

> **Dcision Dr. Monka** :  Valid 2 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Questions  se poser  Action 2

| # | Question | Rponse |
|---|---|---|
| 2.1 | Chaque question  1 rgle ? |  1/4  Seule E52 est dans une rgle propre. E53, E55, O59 = orphelines. |
| 2.2 | Combos significatifs ? |  CCC_01 (E54+E57 cross-M6) est pertinent |
| 2.3 | Niveaux justifis ? |  1 STD + 1 CCC  K3 OK pour CAT_01 si CCC rattach |
| 2.4 | Combos multi-questions ? |  1 combo (CCC_01) |
| 2.5 | Rponses extrmes ? |  E53 = "Aucune personne rfrente"  pas de rgle ! |
| 2.6 | 2 niveaux par CAT ? |  CAT_01  (STD+CCC), CAT_02  (0 |
| 2.7 | Rgle active plusieurs CAT ? | CCC_01 peut tre rattach  CAT_01 |

### Catgorie 1  Pilotage et rfrent mdical

> **E52** :  Personne de rfrence qui coordonne les soins ? 
> Options :  Oui, identifie /  **Oui, mais pas sr du rle** /  **Non, personne ne coordonne** /  **Je ne sais pas**

> **E53** :  Qui est le professionnel rfrent ? 
> Options :  Mdecin traitant /  Spcialiste hospitalier /  Spcialiste libral /  **Aucune personne** /  **Je ne sais pas**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M5_STD_01 | E52 = "Non, personne ne coordonne vraiment" | Activer CAT_01 | Aucun coordinateur identifi | Legacy  |
|  CCC | V4_M5_CCC_01 | E54  {"Souvent trs complique", "Ingrable"} **ET** E57 = "Non, on avance au jour le jour" | Activer CAT_01 | Parcours non lisible, non pilot, risque de rupture | Legacy  (cross E54+E57/M6) |

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M5_STD_P01 | E53 = "Aucune personne vraiment rfrente" | Activer CAT_01 | Pas de rfrent identifi  risque de fragmentation |  Propos |
|  Standard | V4_M5_STD_P02 | E52 = "Oui, mais je ne suis pas sre de son rle" | Activer CAT_01 | Coordinateur flou  clarifier le rle |  Propos |
|  CCC | V4_M5_CCC_P01 | E52 = "Non" **ET** E53 = "Aucune personne" | Activer CAT_01 | Ni coordinateur ni rfrent  vide complet |  Propos |
|  Critique | V4_M5_CRIT_P01 | E52 = "Non" **ET** E55 = "Oui, normment" | Activer CAT_01 + CAT_02 | Aucun coordinateur + besoin maximal ressenti = urgence |  Propos |

> **K3 CAT_01** :  STD + CCC + CRIT (si propositions valides)

### Catgorie 2  Besoin de coordination

> **E55** :  Une meilleure coordination amliorerait la situation ? 
> Options :  Non, pas vraiment /  **Oui, un peu** /  **Oui, normment**

>  **0 rgle legacy** pour CAT_02.

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M5_STD_P03 | E55 = "Oui, normment" | Activer CAT_02 | Besoin ressenti maximal   prendre en compte |  Propos |
|  CCC | V4_M5_CCC_P02 | E55 = "Oui, normment" **ET** E52 = "Non" | Activer CAT_02 | Besoin maximal + pas de coordinateur |  Propos |

> **K3 CAT_02** :  si propositions valides (STD + CCC)

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification |
|---|---|---|
| 1 | STD_P01 : E53 = "Aucune personne rfrente" | Pas de rfrent malgr des besoins |
| 2 | STD_P02 : E52 = "pas sr du rle" | Coordinateur flou   clarifier |
| 3 | CCC_P01 : E52 + E53 = double vide | Ni coordination ni rfrence |
| 4 | CRIT_P01 : E52 + E55 = vide + besoin max | Urgence de coordination |
| 5 | STD_P03 : E55 = "normment" | Besoin ressenti simple |
| 6 | CCC_P02 : E55 + E52 = combo | Besoin + vide |

> **Contrle K3** :  CAT_01  / CAT_02   
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

### CAT_01  Pilotage et rfrent

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_047 | Valoriser l'organisation actuelle des soins | ORGA | IDEC |  | Legacy  |
| MT_V4_102 | Expliquer le rle de coordination des soins | INFO | IDEC |  | Legacy  |
| MT_V4_105 | Vrifier que le rle de coordination est bien oprationnel | INFO | IDEC |  | Legacy  |
| MT_V4_002 | Prendre contact avec un ergothrapeute du territoire | ORGA | IDEC |  | Legacy  |
| MT_V4_049 | Identifier un professionnel rfrent | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_093 | Prendre RDV avec ducateur spcialis / contacter CMP de secteur | SEC | IDEC |  | Legacy  |
| MT_V4_101 | Vrifier la transmission des informations mdicales | INFO | IDEC |  | Legacy  |
| MT_V4_129 | Confirmer le rle de rfrent du mdecin traitant | MED | Mdecin traitant |  | Legacy  |
| MT_V4_132 | Identifier le champ d'intervention du spcialiste | MED | Mdecin spcialiste |  | Legacy  |

####  Pourquoi 9 MT ?

**Pourquoi pas 1 de moins ?**
-  MT_V4_002 ("prendre contact avec ergothrapeute") est trs spcifique et semble mal affecte dans M5. Un ergothrapeute relve de M6/valuations spcialises ou de V4 (fragilit physique). **Proposition : dplacer ou retirer.**
-  MT_V4_093 ("prendre RDV ducateur spcialis / CMP") est trs directif et nomme des structures spcifiques. En M5, le rle est d'identifier LE rfrent, pas de contacter tous les intervenants. **Proposition : reformuler** en "Explorer les dispositifs de coordination du territoire".

**Pourquoi pas 1 de plus ?**
-  **Proposition** : MT STRUC "Formaliser un annuaire du rseau de soins du proche" (acteur IDEC). O59 inventorie les intervenants mais aucune MT ne structure cette information.

### CAT_02  Besoin de coordination

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_021 | Mettre en place une coordination renforce et prioritaire | ORGA | IDEC |  | Legacy  |
| MT_V4_029 | Valoriser la prparation et la coordination existantes | ORGA | IDEC |  | Legacy  |
| MT_V4_036 | Identifier les points o la coordination pourrait tre amliore | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_041 | Analyser les dysfonctionnements de l'organisation actuelle | ORGA | IDEC |  | Legacy  |
| MT_V4_042 | Confirmer que la coordination actuelle est juge suffisante | ORGA | IDEC |  | Legacy  |
| MT_V4_075 | Prioriser la coordination comme axe majeur d'intervention | SEC | IDEC |  | Legacy  |

####  Pourquoi 6 MT ?

**Pourquoi pas 1 de moins ?**
-  MT_V4_029 ("valoriser la coordination existante") et MT_V4_042 ("confirmer coordination suffisante") semblent redondantes dans le contexte d'un MP de coordination DFAILLANTE. Si la coordination est bonne, on est en prvention, pas en action. **Proposition : dplacer vers la reco prvention.**

**Pourquoi pas 1 de plus ?**
-  **5 MT ORGA sur 6**  un seul SEC (MT_V4_075). Pas de MED, pas de STRUC. La coordination EST une action ORGA par nature, mais il manque un levier mdical.
-  **Proposition** : MT MED "Solliciter un RDV de concertation pluriprofessionnelle" (acteur Mdecin traitant)  transforme le besoin de coordination en action mdicale concrte.

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | Retirer/dplacer MT_V4_002 (ergothrapeute  M6 ou V4) |  Propos |  |
| 2 | Reformuler MT_V4_093 (trop directif) |  Propos |  |
| 3 | Ajouter MT STRUC : annuaire rseau soins (CAT_01) |  Propos | MT_V5_M5_P01 |
| 4 | Dplacer MT_V4_029/042 vers prvention |  Propos |  |
| 5 | Ajouter MT MED : concertation pluriprofessionnelle (CAT_02) |  Propos | MT_V5_M5_P02 |

> **Condition ASR par catgorie** :
> - CAT_01 :  3 (SEC 1 + MED 2)  ASR complte 
> - CAT_02 :  1 (SEC 1)  ASR partielle  ( 2 si proposition valide)

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

### Tableau consolid des MT de M5 (rsum)

> **Rsum** :
> - Total MT : 15 legacy + 2 proposes = 17
> - Domaine  Mdical : 5 / Domaine  Mdico-social : 10
> - Contributives () : 3  SEC: 1, MED: 2
> - Non-contributives () : 12  ORGA: 8, INFO: 4

>  **Ratio contributive/non-contributive : 3/15 = 20%**. C'est le ratio le plus faible de V5 (et l'un des plus faibles du KERNEL). La coordination est par nature un acte ORGA/INFO (on organise, on informe, on met en lien), mais la faiblesse en SEC/MED/STRUC limite la traabilit des actions.

###  Propositions

| # | Proposition | Justification |
|---|---|---|
| 1 | MT_V4_002 (ergothrapeute)  M6 ou V4 | Inadapte au primtre coordination |
| 2 | Augmenter le ratio contributif (SEC/MED/STRUC) | 20%  cible 30% minimum |

> **Dcision Dr. Monka** :  Valid |  Modifications

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording des Recos de base

| CAT | Reco ID | Reco Utilisateur _(legacy)_ | / |
|---|---|---|---|
| CAT_01 | M5_RECO_01 | Clarifier l'organisation actuelle des soins |  "Clarifier" = trop flou pour de la coordination |
| CAT_01 | M5_RECO_02 | Faire le point avec l'aidant sur les intervenants existants |  Correct |
| CAT_02 | M5_RECO_03 | Mettre en place une coordination renforce et structure |  Pertinent |

>  **Wording propos** :

| CAT | Reco ID | Reco Utilisateur propose | Reco IDEC propose |
|---|---|---|---|
| CAT_01 | M5_RECO_01 | Coordination des soins  structurer | Identifier et formaliser le rle du coordinateur |
| CAT_01 | M5_RECO_02 | Rfrent mdical  confirmer | Confirmer le rfrent avec le MT et cartographier le rseau |
| CAT_02 | M5_RECO_03 | Coordination renforce ncessaire | Organiser une concertation pluriprofessionnelle |

> **Dcision Dr. Monka** :  Wording valid |  Corrections

---

### Phase 2  Versioning par criticit

#### CAT_01  Pilotage et rfrent

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Le parcours de soins de votre proche gagnerait  avoir un coordinateur clairement identifi | Identifier un coordinateur et clarifier son rle auprs de l'aidant |
|  CCC ( 30j) | Aucun coordinateur et organisation juge ingrable  une mise en place rapide est ncessaire | Organiser une concertation pour mettre en place une coordination dans les 30 jours |
|  Critique ( 7j) | Aucune coordination et besoin maximal exprim  contactez immdiatement votre IDEC | Dclencher une mise en place de coordination en urgence et identifier un rfrent sous 7 jours |

#### CAT_02  Besoin de coordination

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Vous ressentez un besoin fort de coordination  parlez-en avec votre IDEC | valuer les points de friction et proposer des amliorations cibles |
|  CCC ( 30j) | Besoin de coordination maximal sans coordinateur  une intervention structure est urgente | Mettre en place un plan de coordination dans les 30 jours |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

| | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Prvention | La coordination des soins de votre proche fonctionne bien  continuez  maintenir le lien avec les professionnels | Confirmer la stabilit de la coordination  vrifier que le rfrent est toujours en place |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V5_M5_PREV_01 | Vrifier que le coordinateur est toujours en place | ORGA | Interroger l'aidant sur l'volution de la coordination | La personne qui coordonne les soins de votre proche est-elle toujours la mme ? |
| MT_V5_M5_PREV_02 | Confirmer que les transmissions d'informations fonctionnent | INFO | Vrifier les flux d'information entre professionnels | Les professionnels qui s'occupent de votre proche communiquent-ils bien entre eux ? |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question  1 rgle |  1/4 |  3/4 (O59 = profiling) | +5 proposes |
| 2 | Chaque rgle  1 reco |  |  | 3 recos |
| 3 | Chaque catgorie  ses MT |  |  | MT bien distribues |
| 4 | K3 (2 niveaux/CAT) |  1/2 |  2/2 | +propositions |
| 5 | Aucune MT orpheline |  |  | Aprs nettoyage |
| 6 | Reco prvention |  |  | +1 reco + 2 MT |
| 7 | Wording OK |  |  si valid | |
| 8 | Sens clinique renseign |  |  | |

> **Anomalies dtectes** :
> -  **MT_V4_002** (ergothrapeute)  mal affecte  M5
> -  **Ratio contributif 20%**  le plus faible de V5
> -  **O59 n'a pas de rgle**  profiling pur, acceptable mais  documenter

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 0 formalises | 2 |
| Rgles d'activation | :1 :1 | :4 :3 :1 |
| MT totales | 15 | 13 (-2 dplaces) + 2 proposes = 15 |
| MT contributives | 3 | 4 (+1 propose) |
| Domaine  /  | 5 / 10 | 5 / 10 |
| ASR | Non formule | M5-A  / M5-B  |
| Reco prvention |  |  |
| Checks OK | 3/8 | 8/8 |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 2 catgories formalises (pilotage/rfrent, besoin coordination) |  Propos |
| 2 | 6 nouvelles rgles proposes (dont 1 Critique) |  Propos |
| 3 | O59 documente comme profiling  pas de rgle |  Propos |
| 4 | MT_V4_002  dplacer |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | **Valider le CRIT_P01** (E52+E55 = vide + besoin max) |  |
| 2 | **Ajouter MT contributives** pour augmenter ratio |  |
| 3 | **O59 : gnrer des MT contextuelles ?** (si aucun intervenant domicile  alerte) |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`,oy=`#  Fiche de Validation MP  M6  Vision globale du parcours de soins et valuations spcialises

> **Vulnrabilit** : V5  Parcours Mdical  
> **ASR** :  M6-A : Parcours de soins lisible et pilot | M6-B : valuations spcialises ralises et suivies   
> **Date de validation** : ../../2026  
> **Valid par** :  Dr. Monka |  Antonin  
> **Statut** :   valider

---

## BIG PICTURE  Positionnement M6

| MP | Sous-bloc | Nb Q | Thmatique |
|---|---|---|---|
| M1 | 6.1  Diagnostic | 7 | Comprhension maladie, errance, ALD |
| M2 | 6.2  Accs soins | 9 | Proximit, difficults accs, ETP, spcialistes |
| M3 | 6.3  Urgences/hospit | 4 | RDV imprvus, ruptures suivi, bilan synthse |
| M4 | 6.4  Addictions/psy | 7 | Suivi addictologie, suivi psy, plan crise |
| M5 | 6.5  Coordination | 4 | Coordinateur soins, rfrent professionnel |
| **M6** | **6.6  Vision globale** | **6** | **Organisation soins, inquitudes, plan de route, valuations griatriques, TND** |

M6 est le **MP de synthse** de V5. Il prend du recul sur l'ensemble du parcours : comment l'aidant peroit-il l'organisation ? Qu'est-ce qui l'inquite le plus ? Y a-t-il un plan de route ? Les valuations spcialises (griatriques, TND) sont-elles en place ? C'est le MP qui ferme la boucle.

>  **Particularit M6** : MP le plus **htrogne** de V5  il mlange des questions de perception (E54 organisation, E56 inquitudes, E57 plan de route) avec des questions factuelles (E58 valuations griatriques, E59/E60 TND). Les 2 dernires sont **conditionnelles** (N3 = vieillissement pour E58, N3 = neurodveloppement + O1 = enfant pour E59/E60).

>  **0 rgle legacy**  c'est le MP de V5 avec le pire score : 6 recos TOUTES avec \`activation_rule_id = null\`. Aucune activation programme. Le moteur ne dclenche RIEN pour M6.

>  **Cross-activations** : E54 et E57 sont utilises en cross par V4_M5_CCC_01 (M5).

---

## QUESTIONS TRANSVERSALES

| # | Question transversale | Quand s'y rfrer |
|---|---|---|
| T1 | **Cohrence inter-MP** | Actions 1, 3, 4, 6 |
| T2 | **Couverture clinique** | Actions 1, 3 |
| T3 | **Actionnabilit** | Actions 3, 4, 5 |
| T4 | **Proportionnalit** | Actions 1, 2, 3 |
| T5 | **Autonomie aidant** | Actions 3, 4 |
| T6 | **Chane d'action** | Actions 3, 4 |

---

## 0. DONNES FIGES  Questions rattaches  M6

| # | Question ID | Libell | Classification | Options | Condition |
|---|---|---|---|---|---|
| 1 | E54 | Comment dcririez-vous l'organisation des soins ? | tat | Plutt simple  Grable mais complique  Souvent trs complique  Ingrable |  |
| 2 | E56 | Qu'est-ce qui vous inquite le plus pour la sant dans les prochains mois ? | tat | Chutes  Mmoire/comportement  Alimentation/poids  Urgences  Maintien domicile  Autre  JSP |  |
| 3 | E57 | Impression qu'il existe un plan de route clair pour la suite des soins ? | tat | Oui, c'est clair  Partiellement  Non, on avance au jour le jour |  |
| 4 | E58 | valuation spcialise lie  l'ge (mmoire, griatrie, chutes) ? | Facteur | Consultation mmoire  Bilan griatrique  Bilan chutes  Autre valuation  Aucune | N3 = 1 ou 3 (vieillissement/chronique) |
| 5 | E59 | Enfant orient vers structure TND ? | Facteur | Oui, val en cours  Oui, mais en attente  Non, personne  JSP | N3 = 2 ou 4, O1 = 1 (enfant + neuro) |
| 6 | E60 | Quels professionnels pour l'valuation de l'enfant ? (choix multiples) | Facteur | Pdiatre  Neuropdiatre  Pdopsychiatre  Psychologue  Orthophoniste  Psychomotricien  CAMSP/CMPP  Aucun | N3 = 2 ou 4, O1 = 1 |

> Total : **6 questions** rattaches  M6
>  **E58 = griatrie** : conditionne N3 = 1 (vieillissement) ou 3 (maladie chronique)
>  **E59/E60 = neurodveloppement enfant** : triple condition N3 + O1 = enfant. Population trs spcifique.
>  **E54 et E57 sont universelles**  elles s'affichent pour tous.
>  **E56 est un indicateur de proccupation**  pas de bonne/mauvaise rponse, c'est un signal d'orientation.

### Questions candidates exclues

| Question ID | Pertinente pour M6 ? | Raisonnement |
|---|---|---|
| E52/E53/E55/O59 |  Non | Coordination  M5 |
| E42-E51 |  Non | Urgences/hospit/psy/addiction  M3/M4 |
| E34-E41, N17, O17-O24 |  Non | Diagnostic/accs soins  M1/M2 |

---

## ACTION 1  QUOI : Catgories de Reco/Actions

###  Questions  se poser  Action 1

| # | Question | Rponse |
|---|---|---|
| 1.1 | Catgories distinctes ? |  Vision d'organisation, plan de route, inquitudes, valuations griatriques, valuations TND = 3-5 axes |
| 1.2 | Angle mort ? |  E56 (inquitudes) est un signal d'ORIENTATION  elle dispatche vers d'autres MP/thmatiques (chutes  V4, mmoire  M1/M6, etc.) |
| 1.3 | Fusionner ? |  E54 (organisation) et E57 (plan de route) sont deux faces du mme sujet : "le parcours est-il pilot ?". Fusionner = cohrent. |
| 1.4 | clater ? |  E58 (griatrie) et E59/E60 (TND) couvrent des populations TRS diffrentes (personnes ges vs enfants). Ne PAS fusionner. |
| 1.5 | Combien ? | 4 catgories. E54+E57 = CAT_01 (pilotage global), E56 = CAT_02 (inquitudes), E58 = CAT_03 (griatrie), E59/E60 = CAT_04 (TND). |

### Catgories identifies

| # | Catgorie ID | Nom de l'action | Description clinique courte | Source |
|---|---|---|---|---|
| 1 | M6_CAT_01 | Lisibilit et pilotage du parcours | Rendre l'organisation des soins comprhensible et pilote | Legacy  (E54, E57) |
| 2 | M6_CAT_02 | Inquitudes et anticipation | Identifier et traiter les proccupations principales de l'aidant | Legacy  (E56) |
| 3 | M6_CAT_03 | valuations griatriques | Organiser les bilans spcialiss lis au vieillissement | Legacy  (E58) |
| 4 | M6_CAT_04 | valuations neurodveloppement (TND) | Orienter vers les structures d'valuation des TND enfants | Legacy  (E59, E60) |

###  Raisonnement

> **Pourquoi 4 et pas 3 ?** CAT_03 (griatrie) et CAT_04 (TND) sont mutuellement exclusives (personnes ges vs enfants). Les fusionner serait un non-sens clinique. CAT_02 (inquitudes) est un module d'orientation, pas d'action directe  elle sert  prioriser les interventions des autres MP.
>
> **CAT_01 est le miroir de M5_CAT_01** : M5 installe le coordinateur, M6 vrifie que le rsultat est lisible pour l'aidant. M5 = infrastructures, M6 = perception.
>
> **E56 est un "dispatch center"** : selon la rponse (chutes  V4/F1, mmoire  M1/M6_CAT_03, urgences  M3), on oriente vers d'autres MP. C'est unique dans le KERNEL.

> **Dcision Dr. Monka** :  Valid 4 catgories |  Ajouts |  Suppressions

---

## ACTION 2  QUAND : Rgles d'activation par catgorie

###  Questions  se poser  Action 2

| # | Question | Rponse |
|---|---|---|
| 2.1 | Chaque question  1 rgle ? |  **0/6  AUCUNE question n'a de rgle**. C'est le PIRE score du KERNEL entier. |
| 2.2 | Combos significatifs ? |  0 combo exploit |
| 2.3 | Niveaux justifis ? |  0 niveau  rien n'existe |
| 2.4 | Combos multi-questions ? |  Nant |
| 2.5 | Rponses extrmes ? |  E54 = "Ingrable", E57 = "au jour le jour", E59 = "personne ne nous en a parl"  AUCUNE RGLE |
| 2.6 | 2 niveaux par CAT ? |  0/4 K3-conforme |
| 2.7 | Rgle active plusieurs CAT ? | Non (rien n'existe) |

>  **M6 est le SEUL MP de tout le KERNEL avec 0 rgle d'activation et 6 recos existantes.** Les recos existent mais sont inaccessibles  le moteur ne les dclenche jamais. C'est un MP "mort" dans le moteur legacy.

### Catgorie 1  Lisibilit et pilotage du parcours

> **E54** :  Organisation des soins ? 
> Options :  Plutt simple /  **Grable mais complique** /  **Souvent trs complique** /  **Ingrable**

> **E57** :  Plan de route clair ? 
> Options :  Oui /  **Partiellement** /  **Non, au jour le jour**

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M6_STD_P01 | E57 = "Non, on avance au jour le jour" | Activer CAT_01 | Pas de plan de route  parcours au jour le jour |  Propos |
|  Standard | V4_M6_STD_P02 | E54  {"Souvent trs complique", "Ingrable"} | Activer CAT_01 | Organisation perue comme trs difficile |  Propos |
|  CCC | V4_M6_CCC_P01 | E54  {"Souvent trs complique", "Ingrable"} **ET** E57 = "Non, au jour le jour" | Activer CAT_01 | Parcours non lisible et non pilot |  Propos (= mme condition que V4_M5_CCC_01, mais activant M6 au lieu de M5) |
|  Critique | V4_M6_CRIT_P01 | E54 = "Ingrable" **ET** E57 = "Non, au jour le jour" | Activer CAT_01 | Parcours ingrable + au jour le jour = effondrement |  Propos |

> **K3 CAT_01** :  STD + CCC + CRIT

### Catgorie 2  Inquitudes et anticipation

> **E56** :  Qu'est-ce qui vous inquite le plus ? 
> Options :  Chutes /  Mmoire  comportement /  Alimentation  poids /  Urgences /  Maintien domicile /  Autre /  JSP

> E56 est un **indicateur d'orientation**, pas un dclencheur d'action directe. La rponse guide vers d'autres MP :
> - Chutes  V4/F1 (fragilit physique)
> - Mmoire  M1 (comprhension diagnostic) + M6_CAT_03 (valuation griatrique)
> - Alimentation  V4/F2 (nutrition)
> - Urgences  M3 (suivi mdical)
> - Maintien domicile  V4/F6 (autonomie fonctionnelle)

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M6_STD_P03 | E56 = "Le risque qu'il/elle ne puisse plus rester  domicile" | Activer CAT_02 | Inquitude sur le maintien  domicile  signal d'anticipation majeur |  Propos |
|  CCC | V4_M6_CCC_P02 | E56 = "Les allers-retours aux urgences" **ET** E54  {"Souvent trs complique", "Ingrable"} | Activer CAT_02 + CAT_01 | Inquitude urgences + organisation chaotique = besoin immdiat |  Propos |

> **K3 CAT_02** :  si propositions valides (STD + CCC)

### Catgorie 3  valuations griatriques

> **E58** :  valuation spcialise lie  l'ge ?  (choix multiples)
> Options :  Consultation mmoire /  Bilan griatrique /  Bilan chutes /  Autre /  **Aucune**

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M6_STD_P04 | E58 = "Non, aucune" | Activer CAT_03 | Aucune valuation griatrique ralise |  Propos |
|  CCC | V4_M6_CCC_P03 | E58 = "Non, aucune" **ET** E56  {"Les chutes", "La mmoire, le comportement"} | Activer CAT_03 | Pas de bilan + inquitude chute/mmoire = valuation urgente |  Propos |

> **K3 CAT_03** :  si propositions valides (STD + CCC)

### Catgorie 4  valuations TND (enfants)

> **E59** :  Enfant orient vers structure TND ? 
> Options :  Oui, val en cours /  **Oui, mais en attente** /  **Non, personne ne nous en a parl** /  **JSP**

> **E60** :  Professionnels dj intervenus ?  (choix multiples)
> Options :  Pdiatre  Neuropdiatre  Pdopsychiatre  Psychologue  Orthophoniste  Psychomotricien  CAMSP/CMPP /  **Aucun**

**Rgles PROPOSES :**

| Niveau | Rgle ID | Condition SI | ALORS | Sens clinique | Source |
|---|---|---|---|---|---|
|  Standard | V4_M6_STD_P05 | E59 = "Non, personne ne nous en a parl" | Activer CAT_04 | Enfant TND non orient  risque de perte de chance |  Propos |
|  Standard | V4_M6_STD_P06 | E59 = "Oui, mais nous sommes en attente depuis longtemps" | Activer CAT_04 | Attente prolonge  besoin de solutions transitoires |  Propos |
|  CCC | V4_M6_CCC_P04 | E59 = "Non" **ET** E60  "Aucun de ces professionnels" | Activer CAT_04 | Pas d'orientation + pas d'valuation = vide total |  Propos |

> **K3 CAT_04** :  si propositions valides (STD + CCC)

###  Propositions d'amlioration  Rgles

| # | Proposition | Justification |
|---|---|---|
| 1 | STD_P01 : E57 = "au jour le jour" | Pas de plan de route |
| 2 | STD_P02 : E54 = "trs complique" ou "ingrable" | Organisation perue comme chaotique |
| 3 | CCC_P01 : E54 + E57 combo | Parcours non lisible et non pilot |
| 4 | CRIT_P01 : E54 "Ingrable" + E57 "au jour le jour" | Effondrement total du parcours |
| 5 | STD_P03 : E56 = maintien domicile | Inquitude majeure d'anticipation |
| 6 | CCC_P02 : E56 urgences + E54 organisation chaotique | Double signal |
| 7 | STD_P04 : E58 = aucune valuation griatrique | Bilan manquant |
| 8 | CCC_P03 : E58 + E56 chutes/mmoire combo | Bilan manquant + inquitude cible |
| 9 | STD_P05 : E59 = non orient TND | Perte de chance enfant |
| 10 | STD_P06 : E59 = en attente longue | Dlai d'attente TND |
| 11 | CCC_P04 : E59 + E60 = pas orient + pas de pro | Vide total en TND |

> **M6 passe de 0  11 rgles**  la plus grande transformation de tout le KERNEL.

> **Contrle K3** :  CAT_01  / CAT_02  / CAT_03  / CAT_04   
> **Dcision Dr. Monka** :  Valid |  Ajouts |  Modifications

---

## ACTION 3  COMMENT : Micro-Tches par catgorie

### CAT_01  Lisibilit et pilotage du parcours

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_001 | Identifier les points de complexit dans l'organisation | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_015 | Identifier les zones de flou dans la suite du parcours | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_038 | laborer un plan de soins personnalis et partag | ORGA | IDEC |  | Legacy  |
| MT_V4_072 | Identifier les lments manquants dans le suivi | SEC | IDEC |  | Legacy  |
| MT_V4_115 | Vrifier que le plan de soins est  jour | INFO | IDEC |  | Legacy  |

####  Pourquoi 5 MT ?

**Pourquoi pas 1 de moins ?** MT_V4_001 et MT_V4_015 sont proches ("points de complexit" vs "zones de flou") mais complmentaires : 001 = organisation ACTUELLE, 015 = ce qui vient APRS. Garder les 2.

**Pourquoi pas 1 de plus ?**
-  **1 seul MT contributive () sur 5**  MT_V4_072 (SEC). Le plan de soins est labor (ORGA), vrifi (INFO), mais pas formellement structur (STRUC absent).
-  **Proposition** : MT STRUC "Formaliser un document de synthse du parcours partag avec l'aidant" (acteur IDEC)  rendre le plan lisible en DOCUMENT.

### CAT_02  Inquitudes et anticipation

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_014 | valuer la pertinence de chaque acteur dans le plan d'aide | ORGA | IDEC |  | Legacy  |
| MT_V4_040 | valuer le niveau d'autonomie | ORGA | IDEC |  | Legacy  |
| MT_V4_043 | changer avec l'aidant pour prciser la proccupation | ORGA | IDEC |  | Legacy  |
| MT_V4_070 | Orienter vers une valuation ou un suivi spcialis | SEC | IDEC |  | Legacy  |
| MT_V4_088 | Proposer un temps d'change pour explorer les craintes ventuelles | SEC | IDEC |  | Legacy  |
| MT_V4_106 | Faire le point sur l'alimentation et l'volution du poids | INFO | IDEC |  | Legacy  |
| MT_V4_128 | Analyser les causes des passages aux urgences | MED | Professionnel de sant |  | Legacy  |

####  Pourquoi 7 MT ?

**Pourquoi pas 1 de moins ?**
- MT_V4_040 ("valuer autonomie") semble plus V4 (Fragilit) que M6. Mais dans le contexte E56 = "risque de ne plus rester  domicile", c'est pertinent. Garder.
- MT_V4_106 ("alimentation/poids") est trs spcifique  E56 = "alimentation/poids". C'est un MT conditionnel  la rponse. Garder  mais documenter le dispatch.

**Pourquoi pas 1 de plus ?** Les 7 MT couvrent bien les axes d'inquitude. Le dispatch vers les autres MP est assur par les recos, pas les MT.

>  **CAT_02 : 3 MT contributives ()**  SEC 2 + MED 1  ASR possible.

### CAT_03  valuations griatriques

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_008 | valuer le risque de chute au domicile | ORGA | IDEC |  | Legacy  |
| MT_V4_020 | Identifier le type d'valuation ralise | ORGA | Aidant (autonome) |  | Legacy  |
| MT_V4_071 | Vrifier si un RDV est dj prvu, sinon planifier | SEC | IDEC |  | Legacy  |
| MT_V4_108 | Informer sur l'intrt des valuations griatriques | INFO | Aidant (autonome) |  | Legacy  |
| MT_V4_111 | Vrifier la prise en compte des recommandations | INFO | IDEC |  | Legacy  |
| MT_V4_112 | Vrifier l'avance de l'valuation spcialise | INFO | IDEC |  | Legacy  |
| MT_V4_125 | Vrifier les conclusions de la consultation mmoire | MED | Professionnel de sant |  | Legacy  |

####  Pourquoi 7 MT ?

**Pourquoi pas 1 de moins ?** MT_V4_111 et MT_V4_112 sont proches ("prise en compte recommandations" vs "avance valuation"). Mais 111 = SUIVI du bilan fait, 112 = SUIVI du bilan en cours. Garder les 2.

**Pourquoi pas 1 de plus ?** 
-  **Proposition** : MT SEC "Vrifier l'ligibilit  une consultation griatrique longue" (acteur IDEC). Actuellement, on value l'intrt (INFO) mais on ne vrifie pas les conditions d'accs.

>  **CAT_03 : 2 MT contributives ()**  SEC 1 + MED 1  ASR possible.

### CAT_04  valuations TND

| MT_ID | Libell MT | Type | Acteur | / | Source |
|---|---|---|---|---|---|
| MT_V4_103 | Faire le point avec la famille et les professionnels | INFO | IDEC |  | Legacy  |
| MT_V4_104 | Faire le point avec l'aidant et les professionnels | INFO | IDEC |  | Legacy  |
| MT_V4_107 | Informer sur les dispositifs d'accs aux soins (courrier DAC/CPTS) | INFO | Aidant (autonome) |  | Legacy  |
| MT_V4_113 | Vrifier l'avance et les rsultats de l'valuation | INFO | IDEC |  | Legacy  |
| MT_V4_117 | Vrifier la position sur la liste d'attente | INFO | IDEC |  | Legacy  |
| MT_V4_121 | Informer la famille sur les dispositifs existants | INFO | Aidant (autonome) |  | Legacy  |
| MT_V4_022 | changer avec la famille sur l'volution observe | ORGA | IDEC |  | Legacy  |
| MT_V4_068 | Vrifier la mise en uvre du suivi | SEC | IDEC |  | Legacy  |
| MT_V4_119 | Informer sur les parcours d'valuation possibles | INFO | Aidant (autonome) |  | Legacy  |
| MT_V4_136 | Identifier le rfrent au sein de la structure | STRUC | IDEC |  | Legacy  |

####  Pourquoi 10 MT ?

**Pourquoi pas 1 de moins ?**
-  **MT_V4_103 et MT_V4_104** sont quasi-identiques ("point famille" vs "point aidant"). **Proposition : fusionner** en 1 seule MT.
-  **MT_V4_107 et MT_V4_121** sont proches ("informer dispositifs accs soins" vs "informer dispositifs existants"). **Proposition : fusionner.**
-  **7 MT INFO sur 10**  ratio INFO trs lev. C'est cliniquement cohrent pour un MP d'ORIENTATION (TND = besoin d'informations et de navigation dans un systme complexe), mais le manque de SEC/MED limite l'action directe.

**Pourquoi pas 1 de plus ?**
-  **0 MT MED dans CAT_04**  aucun levier mdical direct. Le parcours TND est essentiellement informationnel ct aidant.
-  **Proposition** : MT MED "Solliciter un avis neuropdiatrique pour confirmer l'orientation TND" (acteur Mdecin)  acclrer le diagnostic.

###  Dcisions Action 3

| # | Proposition | Dcision | MT cre |
|---|---|---|---|
| 1 | Ajouter MT STRUC : synthse parcours partage (CAT_01) |  Propos | MT_V5_M6_P01 |
| 2 | Fusionner MT_V4_103/104 (doublon famille/aidant, CAT_04) |  Propos |  |
| 3 | Fusionner MT_V4_107/121 (doublon dispositifs, CAT_04) |  Propos |  |
| 4 | Ajouter MT SEC : ligibilit consultation griatrique (CAT_03) |  Propos | MT_V5_M6_P02 |
| 5 | Ajouter MT MED : avis neuropdiatrique (CAT_04) |  Propos | MT_V5_M6_P03 |

> **Condition ASR par catgorie** :
> - CAT_01 :  1 (SEC 1)  ASR partielle  ( 2 si proposition valide)
> - CAT_02 :  3 (SEC 2 + MED 1)  ASR complte 
> - CAT_03 :  2 (SEC 1 + MED 1)  ASR complte 
> - CAT_04 :  2 (SEC 1 + STRUC 1)  ASR possible  ( 3 si proposition valide)

> **Dcision Dr. Monka** :  Valid |  Modifications MT

---

## ACTION 4  ENRICHIR : Acteurs, Typologie, Domaine

### Tableau consolid des MT de M6 (rsum)

> **Rsum** :
> - Total MT : 29 legacy ( 27 aprs fusions) + 3 proposes = 30
> - Domaine  Mdical : 5 / Domaine  Mdico-social : 24
> - Contributives () : 8  SEC: 4, MED: 2, STRUC: 1, (+1 propos)
> - Non-contributives () : 21  ORGA: 8, INFO: 13
> - Acteurs : IDEC (dominant), Aidant (autonome) 6, Professionnel de sant 2

>  **INFO dominant (13/29 = 45%)**  M6 est un MP d'orientation et d'information. C'est cohrent avec sa nature de "synthse" : il ne fait pas, il claire. Mais le manque de SEC/MED dans CAT_01 et CAT_04 est un frein.

###  Propositions

| # | Proposition | Justification |
|---|---|---|
| 1 | 2 paires de MT  fusionner (doublons CAT_04) | Redondance information |
| 2 | Ajouter des acteurs pdiatriques (neuropdiatre, pdopsychiatre) dans CAT_04 | Population enfant  acteurs pdiatriques |
| 3 | Diversifier le domaine : trop de mdico-social pour les CAT griatrie/TND | Les valuations sont mdicales, pas mdico-sociales |

> **Dcision Dr. Monka** :  Valid |  Modifications

---

## ACTION 5  WORDING : En 2 phases

### Phase 1  Wording des Recos de base

| CAT | Reco ID | Reco Utilisateur _(legacy)_ | / |
|---|---|---|---|
| CAT_01 | M6_RECO_01 | Situation  risque ncessitant une rorganisation globale |  Forte |
| CAT_02 | M6_RECO_02 | Renforcer l'valuation cognitive et le suivi adapt |  Trop spcifique pour un dispatch (E56 couvre 7 thmatiques) |
| CAT_01 | M6_RECO_03 | Clarifier et formaliser les lments manquants du plan de soins |  |
| CAT_03 | M6_RECO_04 | Mettre en place des actions de prvention des chutes |  Spcifique  1 option d'E58 (chutes) alors que E58 a 5 options |
| CAT_04 | M6_RECO_05 | Clarifier la situation et l'historique des orientations |  |
| CAT_04 | M6_RECO_06 | Maintenir l'accompagnement et en valuer les bnfices |  |

>  **Wording propos** :

| CAT | Reco ID | Reco Utilisateur propose | Reco IDEC propose |
|---|---|---|---|
| CAT_01 | M6_RECO_01 | Organisation des soins  revoir globalement | Analyser les dysfonctionnements et proposer une rorganisation |
| CAT_02 | M6_RECO_02 | Inquitude principale identifie   traiter en priorit | Explorer l'inquitude et orienter vers le dispositif adapt |
| CAT_01 | M6_RECO_03 | Plan de soins  formaliser | Clarifier et documenter le plan de soins partag |
| CAT_03 | M6_RECO_04 | valuation griatrique  organiser | Identifier les bilans manquants et planifier les RDV spcialiss |
| CAT_04 | M6_RECO_05 | Orientation TND  clarifier | Faire le point sur les valuations ralises et les orientations en cours |
| CAT_04 | M6_RECO_06 | Accompagnement spcialis TND  poursuivre | Maintenir le lien avec les professionnels et valuer les bnfices |

> **Dcision Dr. Monka** :  Wording valid |  Corrections

---

### Phase 2  Versioning par criticit

#### CAT_01  Lisibilit et pilotage

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Le parcours de soins est peu clair  votre IDEC peut aider  le structurer | Identifier les zones d'ombre et proposer un plan de route |
|  CCC ( 30j) | L'organisation des soins est difficile et sans plan de route  une restructuration est ncessaire | Organiser une synthse et formaliser un plan partag dans les 30 jours |
|  Critique ( 7j) | Le parcours de soins est ingrable et au jour le jour  intervention urgente ncessaire | Convoquer une runion de coordination en urgence pour stabiliser le parcours |

#### CAT_02  Inquitudes et anticipation

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Votre inquitude principale a t identifie  votre IDEC peut vous aider  anticiper | Explorer l'inquitude et proposer des actions de prvention cibles |
|  CCC ( 30j) | Inquitude sur les urgences et organisation chaotique  une prise en charge globale est ncessaire | Croiser les signaux M3 (urgences) et M6 (organisation) pour une rponse coordonne |

#### CAT_03  valuations griatriques

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | Des bilans spcialiss lis  l'ge pourraient aider  parlez-en avec votre IDEC | Informer sur les bilans disponibles et vrifier l'ligibilit |
|  CCC ( 30j) | Aucun bilan griatrique et inquitude sur les chutes/la mmoire  valuation urgente | Planifier une consultation griatrique ou mmoire dans les 30 jours |

#### CAT_04  TND

| Niveau | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Standard | L'valuation de votre enfant est en cours  restez en lien avec les professionnels | Vrifier l'avance et proposer des solutions transitoires si attente |
|  CCC ( 30j) | Aucune valuation TND engage  une orientation rapide est ncessaire | Orienter vers un CAMSP/CMPP ou un neuropdiatre dans les 30 jours |

> **Dcision Dr. Monka** :  Versioning valid |  Corrections

---

## ACTION 6  COHRENCE : Prvention + Contrle global

### 6.1  Reco prvention ()

| | Reco Utilisateur | Reco IDEC |
|---|---|---|
|  Prvention | Le parcours de soins de votre proche est bien organis  continuez  anticiper et  rester vigilant | Confirmer la stabilit du parcours  maintenir le plan de route  jour |

**MT de prvention :**

| MT_ID | Libell | Type | Wording IDEC | Wording Utilisateur |
|---|---|---|---|---|
| MT_V5_M6_PREV_01 | Vrifier que le plan de soins est  jour | ORGA | Interroger l'aidant sur l'volution du plan de soins | Le plan de soins de votre proche a-t-il chang rcemment ? |
| MT_V5_M6_PREV_02 | Anticiper les prochaines tapes du parcours | INFO | Identifier les prochaines chances mdicales | Quelles sont les prochaines tapes prvues pour le parcours de votre proche ? |

### 6.2  Checklist de cohrence

| # | Vrification | Avant | Aprs | Dtail |
|---|---|---|---|---|
| 1 | Chaque question  1 rgle |  0/6 |  6/6 | +11 proposes |
| 2 | Chaque rgle  1 reco |  |  | 6 recos redistribues |
| 3 | Chaque catgorie  ses MT |  |  | MT organises |
| 4 | K3 (2 niveaux/CAT) |  0/4 |  4/4 | +11 rgles |
| 5 | Aucune MT orpheline |  |  | Aprs fusions |
| 6 | Reco prvention |  |  | +1 reco + 2 MT |
| 7 | Wording OK |  |  si valid | |
| 8 | Sens clinique renseign |  |  | |

> **Anomalies dtectes** :
> -  **0 rgle legacy**  le PIRE MP du KERNEL entier. 6 recos existent mais sont inaccessibles.
> -  **2 paires de MT doublons** dans CAT_04 (TND)
> -  **E56 est un dispatch center**  chaque rponse pointe vers un autre MP/V. Design original mais complexe.
> -  **INFO 45%**  ratio le plus lev de V5 (MP de synthse)

---

## SYNTHSE FINALE

| Mtrique | Legacy | Aprs validation |
|---|---|---|
| Catgories de reco | 0 formalises | 4 |
| Rgles d'activation | :0 :0 :0 | :6 :4 :1 |
| MT totales | 29 | 27 (-2 fusions) + 3 proposes = 30 |
| MT contributives | 8 | 9 (+1 propose) |
| Domaine  /  | 5 / 24 | 7 / 23 |
| ASR | Non formule | M6-A  (CAT_01) / M6-B  |
| Reco prvention |  |  |
| Checks OK | 0/8 | 8/8 |

### Rsum des dcisions prises

| # | Dcision | Statut |
|---|---|---|
| 1 | 4 catgories (pilotage, inquitudes, griatrie, TND) |  Propos |
| 2 | 11 rgles proposes (0  11 = plus grande transformation KERNEL) |  Propos |
| 3 | 1 rgle Critique (E54=Ingrable + E57=au jour le jour) |  Propos |
| 4 | E56 "dispatch center" document  7 rponses  5 MP diffrents |  Propos |
| 5 | 2 paires MT fusionnes (CAT_04 TND) |  Propos |
| 6 | 3 MTs proposes (STRUC, SEC, MED) |  Propos |

### Dcisions restantes

| # | Dcision | Priorit |
|---|---|---|
| 1 | **Valider les 11 rgles**  c'est la plus grande cration ex nihilo du KERNEL |  |
| 2 | **E56 dispatch : formaliser le mcanisme de redirection ?** |  |
| 3 | **CRIT_P01 (E54=Ingrable + E57=au jour le jour)**  seuil  confirmer |  |
| 4 | **CAT_01 : ajouter MT contributive (STRUC)** pour ASR |  |
| 5 | **CAT_04 : valider fusion doublons** |  |

### Validation

| Validateur | Statut | Date |
|---|---|---|
| Dr. Monka |  Valid /   revoir | |
| Antonin |  Valid /   revoir | |

---

>  **Ce MP est verrouill une fois les deux validations obtenues.**
`;function Wg(n,t,s){const r=[];let l;s==="V5"?l=`MT_V4_\\d+|MT_V5_${n.split("_")[0]}_(?:P|PREV_)\\d+`:s==="V1"||s==="V3"||s==="V4"?l=`MT_${s}_\\d+`:l=`MT_${s}_${n.split("_")[0]}_\\d+`;const u=new RegExp(`\\|\\s*(${l})\\s*\\|[^|]*\\|[^|]*\\|([^|]*)\\|([^|]*)\\|\\s*\\s*\\|`,"g");let c;for(;(c=u.exec(t))!==null;)r.push({id:`${n}_${c[1]}`,label:`${c[1]}  Wording IDEC / Utilisateur`,type:"wording",sectionId:n});const p=/\*\*Dcision Dr\. Monka\*\*\s*:\s*\s*([^|\n]+)/g;for(;(c=p.exec(t))!==null;)r.push({id:`${n}_drmonka_${r.length}`,label:`Dr. Monka: ${c[1].trim()}`,type:"decision",sectionId:n});return r}function Xe(n,t,s){const r=t.split(`
`),l=t.match(/^#\s+\s+Fiche de Validation MP  ([A-Z]\d)  (.+)$/m),u=l?l[1]:n,c=l?l[2]:"",p=t.match(/Total\s*:\s*(\d+)\s*questions/i),h=p?parseInt(p[1]):0,f=new RegExp(`${n}_CAT_\\d+`,"g"),g=t.match(f),v=g?new Set(g).size:0,T=new RegExp(`V\\d_${n}_(STD|CCC|CRIT)_P?\\d+`,"g"),C=t.match(T),E=C?new Set(C).size:0;let M=[];if(s==="V5"){const J=/MT_V4_\d+/g,x=new RegExp(`MT_V5_${n}_(?:P|PREV_)\\d+`,"g"),$=t.match(J)||[],ae=t.match(x)||[];M=[...$,...ae]}else s==="V1"||s==="V3"||s==="V4"?M=t.match(new RegExp(`MT_${s}_\\d+`,"g"))||[]:M=t.match(new RegExp(`MT_${s}_${n}_\\d+`,"g"))||[];const q=new Set(M).size,y=[];let I="",O=[],G=0;for(const J of r)if(J.startsWith("## ")){if(I){const x=O.join(`
`),$=`${n}_section_${G}`;y.push({id:$,title:I,content:x,decisionItems:Wg($,x,s)}),G++}I=J.replace(/^##\s+/,""),O=[]}else O.push(J);if(I){const J=O.join(`
`),x=`${n}_section_${G}`;y.push({id:x,title:I,content:J,decisionItems:Wg(x,J,s)})}return{id:n,title:u,subtitle:c,vulnerability:s,questions:h,categories:v,rules:E,microTasks:q,rawContent:t,sections:y}}function ly(){return[Xe("R1",jb,"V1"),Xe("R2",kb,"V1"),Xe("R3",Ub,"V1"),Xe("R4",zb,"V1"),Xe("A1",Fb,"V2"),Xe("A2",Gb,"V2"),Xe("A3",Hb,"V2"),Xe("A4",Bb,"V2"),Xe("S1",Qb,"V3"),Xe("S2",Kb,"V3"),Xe("S3",$b,"V3"),Xe("S4",Jb,"V3"),Xe("F1",Yb,"V4"),Xe("F2",Wb,"V4"),Xe("F3",Xb,"V4"),Xe("F4",Zb,"V4"),Xe("F5",ey,"V4"),Xe("F6",ny,"V4"),Xe("M1",ty,"V5"),Xe("M2",iy,"V5"),Xe("M3",sy,"V5"),Xe("M4",ay,"V5"),Xe("M5",ry,"V5"),Xe("M6",oy,"V5")]}function gl(n,t){var s={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(s[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(n);l<r.length;l++)t.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(n,r[l])&&(s[r[l]]=n[r[l]]);return s}function uy(n,t,s,r){function l(u){return u instanceof s?u:new s(function(c){c(u)})}return new(s||(s=Promise))(function(u,c){function p(g){try{f(r.next(g))}catch(v){c(v)}}function h(g){try{f(r.throw(g))}catch(v){c(v)}}function f(g){g.done?u(g.value):l(g.value).then(p,h)}f((r=r.apply(n,t||[])).next())})}const cy=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class Xd extends Error{constructor(t,s="FunctionsError",r){super(t),this.name=s,this.context=r}}class dy extends Xd{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Xg extends Xd{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Zg extends Xd{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Sd;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Sd||(Sd={}));class py{constructor(t,{headers:s={},customFetch:r,region:l=Sd.Any}={}){this.url=t,this.headers=s,this.region=l,this.fetch=cy(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return uy(this,arguments,void 0,function*(s,r={}){var l;let u,c;try{const{headers:p,method:h,body:f,signal:g,timeout:v}=r;let T={},{region:C}=r;C||(C=this.region);const E=new URL(`${this.url}/${s}`);C&&C!=="any"&&(T["x-region"]=C,E.searchParams.set("forceFunctionRegion",C));let M;f&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&f instanceof Blob||f instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",M=f):typeof f=="string"?(T["Content-Type"]="text/plain",M=f):typeof FormData<"u"&&f instanceof FormData?M=f:(T["Content-Type"]="application/json",M=JSON.stringify(f)):f&&typeof f!="string"&&!(typeof Blob<"u"&&f instanceof Blob)&&!(f instanceof ArrayBuffer)&&!(typeof FormData<"u"&&f instanceof FormData)?M=JSON.stringify(f):M=f;let q=g;v&&(c=new AbortController,u=setTimeout(()=>c.abort(),v),g?(q=c.signal,g.addEventListener("abort",()=>c.abort())):q=c.signal);const y=yield this.fetch(E.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),p),body:M,signal:q}).catch(J=>{throw new dy(J)}),I=y.headers.get("x-relay-error");if(I&&I==="true")throw new Xg(y);if(!y.ok)throw new Zg(y);let O=((l=y.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),G;return O==="application/json"?G=yield y.json():O==="application/octet-stream"||O==="application/pdf"?G=yield y.blob():O==="text/event-stream"?G=y:O==="multipart/form-data"?G=yield y.formData():G=yield y.text(),{data:G,error:null,response:y}}catch(p){return{data:null,error:p,response:p instanceof Zg||p instanceof Xg?p.context:void 0}}finally{u&&clearTimeout(u)}})}}var my=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},fy=class{constructor(n){var t,s,r;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(t=n.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=n.signal,this.isMaybeSingle=(s=n.isMaybeSingle)!==null&&s!==void 0?s:!1,this.urlLengthLimit=(r=n.urlLengthLimit)!==null&&r!==void 0?r:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,t){return this.headers=new Headers(this.headers),this.headers.set(n,t),this}then(n,t){var s=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let l=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{let c=null,p=null,h=null,f=u.status,g=u.statusText;if(u.ok){var v,T;if(s.method!=="HEAD"){var C;const y=await u.text();y===""||(s.headers.get("Accept")==="text/csv"||s.headers.get("Accept")&&(!((C=s.headers.get("Accept"))===null||C===void 0)&&C.includes("application/vnd.pgrst.plan+text"))?p=y:p=JSON.parse(y))}const M=(v=s.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),q=(T=u.headers.get("content-range"))===null||T===void 0?void 0:T.split("/");M&&q&&q.length>1&&(h=parseInt(q[1])),s.isMaybeSingle&&s.method==="GET"&&Array.isArray(p)&&(p.length>1?(c={code:"PGRST116",details:`Results contain ${p.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},p=null,h=null,f=406,g="Not Acceptable"):p.length===1?p=p[0]:p=null)}else{var E;const M=await u.text();try{c=JSON.parse(M),Array.isArray(c)&&u.status===404&&(p=[],c=null,f=200,g="OK")}catch{u.status===404&&M===""?(f=204,g="No Content"):c={message:M}}if(c&&s.isMaybeSingle&&(!(c==null||(E=c.details)===null||E===void 0)&&E.includes("0 rows"))&&(c=null,f=200,g="OK"),c&&s.shouldThrowOnError)throw new my(c)}return{error:c,data:p,count:h,status:f,statusText:g}});return this.shouldThrowOnError||(l=l.catch(u=>{var c;let p="",h="",f="";const g=u==null?void 0:u.cause;if(g){var v,T,C,E;const y=(v=g==null?void 0:g.message)!==null&&v!==void 0?v:"",I=(T=g==null?void 0:g.code)!==null&&T!==void 0?T:"";p=`${(C=u==null?void 0:u.name)!==null&&C!==void 0?C:"FetchError"}: ${u==null?void 0:u.message}`,p+=`

Caused by: ${(E=g==null?void 0:g.name)!==null&&E!==void 0?E:"Error"}: ${y}`,I&&(p+=` (${I})`),g!=null&&g.stack&&(p+=`
${g.stack}`)}else{var M;p=(M=u==null?void 0:u.stack)!==null&&M!==void 0?M:""}const q=this.url.toString().length;return(u==null?void 0:u.name)==="AbortError"||(u==null?void 0:u.code)==="ABORT_ERR"?(f="",h="Request was aborted (timeout or manual cancellation)",q>this.urlLengthLimit&&(h+=`. Note: Your request URL is ${q} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((g==null?void 0:g.name)==="HeadersOverflowError"||(g==null?void 0:g.code)==="UND_ERR_HEADERS_OVERFLOW")&&(f="",h="HTTP headers exceeded server limits (typically 16KB)",q>this.urlLengthLimit&&(h+=`. Your request URL is ${q} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(c=u==null?void 0:u.name)!==null&&c!==void 0?c:"FetchError"}: ${u==null?void 0:u.message}`,details:p,hint:h,code:f},data:null,count:null,status:0,statusText:""}})),l.then(n,t)}returns(){return this}overrideTypes(){return this}},hy=class extends fy{select(n){let t=!1;const s=(n??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",s),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:t=!0,nullsFirst:s,foreignTable:r,referencedTable:l=r}={}){const u=l?`${l}.order`:"order",c=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${c?`${c},`:""}${n}.${t?"asc":"desc"}${s===void 0?"":s?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:t,referencedTable:s=t}={}){const r=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${n}`),this}range(n,t,{foreignTable:s,referencedTable:r=s}={}){const l=typeof r>"u"?"offset":`${r}.offset`,u=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${n}`),this.url.searchParams.set(u,`${t-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:l=!1,format:u="text"}={}){var c;const p=[n?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${h}"; options=${p};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const ev=new RegExp("[,()]");var Ys=class extends hy{eq(n,t){return this.url.searchParams.append(n,`eq.${t}`),this}neq(n,t){return this.url.searchParams.append(n,`neq.${t}`),this}gt(n,t){return this.url.searchParams.append(n,`gt.${t}`),this}gte(n,t){return this.url.searchParams.append(n,`gte.${t}`),this}lt(n,t){return this.url.searchParams.append(n,`lt.${t}`),this}lte(n,t){return this.url.searchParams.append(n,`lte.${t}`),this}like(n,t){return this.url.searchParams.append(n,`like.${t}`),this}likeAllOf(n,t){return this.url.searchParams.append(n,`like(all).{${t.join(",")}}`),this}likeAnyOf(n,t){return this.url.searchParams.append(n,`like(any).{${t.join(",")}}`),this}ilike(n,t){return this.url.searchParams.append(n,`ilike.${t}`),this}ilikeAllOf(n,t){return this.url.searchParams.append(n,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(n,t){return this.url.searchParams.append(n,`ilike(any).{${t.join(",")}}`),this}regexMatch(n,t){return this.url.searchParams.append(n,`match.${t}`),this}regexIMatch(n,t){return this.url.searchParams.append(n,`imatch.${t}`),this}is(n,t){return this.url.searchParams.append(n,`is.${t}`),this}isDistinct(n,t){return this.url.searchParams.append(n,`isdistinct.${t}`),this}in(n,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&ev.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`in.(${s})`),this}notIn(n,t){const s=Array.from(new Set(t)).map(r=>typeof r=="string"&&ev.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(n,`not.in.(${s})`),this}contains(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cs.{${t.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(t)}`),this}containedBy(n,t){return typeof t=="string"?this.url.searchParams.append(n,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(n,`cd.{${t.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(t)}`),this}rangeGt(n,t){return this.url.searchParams.append(n,`sr.${t}`),this}rangeGte(n,t){return this.url.searchParams.append(n,`nxl.${t}`),this}rangeLt(n,t){return this.url.searchParams.append(n,`sl.${t}`),this}rangeLte(n,t){return this.url.searchParams.append(n,`nxr.${t}`),this}rangeAdjacent(n,t){return this.url.searchParams.append(n,`adj.${t}`),this}overlaps(n,t){return typeof t=="string"?this.url.searchParams.append(n,`ov.${t}`):this.url.searchParams.append(n,`ov.{${t.join(",")}}`),this}textSearch(n,t,{config:s,type:r}={}){let l="";r==="plain"?l="pl":r==="phrase"?l="ph":r==="websearch"&&(l="w");const u=s===void 0?"":`(${s})`;return this.url.searchParams.append(n,`${l}fts${u}.${t}`),this}match(n){return Object.entries(n).forEach(([t,s])=>{this.url.searchParams.append(t,`eq.${s}`)}),this}not(n,t,s){return this.url.searchParams.append(n,`not.${t}.${s}`),this}or(n,{foreignTable:t,referencedTable:s=t}={}){const r=s?`${s}.or`:"or";return this.url.searchParams.append(r,`(${n})`),this}filter(n,t,s){return this.url.searchParams.append(n,`${t}.${s}`),this}},gy=class{constructor(n,{headers:t={},schema:s,fetch:r,urlLengthLimit:l=8e3}){this.url=n,this.headers=new Headers(t),this.schema=s,this.fetch=r,this.urlLengthLimit=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,t){const{head:s=!1,count:r}=t??{},l=s?"HEAD":"GET";let u=!1;const c=(n??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join(""),{url:p,headers:h}=this.cloneRequestState();return p.searchParams.set("select",c),r&&h.append("Prefer",`count=${r}`),new Ys({method:l,url:p,headers:h,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:t,defaultToNull:s=!0}={}){var r;const l="POST",{url:u,headers:c}=this.cloneRequestState();if(t&&c.append("Prefer",`count=${t}`),s||c.append("Prefer","missing=default"),Array.isArray(n)){const p=n.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(p.length>0){const h=[...new Set(p)].map(f=>`"${f}"`);u.searchParams.set("columns",h.join(","))}}return new Ys({method:l,url:u,headers:c,schema:this.schema,body:n,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:t,ignoreDuplicates:s=!1,count:r,defaultToNull:l=!0}={}){var u;const c="POST",{url:p,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${s?"ignore":"merge"}-duplicates`),t!==void 0&&p.searchParams.set("on_conflict",t),r&&h.append("Prefer",`count=${r}`),l||h.append("Prefer","missing=default"),Array.isArray(n)){const f=n.reduce((g,v)=>g.concat(Object.keys(v)),[]);if(f.length>0){const g=[...new Set(f)].map(v=>`"${v}"`);p.searchParams.set("columns",g.join(","))}}return new Ys({method:c,url:p,headers:h,schema:this.schema,body:n,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:t}={}){var s;const r="PATCH",{url:l,headers:u}=this.cloneRequestState();return t&&u.append("Prefer",`count=${t}`),new Ys({method:r,url:l,headers:u,schema:this.schema,body:n,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var t;const s="DELETE",{url:r,headers:l}=this.cloneRequestState();return n&&l.append("Prefer",`count=${n}`),new Ys({method:s,url:r,headers:l,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}};function hr(n){"@babel/helpers - typeof";return hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(n)}function vy(n,t){if(hr(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var r=s.call(n,t);if(hr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function _y(n){var t=vy(n,"string");return hr(t)=="symbol"?t:t+""}function Cy(n,t,s){return(t=_y(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function nv(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),s.push.apply(s,r)}return s}function Yo(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?nv(Object(s),!0).forEach(function(r){Cy(n,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):nv(Object(s)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(s,r))})}return n}var Ty=class O_{constructor(t,{headers:s={},schema:r,fetch:l,timeout:u,urlLengthLimit:c=8e3}={}){this.url=t,this.headers=new Headers(s),this.schemaName=r,this.urlLengthLimit=c;const p=l??globalThis.fetch;u!==void 0&&u>0?this.fetch=(h,f)=>{const g=new AbortController,v=setTimeout(()=>g.abort(),u),T=f==null?void 0:f.signal;if(T){if(T.aborted)return clearTimeout(v),p(h,f);const C=()=>{clearTimeout(v),g.abort()};return T.addEventListener("abort",C,{once:!0}),p(h,Yo(Yo({},f),{},{signal:g.signal})).finally(()=>{clearTimeout(v),T.removeEventListener("abort",C)})}return p(h,Yo(Yo({},f),{},{signal:g.signal})).finally(()=>clearTimeout(v))}:this.fetch=p}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new gy(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(t){return new O_(this.url,{headers:this.headers,schema:t,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(t,s={},{head:r=!1,get:l=!1,count:u}={}){var c;let p;const h=new URL(`${this.url}/rpc/${t}`);let f;const g=C=>C!==null&&typeof C=="object"&&(!Array.isArray(C)||C.some(g)),v=r&&Object.values(s).some(g);v?(p="POST",f=s):r||l?(p=r?"HEAD":"GET",Object.entries(s).filter(([C,E])=>E!==void 0).map(([C,E])=>[C,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([C,E])=>{h.searchParams.append(C,E)})):(p="POST",f=s);const T=new Headers(this.headers);return v?T.set("Prefer",u?`count=${u},return=minimal`:"return=minimal"):u&&T.set("Prefer",`count=${u}`),new Ys({method:p,url:h,headers:T,schema:this.schemaName,body:f,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}};class Ay{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const s=globalThis.process;if(s){const r=s.versions;if(r&&r.node){const l=r.node,u=parseInt(l.replace(/^v/,"").split(".")[0]);return u>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${u} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${u} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let s=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(s+=`

Suggested solution: ${t.workaround}`),new Error(s)}static createWebSocket(t,s){const r=this.getWebSocketConstructor();return new r(t,s)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Ey="2.95.3",Sy=`realtime-js/${Ey}`,My="1.0.0",D_="2.0.0",tv=D_,Md=1e4,by=1e3,yy=100;var Ai;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Ai||(Ai={}));var mn;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(mn||(mn={}));var vt;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(vt||(vt={}));var bd;(function(n){n.websocket="websocket"})(bd||(bd={}));var Ki;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ki||(Ki={}));class Ry{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,s){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return s(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return s(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var s;return this._isArrayBuffer((s=t.payload)===null||s===void 0?void 0:s.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var s,r;const l=(r=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(t){var s,r;const l=(r=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(t,s,r){var l,u;const c=t.topic,p=(l=t.ref)!==null&&l!==void 0?l:"",h=(u=t.join_ref)!==null&&u!==void 0?u:"",f=t.payload.event,g=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},v=Object.keys(g).length===0?"":JSON.stringify(g);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`userEvent length ${f.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const T=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+p.length+c.length+f.length+v.length,C=new ArrayBuffer(this.HEADER_LENGTH+T);let E=new DataView(C),M=0;E.setUint8(M++,this.KINDS.userBroadcastPush),E.setUint8(M++,h.length),E.setUint8(M++,p.length),E.setUint8(M++,c.length),E.setUint8(M++,f.length),E.setUint8(M++,v.length),E.setUint8(M++,s),Array.from(h,y=>E.setUint8(M++,y.charCodeAt(0))),Array.from(p,y=>E.setUint8(M++,y.charCodeAt(0))),Array.from(c,y=>E.setUint8(M++,y.charCodeAt(0))),Array.from(f,y=>E.setUint8(M++,y.charCodeAt(0))),Array.from(v,y=>E.setUint8(M++,y.charCodeAt(0)));var q=new Uint8Array(C.byteLength+r.byteLength);return q.set(new Uint8Array(C),0),q.set(new Uint8Array(r),C.byteLength),q.buffer}decode(t,s){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return s(r)}if(typeof t=="string"){const r=JSON.parse(t),[l,u,c,p,h]=r;return s({join_ref:l,ref:u,topic:c,event:p,payload:h})}return s({})}_binaryDecode(t){const s=new DataView(t),r=s.getUint8(0),l=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,s,l)}}_decodeUserBroadcast(t,s,r){const l=s.getUint8(1),u=s.getUint8(2),c=s.getUint8(3),p=s.getUint8(4);let h=this.HEADER_LENGTH+4;const f=r.decode(t.slice(h,h+l));h=h+l;const g=r.decode(t.slice(h,h+u));h=h+u;const v=r.decode(t.slice(h,h+c));h=h+c;const T=t.slice(h,t.byteLength),C=p===this.JSON_ENCODING?JSON.parse(r.decode(T)):T,E={type:this.BROADCAST_EVENT,event:g,payload:C};return c>0&&(E.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:f,event:this.BROADCAST_EVENT,payload:E}}_isArrayBuffer(t){var s;return t instanceof ArrayBuffer||((s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name)==="ArrayBuffer"}_pick(t,s){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>s.includes(r)))}}class q_{constructor(t,s){this.callback=t,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qe;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Qe||(Qe={}));const iv=(n,t,s={})=>{var r;const l=(r=s.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((u,c)=>(u[c]=Oy(c,n,t,l),u),{}):{}},Oy=(n,t,s,r)=>{const l=t.find(p=>p.name===n),u=l==null?void 0:l.type,c=s[n];return u&&!r.includes(u)?N_(u,c):yd(c)},N_=(n,t)=>{if(n.charAt(0)==="_"){const s=n.slice(1,n.length);return Vy(t,s)}switch(n){case Qe.bool:return Dy(t);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return qy(t);case Qe.json:case Qe.jsonb:return Ny(t);case Qe.timestamp:return Iy(t);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return yd(t);default:return yd(t)}},yd=n=>n,Dy=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},qy=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},Ny=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},Vy=(n,t)=>{if(typeof n!="string")return n;const s=n.length-1,r=n[s];if(n[0]==="{"&&r==="}"){let u;const c=n.slice(1,s);try{u=JSON.parse("["+c+"]")}catch{u=c?c.split(","):[]}return u.map(p=>N_(t,p))}return n},Iy=n=>typeof n=="string"?n.replace(" ","T"):n,V_=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class ad{constructor(t,s,r={},l=Md){this.channel=t,this.event=s,this.payload=r,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,s){var r;return this._hasReceived(t)&&s((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:s}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(s))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var sv;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(sv||(sv={}));class dr{constructor(t,s){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},l=>{const{onJoin:u,onLeave:c,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=dr.syncState(this.state,l,u,c),this.pendingDiffs.forEach(h=>{this.state=dr.syncDiff(this.state,h,u,c)}),this.pendingDiffs=[],p()}),this.channel._on(r.diff,{},l=>{const{onJoin:u,onLeave:c,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=dr.syncDiff(this.state,l,u,c),p())}),this.onJoin((l,u,c)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:u,newPresences:c})}),this.onLeave((l,u,c)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:u,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,s,r,l){const u=this.cloneDeep(t),c=this.transformState(s),p={},h={};return this.map(u,(f,g)=>{c[f]||(h[f]=g)}),this.map(c,(f,g)=>{const v=u[f];if(v){const T=g.map(q=>q.presence_ref),C=v.map(q=>q.presence_ref),E=g.filter(q=>C.indexOf(q.presence_ref)<0),M=v.filter(q=>T.indexOf(q.presence_ref)<0);E.length>0&&(p[f]=E),M.length>0&&(h[f]=M)}else p[f]=g}),this.syncDiff(u,{joins:p,leaves:h},r,l)}static syncDiff(t,s,r,l){const{joins:u,leaves:c}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return r||(r=()=>{}),l||(l=()=>{}),this.map(u,(p,h)=>{var f;const g=(f=t[p])!==null&&f!==void 0?f:[];if(t[p]=this.cloneDeep(h),g.length>0){const v=t[p].map(C=>C.presence_ref),T=g.filter(C=>v.indexOf(C.presence_ref)<0);t[p].unshift(...T)}r(p,g,h)}),this.map(c,(p,h)=>{let f=t[p];if(!f)return;const g=h.map(v=>v.presence_ref);f=f.filter(v=>g.indexOf(v.presence_ref)<0),t[p]=f,l(p,f,h),f.length===0&&delete t[p]}),t}static map(t,s){return Object.getOwnPropertyNames(t).map(r=>s(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((s,r)=>{const l=t[r];return"metas"in l?s[r]=l.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):s[r]=l,s},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var av;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(av||(av={}));var pr;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(pr||(pr={}));var Qt;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Qt||(Qt={}));class Zs{constructor(t,s={config:{}},r){var l,u;if(this.topic=t,this.params=s,this.socket=r,this.bindings={},this.state=mn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new ad(this,vt.join,this.params,this.timeout),this.rejoinTimer=new q_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mn.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vt.reply,{},(c,p)=>{this._trigger(this._replyEventName(p),c)}),this.presence=new dr(this),this.broadcastEndpointURL=V_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,s=this.timeout){var r,l,u;if(this.socket.isConnected()||this.socket.connect(),this.state==mn.closed){const{config:{broadcast:c,presence:p,private:h}}=this.params,f=(l=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(C=>C.filter))!==null&&l!==void 0?l:[],g=!!this.bindings[pr.PRESENCE]&&this.bindings[pr.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,v={},T={broadcast:c,presence:Object.assign(Object.assign({},p),{enabled:g}),postgres_changes:f,private:h};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(C=>t==null?void 0:t(Qt.CHANNEL_ERROR,C)),this._onClose(()=>t==null?void 0:t(Qt.CLOSED)),this.updateJoinPayload(Object.assign({config:T},v)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:C})=>{var E;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){t==null||t(Qt.SUBSCRIBED);return}else{const M=this.bindings.postgres_changes,q=(E=M==null?void 0:M.length)!==null&&E!==void 0?E:0,y=[];for(let I=0;I<q;I++){const O=M[I],{filter:{event:G,schema:J,table:x,filter:$}}=O,ae=C&&C[I];if(ae&&ae.event===G&&Zs.isFilterValueEqual(ae.schema,J)&&Zs.isFilterValueEqual(ae.table,x)&&Zs.isFilterValueEqual(ae.filter,$))y.push(Object.assign(Object.assign({},O),{id:ae.id}));else{this.unsubscribe(),this.state=mn.errored,t==null||t(Qt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Qt.SUBSCRIBED);return}}).receive("error",C=>{this.state=mn.errored,t==null||t(Qt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Qt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,s={}){return await this.send({type:"presence",event:"track",payload:t},s.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,s,r){return this.state===mn.joined&&t===pr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,s,r)}async httpSend(t,s,r={}){var l;if(s==null)return Promise.reject("Payload is required for httpSend()");const u={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(u.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:u,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:s,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);if(p.status===202)return{success:!0};let h=p.statusText;try{const f=await p.json();h=f.error||f.message||h}catch{}return Promise.reject(new Error(h))}async send(t,s={}){var r,l;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:c}=t,p={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(p.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:p,body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:c,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=s.timeout)!==null&&r!==void 0?r:this.timeout);return await((l=f.body)===null||l===void 0?void 0:l.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var c,p,h;const f=this._push(t.type,t,s.timeout||this.timeout);t.type==="broadcast"&&!(!((h=(p=(c=this.params)===null||c===void 0?void 0:c.config)===null||p===void 0?void 0:p.broadcast)===null||h===void 0)&&h.ack)&&u("ok"),f.receive("ok",()=>u("ok")),f.receive("error",()=>u("error")),f.receive("timeout",()=>u("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=mn.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(l=>{r=new ad(this,vt.leave,{},t),r.receive("ok",()=>{s(),l("ok")}).receive("timeout",()=>{s(),l("timed out")}).receive("error",()=>{l("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mn.closed,this.bindings={}}async _fetchWithTimeout(t,s,r){const l=new AbortController,u=setTimeout(()=>l.abort(),r),c=await this.socket.fetch(t,Object.assign(Object.assign({},s),{signal:l.signal}));return clearTimeout(u),c}_push(t,s,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new ad(this,t,s,r);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>yy){const s=this.pushBuffer.shift();s&&(s.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${s.event}`,s.payload))}}_onMessage(t,s,r){return s}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,s,r){var l,u;const c=t.toLocaleLowerCase(),{close:p,error:h,leave:f,join:g}=vt;if(r&&[p,h,f,g].indexOf(c)>=0&&r!==this._joinRef())return;let T=this._onMessage(c,s,r);if(s&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(C=>{var E,M,q;return((E=C.filter)===null||E===void 0?void 0:E.event)==="*"||((q=(M=C.filter)===null||M===void 0?void 0:M.event)===null||q===void 0?void 0:q.toLocaleLowerCase())===c}).map(C=>C.callback(T,r)):(u=this.bindings[c])===null||u===void 0||u.filter(C=>{var E,M,q,y,I,O;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in C){const G=C.id,J=(E=C.filter)===null||E===void 0?void 0:E.event;return G&&((M=s.ids)===null||M===void 0?void 0:M.includes(G))&&(J==="*"||(J==null?void 0:J.toLocaleLowerCase())===((q=s.data)===null||q===void 0?void 0:q.type.toLocaleLowerCase()))}else{const G=(I=(y=C==null?void 0:C.filter)===null||y===void 0?void 0:y.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return G==="*"||G===((O=s==null?void 0:s.event)===null||O===void 0?void 0:O.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===c}).map(C=>{if(typeof T=="object"&&"ids"in T){const E=T.data,{schema:M,table:q,commit_timestamp:y,type:I,errors:O}=E;T=Object.assign(Object.assign({},{schema:M,table:q,commit_timestamp:y,eventType:I,new:{},old:{},errors:O}),this._getPayloadRecords(E))}C.callback(T,r)})}_isClosed(){return this.state===mn.closed}_isJoined(){return this.state===mn.joined}_isJoining(){return this.state===mn.joining}_isLeaving(){return this.state===mn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,s,r){const l=t.toLocaleLowerCase(),u={type:l,filter:s,callback:r};return this.bindings[l]?this.bindings[l].push(u):this.bindings[l]=[u],this}_off(t,s){const r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(l=>{var u;return!(((u=l.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===r&&Zs.isEqual(l.filter,s))})),this}static isEqual(t,s){if(Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}static isFilterValueEqual(t,s){return(t??void 0)===(s??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(vt.close,{},t)}_onError(t){this._on(vt.error,{},s=>t(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const s={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(s.new=iv(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(s.old=iv(t.columns,t.old_record)),s}}const rd=()=>{},Wo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Py=[1e3,2e3,5e3,1e4],xy=1e4,Ly=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wy{constructor(t,s){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Md,this.transport=null,this.heartbeatIntervalMs=Wo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rd,this.ref=0,this.reconnectTimer=null,this.vsn=tv,this.logger=rd,this.conn=null,this.sendBuffer=[],this.serializer=new Ry,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=l=>l?(...u)=>l(...u):(...u)=>fetch(...u),!(!((r=s==null?void 0:s.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=s.params.apikey,this.endPoint=`${t}/${bd.websocket}`,this.httpEndpoint=V_(t),this._initializeOptions(s),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(s==null?void 0:s.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ay.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const s=t.message;throw s.includes("Node.js")?new Error(`${s}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${s}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,s){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,s??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const s=await t.unsubscribe();return s==="ok"&&this._remove(t),this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const t=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,s,r){this.logger(t,s,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ai.connecting:return Ki.Connecting;case Ai.open:return Ki.Open;case Ai.closing:return Ki.Closing;default:return Ki.Closed}}isConnected(){return this.connectionState()===Ki.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,s={config:{}}){const r=`realtime:${t}`,l=this.getChannels().find(u=>u.topic===r);if(l)return l;{const u=new Zs(`realtime:${t}`,s,this);return this.channels.push(u),u}}push(t){const{topic:s,event:r,payload:l,ref:u}=t,c=()=>{this.encode(t,p=>{var h;(h=this.conn)===null||h===void 0||h.send(p)})};this.log("push",`${s} ${r} (${u})`,l),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(s){this.log("error","error in heartbeat callback",s)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(s){this.log("error","error in heartbeat callback",s)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(by,"heartbeat timeout"),setTimeout(()=>{var s;this.isConnected()||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout()},Wo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(s){this.log("error","error in heartbeat callback",s)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let s=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${t}"`),s.unsubscribe())}_remove(t){this.channels=this.channels.filter(s=>s.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,s=>{if(s.topic==="phoenix"&&s.event==="phx_reply"&&s.ref&&s.ref===this.pendingHeartbeatRef){const f=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(s.payload.status==="ok"?"ok":"error",f)}catch(g){this.log("error","error in heartbeat callback",g)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:l,payload:u,ref:c}=s,p=c?`(${c})`:"",h=u.status||"";this.log("receive",`${h} ${r} ${l} ${p}`.trim(),u),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(l,u,c)),this._triggerStateCallbacks("message",s)})}_clearTimer(t){var s;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((s=this.reconnectTimer)===null||s===void 0||s.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===Ai.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ai.open||this.conn.readyState===Ai.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(s=>{this.log("error","error waiting for auth on connect",s),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this._terminateWorker()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var s;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(s=this.reconnectTimer)===null||s===void 0||s.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(s){this.log("error","error in heartbeat callback",s)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(vt.error))}_appendParams(t,s){if(Object.keys(s).length===0)return t;const r=t.match(/\?/)?"&":"?",l=new URLSearchParams(s);return`${t}${r}${l}`}_workerObjectUrl(t){let s;if(t)s=t;else{const r=new Blob([Ly],{type:"application/javascript"});s=URL.createObjectURL(r)}return s}_setConnectionState(t,s=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=s)}async _performAuth(t=null){let s,r=!1;if(t)s=t,r=!0;else if(this.accessToken)try{s=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),s=this.accessTokenValue}else s=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(l=>{const u={access_token:s,version:Sy};s&&l.updateJoinPayload(u),l.joinedOnce&&l._isJoined()&&l._push(vt.access_token,{access_token:s})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(s=>{this.log("error",`Error setting auth in ${t}`,s)})}_triggerStateCallbacks(t,s){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(s)}catch(l){this.log("error",`error in ${t} callback`,l)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new q_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Wo.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var s,r,l,u,c,p,h,f,g,v,T,C;switch(this.transport=(s=t==null?void 0:t.transport)!==null&&s!==void 0?s:null,this.timeout=(r=t==null?void 0:t.timeout)!==null&&r!==void 0?r:Md,this.heartbeatIntervalMs=(l=t==null?void 0:t.heartbeatIntervalMs)!==null&&l!==void 0?l:Wo.HEARTBEAT_INTERVAL,this.worker=(u=t==null?void 0:t.worker)!==null&&u!==void 0?u:!1,this.accessToken=(c=t==null?void 0:t.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(p=t==null?void 0:t.heartbeatCallback)!==null&&p!==void 0?p:rd,this.vsn=(h=t==null?void 0:t.vsn)!==null&&h!==void 0?h:tv,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(f=t==null?void 0:t.reconnectAfterMs)!==null&&f!==void 0?f:(E=>Py[E-1]||xy),this.vsn){case My:this.encode=(g=t==null?void 0:t.encode)!==null&&g!==void 0?g:((E,M)=>M(JSON.stringify(E))),this.decode=(v=t==null?void 0:t.decode)!==null&&v!==void 0?v:((E,M)=>M(JSON.parse(E)));break;case D_:this.encode=(T=t==null?void 0:t.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(C=t==null?void 0:t.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}var gr=class extends Error{constructor(n,t){var s;super(n),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&((s=t.icebergType)==null?void 0:s.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function jy(n,t,s){const r=new URL(t,n);if(s)for(const[l,u]of Object.entries(s))u!==void 0&&r.searchParams.set(l,u);return r.toString()}async function ky(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function Uy(n){const t=n.fetchImpl??globalThis.fetch;return{async request({method:s,path:r,query:l,body:u,headers:c}){const p=jy(n.baseUrl,r,l),h=await ky(n.auth),f=await t(p,{method:s,headers:{...u?{"Content-Type":"application/json"}:{},...h,...c},body:u?JSON.stringify(u):void 0}),g=await f.text(),v=(f.headers.get("content-type")||"").includes("application/json"),T=v&&g?JSON.parse(g):g;if(!f.ok){const C=v?T:void 0,E=C==null?void 0:C.error;throw new gr((E==null?void 0:E.message)??`Request failed with status ${f.status}`,{status:f.status,icebergType:E==null?void 0:E.type,icebergCode:E==null?void 0:E.code,details:C})}return{status:f.status,headers:f.headers,data:T}}}}function Xo(n){return n.join("")}var zy=class{constructor(n,t=""){this.client=n,this.prefix=t}async listNamespaces(n){const t=n?{parent:Xo(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(n,t){const s={namespace:n.namespace,properties:t==null?void 0:t.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:s})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xo(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xo(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xo(n.namespace)}`}),!0}catch(t){if(t instanceof gr&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(n,t){try{return await this.createNamespace(n,t)}catch(s){if(s instanceof gr&&s.status===409)return;throw s}}};function Gs(n){return n.join("")}var Fy=class{constructor(n,t="",s){this.client=n,this.prefix=t,this.accessDelegation=s}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gs(n.namespace)}/tables`})).data.identifiers}async createTable(n,t){const s={};return this.accessDelegation&&(s["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gs(n.namespace)}/tables`,body:t,headers:s})).data.metadata}async updateTable(n,t){const s=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Gs(n.namespace)}/tables/${n.name}`,body:t});return{"metadata-location":s.data["metadata-location"],metadata:s.data.metadata}}async dropTable(n,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gs(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((t==null?void 0:t.purge)??!1)}})}async loadTable(n){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gs(n.namespace)}/tables/${n.name}`,headers:t})).data.metadata}async tableExists(n){const t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gs(n.namespace)}/tables/${n.name}`,headers:t}),!0}catch(s){if(s instanceof gr&&s.status===404)return!1;throw s}}async createTableIfNotExists(n,t){try{return await this.createTable(n,t)}catch(s){if(s instanceof gr&&s.status===409)return await this.loadTable({namespace:n.namespace,name:t.name});throw s}}},Gy=class{constructor(n){var r;let t="v1";n.catalogName&&(t+=`/${n.catalogName}`);const s=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=Uy({baseUrl:s,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(r=n.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new zy(this.client,t),this.tableOps=new Fy(this.client,t,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,t){return this.namespaceOps.createNamespace(n,t)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,t){return this.tableOps.createTable(n,t)}async updateTable(n,t){return this.tableOps.updateTable(n,t)}async dropTable(n,t){await this.tableOps.dropTable(n,t)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,t){return this.namespaceOps.createNamespaceIfNotExists(n,t)}async createTableIfNotExists(n,t){return this.tableOps.createTableIfNotExists(n,t)}},vl=class extends Error{constructor(n,t="storage",s,r){super(n),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=s,this.statusCode=r}};function _l(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Zo=class extends vl{constructor(n,t,s,r="storage"){super(n,r,t,s),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=s}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},I_=class extends vl{constructor(n,t,s="storage"){super(n,s),this.name=s==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};const Hy=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),By=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Rd=n=>{if(Array.isArray(n))return n.map(s=>Rd(s));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([s,r])=>{const l=s.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));t[l]=Rd(r)}),t},Qy=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function vr(n){"@babel/helpers - typeof";return vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vr(n)}function Ky(n,t){if(vr(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var r=s.call(n,t);if(vr(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function $y(n){var t=Ky(n,"string");return vr(t)=="symbol"?t:t+""}function Jy(n,t,s){return(t=$y(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function rv(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),s.push.apply(s,r)}return s}function ge(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?rv(Object(s),!0).forEach(function(r){Jy(n,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):rv(Object(s)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(s,r))})}return n}const ov=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},Yy=async(n,t,s,r)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(s!=null&&s.noResolveJson)){const l=n,u=l.status||500;if(typeof l.json=="function")l.json().then(c=>{const p=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||u+"";t(new Zo(ov(c),u,p,r))}).catch(()=>{if(r==="vectors"){const c=u+"";t(new Zo(l.statusText||`HTTP ${u} error`,u,c,r))}else{const c=u+"";t(new Zo(l.statusText||`HTTP ${u} error`,u,c,r))}});else{const c=u+"";t(new Zo(l.statusText||`HTTP ${u} error`,u,c,r))}}else t(new I_(ov(n),n,r))},Wy=(n,t,s,r)=>{const l={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"||n==="HEAD"||!r?ge(ge({},l),s):(By(r)?(l.headers=ge({"Content-Type":"application/json"},t==null?void 0:t.headers),l.body=JSON.stringify(r)):l.body=r,t!=null&&t.duplex&&(l.duplex=t.duplex),ge(ge({},l),s))};async function ar(n,t,s,r,l,u,c){return new Promise((p,h)=>{n(s,Wy(t,r,l,u)).then(f=>{if(!f.ok)throw f;if(r!=null&&r.noResolveJson)return f;if(c==="vectors"){const g=f.headers.get("content-type");if(f.headers.get("content-length")==="0"||f.status===204)return{};if(!g||!g.includes("application/json"))return{}}return f.json()}).then(f=>p(f)).catch(f=>Yy(f,h,r,c))})}function P_(n="storage"){return{get:async(t,s,r,l)=>ar(t,"GET",s,r,l,void 0,n),post:async(t,s,r,l,u)=>ar(t,"POST",s,l,u,r,n),put:async(t,s,r,l,u)=>ar(t,"PUT",s,l,u,r,n),head:async(t,s,r,l)=>ar(t,"HEAD",s,ge(ge({},r),{},{noResolveJson:!0}),l,void 0,n),remove:async(t,s,r,l,u)=>ar(t,"DELETE",s,l,u,r,n)}}const Xy=P_("storage"),{get:_r,post:gt,put:Od,head:Zy,remove:Zd}=Xy,Wn=P_("vectors");var aa=class{constructor(n,t={},s,r="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=t,this.fetch=Hy(s),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(n){var t=this;try{return{data:await n(),error:null}}catch(s){if(t.shouldThrowOnError)throw s;if(_l(s))return{data:null,error:s};throw s}}},e2=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t}then(n,t){return this.execute().then(n,t)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(_l(t))return{data:null,error:t};throw t}}};let x_;x_=Symbol.toStringTag;var n2=class{constructor(n,t){this.downloadFn=n,this.shouldThrowOnError=t,this[x_]="BlobDownloadBuilder",this.promise=null}asStream(){return new e2(this.downloadFn,this.shouldThrowOnError)}then(n,t){return this.getPromise().then(n,t)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(t){if(n.shouldThrowOnError)throw t;if(_l(t))return{data:null,error:t};throw t}}};const t2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},lv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var i2=class extends aa{constructor(n,t={},s,r){super(n,t,r,"storage"),this.bucketId=s}async uploadOrUpdate(n,t,s,r){var l=this;return l.handleOperation(async()=>{let u;const c=ge(ge({},lv),r);let p=ge(ge({},l.headers),n==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&s instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),h&&u.append("metadata",l.encodeMetadata(h)),u.append("",s)):typeof FormData<"u"&&s instanceof FormData?(u=s,u.has("cacheControl")||u.append("cacheControl",c.cacheControl),h&&!u.has("metadata")&&u.append("metadata",l.encodeMetadata(h))):(u=s,p["cache-control"]=`max-age=${c.cacheControl}`,p["content-type"]=c.contentType,h&&(p["x-metadata"]=l.toBase64(l.encodeMetadata(h))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!c.duplex&&(c.duplex="half")),r!=null&&r.headers&&(p=ge(ge({},p),r.headers));const f=l._removeEmptyFolders(t),g=l._getFinalPath(f),v=await(n=="PUT"?Od:gt)(l.fetch,`${l.url}/object/${g}`,u,ge({headers:p},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{path:f,id:v.Id,fullPath:v.Key}})}async upload(n,t,s){return this.uploadOrUpdate("POST",n,t,s)}async uploadToSignedUrl(n,t,s,r){var l=this;const u=l._removeEmptyFolders(n),c=l._getFinalPath(u),p=new URL(l.url+`/object/upload/sign/${c}`);return p.searchParams.set("token",t),l.handleOperation(async()=>{let h;const f=ge({upsert:lv.upsert},r),g=ge(ge({},l.headers),{"x-upsert":String(f.upsert)});return typeof Blob<"u"&&s instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),h.append("",s)):typeof FormData<"u"&&s instanceof FormData?(h=s,h.append("cacheControl",f.cacheControl)):(h=s,g["cache-control"]=`max-age=${f.cacheControl}`,g["content-type"]=f.contentType),{path:u,fullPath:(await Od(l.fetch,p.toString(),h,{headers:g})).Key}})}async createSignedUploadUrl(n,t){var s=this;return s.handleOperation(async()=>{let r=s._getFinalPath(n);const l=ge({},s.headers);t!=null&&t.upsert&&(l["x-upsert"]="true");const u=await gt(s.fetch,`${s.url}/object/upload/sign/${r}`,{},{headers:l}),c=new URL(s.url+u.url),p=c.searchParams.get("token");if(!p)throw new vl("No token returned by API");return{signedUrl:c.toString(),path:n,token:p}})}async update(n,t,s){return this.uploadOrUpdate("PUT",n,t,s)}async move(n,t,s){var r=this;return r.handleOperation(async()=>await gt(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:r.headers}))}async copy(n,t,s){var r=this;return r.handleOperation(async()=>({path:(await gt(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:n,destinationKey:t,destinationBucket:s==null?void 0:s.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(n,t,s){var r=this;return r.handleOperation(async()=>{let l=r._getFinalPath(n),u=await gt(r.fetch,`${r.url}/object/sign/${l}`,ge({expiresIn:t},s!=null&&s.transform?{transform:s.transform}:{}),{headers:r.headers});const c=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return{signedUrl:encodeURI(`${r.url}${u.signedURL}${c}`)}})}async createSignedUrls(n,t,s){var r=this;return r.handleOperation(async()=>{const l=await gt(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:n},{headers:r.headers}),u=s!=null&&s.download?`&download=${s.download===!0?"":s.download}`:"";return l.map(c=>ge(ge({},c),{},{signedUrl:c.signedURL?encodeURI(`${r.url}${c.signedURL}${u}`):null}))})}download(n,t,s){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),u=l?`?${l}`:"",c=this._getFinalPath(n),p=()=>_r(this.fetch,`${this.url}/${r}/${c}${u}`,{headers:this.headers,noResolveJson:!0},s);return new n2(p,this.shouldThrowOnError)}async info(n){var t=this;const s=t._getFinalPath(n);return t.handleOperation(async()=>Rd(await _r(t.fetch,`${t.url}/object/info/${s}`,{headers:t.headers})))}async exists(n){var t=this;const s=t._getFinalPath(n);try{return await Zy(t.fetch,`${t.url}/object/${s}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(_l(r)&&r instanceof I_){const l=r.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:r}}throw r}}getPublicUrl(n,t){const s=this._getFinalPath(n),r=[],l=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";l!==""&&r.push(l);const u=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});c!==""&&r.push(c);let p=r.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${u}/public/${s}${p}`)}}}async remove(n){var t=this;return t.handleOperation(async()=>await Zd(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:n},{headers:t.headers}))}async list(n,t,s){var r=this;return r.handleOperation(async()=>{const l=ge(ge(ge({},t2),t),{},{prefix:n||""});return await gt(r.fetch,`${r.url}/object/list/${r.bucketId}`,l,{headers:r.headers},s)})}async listV2(n,t){var s=this;return s.handleOperation(async()=>{const r=ge({},n);return await gt(s.fetch,`${s.url}/object/list-v2/${s.bucketId}`,r,{headers:s.headers},t)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const t=[];return n.width&&t.push(`width=${n.width}`),n.height&&t.push(`height=${n.height}`),n.resize&&t.push(`resize=${n.resize}`),n.format&&t.push(`format=${n.format}`),n.quality&&t.push(`quality=${n.quality}`),t.join("&")}};const s2="2.95.3",br={"X-Client-Info":`storage-js/${s2}`};var a2=class extends aa{constructor(n,t={},s,r){const l=new URL(n);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase."));const u=l.href.replace(/\/$/,""),c=ge(ge({},br),t);super(u,c,s,"storage")}async listBuckets(n){var t=this;return t.handleOperation(async()=>{const s=t.listBucketOptionsToQueryString(n);return await _r(t.fetch,`${t.url}/bucket${s}`,{headers:t.headers})})}async getBucket(n){var t=this;return t.handleOperation(async()=>await _r(t.fetch,`${t.url}/bucket/${n}`,{headers:t.headers}))}async createBucket(n,t={public:!1}){var s=this;return s.handleOperation(async()=>await gt(s.fetch,`${s.url}/bucket`,{id:n,name:n,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}))}async updateBucket(n,t){var s=this;return s.handleOperation(async()=>await Od(s.fetch,`${s.url}/bucket/${n}`,{id:n,name:n,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:s.headers}))}async emptyBucket(n){var t=this;return t.handleOperation(async()=>await gt(t.fetch,`${t.url}/bucket/${n}/empty`,{},{headers:t.headers}))}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await Zd(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(n){const t={};return n&&("limit"in n&&(t.limit=String(n.limit)),"offset"in n&&(t.offset=String(n.offset)),n.search&&(t.search=n.search),n.sortColumn&&(t.sortColumn=n.sortColumn),n.sortOrder&&(t.sortOrder=n.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},r2=class extends aa{constructor(n,t={},s){const r=n.replace(/\/$/,""),l=ge(ge({},br),t);super(r,l,s,"storage")}async createBucket(n){var t=this;return t.handleOperation(async()=>await gt(t.fetch,`${t.url}/bucket`,{name:n},{headers:t.headers}))}async listBuckets(n){var t=this;return t.handleOperation(async()=>{const s=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&s.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&s.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&s.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&s.set("sortOrder",n.sortOrder),n!=null&&n.search&&s.set("search",n.search);const r=s.toString(),l=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await _r(t.fetch,l,{headers:t.headers})})}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await Zd(t.fetch,`${t.url}/bucket/${n}`,{},{headers:t.headers}))}from(n){var t=this;if(!Qy(n))throw new vl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const s=new Gy({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(s,{get(l,u){const c=l[u];return typeof c!="function"?c:async(...p)=>{try{return{data:await c.apply(l,p),error:null}}catch(h){if(r)throw h;return{data:null,error:h}}}}})}},o2=class extends aa{constructor(n,t={},s){const r=n.replace(/\/$/,""),l=ge(ge({},br),{},{"Content-Type":"application/json"},t);super(r,l,s,"vectors")}async createIndex(n){var t=this;return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/CreateIndex`,n,{headers:t.headers})||{})}async getIndex(n,t){var s=this;return s.handleOperation(async()=>await Wn.post(s.fetch,`${s.url}/GetIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers}))}async listIndexes(n){var t=this;return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/ListIndexes`,n,{headers:t.headers}))}async deleteIndex(n,t){var s=this;return s.handleOperation(async()=>await Wn.post(s.fetch,`${s.url}/DeleteIndex`,{vectorBucketName:n,indexName:t},{headers:s.headers})||{})}},l2=class extends aa{constructor(n,t={},s){const r=n.replace(/\/$/,""),l=ge(ge({},br),{},{"Content-Type":"application/json"},t);super(r,l,s,"vectors")}async putVectors(n){var t=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/PutVectors`,n,{headers:t.headers})||{})}async getVectors(n){var t=this;return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/GetVectors`,n,{headers:t.headers}))}async listVectors(n){var t=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/ListVectors`,n,{headers:t.headers}))}async queryVectors(n){var t=this;return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/QueryVectors`,n,{headers:t.headers}))}async deleteVectors(n){var t=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/DeleteVectors`,n,{headers:t.headers})||{})}},u2=class extends aa{constructor(n,t={},s){const r=n.replace(/\/$/,""),l=ge(ge({},br),{},{"Content-Type":"application/json"},t);super(r,l,s,"vectors")}async createBucket(n){var t=this;return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{})}async getBucket(n){var t=this;return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:n},{headers:t.headers}))}async listBuckets(n={}){var t=this;return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/ListVectorBuckets`,n,{headers:t.headers}))}async deleteBucket(n){var t=this;return t.handleOperation(async()=>await Wn.post(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:t.headers})||{})}},c2=class extends u2{constructor(n,t={}){super(n,t.headers||{},t.fetch)}from(n){return new d2(this.url,this.headers,n,this.fetch)}async createBucket(n){var t=()=>super.createBucket,s=this;return t().call(s,n)}async getBucket(n){var t=()=>super.getBucket,s=this;return t().call(s,n)}async listBuckets(n={}){var t=()=>super.listBuckets,s=this;return t().call(s,n)}async deleteBucket(n){var t=()=>super.deleteBucket,s=this;return t().call(s,n)}},d2=class extends o2{constructor(n,t,s,r){super(n,t,r),this.vectorBucketName=s}async createIndex(n){var t=()=>super.createIndex,s=this;return t().call(s,ge(ge({},n),{},{vectorBucketName:s.vectorBucketName}))}async listIndexes(n={}){var t=()=>super.listIndexes,s=this;return t().call(s,ge(ge({},n),{},{vectorBucketName:s.vectorBucketName}))}async getIndex(n){var t=()=>super.getIndex,s=this;return t().call(s,s.vectorBucketName,n)}async deleteIndex(n){var t=()=>super.deleteIndex,s=this;return t().call(s,s.vectorBucketName,n)}index(n){return new p2(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},p2=class extends l2{constructor(n,t,s,r,l){super(n,t,l),this.vectorBucketName=s,this.indexName=r}async putVectors(n){var t=()=>super.putVectors,s=this;return t().call(s,ge(ge({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async getVectors(n){var t=()=>super.getVectors,s=this;return t().call(s,ge(ge({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async listVectors(n={}){var t=()=>super.listVectors,s=this;return t().call(s,ge(ge({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async queryVectors(n){var t=()=>super.queryVectors,s=this;return t().call(s,ge(ge({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}async deleteVectors(n){var t=()=>super.deleteVectors,s=this;return t().call(s,ge(ge({},n),{},{vectorBucketName:s.vectorBucketName,indexName:s.indexName}))}},m2=class extends a2{constructor(n,t={},s,r){super(n,t,s,r)}from(n){return new i2(this.url,this.headers,n,this.fetch)}get vectors(){return new c2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new r2(this.url+"/iceberg",this.headers,this.fetch)}};const L_="2.95.3",Ws=30*1e3,Dd=3,od=Dd*Ws,f2="http://localhost:9999",h2="supabase.auth.token",g2={"X-Client-Info":`gotrue-js/${L_}`},qd="X-Supabase-Api-Version",w_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},v2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_2=600*1e3;class Cr extends Error{constructor(t,s,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=r}}function le(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class C2 extends Cr{constructor(t,s,r){super(t,s,r),this.name="AuthApiError",this.status=s,this.code=r}}function T2(n){return le(n)&&n.name==="AuthApiError"}class $i extends Cr{constructor(t,s){super(t),this.name="AuthUnknownError",this.originalError=s}}class $t extends Cr{constructor(t,s,r,l){super(t,r,l),this.name=s,this.status=r}}class Yn extends $t{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function ld(n){return le(n)&&n.name==="AuthSessionMissingError"}class Hs extends $t{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class el extends $t{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class nl extends $t{constructor(t,s=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function A2(n){return le(n)&&n.name==="AuthImplicitGrantRedirectError"}class uv extends $t{constructor(t,s=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class E2 extends $t{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class Nd extends $t{constructor(t,s){super(t,"AuthRetryableFetchError",s,void 0)}}function ud(n){return le(n)&&n.name==="AuthRetryableFetchError"}class cv extends $t{constructor(t,s,r){super(t,"AuthWeakPasswordError",s,"weak_password"),this.reasons=r}}class Vd extends $t{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ll="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),dv=` 	
\r=`.split(""),S2=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<dv.length;t+=1)n[dv[t].charCodeAt(0)]=-2;for(let t=0;t<ll.length;t+=1)n[ll[t].charCodeAt(0)]=t;return n})();function pv(n,t,s){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;s(ll[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;s(ll[r]),t.queuedBits-=6}}function j_(n,t,s){const r=S2[n];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)s(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function mv(n){const t=[],s=c=>{t.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},u=c=>{y2(c,r,s)};for(let c=0;c<n.length;c+=1)j_(n.charCodeAt(c),l,u);return t.join("")}function M2(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function b2(n,t){for(let s=0;s<n.length;s+=1){let r=n.charCodeAt(s);if(r>55295&&r<=56319){const l=(r-55296)*1024&65535;r=(n.charCodeAt(s+1)-56320&65535|l)+65536,s+=1}M2(r,t)}}function y2(n,t,s){if(t.utf8seq===0){if(n<=127){s(n);return}for(let r=1;r<6;r+=1)if((n>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&s(t.codepoint)}}function na(n){const t=[],s={queue:0,queuedBits:0},r=l=>{t.push(l)};for(let l=0;l<n.length;l+=1)j_(n.charCodeAt(l),s,r);return new Uint8Array(t)}function R2(n){const t=[];return b2(n,s=>t.push(s)),new Uint8Array(t)}function Ji(n){const t=[],s={queue:0,queuedBits:0},r=l=>{t.push(l)};return n.forEach(l=>pv(l,s,r)),pv(null,s,r),t.join("")}function O2(n){return Math.round(Date.now()/1e3)+n}function D2(){return Symbol("auth-callback")}const En=()=>typeof window<"u"&&typeof document<"u",Hi={tested:!1,writable:!1},k_=()=>{if(!En())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Hi.tested)return Hi.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Hi.tested=!0,Hi.writable=!0}catch{Hi.tested=!0,Hi.writable=!1}return Hi.writable};function q2(n){const t={},s=new URL(n);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((l,u)=>{t[u]=l})}catch{}return s.searchParams.forEach((r,l)=>{t[l]=r}),t}const U_=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),N2=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Xs=async(n,t,s)=>{await n.setItem(t,JSON.stringify(s))},Bi=async(n,t)=>{const s=await n.getItem(t);if(!s)return null;try{return JSON.parse(s)}catch{return s}},An=async(n,t)=>{await n.removeItem(t)};class Cl{constructor(){this.promise=new Cl.promiseConstructor((t,s)=>{this.resolve=t,this.reject=s})}}Cl.promiseConstructor=Promise;function tl(n){const t=n.split(".");if(t.length!==3)throw new Vd("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!v2.test(t[r]))throw new Vd("JWT not in base64url format");return{header:JSON.parse(mv(t[0])),payload:JSON.parse(mv(t[1])),signature:na(t[2]),raw:{header:t[0],payload:t[1]}}}async function V2(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function I2(n,t){return new Promise((r,l)=>{(async()=>{for(let u=0;u<1/0;u++)try{const c=await n(u);if(!t(u,null,c)){r(c);return}}catch(c){if(!t(u,c)){l(c);return}}})()})}function P2(n){return("0"+n.toString(16)).substr(-2)}function x2(){const t=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=s.length;let l="";for(let u=0;u<56;u++)l+=s.charAt(Math.floor(Math.random()*r));return l}return crypto.getRandomValues(t),Array.from(t,P2).join("")}async function L2(n){const s=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",s),l=new Uint8Array(r);return Array.from(l).map(u=>String.fromCharCode(u)).join("")}async function w2(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const s=await L2(n);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bs(n,t,s=!1){const r=x2();let l=r;s&&(l+="/PASSWORD_RECOVERY"),await Xs(n,`${t}-code-verifier`,l);const u=await w2(r);return[u,r===u?"plain":"s256"]}const j2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function k2(n){const t=n.headers.get(qd);if(!t||!t.match(j2))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function U2(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function z2(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const F2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qs(n){if(!F2.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function cd(){const n={};return new Proxy(n,{get:(t,s)=>{if(s==="__isUserNotAvailableProxy")return!0;if(typeof s=="symbol"){const r=s.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${s}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,s)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${s}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function G2(n,t){return new Proxy(n,{get:(s,r,l)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const u=r.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(s,r,l)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(s,r,l)}})}function fv(n){return JSON.parse(JSON.stringify(n))}const Qi=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),H2=[502,503,504];async function hv(n){var t;if(!N2(n))throw new Nd(Qi(n),0);if(H2.includes(n.status))throw new Nd(Qi(n),n.status);let s;try{s=await n.json()}catch(u){throw new $i(Qi(u),u)}let r;const l=k2(n);if(l&&l.getTime()>=w_["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?r=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(r=s.error_code),r){if(r==="weak_password")throw new cv(Qi(s),n.status,((t=s.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Yn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((u,c)=>u&&typeof c=="string",!0))throw new cv(Qi(s),n.status,s.weak_password.reasons);throw new C2(Qi(s),n.status||500,r)}const B2=(n,t,s,r)=>{const l={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),l.body=JSON.stringify(r),Object.assign(Object.assign({},l),s))};async function he(n,t,s,r){var l;const u=Object.assign({},r==null?void 0:r.headers);u[qd]||(u[qd]=w_["2024-01-01"].name),r!=null&&r.jwt&&(u.Authorization=`Bearer ${r.jwt}`);const c=(l=r==null?void 0:r.query)!==null&&l!==void 0?l:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const p=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await Q2(n,t,s+p,{headers:u,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function Q2(n,t,s,r,l,u){const c=B2(t,r,l,u);let p;try{p=await n(s,Object.assign({},c))}catch(h){throw console.error(h),new Nd(Qi(h),0)}if(p.ok||await hv(p),r!=null&&r.noResolveJson)return p;try{return await p.json()}catch(h){await hv(h)}}function ht(n){var t;let s=null;J2(n)&&(s=Object.assign({},n),n.expires_at||(s.expires_at=O2(n.expires_in)));const r=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:s,user:r},error:null}}function gv(n){const t=ht(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((s,r)=>s&&typeof r=="string",!0)&&(t.data.weak_password=n.weak_password),t}function Ei(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function K2(n){return{data:n,error:null}}function $2(n){const{action_link:t,email_otp:s,hashed_token:r,redirect_to:l,verification_type:u}=n,c=gl(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:t,email_otp:s,hashed_token:r,redirect_to:l,verification_type:u},h=Object.assign({},c);return{data:{properties:p,user:h},error:null}}function vv(n){return n}function J2(n){return n.access_token&&n.refresh_token&&n.expires_in}const dd=["global","local","others"];class Y2{constructor({url:t="",headers:s={},fetch:r}){this.url=t,this.headers=s,this.fetch=U_(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,s=dd[0]){if(dd.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${dd.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,s={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:Ei})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:s}=t,r=gl(t,["options"]),l=Object.assign(Object.assign({},r),s);return"newEmail"in r&&(l.new_email=r==null?void 0:r.newEmail,delete l.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:$2,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(le(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(t){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ei})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async listUsers(t){var s,r,l,u,c,p,h;try{const f={nextPage:null,lastPage:0,total:0},g=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(u=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:vv});if(g.error)throw g.error;const v=await g.json(),T=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,C=(h=(p=g.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&h!==void 0?h:[];return C.length>0&&(C.forEach(E=>{const M=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(E.split(";")[1].split("=")[1]);f[`${q}Page`]=M}),f.total=parseInt(T)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(le(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){Qs(t);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ei})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async updateUserById(t,s){Qs(t);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:s,headers:this.headers,xform:Ei})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,s=!1){Qs(t);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:s},xform:Ei})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Qs(t.userId);try{const{data:s,error:r}=await he(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:s,error:r}}catch(s){if(le(s))return{data:null,error:s};throw s}}async _deleteFactor(t){Qs(t.userId),Qs(t.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async _listOAuthClients(t){var s,r,l,u,c,p,h;try{const f={nextPage:null,lastPage:0,total:0},g=await he(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(s=t==null?void 0:t.page)===null||s===void 0?void 0:s.toString())!==null&&r!==void 0?r:"",per_page:(u=(l=t==null?void 0:t.perPage)===null||l===void 0?void 0:l.toString())!==null&&u!==void 0?u:""},xform:vv});if(g.error)throw g.error;const v=await g.json(),T=(c=g.headers.get("x-total-count"))!==null&&c!==void 0?c:0,C=(h=(p=g.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&h!==void 0?h:[];return C.length>0&&(C.forEach(E=>{const M=parseInt(E.split(";")[0].split("=")[1].substring(0,1)),q=JSON.parse(E.split(";")[1].split("=")[1]);f[`${q}Page`]=M}),f.total=parseInt(T)),{data:Object.assign(Object.assign({},v),f),error:null}}catch(f){if(le(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _getOAuthClient(t){try{return await he(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _updateOAuthClient(t,s){try{return await he(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:s,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(le(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await he(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async _regenerateOAuthClientSecret(t){try{return await he(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:s=>({data:s,error:null})})}catch(s){if(le(s))return{data:null,error:s};throw s}}}function _v(n={}){return{getItem:t=>n[t]||null,setItem:(t,s)=>{n[t]=s},removeItem:t=>{delete n[t]}}}const Ks={debug:!!(globalThis&&k_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class z_ extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class W2 extends z_{}async function X2(n,t,s){Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async l=>{if(l){Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,l.name);try{return await s()}finally{Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,l.name)}}else{if(t===0)throw Ks.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new W2(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Ks.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}function Z2(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function F_(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function eR(n){return parseInt(n,16)}function nR(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function tR(n){var t;const{chainId:s,domain:r,expirationTime:l,issuedAt:u=new Date,nonce:c,notBefore:p,requestId:h,resources:f,scheme:g,uri:v,version:T}=n;{if(!Number.isInteger(s))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${s}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const C=F_(n.address),E=g?`${g}://${r}`:r,M=n.statement?`${n.statement}
`:"",q=`${E} wants you to sign in with your Ethereum account:
${C}

${M}`;let y=`URI: ${v}
Version: ${T}
Chain ID: ${s}${c?`
Nonce: ${c}`:""}
Issued At: ${u.toISOString()}`;if(l&&(y+=`
Expiration Time: ${l.toISOString()}`),p&&(y+=`
Not Before: ${p.toISOString()}`),h&&(y+=`
Request ID: ${h}`),f){let I=`
Resources:`;for(const O of f){if(!O||typeof O!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${O}`);I+=`
- ${O}`}y+=I}return`${q}
${y}`}class cn extends Error{constructor({message:t,code:s,cause:r,name:l}){var u;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(u=l??(r instanceof Error?r.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=s}}class ul extends cn{constructor(t,s){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:s,message:t}),this.name="WebAuthnUnknownError",this.originalError=s}}function iR({error:n,options:t}){var s,r,l;const{publicKey:u}=t;if(!u)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new cn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((s=u.authenticatorSelection)===null||s===void 0?void 0:s.requireResidentKey)===!0)return new cn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((r=u.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new cn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((l=u.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new cn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new cn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new cn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return u.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new cn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new cn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(G_(c)){if(u.rp.id!==c)return new cn({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new cn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new cn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function sR({error:n,options:t}){const{publicKey:s}=t;if(!s)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new cn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new cn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const r=window.location.hostname;if(G_(r)){if(s.rpId!==r)return new cn({message:`The RP ID "${s.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new cn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new cn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new cn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class aR{createNewAbortSignal(){if(this.controller){const s=new Error("Cancelling existing WebAuthn API call for new one");s.name="AbortError",this.controller.abort(s)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const rR=new aR;function oR(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:s,excludeCredentials:r}=n,l=gl(n,["challenge","user","excludeCredentials"]),u=na(t).buffer,c=Object.assign(Object.assign({},s),{id:na(s.id).buffer}),p=Object.assign(Object.assign({},l),{challenge:u,user:c});if(r&&r.length>0){p.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const f=r[h];p.excludeCredentials[h]=Object.assign(Object.assign({},f),{id:na(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return p}function lR(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:s}=n,r=gl(n,["challenge","allowCredentials"]),l=na(t).buffer,u=Object.assign(Object.assign({},r),{challenge:l});if(s&&s.length>0){u.allowCredentials=new Array(s.length);for(let c=0;c<s.length;c++){const p=s[c];u.allowCredentials[c]=Object.assign(Object.assign({},p),{id:na(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return u}function uR(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n;return{id:n.id,rawId:n.id,response:{attestationObject:Ji(new Uint8Array(n.response.attestationObject)),clientDataJSON:Ji(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function cR(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const s=n,r=n.getClientExtensionResults(),l=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Ji(new Uint8Array(l.authenticatorData)),clientDataJSON:Ji(new Uint8Array(l.clientDataJSON)),signature:Ji(new Uint8Array(l.signature)),userHandle:l.userHandle?Ji(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=s.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function G_(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Cv(){var n,t;return!!(En()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function dR(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ul("Browser returned unexpected credential type",t)}:{data:null,error:new ul("Empty credential response",t)}}catch(t){return{data:null,error:iR({error:t,options:n})}}}async function pR(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ul("Browser returned unexpected credential type",t)}:{data:null,error:new ul("Empty credential response",t)}}catch(t){return{data:null,error:sR({error:t,options:n})}}}const mR={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},fR={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function cl(...n){const t=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),s=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),r={};for(const l of n)if(l)for(const u in l){const c=l[u];if(c!==void 0)if(Array.isArray(c))r[u]=c;else if(s(c))r[u]=c;else if(t(c)){const p=r[u];t(p)?r[u]=cl(p,c):r[u]=cl(c)}else r[u]=c}return r}function hR(n,t){return cl(mR,n,t||{})}function gR(n,t){return cl(fR,n,t||{})}class vR{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:s,friendlyName:r,signal:l},u){var c;try{const{data:p,error:h}=await this.client.mfa.challenge({factorId:t,webauthn:s});if(!p)return{data:null,error:h};const f=l??rR.createNewAbortSignal();if(p.webauthn.type==="create"){const{user:g}=p.webauthn.credential_options.publicKey;if(!g.name){const v=r;if(v)g.name=`${g.id}:${v}`;else{const C=(await this.client.getUser()).data.user,E=((c=C==null?void 0:C.user_metadata)===null||c===void 0?void 0:c.name)||(C==null?void 0:C.email)||(C==null?void 0:C.id)||"User";g.name=`${g.id}:${E}`}}g.displayName||(g.displayName=g.name)}switch(p.webauthn.type){case"create":{const g=hR(p.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:v,error:T}=await dR({publicKey:g,signal:f});return v?{data:{factorId:t,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:v}},error:null}:{data:null,error:T}}case"request":{const g=gR(p.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:v,error:T}=await pR(Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:g,signal:f}));return v?{data:{factorId:t,challengeId:p.id,webauthn:{type:p.webauthn.type,credential_response:v}},error:null}:{data:null,error:T}}}}catch(p){return le(p)?{data:null,error:p}:{data:null,error:new $i("Unexpected error in challenge",p)}}}async _verify({challengeId:t,factorId:s,webauthn:r}){return this.client.mfa.verify({factorId:s,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!s)return{data:null,error:new Cr("rpId is required for WebAuthn authentication")};try{if(!Cv())return{data:null,error:new $i("Browser does not support WebAuthn",null)};const{data:c,error:p}=await this.challenge({factorId:t,webauthn:{rpId:s,rpOrigins:r},signal:l},{request:u});if(!c)return{data:null,error:p};const{webauthn:h}=c;return this._verify({factorId:t,challengeId:c.challengeId,webauthn:{type:h.type,rpId:s,rpOrigins:r,credential_response:h.credential_response}})}catch(c){return le(c)?{data:null,error:c}:{data:null,error:new $i("Unexpected error in authenticate",c)}}}async _register({friendlyName:t,webauthn:{rpId:s=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},u){if(!s)return{data:null,error:new Cr("rpId is required for WebAuthn registration")};try{if(!Cv())return{data:null,error:new $i("Browser does not support WebAuthn",null)};const{data:c,error:p}=await this._enroll({friendlyName:t});if(!c)return await this.client.mfa.listFactors().then(g=>{var v;return(v=g.data)===null||v===void 0?void 0:v.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===t&&T.status!=="unverified")}).then(g=>g?this.client.mfa.unenroll({factorId:g==null?void 0:g.id}):void 0),{data:null,error:p};const{data:h,error:f}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:s,rpOrigins:r},signal:l},{create:u});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:s,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:f}}catch(c){return le(c)?{data:null,error:c}:{data:null,error:new $i("Unexpected error in register",c)}}}}Z2();const _R={url:f2,storageKey:h2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:g2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Tv(n,t,s){return await s()}const $s={};class Tr{get jwks(){var t,s;return(s=(t=$s[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&s!==void 0?s:{keys:[]}}set jwks(t){$s[this.storageKey]=Object.assign(Object.assign({},$s[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,s;return(s=(t=$s[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&s!==void 0?s:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){$s[this.storageKey]=Object.assign(Object.assign({},$s[this.storageKey]),{cachedAt:t})}constructor(t){var s,r,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},_R),t);if(this.storageKey=u.storageKey,this.instanceID=(s=Tr.nextInstanceID[this.storageKey])!==null&&s!==void 0?s:0,Tr.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&En()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new Y2({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=U_(u.fetch),this.lock=u.lock||Tv,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,this.lockAcquireTimeout=u.lockAcquireTimeout,u.lock?this.lock=u.lock:this.persistSession&&En()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=X2:this.lock=Tv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new vR(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:k_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=_v(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=_v(this.memoryStorage)),En()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c);try{await this._notifyAllSubscribers(c.data.event,c.data.session,!1)}catch(p){this._debug("#broadcastChannel","error",p)}})}this.initialize().catch(c=>{this._debug("#initialize()","error",c)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${L_}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let s={},r="none";if(En()&&(s=q2(window.location.href),this._isImplicitGrantCallback(s)?r="implicit":await this._isPKCECallback(s)&&(r="pkce")),En()&&this.detectSessionInUrl&&r!=="none"){const{data:l,error:u}=await this._getSessionFromURL(s,r);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),A2(u)){const h=(t=u.details)===null||t===void 0?void 0:t.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:u}}return{error:u}}const{session:c,redirectType:p}=l;return this._debug("#_initialize()","detected session in URL",c,"redirect type",p),await this._saveSession(c),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return le(s)?this._returnResult({error:s}):this._returnResult({error:new $i("Unexpected error during initialization",s)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var s,r,l;try{const u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(l=t==null?void 0:t.options)===null||l===void 0?void 0:l.captchaToken}},xform:ht}),{data:c,error:p}=u;if(p||!c)return this._returnResult({data:{user:null,session:null},error:p});const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(u){if(le(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(t){var s,r,l;try{let u;if("email"in t){const{email:g,password:v,options:T}=t;let C=null,E=null;this.flowType==="pkce"&&([C,E]=await Bs(this.storage,this.storageKey)),u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:g,password:v,data:(s=T==null?void 0:T.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:C,code_challenge_method:E},xform:ht})}else if("phone"in t){const{phone:g,password:v,options:T}=t;u=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(r=T==null?void 0:T.data)!==null&&r!==void 0?r:{},channel:(l=T==null?void 0:T.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:ht})}else throw new el("You must provide either an email or phone number and a password");const{data:c,error:p}=u;if(p||!c)return await An(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:p});const h=c.session,f=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(u){if(await An(this.storage,`${this.storageKey}-code-verifier`),le(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(t){try{let s;if("email"in t){const{email:u,password:c,options:p}=t;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:c,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:gv})}else if("phone"in t){const{phone:u,password:c,options:p}=t;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:c,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:gv})}else throw new el("You must provide either an email or phone number and a password");const{data:r,error:l}=s;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!r||!r.session||!r.user){const u=new Hs;return this._returnResult({data:{user:null,session:null},error:u})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:l})}catch(s){if(le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOAuth(t){var s,r,l,u;return await this._handleProviderSignIn(t.provider,{redirectTo:(s=t.options)===null||s===void 0?void 0:s.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(u=t.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:s}=t;switch(s){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}}async signInWithEthereum(t){var s,r,l,u,c,p,h,f,g,v,T;let C,E;if("message"in t)C=t.message,E=t.signature;else{const{chain:M,wallet:q,statement:y,options:I}=t;let O;if(En())if(typeof q=="object")O=q;else{const ue=window;if("ethereum"in ue&&typeof ue.ethereum=="object"&&"request"in ue.ethereum&&typeof ue.ethereum.request=="function")O=ue.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof q!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=q}const G=new URL((s=I==null?void 0:I.url)!==null&&s!==void 0?s:window.location.href),J=await O.request({method:"eth_requestAccounts"}).then(ue=>ue).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!J||J.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const x=F_(J[0]);let $=(r=I==null?void 0:I.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!$){const ue=await O.request({method:"eth_chainId"});$=eR(ue)}const ae={domain:G.host,address:x,statement:y,uri:G.href,version:"1",chainId:$,nonce:(l=I==null?void 0:I.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(c=(u=I==null?void 0:I.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(p=I==null?void 0:I.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(h=I==null?void 0:I.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(f=I==null?void 0:I.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(g=I==null?void 0:I.signInWithEthereum)===null||g===void 0?void 0:g.resources};C=tR(ae),E=await O.request({method:"personal_sign",params:[nR(C),x]})}try{const{data:M,error:q}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:E},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(T=t.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:ht});if(q)throw q;if(!M||!M.session||!M.user){const y=new Hs;return this._returnResult({data:{user:null,session:null},error:y})}return M.session&&(await this._saveSession(M.session),await this._notifyAllSubscribers("SIGNED_IN",M.session)),this._returnResult({data:Object.assign({},M),error:q})}catch(M){if(le(M))return this._returnResult({data:{user:null,session:null},error:M});throw M}}async signInWithSolana(t){var s,r,l,u,c,p,h,f,g,v,T,C;let E,M;if("message"in t)E=t.message,M=t.signature;else{const{chain:q,wallet:y,statement:I,options:O}=t;let G;if(En())if(typeof y=="object")G=y;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))G=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(O!=null&&O.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=y}const J=new URL((s=O==null?void 0:O.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in G&&G.signIn){const x=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},O==null?void 0:O.signInWithSolana),{version:"1",domain:J.host,uri:J.href}),I?{statement:I}:null));let $;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")$=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)$=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)E=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),M=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");E=[`${J.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${J.href}`,`Issued At: ${(l=(r=O==null?void 0:O.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((u=O==null?void 0:O.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${O.signInWithSolana.notBefore}`]:[],...!((c=O==null?void 0:O.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${O.signInWithSolana.expirationTime}`]:[],...!((p=O==null?void 0:O.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${O.signInWithSolana.chainId}`]:[],...!((h=O==null?void 0:O.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${O.signInWithSolana.nonce}`]:[],...!((f=O==null?void 0:O.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${O.signInWithSolana.requestId}`]:[],...!((v=(g=O==null?void 0:O.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...O.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const x=await G.signMessage(new TextEncoder().encode(E),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");M=x}}try{const{data:q,error:y}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:E,signature:Ji(M)},!((T=t.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(C=t.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:ht});if(y)throw y;if(!q||!q.session||!q.user){const I=new Hs;return this._returnResult({data:{user:null,session:null},error:I})}return q.session&&(await this._saveSession(q.session),await this._notifyAllSubscribers("SIGNED_IN",q.session)),this._returnResult({data:Object.assign({},q),error:y})}catch(q){if(le(q))return this._returnResult({data:{user:null,session:null},error:q});throw q}}async _exchangeCodeForSession(t){const s=await Bi(this.storage,`${this.storageKey}-code-verifier`),[r,l]=(s??"").split("/");try{if(!r&&this.flowType==="pkce")throw new E2;const{data:u,error:c}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ht});if(await An(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!u||!u.session||!u.user){const p=new Hs;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:l??null}),error:c})}catch(u){if(await An(this.storage,`${this.storageKey}-code-verifier`),le(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(t){try{const{options:s,provider:r,token:l,access_token:u,nonce:c}=t,p=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:l,access_token:u,nonce:c,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:ht}),{data:h,error:f}=p;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!h||!h.session||!h.user){const g=new Hs;return this._returnResult({data:{user:null,session:null},error:g})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:f})}catch(s){if(le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithOtp(t){var s,r,l,u,c;try{if("email"in t){const{email:p,options:h}=t;let f=null,g=null;this.flowType==="pkce"&&([f,g]=await Bs(this.storage,this.storageKey));const{error:v}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:g},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in t){const{phone:p,options:h}=t,{data:f,error:g}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(l=h==null?void 0:h.data)!==null&&l!==void 0?l:{},create_user:(u=h==null?void 0:h.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:g})}throw new el("You must provide either an email or phone number.")}catch(p){if(await An(this.storage,`${this.storageKey}-code-verifier`),le(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(t){var s,r;try{let l,u;"options"in t&&(l=(s=t.options)===null||s===void 0?void 0:s.redirectTo,u=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:p}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:u}}),redirectTo:l,xform:ht});if(p)throw p;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,f=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:f,session:h},error:null})}catch(l){if(le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(t){var s,r,l,u,c;try{let p=null,h=null;this.flowType==="pkce"&&([p,h]=await Bs(this.storage,this.storageKey));const f=await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(s=t.options)===null||s===void 0?void 0:s.redirectTo)!==null&&r!==void 0?r:void 0}),!((l=t==null?void 0:t.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:h}),headers:this.headers,xform:K2});return!((u=f.data)===null||u===void 0)&&u.url&&En()&&!(!((c=t.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(f.data.url),this._returnResult(f)}catch(p){if(await An(this.storage,`${this.storageKey}-code-verifier`),le(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;if(r)throw r;if(!s)throw new Yn;const{error:l}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(t){if(le(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const s=`${this.url}/resend`;if("email"in t){const{email:r,type:l,options:u}=t,{error:c}=await he(this.fetch,"POST",s,{headers:this.headers,body:{email:r,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in t){const{phone:r,type:l,options:u}=t,{data:c,error:p}=await he(this.fetch,"POST",s,{headers:this.headers,body:{phone:r,type:l,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:p})}throw new el("You must provide either an email or phone number and a type")}catch(s){if(le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async s=>s))}async _acquireLock(t,s){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await r,await s()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=s();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await t(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const s=await Bi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?t=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<od:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const c=await Bi(this.userStorage,this.storageKey+"-user");c!=null&&c.user?t.user=c.user:t.user=cd()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};t.user=G2(t.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){if(t)return await this._getUser(t);await this.initializePromise;const s=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return s.data.user&&(this.suppressGetSessionWarning=!0),s}async _getUser(t){try{return t?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ei}):await this._useSession(async s=>{var r,l,u;const{data:c,error:p}=s;if(p)throw p;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Yn}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(l=c.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0,xform:Ei})})}catch(s){if(le(s))return ld(s)&&(await this._removeSession(),await An(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:s});throw s}}async updateUser(t,s={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(t,s))}async _updateUser(t,s={}){try{return await this._useSession(async r=>{const{data:l,error:u}=r;if(u)throw u;if(!l.session)throw new Yn;const c=l.session;let p=null,h=null;this.flowType==="pkce"&&t.email!=null&&([p,h]=await Bs(this.storage,this.storageKey));const{data:f,error:g}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:p,code_challenge_method:h}),jwt:c.access_token,xform:Ei});if(g)throw g;return c.user=f.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(await An(this.storage,`${this.storageKey}-code-verifier`),le(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Yn;const s=Date.now()/1e3;let r=s,l=!0,u=null;const{payload:c}=tl(t.access_token);if(c.exp&&(r=c.exp,l=r<=s),l){const{data:p,error:h}=await this._callRefreshToken(t.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!p)return{data:{user:null,session:null},error:null};u=p}else{const{data:p,error:h}=await this._getUser(t.access_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});u={access_token:t.access_token,refresh_token:t.refresh_token,user:p.user,token_type:"bearer",expires_in:r-s,expires_at:r},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(s){if(le(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async s=>{var r;if(!t){const{data:c,error:p}=s;if(p)throw p;t=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Yn;const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(s){if(le(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async _getSessionFromURL(t,s){try{if(!En())throw new nl("No browser detected.");if(t.error||t.error_description||t.error_code)throw new nl(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new uv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new nl("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new uv("No code detected.");const{data:I,error:O}=await this._exchangeCodeForSession(t.code);if(O)throw O;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:l,access_token:u,refresh_token:c,expires_in:p,expires_at:h,token_type:f}=t;if(!u||!p||!c||!f)throw new nl("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(p);let T=g+v;h&&(T=parseInt(h));const C=T-g;C*1e3<=Ws&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${v}s`);const E=T-v;g-E>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",E,T,g):g-E<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",E,T,g);const{data:M,error:q}=await this._getUser(u);if(q)throw q;const y={provider_token:r,provider_refresh_token:l,access_token:u,expires_in:v,expires_at:T,refresh_token:c,token_type:f,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:t.type},error:null})}catch(r){if(le(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(t){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),t):!!(t.access_token||t.error_description)}async _isPKCECallback(t){const s=await Bi(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&s)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async s=>{var r;const{data:l,error:u}=s;if(u&&!ld(u))return this._returnResult({error:u});const c=(r=l.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:p}=await this.admin.signOut(c,t);if(p&&!(T2(p)&&(p.status===404||p.status===401||p.status===403)||ld(p)))return this._returnResult({error:p})}return t!=="others"&&(await this._removeSession(),await An(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const s=D2(),r={id:s,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async s=>{var r,l;try{const{data:{session:u},error:c}=s;if(c)throw c;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",t,"session",u)}catch(u){await((l=this.stateChangeEmitters.get(t))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",u),console.error(u)}})}async resetPasswordForEmail(t,s={}){let r=null,l=null;this.flowType==="pkce"&&([r,l]=await Bs(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:l,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(u){if(await An(this.storage,`${this.storageKey}-code-verifier`),le(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var t;try{const{data:s,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(t=s.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var s;try{const{data:r,error:l}=await this._useSession(async u=>{var c,p,h,f,g;const{data:v,error:T}=u;if(T)throw T;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(p=t.options)===null||p===void 0?void 0:p.scopes,queryParams:(h=t.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",C,{headers:this.headers,jwt:(g=(f=v.session)===null||f===void 0?void 0:f.access_token)!==null&&g!==void 0?g:void 0})});if(l)throw l;return En()&&!(!((s=t.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:t.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(le(r))return this._returnResult({data:{provider:t.provider,url:null},error:r});throw r}}async linkIdentityIdToken(t){return await this._useSession(async s=>{var r;try{const{error:l,data:{session:u}}=s;if(l)throw l;const{options:c,provider:p,token:h,access_token:f,nonce:g}=t,v=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=u==null?void 0:u.access_token)!==null&&r!==void 0?r:void 0,body:{provider:p,id_token:h,access_token:f,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:ht}),{data:T,error:C}=v;return C?this._returnResult({data:{user:null,session:null},error:C}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new Hs}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:C}))}catch(l){if(await An(this.storage,`${this.storageKey}-code-verifier`),le(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(t){try{return await this._useSession(async s=>{var r,l;const{data:u,error:c}=s;if(c)throw c;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(l=(r=u.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0})})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _refreshAccessToken(t){const s=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{const r=Date.now();return await I2(async l=>(l>0&&await V2(200*Math.pow(2,l-1)),this._debug(s,"refreshing attempt",l),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ht})),(l,u)=>{const c=200*Math.pow(2,l);return u&&ud(u)&&Date.now()+c-r<Ws})}catch(r){if(this._debug(s,"error",r),le(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(s,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,s){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",s,"url",r),En()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,s;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const l=await Bi(this.storage,this.storageKey);if(l&&this.userStorage){let c=await Bi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:l.user},await Xs(this.userStorage,this.storageKey+"-user",c)),l.user=(t=c==null?void 0:c.user)!==null&&t!==void 0?t:cd()}else if(l&&!l.user&&!l.user){const c=await Bi(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(l.user=c.user,await An(this.storage,this.storageKey+"-user"),await Xs(this.storage,this.storageKey,l)):l.user=cd()}if(this._debug(r,"session from storage",l),!this._isValidSession(l)){this._debug(r,"session is not valid"),l!==null&&await this._removeSession();return}const u=((s=l.expires_at)!==null&&s!==void 0?s:1/0)*1e3-Date.now()<od;if(this._debug(r,`session has${u?"":" not"} expired with margin of ${od}s`),u){if(this.autoRefreshToken&&l.refresh_token){const{error:c}=await this._callRefreshToken(l.refresh_token);c&&(console.error(c),ud(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:p}=await this._getUser(l.access_token);!p&&(c!=null&&c.user)?(l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(r,"error",l),console.error(l);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var s,r;if(!t)throw new Yn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new Cl;const{data:u,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!u.session)throw new Yn;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const p={data:u.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(u){if(this._debug(l,"error",u),le(u)){const c={data:null,error:u};return ud(u)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(u),u}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(t,s,r=!0){const l=`#_notifyAllSubscribers(${t})`;this._debug(l,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:s});const u=[],c=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(t,s)}catch(h){u.push(h)}});if(await Promise.all(c),u.length>0){for(let p=0;p<u.length;p+=1)console.error(u[p]);throw u[0]}}finally{this._debug(l,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await An(this.storage,`${this.storageKey}-code-verifier`);const s=Object.assign({},t),r=s.user&&s.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&s.user&&await Xs(this.userStorage,this.storageKey+"-user",{user:s.user});const l=Object.assign({},s);delete l.user;const u=fv(l);await Xs(this.storage,this.storageKey,u)}else{const l=fv(s);await Xs(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await An(this.storage,this.storageKey),await An(this.storage,this.storageKey+"-code-verifier"),await An(this.storage,this.storageKey+"-user"),this.userStorage&&await An(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&En()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ws);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t);const s=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t);const s=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,s&&clearTimeout(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async s=>{const{data:{session:r}}=s;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((r.expires_at*1e3-t)/Ws);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${Ws}ms, refresh threshold is ${Dd} ticks`),l<=Dd&&await this._callRefreshToken(r.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof z_)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!En()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(t){this._debug("#visibilityChangedCallback","error",t)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const s=`#_onVisibilityChanged(${t})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,s,r){const l=[`provider=${encodeURIComponent(s)}`];if(r!=null&&r.redirectTo&&l.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&l.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[u,c]=await Bs(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(c)}`});l.push(p.toString())}if(r!=null&&r.queryParams){const u=new URLSearchParams(r.queryParams);l.push(u.toString())}return r!=null&&r.skipBrowserRedirect&&l.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${l.join("&")}`}async _unenroll(t){try{return await this._useSession(async s=>{var r;const{data:l,error:u}=s;return u?this._returnResult({data:null,error:u}):await he(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _enroll(t){try{return await this._useSession(async s=>{var r,l;const{data:u,error:c}=s;if(c)return this._returnResult({data:null,error:c});const p=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:h,error:f}=await he(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(r=u==null?void 0:u.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(t.factorType==="totp"&&h.type==="totp"&&(!((l=h==null?void 0:h.totp)===null||l===void 0)&&l.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _verify(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var r;const{data:l,error:u}=s;if(u)return this._returnResult({data:null,error:u});const c=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?uR(t.webauthn.credential_response):cR(t.webauthn.credential_response)})}:{code:t.code}),{data:p,error:h}=await he(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:h}))})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}})}async _challenge(t){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async s=>{var r;const{data:l,error:u}=s;if(u)return this._returnResult({data:null,error:u});const c=await he(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:p}=c;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:oR(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:lR(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}})}async _challengeAndVerify(t){const{data:s,error:r}=await this._challenge({factorId:t.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:t.factorId,challengeId:s.id,code:t.code})}async _listFactors(){var t;const{data:{user:s},error:r}=await this.getUser();if(r)return{data:null,error:r};const l={all:[],phone:[],totp:[],webauthn:[]};for(const u of(t=s==null?void 0:s.factors)!==null&&t!==void 0?t:[])l.all.push(u),u.status==="verified"&&l[u.factor_type].push(u);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(t){var s,r,l,u;if(t)try{const{payload:C}=tl(t);let E=null;C.aal&&(E=C.aal);let M=E;const{data:{user:q},error:y}=await this.getUser(t);if(y)return this._returnResult({data:null,error:y});((r=(s=q==null?void 0:q.factors)===null||s===void 0?void 0:s.filter(G=>G.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(M="aal2");const O=C.amr||[];return{data:{currentLevel:E,nextLevel:M,currentAuthenticationMethods:O},error:null}}catch(C){if(le(C))return this._returnResult({data:null,error:C});throw C}const{data:{session:c},error:p}=await this.getSession();if(p)return this._returnResult({data:null,error:p});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=tl(c.access_token);let f=null;h.aal&&(f=h.aal);let g=f;((u=(l=c.user.factors)===null||l===void 0?void 0:l.filter(C=>C.status==="verified"))!==null&&u!==void 0?u:[]).length>0&&(g="aal2");const T=h.amr||[];return{data:{currentLevel:f,nextLevel:g,currentAuthenticationMethods:T},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;return l?this._returnResult({data:null,error:l}):r?await he(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:r.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Yn})})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async _approveAuthorization(t,s){try{return await this._useSession(async r=>{const{data:{session:l},error:u}=r;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new Yn});const c=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return c.data&&c.data.redirect_url&&En()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(t,s){try{return await this._useSession(async r=>{const{data:{session:l},error:u}=r;if(u)return this._returnResult({data:null,error:u});if(!l)return this._returnResult({data:null,error:new Yn});const c=await he(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return c.data&&c.data.redirect_url&&En()&&!(s!=null&&s.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:s},error:r}=t;return r?this._returnResult({data:null,error:r}):s?await he(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:s.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Yn})})}catch(t){if(le(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async s=>{const{data:{session:r},error:l}=s;return l?this._returnResult({data:null,error:l}):r?(await he(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:t.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Yn})})}catch(s){if(le(s))return this._returnResult({data:null,error:s});throw s}}async fetchJwk(t,s={keys:[]}){let r=s.keys.find(p=>p.kid===t);if(r)return r;const l=Date.now();if(r=this.jwks.keys.find(p=>p.kid===t),r&&this.jwks_cached_at+_2>l)return r;const{data:u,error:c}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=l,r=u.keys.find(p=>p.kid===t),!r)?null:r}async getClaims(t,s={}){try{let r=t;if(!r){const{data:C,error:E}=await this.getSession();if(E||!C.session)return this._returnResult({data:null,error:E});r=C.session.access_token}const{header:l,payload:u,signature:c,raw:{header:p,payload:h}}=tl(r);s!=null&&s.allowExpired||U2(u.exp);const f=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,s!=null&&s.keys?{keys:s.keys}:s==null?void 0:s.jwks);if(!f){const{error:C}=await this.getUser(r);if(C)throw C;return{data:{claims:u,header:l,signature:c},error:null}}const g=z2(l.alg),v=await crypto.subtle.importKey("jwk",f,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,c,R2(`${p}.${h}`)))throw new Vd("Invalid JWT signature");return{data:{claims:u,header:l,signature:c},error:null}}catch(r){if(le(r))return this._returnResult({data:null,error:r});throw r}}}Tr.nextInstanceID={};const CR=Tr,TR="2.95.3";let or="";typeof Deno<"u"?or="deno":typeof document<"u"?or="web":typeof navigator<"u"&&navigator.product==="ReactNative"?or="react-native":or="node";const AR={"X-Client-Info":`supabase-js-${or}/${TR}`},ER={headers:AR},SR={schema:"public"},MR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bR={};function Ar(n){"@babel/helpers - typeof";return Ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar(n)}function yR(n,t){if(Ar(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var r=s.call(n,t);if(Ar(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function RR(n){var t=yR(n,"string");return Ar(t)=="symbol"?t:t+""}function OR(n,t,s){return(t=RR(t))in n?Object.defineProperty(n,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[t]=s,n}function Av(n,t){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(n,l).enumerable})),s.push.apply(s,r)}return s}function nn(n){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Av(Object(s),!0).forEach(function(r){OR(n,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):Av(Object(s)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(s,r))})}return n}const DR=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),qR=()=>Headers,NR=(n,t,s)=>{const r=DR(s),l=qR();return async(u,c)=>{var p;const h=(p=await t())!==null&&p!==void 0?p:n;let f=new l(c==null?void 0:c.headers);return f.has("apikey")||f.set("apikey",n),f.has("Authorization")||f.set("Authorization",`Bearer ${h}`),r(u,nn(nn({},c),{},{headers:f}))}};function VR(n){return n.endsWith("/")?n:n+"/"}function IR(n,t){var s,r;const{db:l,auth:u,realtime:c,global:p}=n,{db:h,auth:f,realtime:g,global:v}=t,T={db:nn(nn({},h),l),auth:nn(nn({},f),u),realtime:nn(nn({},g),c),storage:{},global:nn(nn(nn({},v),p),{},{headers:nn(nn({},(s=v==null?void 0:v.headers)!==null&&s!==void 0?s:{}),(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return n.accessToken?T.accessToken=n.accessToken:delete T.accessToken,T}function PR(n){const t=n==null?void 0:n.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(VR(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var xR=class extends CR{constructor(n){super(n)}},LR=class{constructor(n,t,s){var r,l;this.supabaseUrl=n,this.supabaseKey=t;const u=PR(n);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,p={db:SR,realtime:bR,auth:nn(nn({},MR),{},{storageKey:c}),global:ER},h=IR(s??{},p);if(this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(l=h.global.headers)!==null&&l!==void 0?l:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(g,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var f;this.auth=this._initSupabaseAuthClient((f=h.auth)!==null&&f!==void 0?f:{},this.headers,h.global.fetch)}this.fetch=NR(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(nn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(g=>this.realtime.setAuth(g)).catch(g=>console.warn("Failed to set initial Realtime auth token:",g)),this.rest=new Ty(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch,timeout:h.db.timeout,urlLengthLimit:h.db.urlLengthLimit}),this.storage=new m2(this.storageUrl.href,this.headers,this.fetch,s==null?void 0:s.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new py(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,t={},s={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,t,s)}channel(n,t={config:{}}){return this.realtime.channel(n,t)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,t,s;if(n.accessToken)return await n.accessToken();const{data:r}=await n.auth.getSession();return(t=(s=r.session)===null||s===void 0?void 0:s.access_token)!==null&&t!==void 0?t:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:l,storageKey:u,flowType:c,lock:p,debug:h,throwOnError:f},g,v){const T={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new xR({url:this.authUrl.href,headers:nn(nn({},T),g),storageKey:u,autoRefreshToken:n,persistSession:t,detectSessionInUrl:s,storage:r,userStorage:l,flowType:c,lock:p,debug:h,throwOnError:f,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new wy(this.realtimeUrl.href,nn(nn({},n),{},{params:nn(nn({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(n,t,s){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==s?(this.changedAccessToken=s,this.realtime.setAuth(s)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const wR=(n,t,s)=>new LR(n,t,s);function jR(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const t=n.version;if(t==null)return!1;const s=t.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}jR()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const kR="https://mbxeqrvofrmhqlwlefff.supabase.co",UR="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1ieGVxcnZvZnJtaHFsd2xlZmZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzA2NDAwMDUsImV4cCI6MjA4NjIxNjAwNX0.GhV05FiBjI66m6MPsx8HFEuId9POyZaYxDSSU68jCcI",rr=wR(kR,UR),Tl=ly(),Yi={};Tl.forEach(n=>{Yi[n.vulnerability]||(Yi[n.vulnerability]=[]),Yi[n.vulnerability].push(n)});const Si={V1:{label:"Social & Relationnel",icon:"",color:"#6C5CE7"},V2:{label:"Administrative",icon:"",color:"#fdcb6e"},V3:{label:"Sant de l'Aidant",icon:"",color:"#e17055"},V4:{label:"Fragilit du Proche",icon:"",color:"#00b894"},V5:{label:"Parcours Mdical",icon:"",color:"#74b9ff"}},ep={R1:"",R2:"",R3:"",R4:"",A1:"",A2:"",A3:"",A4:"",S1:"",S2:"",S3:"",S4:"",F1:"",F2:"",F3:"",F4:"",F5:"",F6:"",M1:"",M2:"",M3:"",M4:"",M5:"",M6:""};function zR({message:n,visible:t}){return t?V.jsxs("div",{className:"toast",children:[" ",n]}):null}function Ev({mpId:n,sectionId:t,itemId:s,label:r,annotation:l,onSave:u}){const[c,p]=Dn.useState(!1),[h,f]=Dn.useState(!1),[g,v]=Dn.useState((l==null?void 0:l.comment)||""),T=(l==null?void 0:l.status)||"pending",C=T==="validated"||T==="rejected";Dn.useEffect(()=>{v((l==null?void 0:l.comment)||"")},[l==null?void 0:l.comment]);const E=q=>{if(q==="rejected"&&!h){f(!0);return}u({mp_id:n,section_id:t,item_id:s,status:q,comment:g||void 0,reviewer:"dr_monka"}),p(!1),f(!1)},M=()=>{u({mp_id:n,section_id:t,item_id:s,status:T==="pending"?"comment":T,comment:g,reviewer:"dr_monka"}),f(!1)};return C&&!c?V.jsxs("div",{className:`decision-widget ${T}`,children:[V.jsxs("div",{className:"decision-header",children:[V.jsx("span",{className:"decision-label",children:r}),V.jsxs("div",{className:"decision-actions",children:[V.jsx("span",{className:`decision-resolved-badge ${T}`,children:T==="validated"?" Valid":" Rejet"}),V.jsx("button",{className:"decision-btn edit-btn",onClick:()=>p(!0),title:"Modifier la dcision",children:""})]})]}),(l==null?void 0:l.comment)&&V.jsxs("div",{className:"saved-comment",children:[" ",l.comment,V.jsx("button",{className:"edit-comment-btn",onClick:()=>{p(!0),f(!0)},title:"Modifier le commentaire",children:""})]})]}):V.jsxs("div",{className:`decision-widget ${T}`,children:[V.jsxs("div",{className:"decision-header",children:[V.jsx("span",{className:"decision-label",children:r}),V.jsxs("div",{className:"decision-actions",children:[V.jsx("button",{className:`decision-btn validate ${T==="validated"?"active":""}`,onClick:()=>E("validated"),title:"Valider",children:" Valider"}),V.jsx("button",{className:`decision-btn reject ${T==="rejected"?"active":""}`,onClick:()=>E("rejected"),title:"Rejeter",children:" Rejeter"}),c&&V.jsx("button",{className:"decision-btn reset-btn",onClick:()=>{u({mp_id:n,section_id:t,item_id:s,status:"pending",comment:g||void 0,reviewer:"dr_monka"}),p(!1)},title:"Remettre  valider",children:"  valider"}),V.jsx("button",{className:"decision-btn comment-btn",onClick:()=>f(!h),title:"Commenter",children:""}),c&&V.jsx("button",{className:"decision-btn cancel-btn",onClick:()=>p(!1),title:"Annuler",children:""})]})]}),(h||c&&(l==null?void 0:l.comment))&&V.jsxs("div",{className:"decision-comment",children:[V.jsx("textarea",{value:g,onChange:q=>v(q.target.value),placeholder:"Ajoutez votre commentaire ici..."}),V.jsx("div",{className:"decision-comment-actions",children:V.jsx("button",{className:"decision-save-btn",onClick:M,children:"Enregistrer le commentaire"})})]})]})}function FR({section:n,mpId:t,annotations:s,onSave:r,defaultOpen:l}){const[u,c]=Dn.useState(l||!1),p=s.filter(I=>I.section_id===n.id),h=n.content.match(/\*\*Dcision Dr\. Monka\*\*/g),f=h&&h.length>0,g=n.content.match(/\|\s*\s*\|/g),v=g&&g.length>0,T=f||v,C=p.filter(I=>{var O;return(O=I.item_id)==null?void 0:O.startsWith(n.id)}),E=C.length>0&&C.every(I=>I.status==="validated"||I.status==="rejected"),M=C.some(I=>I.status==="rejected");let q="badge-pending",y=" valider";return E&&!M?(q="badge-done",y=" Valid"):E&&M?(q="badge-rejected",y=" Rejet"):C.length>0&&(q="badge-progress",y="En cours"),V.jsxs("div",{className:"section-block",children:[V.jsxs("div",{className:"section-header",onClick:()=>c(!u),children:[V.jsxs("div",{className:"section-header-left",children:[V.jsx("span",{className:`section-chevron ${u?"open":""}`,children:""}),V.jsx("span",{className:"section-title",children:n.title})]}),V.jsx("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:T&&V.jsx("span",{className:`section-badge ${q}`,children:y})})]}),u&&V.jsxs("div",{className:"section-body",children:[V.jsx("div",{className:"md-content",children:V.jsx(MS,{remarkPlugins:[wb],children:n.content})}),T&&V.jsxs(V.Fragment,{children:[V.jsx("hr",{style:{border:"none",borderTop:"1px solid var(--border)",margin:"1.5rem 0"}}),V.jsx("h4",{style:{color:"var(--primary-light)",marginBottom:"0.75rem",fontSize:"0.9rem"},children:" Points de dcision  Dr. Monka"}),f&&V.jsx(Ev,{mpId:t,sectionId:n.id,itemId:`${n.id}_global`,label:`Validation globale de la section "${n.title}"`,annotation:p.find(I=>I.item_id===`${n.id}_global`),onSave:r}),v&&V.jsx(Ev,{mpId:t,sectionId:n.id,itemId:`${n.id}_wording`,label:"Validation du wording (IDEC + Utilisateur)",annotation:p.find(I=>I.item_id===`${n.id}_wording`),onSave:r})]})]})]})}function GR({mp:n,annotations:t,onSave:s}){const r=t.filter(f=>f.mp_id===n.id),l=r.filter(f=>f.status==="rejected").length,u=r.length,c=r.filter(f=>f.status==="validated").length,p=u>0?c/u*100:0,h=Si[n.vulnerability]||Si.V1;return V.jsxs("div",{children:[V.jsxs("div",{className:"mp-header",children:[V.jsxs("h1",{children:[V.jsx("span",{children:n.title}),"  ",n.subtitle]}),V.jsxs("p",{className:"mp-header-sub",children:[n.vulnerability,"  ",h.label]}),V.jsxs("div",{className:"mp-stats",children:[V.jsxs("div",{className:"mp-stat",children:[V.jsx("span",{className:"mp-stat-value",children:n.questions}),V.jsx("span",{className:"mp-stat-label",children:"questions"})]}),V.jsxs("div",{className:"mp-stat",children:[V.jsx("span",{className:"mp-stat-value",children:n.categories}),V.jsx("span",{className:"mp-stat-label",children:"catgories"})]}),V.jsxs("div",{className:"mp-stat",children:[V.jsx("span",{className:"mp-stat-value",children:n.rules}),V.jsx("span",{className:"mp-stat-label",children:"rgles"})]}),V.jsxs("div",{className:"mp-stat",children:[V.jsx("span",{className:"mp-stat-value",children:n.microTasks}),V.jsx("span",{className:"mp-stat-label",children:"micro-tches"})]})]})]}),u>0&&V.jsxs("div",{className:"progress-bar-container",children:[V.jsxs("div",{className:"progress-bar-header",children:[V.jsx("span",{className:"progress-bar-label",children:"Progression de la validation"}),V.jsxs("span",{className:"progress-bar-count",children:[c,"/",u," valids"]})]}),V.jsx("div",{className:"progress-bar-track",children:V.jsx("div",{className:"progress-bar-fill",style:{width:`${p}%`}})}),V.jsxs("div",{className:"progress-stats",children:[V.jsxs("div",{className:"progress-stat",children:[V.jsx("div",{className:"progress-dot validated"}),c," valids"]}),V.jsxs("div",{className:"progress-stat",children:[V.jsx("div",{className:"progress-dot rejected"}),l," rejets"]}),V.jsxs("div",{className:"progress-stat",children:[V.jsx("div",{className:"progress-dot pending"}),u-c-l," en attente"]})]})]}),n.sections.map((f,g)=>V.jsx(FR,{section:f,mpId:n.id,annotations:r,onSave:s,defaultOpen:g===0},f.id))]})}function HR({todos:n,onToggle:t,annotations:s}){const r=[...new Set(n.map(l=>l.vulnerability))].sort();return V.jsxs("div",{children:[V.jsxs("div",{className:"mp-header",children:[V.jsxs("h1",{children:[V.jsx("span",{children:" faire"}),"  Checklist de validation"]}),V.jsx("p",{className:"mp-header-sub",children:"Cochez chaque section une fois relue. Antonin suit votre avance en temps rel."})]}),n.length>0&&V.jsxs("div",{className:"progress-bar-container",children:[V.jsxs("div",{className:"progress-bar-header",children:[V.jsx("span",{className:"progress-bar-label",children:"Progression globale"}),V.jsxs("span",{className:"progress-bar-count",children:[n.filter(l=>l.checked).length,"/",n.length," cochs"]})]}),V.jsx("div",{className:"progress-bar-track",children:V.jsx("div",{className:"progress-bar-fill",style:{width:`${n.filter(l=>l.checked).length/n.length*100}%`}})})]}),r.map(l=>{const u=n.filter(f=>f.vulnerability===l),c=Si[l]||Si.V1,p=[...new Set(u.map(f=>f.mp_id))].sort(),h=u.filter(f=>f.checked).length;return V.jsxs("div",{className:"todo-vuln-group",children:[V.jsxs("div",{className:"todo-vuln-header",children:[V.jsxs("div",{className:"todo-vuln-title",children:[V.jsx("span",{className:"todo-vuln-icon",children:c.icon}),V.jsxs("span",{children:[l,"  ",c.label]})]}),V.jsxs("span",{className:`section-badge ${h===u.length?"badge-done":"badge-progress"}`,children:[h,"/",u.length]})]}),p.map(f=>{const g=u.filter(E=>E.mp_id===f),v=s.filter(E=>E.mp_id===f),T=g.filter(E=>E.checked).length,C=Tl.find(E=>E.id===f);return V.jsxs("div",{className:"todo-mp-group",children:[V.jsxs("div",{className:"todo-mp-header",children:[V.jsx("span",{className:"todo-mp-icon",children:ep[f]||""}),V.jsx("span",{className:"todo-mp-title",children:f}),V.jsx("span",{className:"todo-mp-subtitle",children:(C==null?void 0:C.subtitle)||""}),V.jsxs("span",{className:`sidebar-item-badge ${T===g.length?"badge-done":T>0?"badge-progress":"badge-pending"}`,children:[T,"/",g.length]})]}),V.jsx("div",{className:"todo-items",children:g.map(E=>{const M=v.filter(I=>{var O,G;return((O=I.section_id)==null?void 0:O.includes(E.section_id))||((G=I.item_id)==null?void 0:G.includes(E.section_id))}),q=M.some(I=>I.status==="validated"),y=M.some(I=>I.status==="rejected");return V.jsxs("label",{className:`todo-item ${E.checked?"checked":""}`,children:[V.jsx("input",{type:"checkbox",checked:E.checked,onChange:I=>t(E.id,I.target.checked)}),V.jsx("span",{className:"todo-checkbox-custom"}),V.jsx("span",{className:"todo-label",children:E.label}),q&&V.jsx("span",{className:"todo-annotation-dot validated",title:"Dcision valide",children:""}),y&&V.jsx("span",{className:"todo-annotation-dot rejected",title:"Dcision rejete",children:""}),E.checked&&E.checked_at&&V.jsx("span",{className:"todo-timestamp",children:new Date(E.checked_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]},E.id)})})]},f)})]},l)})]})}function BR({annotations:n,todos:t}){const s=Object.keys(Si).filter(f=>Yi[f]&&Yi[f].length>0),r=t.length,l=t.filter(f=>f.checked).length,u=n.length,c=n.filter(f=>f.status==="validated").length,p=n.filter(f=>f.status==="rejected").length,h=[...n].sort((f,g)=>new Date(g.updated_at||"").getTime()-new Date(f.updated_at||"").getTime()).slice(0,15);return V.jsxs("div",{children:[V.jsxs("div",{className:"mp-header",children:[V.jsxs("h1",{children:[V.jsx("span",{children:"Dashboard"}),"  Vue consolide"]}),V.jsx("p",{className:"mp-header-sub",children:"Suivi en temps rel des retours de Dr. Monka"})]}),V.jsxs("div",{className:"dashboard-global-stats",children:[V.jsxs("div",{className:"dashboard-global-stat",children:[V.jsx("div",{className:"dgs-value",children:l}),V.jsx("div",{className:"dgs-label",children:"Sections relues"}),V.jsxs("div",{className:"dgs-sub",children:["sur ",r]})]}),V.jsxs("div",{className:"dashboard-global-stat",children:[V.jsx("div",{className:"dgs-value",style:{color:"var(--green)"},children:c}),V.jsx("div",{className:"dgs-label",children:"Dcisions valides"}),V.jsxs("div",{className:"dgs-sub",children:["sur ",u," annotations"]})]}),V.jsxs("div",{className:"dashboard-global-stat",children:[V.jsx("div",{className:"dgs-value",style:{color:"var(--red)"},children:p}),V.jsx("div",{className:"dgs-label",children:"Points rejets"}),V.jsx("div",{className:"dgs-sub",children:" corriger"})]}),V.jsxs("div",{className:"dashboard-global-stat",children:[V.jsx("div",{className:"dgs-value",style:{color:"var(--yellow)"},children:r-l}),V.jsx("div",{className:"dgs-label",children:"Sections restantes"}),V.jsx("div",{className:"dgs-sub",children:" relire"})]})]}),V.jsx("h3",{style:{margin:"1.5rem 0 1rem",fontSize:"1rem"},children:"Avance par vulnrabilit"}),s.map(f=>{const g=Si[f],v=Yi[f]||[],T=t.filter(M=>M.vulnerability===f),C=T.filter(M=>M.checked).length,E=n.filter(M=>v.some(q=>q.id===M.mp_id));return E.filter(M=>M.status==="validated").length,E.filter(M=>M.status==="rejected").length,V.jsxs("div",{className:"dashboard-vuln-card",children:[V.jsxs("div",{className:"dvc-header",children:[V.jsx("span",{className:"dvc-icon",children:g.icon}),V.jsxs("div",{className:"dvc-info",children:[V.jsxs("div",{className:"dvc-title",children:[f,"  ",g.label]}),V.jsx("div",{className:"dvc-progress-track",children:V.jsx("div",{className:"dvc-progress-fill",style:{width:`${T.length>0?C/T.length*100:0}%`,background:g.color}})})]}),V.jsxs("span",{className:`section-badge ${C===T.length&&T.length>0?"badge-done":"badge-progress"}`,children:[C,"/",T.length]})]}),V.jsx("div",{className:"dvc-mps",children:v.map(M=>{const q=T.filter(J=>J.mp_id===M.id),y=q.filter(J=>J.checked).length,I=E.filter(J=>J.mp_id===M.id),O=I.filter(J=>J.status==="validated").length,G=I.filter(J=>J.status==="rejected").length;return V.jsxs("div",{className:"dvc-mp-row",children:[V.jsx("span",{className:"dvc-mp-icon",children:ep[M.id]||""}),V.jsx("span",{className:"dvc-mp-name",children:M.id}),V.jsx("span",{className:"dvc-mp-subtitle",children:M.subtitle.slice(0,30)}),V.jsxs("div",{className:"dvc-mp-badges",children:[V.jsxs("span",{className:"dvc-mp-badge todo",children:[y,"/",q.length," relu"]}),O>0&&V.jsxs("span",{className:"dvc-mp-badge ok",children:[" ",O]}),G>0&&V.jsxs("span",{className:"dvc-mp-badge ko",children:[" ",G]})]})]},M.id)})})]},f)}),V.jsx("h3",{style:{margin:"1.5rem 0 1rem",fontSize:"1rem"},children:"Annotations rcentes"}),h.length===0?V.jsxs("div",{className:"empty-state",children:[V.jsx("div",{className:"empty-state-icon",children:""}),V.jsx("p",{children:"Aucune annotation pour le moment"})]}):V.jsx("div",{className:"annotations-list",children:h.map(f=>V.jsxs("div",{className:"annotation-row",children:[V.jsx("span",{className:"status-icon",children:f.status==="validated"?"":f.status==="rejected"?"":""}),V.jsx("span",{className:"mp-label",children:f.mp_id}),V.jsx("span",{className:"section-label",children:f.section_id.replace(/_/g," ").replace(/section \d+/,g=>{var C;const v=parseInt(g.split(" ")[1]),T=(C=Tl.find(E=>E.id===f.mp_id))==null?void 0:C.sections[v];return T?T.title.slice(0,40):g})}),f.comment&&V.jsx("span",{className:"comment-preview",children:f.comment})]},f.id))})]})}function QR(){const[n]=Dn.useState(!0),[t,s]=Dn.useState("R1"),[r,l]=Dn.useState("review"),[u,c]=Dn.useState([]),[p,h]=Dn.useState([]),[f,g]=Dn.useState({V1:!0,V2:!0,V3:!0}),[v,T]=Dn.useState({message:"",visible:!1}),C=Dn.useCallback(async()=>{const[O,G]=await Promise.all([rr.from("mp_annotations").select("*").order("updated_at",{ascending:!1}),rr.from("mp_todos").select("*").order("created_at",{ascending:!0})]);O.data&&c(O.data),G.data&&h(G.data)},[]);Dn.useEffect(()=>{C()},[C]);const E=async O=>{const G=u.find(J=>J.mp_id===O.mp_id&&J.section_id===O.section_id&&J.item_id===O.item_id);if(G){const{error:J}=await rr.from("mp_annotations").update({status:O.status,comment:O.comment,updated_at:new Date().toISOString()}).eq("id",G.id);J||(c(x=>x.map($=>$.id===G.id?{...$,status:O.status,comment:O.comment,updated_at:new Date().toISOString()}:$)),q("Annotation enregistre"))}else{const{data:J,error:x}=await rr.from("mp_annotations").insert(O).select().single();J&&!x&&(c($=>[J,...$]),q("Annotation cre"))}},M=async(O,G)=>{const J=new Date().toISOString(),{error:x}=await rr.from("mp_todos").update({checked:G,checked_at:G?J:null,checked_by:G?"dr_monka":null}).eq("id",O);x||(h($=>$.map(ae=>ae.id===O?{...ae,checked:G,checked_at:G?J:void 0,checked_by:G?"dr_monka":void 0}:ae)),q(G?"Section coche ":"Section dcoche"))},q=O=>{T({message:O,visible:!0}),setTimeout(()=>T({message:"",visible:!1}),2500)},y=Tl.find(O=>O.id===t),I=p.filter(O=>O.checked).length;return V.jsxs("div",{className:"app-layout",children:[V.jsxs("div",{className:"sidebar",children:[V.jsx("div",{className:"sidebar-logo",children:" Monka Validation"}),V.jsx("div",{className:"sidebar-subtitle",children:"Navigation"}),V.jsx("div",{className:`sidebar-nav-link ${r==="dashboard"?"active":""}`,onClick:()=>l("dashboard"),children:" Dashboard"}),V.jsxs("div",{className:`sidebar-nav-link ${r==="todo"?"active":""}`,onClick:()=>l("todo"),children:["  faire",p.length>0&&V.jsxs("span",{className:`sidebar-todo-badge ${I===p.length?"done":""}`,children:[I,"/",p.length]})]}),Object.entries(Yi).map(([O,G])=>{const J=Si[O]||Si.V1,x=f[O]??!1,$=p.filter(j=>G.some(ee=>ee.id===j.mp_id)),ae=$.filter(j=>j.checked).length,ue=$.length;return V.jsxs("div",{className:"sidebar-vuln-group",children:[V.jsxs("div",{className:"sidebar-vuln-header",onClick:()=>g(j=>({...j,[O]:!j[O]})),children:[V.jsxs("div",{className:"sidebar-vuln-left",children:[V.jsx("span",{className:`sidebar-vuln-chevron ${x?"expanded":""}`,children:""}),V.jsx("span",{children:J.icon}),V.jsx("span",{className:"sidebar-vuln-id",children:O}),V.jsx("span",{className:"sidebar-vuln-name",children:J.label})]}),ue>0&&V.jsxs("span",{className:`sidebar-item-badge ${ae===ue?"badge-done":"badge-progress"}`,children:[ae,"/",ue]})]}),x&&V.jsx("div",{className:"sidebar-vuln-items",children:G.map(j=>{const ee=p.filter(ie=>ie.mp_id===j.id),ne=ee.filter(ie=>ie.checked).length,Te=ee.length;return V.jsxs("div",{className:`sidebar-item ${r==="review"&&t===j.id?"active":""}`,onClick:()=>{s(j.id),l("review")},children:[V.jsx("span",{className:"sidebar-item-icon",children:ep[j.id]||""}),V.jsxs("div",{className:"sidebar-item-info",children:[V.jsx("div",{className:"sidebar-item-title",children:j.id}),V.jsx("div",{className:"sidebar-item-sub",children:j.subtitle})]}),Te>0&&V.jsxs("span",{className:`sidebar-item-badge ${ne===Te?"badge-done":"badge-progress"}`,children:[ne,"/",Te]})]},j.id)})})]},O)})]}),V.jsx("div",{className:"main-content",children:r==="dashboard"?V.jsx(BR,{annotations:u,todos:p}):r==="todo"?V.jsx(HR,{todos:p,onToggle:M,annotations:u}):y?V.jsx(GR,{mp:y,annotations:u,onSave:E}):null}),V.jsx(zR,{message:v.message,visible:v.visible})]})}m0.createRoot(document.getElementById("root")).render(V.jsx(Dn.StrictMode,{children:V.jsx(QR,{})}));
